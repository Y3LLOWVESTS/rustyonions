<!-- Generated by scripts/make_crate_codex.sh on 2025-12-21T00:05:50Z -->
# Code Bundle — `svc-admin`

> Generated for review/sharing. Source of truth remains the repo.
> Skips `docs/` and all `*.md`; includes common code/config extensions.

## Table of Contents
- [crates/svc-admin/Cargo.toml](#crates-svc-admin-Cargo-toml)
- [crates/svc-admin/build.rs](#crates-svc-admin-build-rs)
- [crates/svc-admin/scripts/build-ui.sh](#crates-svc-admin-scripts-build-ui-sh)
- [crates/svc-admin/scripts/dev-ui.sh](#crates-svc-admin-scripts-dev-ui-sh)
- [crates/svc-admin/scripts/lint-ui.sh](#crates-svc-admin-scripts-lint-ui-sh)
- [crates/svc-admin/scripts/sync-ui-assets.sh](#crates-svc-admin-scripts-sync-ui-assets-sh)
- [crates/svc-admin/src/auth/ingress.rs](#crates-svc-admin-src-auth-ingress-rs)
- [crates/svc-admin/src/auth/mod.rs](#crates-svc-admin-src-auth-mod-rs)
- [crates/svc-admin/src/auth/none.rs](#crates-svc-admin-src-auth-none-rs)
- [crates/svc-admin/src/auth/passport.rs](#crates-svc-admin-src-auth-passport-rs)
- [crates/svc-admin/src/bin/svc-admin.rs](#crates-svc-admin-src-bin-svc-admin-rs)
- [crates/svc-admin/src/cli.rs](#crates-svc-admin-src-cli-rs)
- [crates/svc-admin/src/config/actions.rs](#crates-svc-admin-src-config-actions-rs)
- [crates/svc-admin/src/config/auth.rs](#crates-svc-admin-src-config-auth-rs)
- [crates/svc-admin/src/config/loader.rs](#crates-svc-admin-src-config-loader-rs)
- [crates/svc-admin/src/config/log.rs](#crates-svc-admin-src-config-log-rs)
- [crates/svc-admin/src/config/mod.rs](#crates-svc-admin-src-config-mod-rs)
- [crates/svc-admin/src/config/nodes.rs](#crates-svc-admin-src-config-nodes-rs)
- [crates/svc-admin/src/config/polling.rs](#crates-svc-admin-src-config-polling-rs)
- [crates/svc-admin/src/config/server.rs](#crates-svc-admin-src-config-server-rs)
- [crates/svc-admin/src/config/ui.rs](#crates-svc-admin-src-config-ui-rs)
- [crates/svc-admin/src/dto/me.rs](#crates-svc-admin-src-dto-me-rs)
- [crates/svc-admin/src/dto/metrics.rs](#crates-svc-admin-src-dto-metrics-rs)
- [crates/svc-admin/src/dto/mod.rs](#crates-svc-admin-src-dto-mod-rs)
- [crates/svc-admin/src/dto/node.rs](#crates-svc-admin-src-dto-node-rs)
- [crates/svc-admin/src/dto/storage.rs](#crates-svc-admin-src-dto-storage-rs)
- [crates/svc-admin/src/dto/system.rs](#crates-svc-admin-src-dto-system-rs)
- [crates/svc-admin/src/dto/ui.rs](#crates-svc-admin-src-dto-ui-rs)
- [crates/svc-admin/src/error.rs](#crates-svc-admin-src-error-rs)
- [crates/svc-admin/src/interop.rs](#crates-svc-admin-src-interop-rs)
- [crates/svc-admin/src/lib.rs](#crates-svc-admin-src-lib-rs)
- [crates/svc-admin/src/metrics/actions.rs](#crates-svc-admin-src-metrics-actions-rs)
- [crates/svc-admin/src/metrics/facet.rs](#crates-svc-admin-src-metrics-facet-rs)
- [crates/svc-admin/src/metrics/mod.rs](#crates-svc-admin-src-metrics-mod-rs)
- [crates/svc-admin/src/metrics/prometheus_bridge.rs](#crates-svc-admin-src-metrics-prometheusbridge-rs)
- [crates/svc-admin/src/metrics/sampler.rs](#crates-svc-admin-src-metrics-sampler-rs)
- [crates/svc-admin/src/nodes/client.rs](#crates-svc-admin-src-nodes-client-rs)
- [crates/svc-admin/src/nodes/mod.rs](#crates-svc-admin-src-nodes-mod-rs)
- [crates/svc-admin/src/nodes/registry.rs](#crates-svc-admin-src-nodes-registry-rs)
- [crates/svc-admin/src/nodes/status.rs](#crates-svc-admin-src-nodes-status-rs)
- [crates/svc-admin/src/observability.rs](#crates-svc-admin-src-observability-rs)
- [crates/svc-admin/src/router.rs](#crates-svc-admin-src-router-rs)
- [crates/svc-admin/src/server.rs](#crates-svc-admin-src-server-rs)
- [crates/svc-admin/src/state.rs](#crates-svc-admin-src-state-rs)
- [crates/svc-admin/tests/auth_me_http.rs](#crates-svc-admin-tests-authmehttp-rs)
- [crates/svc-admin/tests/config_env.rs](#crates-svc-admin-tests-configenv-rs)
- [crates/svc-admin/tests/fake_node.rs](#crates-svc-admin-tests-fakenode-rs)
- [crates/svc-admin/tests/http_smoke.rs](#crates-svc-admin-tests-httpsmoke-rs)
- [crates/svc-admin/ui/dist/assets/index-ByM1dBcT.css](#crates-svc-admin-ui-dist-assets-index-ByM1dBcT-css)
- [crates/svc-admin/ui/dist/assets/index-D-C-b-5N.js](#crates-svc-admin-ui-dist-assets-index-D-C-b-5N-js)
- [crates/svc-admin/ui/dist/index.html](#crates-svc-admin-ui-dist-index-html)
- [crates/svc-admin/ui/dist/locales/en-US.json](#crates-svc-admin-ui-dist-locales-en-US-json)
- [crates/svc-admin/ui/dist/locales/es-ES.json](#crates-svc-admin-ui-dist-locales-es-ES-json)
- [crates/svc-admin/ui/index.html](#crates-svc-admin-ui-index-html)
- [crates/svc-admin/ui/package-lock.json](#crates-svc-admin-ui-package-lock-json)
- [crates/svc-admin/ui/package.json](#crates-svc-admin-ui-package-json)
- [crates/svc-admin/ui/public/locales/en-US.json](#crates-svc-admin-ui-public-locales-en-US-json)
- [crates/svc-admin/ui/public/locales/es-ES.json](#crates-svc-admin-ui-public-locales-es-ES-json)
- [crates/svc-admin/ui/src/App.tsx](#crates-svc-admin-ui-src-App-tsx)
- [crates/svc-admin/ui/src/api/adminClient.ts](#crates-svc-admin-ui-src-api-adminClient-ts)
- [crates/svc-admin/ui/src/api/ronCorePlaygroundClient.ts](#crates-svc-admin-ui-src-api-ronCorePlaygroundClient-ts)
- [crates/svc-admin/ui/src/components/common/LoadingSpinner.tsx](#crates-svc-admin-ui-src-components-common-LoadingSpinner-tsx)
- [crates/svc-admin/ui/src/components/dev/RequestInspectorDrawer.tsx](#crates-svc-admin-ui-src-components-dev-RequestInspectorDrawer-tsx)
- [crates/svc-admin/ui/src/components/layout/LanguageSwitcher.tsx](#crates-svc-admin-ui-src-components-layout-LanguageSwitcher-tsx)
- [crates/svc-admin/ui/src/components/layout/Shell.tsx](#crates-svc-admin-ui-src-components-layout-Shell-tsx)
- [crates/svc-admin/ui/src/components/layout/Sidebar.tsx](#crates-svc-admin-ui-src-components-layout-Sidebar-tsx)
- [crates/svc-admin/ui/src/components/layout/ThemeToggle.tsx](#crates-svc-admin-ui-src-components-layout-ThemeToggle-tsx)
- [crates/svc-admin/ui/src/components/layout/TopBar.tsx](#crates-svc-admin-ui-src-components-layout-TopBar-tsx)
- [crates/svc-admin/ui/src/components/metrics/FacetMetricsPanel.tsx](#crates-svc-admin-ui-src-components-metrics-FacetMetricsPanel-tsx)
- [crates/svc-admin/ui/src/components/metrics/MetricChart.tsx](#crates-svc-admin-ui-src-components-metrics-MetricChart-tsx)
- [crates/svc-admin/ui/src/components/nodes/NodeCard.tsx](#crates-svc-admin-ui-src-components-nodes-NodeCard-tsx)
- [crates/svc-admin/ui/src/components/nodes/NodeDetailSidebar.tsx](#crates-svc-admin-ui-src-components-nodes-NodeDetailSidebar-tsx)
- [crates/svc-admin/ui/src/components/nodes/NodePreviewPanel.tsx](#crates-svc-admin-ui-src-components-nodes-NodePreviewPanel-tsx)
- [crates/svc-admin/ui/src/components/nodes/NodeStatusBadge.tsx](#crates-svc-admin-ui-src-components-nodes-NodeStatusBadge-tsx)
- [crates/svc-admin/ui/src/components/nodes/PlaneStatusTable.tsx](#crates-svc-admin-ui-src-components-nodes-PlaneStatusTable-tsx)
- [crates/svc-admin/ui/src/components/shared/EmptyState.tsx](#crates-svc-admin-ui-src-components-shared-EmptyState-tsx)
- [crates/svc-admin/ui/src/components/shared/ErrorBanner.tsx](#crates-svc-admin-ui-src-components-shared-ErrorBanner-tsx)
- [crates/svc-admin/ui/src/components/shared/LoadingSpinner.tsx](#crates-svc-admin-ui-src-components-shared-LoadingSpinner-tsx)
- [crates/svc-admin/ui/src/i18n/index.ts](#crates-svc-admin-ui-src-i18n-index-ts)
- [crates/svc-admin/ui/src/i18n/useI18n.ts](#crates-svc-admin-ui-src-i18n-useI18n-ts)
- [crates/svc-admin/ui/src/main.tsx](#crates-svc-admin-ui-src-main-tsx)
- [crates/svc-admin/ui/src/routes/LoginPage.tsx](#crates-svc-admin-ui-src-routes-LoginPage-tsx)
- [crates/svc-admin/ui/src/routes/NodeDatabaseDetailPage.tsx](#crates-svc-admin-ui-src-routes-NodeDatabaseDetailPage-tsx)
- [crates/svc-admin/ui/src/routes/NodeDetailPage.tsx](#crates-svc-admin-ui-src-routes-NodeDetailPage-tsx)
- [crates/svc-admin/ui/src/routes/NodeListPage.tsx](#crates-svc-admin-ui-src-routes-NodeListPage-tsx)
- [crates/svc-admin/ui/src/routes/NodeStoragePage.tsx](#crates-svc-admin-ui-src-routes-NodeStoragePage-tsx)
- [crates/svc-admin/ui/src/routes/NotFoundPage.tsx](#crates-svc-admin-ui-src-routes-NotFoundPage-tsx)
- [crates/svc-admin/ui/src/routes/PlaygroundPage.tsx](#crates-svc-admin-ui-src-routes-PlaygroundPage-tsx)
- [crates/svc-admin/ui/src/routes/SettingsPage.tsx](#crates-svc-admin-ui-src-routes-SettingsPage-tsx)
- [crates/svc-admin/ui/src/routes/index.tsx](#crates-svc-admin-ui-src-routes-index-tsx)
- [crates/svc-admin/ui/src/routes/node-detail/health.ts](#crates-svc-admin-ui-src-routes-node-detail-health-ts)
- [crates/svc-admin/ui/src/routes/node-detail/metricsHealth.tsx](#crates-svc-admin-ui-src-routes-node-detail-metricsHealth-tsx)
- [crates/svc-admin/ui/src/routes/node-detail/planeSummary.tsx](#crates-svc-admin-ui-src-routes-node-detail-planeSummary-tsx)
- [crates/svc-admin/ui/src/routes/node-detail/serviceMap.ts](#crates-svc-admin-ui-src-routes-node-detail-serviceMap-ts)
- [crates/svc-admin/ui/src/routes/node-detail/useNodeDetail.ts](#crates-svc-admin-ui-src-routes-node-detail-useNodeDetail-ts)
- [crates/svc-admin/ui/src/routes/node-detail/utilization.tsx](#crates-svc-admin-ui-src-routes-node-detail-utilization-tsx)
- [crates/svc-admin/ui/src/routes/node-list/helpers.ts](#crates-svc-admin-ui-src-routes-node-list-helpers-ts)
- [crates/svc-admin/ui/src/routes/node-list/useNodeListData.ts](#crates-svc-admin-ui-src-routes-node-list-useNodeListData-ts)
- [crates/svc-admin/ui/src/routes/node-storage/format.ts](#crates-svc-admin-ui-src-routes-node-storage-format-ts)
- [crates/svc-admin/ui/src/routes/node-storage/helpers.ts](#crates-svc-admin-ui-src-routes-node-storage-helpers-ts)
- [crates/svc-admin/ui/src/routes/node-storage/mock.ts](#crates-svc-admin-ui-src-routes-node-storage-mock-ts)
- [crates/svc-admin/ui/src/routes/node-storage/ringGauge.tsx](#crates-svc-admin-ui-src-routes-node-storage-ringGauge-tsx)
- [crates/svc-admin/ui/src/routes/node-storage/useNodeStorage.ts](#crates-svc-admin-ui-src-routes-node-storage-useNodeStorage-ts)
- [crates/svc-admin/ui/src/styles.css](#crates-svc-admin-ui-src-styles-css)
- [crates/svc-admin/ui/src/templates/CustomTemplateRegistry.tsx](#crates-svc-admin-ui-src-templates-CustomTemplateRegistry-tsx)
- [crates/svc-admin/ui/src/templates/FacetMetricsTemplate.tsx](#crates-svc-admin-ui-src-templates-FacetMetricsTemplate-tsx)
- [crates/svc-admin/ui/src/templates/NodeOverviewTemplate.tsx](#crates-svc-admin-ui-src-templates-NodeOverviewTemplate-tsx)
- [crates/svc-admin/ui/src/templates/index.ts](#crates-svc-admin-ui-src-templates-index-ts)
- [crates/svc-admin/ui/src/theme/ThemeProvider.tsx](#crates-svc-admin-ui-src-theme-ThemeProvider-tsx)
- [crates/svc-admin/ui/src/theme/themes.ts](#crates-svc-admin-ui-src-theme-themes-ts)
- [crates/svc-admin/ui/src/theme/tokens.ts](#crates-svc-admin-ui-src-theme-tokens-ts)
- [crates/svc-admin/ui/src/types/admin-api.ts](#crates-svc-admin-ui-src-types-admin-api-ts)
- [crates/svc-admin/ui/tsconfig.json](#crates-svc-admin-ui-tsconfig-json)
- [crates/svc-admin/ui/vite.config.ts](#crates-svc-admin-ui-vite-config-ts)

### crates/svc-admin/Cargo.toml
<a id="crates-svc-admin-Cargo-toml"></a>

```toml
[package]
name = "svc-admin"
version = "0.1.0"
edition = "2021"
description = "Admin-plane HTTP + SPA service for RON-CORE nodes"
license = "MIT OR Apache-2.0"
publish = false

[package.metadata]
# See docs/IDB.md and docs/GOVERNANCE.MD for invariants and governance.

[lib]
name = "svc_admin"
path = "src/lib.rs"

[[bin]]
name = "svc-admin"
path = "src/bin/svc-admin.rs"

[features]
# Core deps (axum/tokio/serde) are always on; features toggle optional behavior.
default = []
tls = ["tokio-rustls"]        # TLS for serving HTTPS directly
otel = []                     # Optional OpenTelemetry exporters
passport = []                 # Optional passport/JWT validation mode

[dependencies]
anyhow = "1"
thiserror = "2"
serde = { version = "1", features = ["derive"] }
serde_json = "1"

# TOML parsing (serde support is built-in; DO NOT enable a non-existent "serde" feature)
toml = "0.8"

# Tokio + friends (include `signal` for ctrl_c handling)
tokio = { version = "1", features = ["rt-multi-thread", "macros", "time", "signal"] }

# HTTP stack (rustls-only; no native-tls)
axum = { version = "0.7", default-features = false, features = ["tokio", "http1", "http2", "json"] }
tower = "0.5"
tower-http = { version = "0.6", features = ["trace", "cors"] }
reqwest = { version = "0.12", default-features = false, features = ["json", "rustls-tls-native-roots"] }

prometheus = "0.14"
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["fmt", "env-filter"] }
tokio-rustls = { version = "0.26", optional = true }
url = "2"

[dev-dependencies]
tokio = { version = "1", features = ["rt-multi-thread", "macros", "time", "signal"] }
serde_json = "1"
reqwest = { version = "0.12", default-features = false, features = ["json", "rustls-tls-native-roots"] }

```

### crates/svc-admin/build.rs
<a id="crates-svc-admin-build-rs"></a>

```rust
#![allow(clippy::all)]

fn main() {
    // In the future, this build script can:
    // - Run the UI build (ui/ -> ui/dist)
    // - Embed static assets into the binary (e.g., via include_dir or rust-embed)
    // For now, it is a no-op scaffold.
}

```

### crates/svc-admin/scripts/build-ui.sh
<a id="crates-svc-admin-scripts-build-ui-sh"></a>

```bash
#!/usr/bin/env bash
set -euo pipefail

# Build the svc-admin UI and copy artifacts into static/ (or for embedding).

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
crate_dir="$(cd "${script_dir}/.." && pwd)"

cd "${crate_dir}/ui"
npm install
npm run build

mkdir -p "${crate_dir}/static"
cp -R dist/* "${crate_dir}/static/"

```

### crates/svc-admin/scripts/dev-ui.sh
<a id="crates-svc-admin-scripts-dev-ui-sh"></a>

```bash
#!/usr/bin/env bash
set -euo pipefail

# Start the UI dev server.

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
crate_dir="$(cd "${script_dir}/.." && pwd)"

cd "${crate_dir}/ui"
npm install
npm run dev

```

### crates/svc-admin/scripts/lint-ui.sh
<a id="crates-svc-admin-scripts-lint-ui-sh"></a>

```bash
#!/usr/bin/env bash
set -euo pipefail

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
crate_dir="$(cd "${script_dir}/.." && pwd)"

cd "${crate_dir}/ui"
npm install
npm run lint

```

### crates/svc-admin/scripts/sync-ui-assets.sh
<a id="crates-svc-admin-scripts-sync-ui-assets-sh"></a>

```bash
#!/usr/bin/env bash
set -euo pipefail

# Convenience wrapper: build the UI and sync assets.

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
crate_dir="$(cd "${script_dir}/.." && pwd)"

"${crate_dir}/scripts/build-ui.sh"

```

### crates/svc-admin/src/auth/ingress.rs
<a id="crates-svc-admin-src-auth-ingress-rs"></a>

```rust
// crates/svc-admin/src/auth/ingress.rs
//
// WHAT: "ingress" auth backend.
// WHY:  Trust an upstream reverse proxy / ingress controller to perform auth
//       and inject identity via headers.
//
// Default header contract (v1):
//   - X-User   → operator subject (e.g. email or username)
//   - X-Groups → comma-separated roles (e.g. "admin,ops")

use axum::http::HeaderMap;

use super::{AuthError, Identity};

const HDR_USER: &str = "x-user";
const HDR_GROUPS: &str = "x-groups";

/// Resolve an `Identity` from ingress-provided headers.
///
/// Behavior:
///   - Missing X-User   ⇒ "anonymous" subject.
///   - Missing X-Groups ⇒ empty roles.
///   - Malformed UTF-8  ⇒ AuthError::Invalid.
///
/// We don't treat missing headers as a hard failure yet; `/api/me` is
/// informational and the console is still read-only.
pub fn identity_from_headers(headers: &HeaderMap) -> Result<Identity, AuthError> {
    // Subject / display name
    let subject = match headers.get(HDR_USER) {
        Some(v) => v
            .to_str()
            .map_err(|_| AuthError::Invalid("X-User header is not valid UTF-8"))?
            .trim()
            .to_string(),
        None => "anonymous".to_string(),
    };

    let display_name = subject.clone();

    // Roles from X-Groups
    let roles = match headers.get(HDR_GROUPS) {
        Some(v) => {
            let raw = v
                .to_str()
                .map_err(|_| AuthError::Invalid("X-Groups header is not valid UTF-8"))?;
            raw.split(',')
                .map(|part| part.trim())
                .filter(|s| !s.is_empty())
                .map(|s| s.to_string())
                .collect()
        }
        None => Vec::new(),
    };

    Ok(Identity {
        subject,
        display_name,
        roles,
    })
}

#[cfg(test)]
mod tests {
    use super::*;
    use axum::http::HeaderMap;

    #[test]
    fn identity_from_headers_with_user_and_groups_parses_correctly() {
        let mut headers = HeaderMap::new();
        headers.insert("x-user", "stevan@example.com".parse().unwrap());
        headers.insert("x-groups", "admin, ops ,  ,dev".parse().unwrap());

        let id = identity_from_headers(&headers).expect("identity");
        assert_eq!(id.subject, "stevan@example.com");
        assert_eq!(id.display_name, "stevan@example.com");

        // Whitespace trimmed, empty entries filtered.
        assert_eq!(
            id.roles,
            vec!["admin".to_string(), "ops".to_string(), "dev".to_string()]
        );
    }

    #[test]
    fn identity_from_headers_missing_headers_falls_back_safely() {
        let headers = HeaderMap::new();

        let id = identity_from_headers(&headers).expect("identity");
        assert_eq!(id.subject, "anonymous");
        assert_eq!(id.display_name, "anonymous");
        assert!(id.roles.is_empty(), "roles should be empty with no X-Groups");
    }
}

```

### crates/svc-admin/src/auth/mod.rs
<a id="crates-svc-admin-src-auth-mod-rs"></a>

```rust
// crates/svc-admin/src/auth/mod.rs
//
// WHAT: Auth/identity plumbing for svc-admin.
// WHY:  Central place to resolve the "current operator" identity from the
//       configured auth mode + inbound request headers.
// INTERACTS:
//   - crate::config::AuthCfg
//   - crate::dto::me::MeResponse
//   - Axum handlers (currently only /api/me and node actions)
//
// Modes (v1):
//   - "none":    synthetic dev identity (safe for local dev only)
//   - "ingress": trust ingress-provided headers (X-User, X-Groups) for identity
//   - "passport": placeholder; not yet implemented, returns Unimplemented
//
// This module is intentionally small but gives us a single place to evolve
// towards:
//   - structured Identity type
//   - AuthError taxonomy
//   - re-usable identity lookups for future gated endpoints (reload, shutdown).

use axum::http::HeaderMap;

use crate::config::AuthCfg;

pub mod ingress;
pub mod none;
pub mod passport;

/// Minimal identity representation for svc-admin.
///
/// This is intentionally narrow: just enough to drive:
///   - `/api/me`
///   - role-based gating on mutating endpoints (reload, shutdown, ...).
#[derive(Debug, Clone)]
pub struct Identity {
    pub subject: String,
    pub display_name: String,
    pub roles: Vec<String>,
}

impl Identity {
    /// Synthetic dev identity used for:
    ///   - auth.mode = "none"
    ///   - any auth failure where we prefer to stay read-only but usable.
    pub fn dev_fallback() -> Self {
        Self {
            subject: "dev-operator".to_string(),
            display_name: "Dev Operator".to_string(),
            roles: vec!["admin".to_string()],
        }
    }
}

/// Coarse-grained auth errors.
///
/// For now this is only used internally; future work can map these into proper
/// HTTP responses (401/403) and metrics.
#[derive(Debug)]
pub enum AuthError {
    /// No usable identity could be derived (e.g. missing headers in a strict
    /// mode, invalid token, etc.).
    Unauthenticated(&'static str),
    /// Inputs were present but malformed (e.g. invalid UTF-8 in headers).
    Invalid(&'static str),
    /// Auth mode declared in config but not yet implemented.
    Unimplemented(&'static str),
}

/// Resolve an `Identity` from the configured auth mode + request headers.
///
/// Design constraints for v1:
///   - Always returns *some* identity on success paths.
///   - Never panics on header parsing issues; falls back to dev identity on
///     unexpected errors.
///   - Does NOT enforce 401/403 yet; `/api/me` is informational only.
///
/// Future evolution:
///   - Return `Result<Identity, AuthError>` all the way to handlers and map
///     to HTTP status.
///   - Emit `svc_admin_auth_failures_total` metrics per mode.
pub fn resolve_identity_from_headers(
    cfg: &AuthCfg,
    headers: &HeaderMap,
) -> Result<Identity, AuthError> {
    match cfg.mode.as_str() {
        "none" => Ok(none::identity()),
        "ingress" => ingress::identity_from_headers(headers),
        "passport" => passport::identity_from_headers(cfg, headers),
        // Config::load() already guards mode, but we fail soft here to keep
        // the console usable even if something drifts.
        _other => Ok(Identity::dev_fallback()),
    }
}

#[cfg(test)]
mod tests {
    use super::*;
    use crate::config::AuthCfg;
    use axum::http::HeaderMap;

    #[test]
    fn resolve_identity_none_uses_dev_backend() {
        // Default AuthCfg uses mode="none".
        let cfg = AuthCfg::default();
        let headers = HeaderMap::new();

        let id = resolve_identity_from_headers(&cfg, &headers).expect("identity");
        assert_eq!(id.subject, "dev-operator");
        assert_eq!(id.display_name, "Dev Operator");
        assert!(
            id.roles.contains(&"admin".to_string()),
            "dev identity should include admin role"
        );
    }

    #[test]
    fn resolve_identity_ingress_delegates_to_ingress_backend() {
        let mut cfg = AuthCfg::default();
        cfg.mode = "ingress".to_string();

        let mut headers = HeaderMap::new();
        headers.insert("x-user", "alice@example.com".parse().unwrap());
        headers.insert("x-groups", "admin,ops".parse().unwrap());

        let id = resolve_identity_from_headers(&cfg, &headers).expect("identity");
        assert_eq!(id.subject, "alice@example.com");
        assert_eq!(id.display_name, "alice@example.com");
        assert_eq!(
            id.roles,
            vec!["admin".to_string(), "ops".to_string()],
            "roles should be parsed from X-Groups"
        );
    }

    #[test]
    fn resolve_identity_passport_is_unimplemented() {
        let mut cfg = AuthCfg::default();
        cfg.mode = "passport".to_string();

        let headers = HeaderMap::new();

        let err = resolve_identity_from_headers(&cfg, &headers).unwrap_err();
        match err {
            AuthError::Unimplemented(msg) => {
                assert!(
                    msg.contains("passport"),
                    "expected passport mention in error message, got: {msg}"
                );
            }
            other => panic!("expected AuthError::Unimplemented, got: {other:?}"),
        }
    }

    #[test]
    fn resolve_identity_unknown_mode_falls_back_to_dev() {
        let mut cfg = AuthCfg::default();
        cfg.mode = "weird-mode".to_string();

        let headers = HeaderMap::new();
        let id = resolve_identity_from_headers(&cfg, &headers).expect("identity");

        assert_eq!(id.subject, "dev-operator");
        assert!(id.roles.contains(&"admin".to_string()));
    }
}

```

### crates/svc-admin/src/auth/none.rs
<a id="crates-svc-admin-src-auth-none-rs"></a>

```rust
// crates/svc-admin/src/auth/none.rs
//
// WHAT: "none" auth backend.
// WHY:  Explicit dev-only mode that always returns a synthetic identity.

use super::Identity;

/// Return a synthetic dev identity for local development.
///
/// This is used whenever `auth.mode = "none"` and also as a generic
/// fallback identity in other modes when the console should stay usable
/// but clearly non-production.
pub fn identity() -> Identity {
    Identity::dev_fallback()
}

```

### crates/svc-admin/src/auth/passport.rs
<a id="crates-svc-admin-src-auth-passport-rs"></a>

```rust
// crates/svc-admin/src/auth/passport.rs
//
// WHAT: Placeholder for "passport" auth backend.
// WHY:  Reserve the shape for future JWT / passport-style auth integration.
//
// FUTURE DIRECTION:
//   - Accept Authorization: Bearer <jwt>.
//   - Validate JWT using JWKS from AuthCfg (issuer/audience/etc.).
//   - Map claims -> Identity (subject, display_name, roles).
//
// CURRENT BEHAVIOR (v0.1):
//   - Always returns `AuthError::Unimplemented`.
//   - Callers (router) decide how to degrade:
//
//       * `/api/me`    → metrics + log + dev_fallback()
//       * actions      → treated as 401 Unauthorized + rejection metrics.

use axum::http::HeaderMap;

use crate::config::AuthCfg;

use super::{AuthError, Identity};

/// Attempt to resolve identity from a future "passport" token.
///
/// Right now this is intentionally unimplemented; we just surface a clear
/// error so callers can meter/log it and choose their fallback behavior.
pub fn identity_from_headers(
    _cfg: &AuthCfg,
    _headers: &HeaderMap,
) -> Result<Identity, AuthError> {
    Err(AuthError::Unimplemented(
        "auth.mode=\"passport\" is not yet implemented",
    ))
}

```

### crates/svc-admin/src/bin/svc-admin.rs
<a id="crates-svc-admin-src-bin-svc-admin-rs"></a>

```rust
use svc_admin::{cli, server};

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let cfg = cli::parse_args()?;
    server::run(cfg).await?;
    Ok(())
}

```

### crates/svc-admin/src/cli.rs
<a id="crates-svc-admin-src-cli-rs"></a>

```rust
use crate::config::Config;
use anyhow::Result;

/// Parse CLI arguments and environment variables to produce a Config.
///
/// Dev-preview behavior:
/// - No real CLI flags yet; we simply delegate to `Config::load()`,
///   which reads env + defaults.
///
/// Future (per CONFIG.MD):
/// - Add `clap`-based parsing for:
///     * --config / -c (TOML path)
///     * --bind-addr / --metrics-addr overrides
///     * --auth-mode, etc.
/// - Precedence: CLI → env → file → defaults.
pub fn parse_args() -> Result<Config> {
    Ok(Config::load()?)
}

```

### crates/svc-admin/src/config/actions.rs
<a id="crates-svc-admin-src-config-actions-rs"></a>

```rust
// crates/svc-admin/src/config/actions.rs
//
// WHAT: Feature flags for admin actions (reload, shutdown, etc.).

use serde::{Deserialize, Serialize};

/// Admin actions flags.
///
/// In dev-preview we keep these off by default to avoid surprising behavior
/// (e.g. reloading or shutting down a node from the UI by accident).
#[derive(Debug, Clone, Serialize, Deserialize, Default)]
pub struct ActionsCfg {
    /// Whether "reload config" is exposed.
    #[serde(default)]
    pub enable_reload: bool,

    /// Whether "shutdown node" is exposed.
    #[serde(default)]
    pub enable_shutdown: bool,
}

```

### crates/svc-admin/src/config/auth.rs
<a id="crates-svc-admin-src-config-auth-rs"></a>

```rust
// crates/svc-admin/src/config/auth.rs
//
// WHAT: Auth configuration (none / ingress / passport) for svc-admin.

use serde::{Deserialize, Serialize};

/// Auth config.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AuthCfg {
    /// "none" | "ingress" | "passport"
    pub mode: String,

    /// Optional passport / JWT issuer.
    pub passport_issuer: Option<String>,

    /// Optional passport / JWT audience.
    pub passport_audience: Option<String>,

    /// Optional JWKS URL for passport / JWT validation.
    pub passport_jwks_url: Option<String>,
}

impl Default for AuthCfg {
    fn default() -> Self {
        Self {
            mode: "none".to_string(),
            passport_issuer: None,
            passport_audience: None,
            passport_jwks_url: None,
        }
    }
}

```

### crates/svc-admin/src/config/loader.rs
<a id="crates-svc-admin-src-config-loader-rs"></a>

```rust
// crates/svc-admin/src/config/loader.rs
//
// WHAT: Env-based configuration loading and validation for Config.
// WHY: Keeps parsing and invariants separate from the type definitions.

use crate::error::{Error, Result};
use std::{
    env,
    net::SocketAddr,
    path::PathBuf,
    time::Duration,
};

use super::Config;

impl Config {
    /// Load config from environment only (for now).
    ///
    /// File- and CLI-based config will be layered on in a later step.
    pub fn load() -> Result<Self> {
        if env::var_os("SVC_ADMIN_CONFIG").is_some() {
            // Guardrail until file loading is implemented.
            return Err(Error::Config(
                "SVC_ADMIN_CONFIG is not yet supported (file-based config TODO)"
                    .to_string(),
            ));
        }

        let mut cfg = Config::default();

        // --- Server / listener ---

        cfg.server.bind_addr =
            load_addr("SVC_ADMIN_BIND_ADDR", &cfg.server.bind_addr)?;
        cfg.server.metrics_addr =
            load_addr("SVC_ADMIN_METRICS_ADDR", &cfg.server.metrics_addr)?;

        cfg.server.max_conns =
            load_usize("SVC_ADMIN_MAX_CONNS", cfg.server.max_conns)?;

        cfg.server.read_timeout = load_duration(
            "SVC_ADMIN_READ_TIMEOUT",
            cfg.server.read_timeout,
        )?;
        cfg.server.write_timeout = load_duration(
            "SVC_ADMIN_WRITE_TIMEOUT",
            cfg.server.write_timeout,
        )?;
        cfg.server.idle_timeout = load_duration(
            "SVC_ADMIN_IDLE_TIMEOUT",
            cfg.server.idle_timeout,
        )?;

        cfg.server.tls.enabled =
            load_bool("SVC_ADMIN_TLS_ENABLED", cfg.server.tls.enabled)?;
        cfg.server.tls.cert_path =
            load_opt_path("SVC_ADMIN_TLS_CERT_PATH", cfg.server.tls.cert_path);
        cfg.server.tls.key_path =
            load_opt_path("SVC_ADMIN_TLS_KEY_PATH", cfg.server.tls.key_path);

        // --- Logging ---

        if let Ok(fmt) = env::var("SVC_ADMIN_LOG_FORMAT") {
            cfg.log.format = fmt;
        }
        if let Ok(level) = env::var("SVC_ADMIN_LOG_LEVEL") {
            cfg.log.level = level;
        }

        // --- Polling / metrics ---

        cfg.polling.metrics_interval = load_duration(
            "SVC_ADMIN_POLLING_METRICS_INTERVAL",
            cfg.polling.metrics_interval,
        )?;
        cfg.polling.metrics_window = load_duration(
            "SVC_ADMIN_POLLING_METRICS_WINDOW",
            cfg.polling.metrics_window,
        )?;

        // --- UI defaults ---

        // Support both new and old names for themes/language to keep dev UX smooth.
        if let Ok(theme) = env::var("SVC_ADMIN_UI_THEME") {
            cfg.ui.default_theme = theme;
        } else if let Ok(theme) = env::var("SVC_ADMIN_UI_DEFAULT_THEME") {
            cfg.ui.default_theme = theme;
        }

        if let Ok(lang) = env::var("SVC_ADMIN_UI_LANGUAGE") {
            cfg.ui.default_language = lang;
        } else if let Ok(lang) = env::var("SVC_ADMIN_UI_DEFAULT_LANGUAGE") {
            cfg.ui.default_language = lang;
        }

        cfg.ui.read_only =
            load_bool("SVC_ADMIN_UI_READ_ONLY", cfg.ui.read_only)?;
        cfg.ui.dev.enable_app_playground = load_bool(
            "SVC_ADMIN_UI_DEV_ENABLE_APP_PLAYGROUND",
            cfg.ui.dev.enable_app_playground,
        )?;

        // --- Actions ---

        cfg.actions.enable_reload = load_bool(
            "SVC_ADMIN_ACTIONS_ENABLE_RELOAD",
            cfg.actions.enable_reload,
        )?;
        cfg.actions.enable_shutdown = load_bool(
            "SVC_ADMIN_ACTIONS_ENABLE_SHUTDOWN",
            cfg.actions.enable_shutdown,
        )?;

        // --- Auth ---

        cfg.auth.mode =
            load_auth_mode("SVC_ADMIN_AUTH_MODE", &cfg.auth.mode)?;

        if let Ok(issuer) = env::var("SVC_ADMIN_AUTH_PASSPORT_ISSUER") {
            cfg.auth.passport_issuer = Some(issuer);
        }
        if let Ok(aud) = env::var("SVC_ADMIN_AUTH_PASSPORT_AUDIENCE") {
            cfg.auth.passport_audience = Some(aud);
        }
        if let Ok(jwks) = env::var("SVC_ADMIN_AUTH_PASSPORT_JWKS_URL") {
            cfg.auth.passport_jwks_url = Some(jwks);
        }

        // --- Node seed overrides (dev convenience) ---

        if let Some(example) = cfg.nodes.get_mut("example-node") {
            if let Ok(url) = env::var("SVC_ADMIN_EXAMPLE_NODE_URL") {
                example.base_url = url;
            }
            if let Ok(env_tag) = env::var("SVC_ADMIN_EXAMPLE_NODE_ENV") {
                example.environment = env_tag;
            }
        }

        cfg.validate()?;
        Ok(cfg)
    }

    /// Basic invariants for Config v2.
    fn validate(&self) -> Result<()> {
        if self.server.max_conns == 0 {
            return Err(Error::Config(
                "server.max_conns must be > 0".to_string(),
            ));
        }

        if self.polling.metrics_interval == Duration::from_secs(0) {
            return Err(Error::Config(
                "polling.metrics_interval must be > 0s".to_string(),
            ));
        }

        if self.polling.metrics_window < self.polling.metrics_interval {
            return Err(Error::Config(
                "polling.metrics_window must be >= polling.metrics_interval"
                    .to_string(),
            ));
        }

        if self.server.tls.enabled
            && (self.server.tls.cert_path.is_none()
                || self.server.tls.key_path.is_none())
        {
            return Err(Error::Config(
                "TLS is enabled but cert_path/key_path are not both set"
                    .to_string(),
            ));
        }

        Ok(())
    }
}

// --- helpers ---------------------------------------------------------------

fn load_addr(key: &str, default: &str) -> Result<String> {
    match env::var(key) {
        Ok(raw) => {
            raw.parse::<SocketAddr>()
                .map_err(|e| {
                    Error::Config(format!(
                        "invalid socket addr for {}: {} ({e})",
                        key, raw
                    ))
                })
                .map(|_| raw)
        }
        Err(env::VarError::NotPresent) => Ok(default.to_string()),
        Err(e) => Err(Error::Config(format!(
            "failed to read {}: {e}",
            key
        ))),
    }
}

fn load_bool(key: &str, default: bool) -> Result<bool> {
    match env::var(key) {
        Ok(raw) => {
            let v = raw.to_ascii_lowercase();
            match v.as_str() {
                "1" | "true" | "yes" | "y" | "on" => Ok(true),
                "0" | "false" | "no" | "n" | "off" => Ok(false),
                _ => Err(Error::Config(format!(
                    "invalid boolean for {}: {}",
                    key, raw
                ))),
            }
        }
        Err(env::VarError::NotPresent) => Ok(default),
        Err(e) => Err(Error::Config(format!(
            "failed to read {}: {e}",
            key
        ))),
    }
}

fn load_usize(key: &str, default: usize) -> Result<usize> {
    match env::var(key) {
        Ok(raw) => raw.parse::<usize>().map_err(|e| {
            Error::Config(format!("invalid usize for {}: {} ({e})", key, raw))
        }),
        Err(env::VarError::NotPresent) => Ok(default),
        Err(e) => Err(Error::Config(format!(
            "failed to read {}: {e}",
            key
        ))),
    }
}

fn load_duration(key: &str, default: Duration) -> Result<Duration> {
    match env::var(key) {
        Ok(raw) => {
            // For now we interpret durations as integer seconds to
            // avoid extra deps. We can upgrade to full "5s"/"1m" parsing later.
            let secs: u64 = raw.parse().map_err(|e| {
                Error::Config(format!(
                    "invalid duration seconds for {}: {} ({e})",
                    key, raw
                ))
            })?;
            Ok(Duration::from_secs(secs))
        }
        Err(env::VarError::NotPresent) => Ok(default),
        Err(e) => Err(Error::Config(format!(
            "failed to read {}: {e}",
            key
        ))),
    }
}

fn load_opt_path(key: &str, default: Option<PathBuf>) -> Option<PathBuf> {
    match env::var_os(key) {
        Some(v) => Some(PathBuf::from(v)),
        None => default,
    }
}

fn load_auth_mode(key: &str, default: &str) -> Result<String> {
    let raw = match env::var(key) {
        Ok(v) => v,
        Err(env::VarError::NotPresent) => return Ok(default.to_string()),
        Err(e) => {
            return Err(Error::Config(format!(
                "failed to read {}: {e}",
                key
            )))
        }
    };

    let normalized = raw.to_ascii_lowercase();
    match normalized.as_str() {
        "none" | "ingress" | "passport" => Ok(normalized),
        _ => Err(Error::Config(format!(
            "invalid auth mode for {}: {}",
            key, raw
        ))),
    }
}

```

### crates/svc-admin/src/config/log.rs
<a id="crates-svc-admin-src-config-log-rs"></a>

```rust
// crates/svc-admin/src/config/log.rs
//
// WHAT: Logging configuration for svc-admin.

use serde::{Deserialize, Serialize};

/// Logging config (very simple for now).
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct LogCfg {
    /// "compact" | "pretty"
    pub format: String,

    /// log level (e.g. "info", "debug", "trace").
    pub level: String,
}

impl Default for LogCfg {
    fn default() -> Self {
        Self {
            format: "compact".to_string(),
            level: "info".to_string(),
        }
    }
}

```

### crates/svc-admin/src/config/mod.rs
<a id="crates-svc-admin-src-config-mod-rs"></a>

```rust
// crates/svc-admin/src/config/mod.rs
//
// WHAT: Top-level configuration module for svc-admin (Config v2).
// WHY: Keeps the public shape stable while splitting into smaller,
//      focused submodules (server, ui, auth, nodes, etc.).
// API: External code continues to use `crate::config::Config` and
//      related types; this file re-exports them.

use serde::{Deserialize, Serialize};

pub mod actions;
pub mod auth;
pub mod loader;
pub mod log;
pub mod nodes;
pub mod polling;
pub mod server;
pub mod ui;

pub use actions::ActionsCfg;
pub use auth::AuthCfg;
pub use log::LogCfg;
pub use nodes::{NodeCfg, NodesCfg};
pub use polling::PollingCfg;
pub use server::{ServerCfg, TlsCfg};
pub use ui::{UiCfg, UiDevCfg};

/// Top-level service config.
///
/// Shape is intentionally simple and env-driven for now. File- and
/// CLI-based config are future work.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Config {
    /// Server / listener config.
    pub server: ServerCfg,

    /// Auth mode and passport/JWT settings.
    pub auth: AuthCfg,

    /// UI defaults and dev flags.
    pub ui: UiCfg,

    /// Config-driven node registry.
    pub nodes: NodesCfg,

    /// Metrics / sampling config.
    pub polling: PollingCfg,

    /// Logging style.
    pub log: LogCfg,

    /// Admin actions feature flags.
    pub actions: ActionsCfg,
}

impl Default for Config {
    fn default() -> Self {
        Self {
            server: ServerCfg::default(),
            auth: AuthCfg::default(),
            ui: UiCfg::default(),
            nodes: nodes::default_nodes(),
            polling: PollingCfg::default(),
            log: LogCfg::default(),
            actions: ActionsCfg::default(),
        }
    }
}

```

### crates/svc-admin/src/config/nodes.rs
<a id="crates-svc-admin-src-config-nodes-rs"></a>

```rust
// crates/svc-admin/src/config/nodes.rs
//
// WHAT: Node registry configuration (NodeCfg + NodesCfg).
// WHY:  Keeps per-node settings isolated and reusable by NodeRegistry,
//       samplers, and UI DTOs.

use serde::{Deserialize, Serialize};
use std::{collections::BTreeMap, path::PathBuf, time::Duration};

/// Config for one node in the registry.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct NodeCfg {
    /// Base URL for the node's admin plane.
    pub base_url: String,

    /// Optional pretty display name.
    pub display_name: Option<String>,

    /// Environment tag ("dev", "staging", "prod").
    pub environment: String,

    /// Whether to allow insecure HTTP for this node (dev-only).
    pub insecure_http: bool,

    /// Optionally force a profile label like "macronode", "micronode".
    pub forced_profile: Option<String>,

    /// Optional macaroon path or similar credential.
    pub macaroon_path: Option<PathBuf>,

    /// Optional per-node default timeout override for scrapes.
    ///
    /// We mark this as `skip` so it is not loaded via serde; env-loading
    /// can still patch it in later if we add per-node timeout support.
    #[serde(skip)]
    pub default_timeout: Option<Duration>,
}

pub type NodesCfg = BTreeMap<String, NodeCfg>;

/// Seed node configuration used by Config::default().
///
/// For dev we assume one or more macronode admin planes on localhost.
/// svc-admin’s samplers derive `/metrics` from each node's `base_url`,
/// so these must match the macronode `RON_HTTP_ADDR` values you use in
/// your dev scripts.
pub(crate) fn default_nodes() -> NodesCfg {
    let mut nodes = BTreeMap::new();

    // Primary local macronode used by scripts/dev_svc_admin_stack.sh.
    nodes.insert(
        "example-node".to_string(),
        NodeCfg {
            base_url: "http://127.0.0.1:8080".to_string(),
            display_name: Some("Example Node".to_string()),
            environment: "dev".to_string(),
            insecure_http: true,
            forced_profile: Some("macronode".to_string()),
            macaroon_path: None,
            default_timeout: Some(Duration::from_secs(2)),
        },
    );

    // Additional sample nodes so the Nodes overview can exercise
    // multi-node UX (grid layout, metrics freshness, etc.). For now they
    // all point at the same dev macronode; in a real deployment you
    // would point each entry at a distinct node.
    nodes.insert(
        "node-b".to_string(),
        NodeCfg {
            base_url: "http://127.0.0.1:8080".to_string(),
            display_name: Some("Node B".to_string()),
            environment: "dev".to_string(),
            insecure_http: true,
            forced_profile: Some("macronode".to_string()),
            macaroon_path: None,
            default_timeout: Some(Duration::from_secs(2)),
        },
    );

    nodes.insert(
        "node-c".to_string(),
        NodeCfg {
            base_url: "http://127.0.0.1:8080".to_string(),
            display_name: Some("Node C".to_string()),
            environment: "dev".to_string(),
            insecure_http: true,
            forced_profile: Some("macronode".to_string()),
            macaroon_path: None,
            default_timeout: Some(Duration::from_secs(2)),
        },
    );

    nodes
}

```

### crates/svc-admin/src/config/polling.rs
<a id="crates-svc-admin-src-config-polling-rs"></a>

```rust
// crates/svc-admin/src/config/polling.rs
//
// WHAT: Global polling / sampling configuration for metrics.

use serde::{Deserialize, Serialize};
use std::time::Duration;

/// Global polling / sampling config for metrics.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct PollingCfg {
    /// Interval between node scrape passes.
    #[serde(skip)]
    pub metrics_interval: Duration,

    /// Rolling window used when summarizing facet metrics.
    #[serde(skip)]
    pub metrics_window: Duration,
}

impl Default for PollingCfg {
    fn default() -> Self {
        Self {
            metrics_interval: Duration::from_secs(5),
            metrics_window: Duration::from_secs(300),
        }
    }
}

```

### crates/svc-admin/src/config/server.rs
<a id="crates-svc-admin-src-config-server-rs"></a>

```rust
// crates/svc-admin/src/config/server.rs

use serde::{Deserialize, Serialize};
use std::path::PathBuf;
use std::time::Duration;

fn default_bind_addr() -> String {
    "127.0.0.1:5300".to_string()
}

fn default_metrics_addr() -> String {
    "127.0.0.1:5310".to_string()
}

fn default_max_conns() -> usize {
    1024
}

fn default_read_timeout() -> Duration {
    Duration::from_secs(10)
}

fn default_write_timeout() -> Duration {
    Duration::from_secs(10)
}

fn default_idle_timeout() -> Duration {
    Duration::from_secs(60)
}

fn default_tls_enabled() -> bool {
    false
}

fn default_cert_path() -> Option<PathBuf> {
    None
}

fn default_key_path() -> Option<PathBuf> {
    None
}

/// TLS settings for the svc-admin HTTP server.
///
/// For the dev-preview we typically run behind a reverse proxy or on localhost
/// over plain HTTP. TLS is wired but defaults to disabled.
#[derive(Debug, Clone, Serialize, Deserialize, Default)]
pub struct TlsCfg {
    /// Whether TLS is enabled for the UI/API port.
    #[serde(default = "default_tls_enabled")]
    pub enabled: bool,

    /// Path to the PEM-encoded certificate.
    #[serde(default = "default_cert_path")]
    pub cert_path: Option<PathBuf>,

    /// Path to the PEM-encoded private key.
    #[serde(default = "default_key_path")]
    pub key_path: Option<PathBuf>,
}

/// Top-level server configuration.
///
/// This mirrors the invariants described in the svc-admin IDB.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ServerCfg {
    /// Bind address for the UI/API listener.
    #[serde(default = "default_bind_addr")]
    pub bind_addr: String,

    /// Bind address for the health/metrics listener.
    #[serde(default = "default_metrics_addr")]
    pub metrics_addr: String,

    /// Maximum concurrent connections accepted by the server.
    #[serde(default = "default_max_conns")]
    pub max_conns: usize,

    /// Per-connection read timeout.
    #[serde(default = "default_read_timeout")]
    pub read_timeout: Duration,

    /// Per-connection write timeout.
    #[serde(default = "default_write_timeout")]
    pub write_timeout: Duration,

    /// Idle timeout before closing connections.
    #[serde(default = "default_idle_timeout")]
    pub idle_timeout: Duration,

    /// TLS settings for the UI/API port.
    #[serde(default)]
    pub tls: TlsCfg,
}

impl Default for ServerCfg {
    fn default() -> Self {
        Self {
            bind_addr: default_bind_addr(),
            metrics_addr: default_metrics_addr(),
            max_conns: default_max_conns(),
            read_timeout: default_read_timeout(),
            write_timeout: default_write_timeout(),
            idle_timeout: default_idle_timeout(),
            tls: TlsCfg::default(),
        }
    }
}

```

### crates/svc-admin/src/config/ui.rs
<a id="crates-svc-admin-src-config-ui-rs"></a>

```rust
// crates/svc-admin/src/config/ui.rs

use serde::{Deserialize, Serialize};

fn default_read_only() -> bool {
    true
}

fn default_ui_theme() -> String {
    // Default to dark so the SPA comes up in dark mode deterministically.
    // (The SPA currently only models concrete theme names, not "system".)
    "dark".to_string()
}

fn default_ui_language() -> String {
    "en-US".to_string()
}

/// Dev-only flags for the admin UI.
///
/// These are explicitly *not* intended for production usage; they gate
/// experimental features like the app playground.
#[derive(Debug, Clone, Serialize, Deserialize, Default)]
pub struct UiDevCfg {
    /// Whether to expose the app playground in the UI.
    #[serde(default)]
    pub enable_app_playground: bool,
}

/// Top-level UI configuration used to build `UiConfigDto`.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct UiCfg {
    /// Whether the UI should run in read-only mode (no mutating actions).
    #[serde(default = "default_read_only")]
    pub read_only: bool,

    /// Default theme for the UI (e.g. "system", "light", "dark").
    #[serde(default = "default_ui_theme")]
    pub default_theme: String,

    /// Default language/locale tag (e.g. "en-US").
    #[serde(default = "default_ui_language")]
    pub default_language: String,

    /// Dev-only flags.
    #[serde(default)]
    pub dev: UiDevCfg,
}

impl Default for UiCfg {
    fn default() -> Self {
        Self {
            read_only: default_read_only(),
            default_theme: default_ui_theme(),
            default_language: default_ui_language(),
            dev: UiDevCfg::default(),
        }
    }
}

```

### crates/svc-admin/src/dto/me.rs
<a id="crates-svc-admin-src-dto-me-rs"></a>

```rust
// crates/svc-admin/src/dto/me.rs
//
// WHAT: DTO for `/api/me`.
// WHY:  SPA uses this to understand who the current operator is and how the
//       console is authenticated (if at all).
//
// JSON shape (from ALL_DOCS):
//
// {
//   "subject": "stevan@example.com",
//   "displayName": "Stevan White",
//   "roles": ["admin"],
//   "authMode": "passport",
//   "loginUrl": null
// }
//
// In `auth.mode = "none"`, we return a synthetic dev identity. In `ingress`
// and future `passport` modes, this reflects the real identity.

use serde::{Deserialize, Serialize};

use crate::auth::Identity;
use crate::config::AuthCfg;

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct MeResponse {
    /// Stable subject identifier (e.g. email, username).
    pub subject: String,
    /// Human-readable display name for UI.
    pub display_name: String,
    /// Roles associated with this operator (e.g. ["admin", "ops"]).
    pub roles: Vec<String>,
    /// Auth mode currently in effect ("none", "ingress", "passport", ...).
    pub auth_mode: String,
    /// Optional login URL for interactive flows (primarily passport mode).
    #[serde(skip_serializing_if = "Option::is_none")]
    pub login_url: Option<String>,
}

impl MeResponse {
    /// Build a response from an `Identity` + auth config.
    ///
    /// For now, we don't surface a `loginUrl`; future passport integration may
    /// populate this when returning 401s.
    pub fn from_identity(identity: Identity, auth_cfg: &AuthCfg) -> Self {
        MeResponse {
            subject: identity.subject,
            display_name: identity.display_name,
            roles: identity.roles,
            auth_mode: auth_cfg.mode.clone(),
            login_url: None,
        }
    }

    /// Legacy dev-only helper used before auth modes existed.
    ///
    /// This is kept for tests or standalone usage, but `/api/me` now goes
    /// through `from_identity`.
    pub fn dev_default() -> Self {
        MeResponse {
            subject: "dev-operator".to_string(),
            display_name: "Dev Operator".to_string(),
            roles: vec!["admin".to_string()],
            auth_mode: "none".to_string(),
            login_url: None,
        }
    }
}

```

### crates/svc-admin/src/dto/metrics.rs
<a id="crates-svc-admin-src-dto-metrics-rs"></a>

```rust
// crates/svc-admin/src/dto/metrics.rs
//
// RO:WHAT — DTOs for facet metrics responses.
// RO:WHY  — Bridge between internal facet metrics store and JSON contracts
//           consumed by the svc-admin SPA.
// RO:INTERACTS — crate::metrics::facet::FacetMetrics, ui `FacetMetricsSummary`
// RO:INVARIANTS — Field names are snake_case → JSON keys as-is (no rename_all).

use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct FacetMetricsSummary {
    /// Facet name, e.g. "admin.status" or "gateway.app".
    pub facet: String,
    /// Approximate requests per second over the recent window.
    pub rps: f64,
    /// Approximate error rate (0.0–1.0) over the recent window.
    pub error_rate: f64,
    /// Approximate p95 latency in milliseconds (currently stubbed).
    pub p95_latency_ms: f64,
    /// Approximate p99 latency in milliseconds (currently stubbed).
    pub p99_latency_ms: f64,
    /// Seconds since the last successful sample for this facet, as seen
    /// by the svc-admin sampler. `None` means “no samples yet”.
    pub last_sample_age_secs: Option<f64>,
}

```

### crates/svc-admin/src/dto/mod.rs
<a id="crates-svc-admin-src-dto-mod-rs"></a>

```rust
// crates/svc-admin/src/dto/mod.rs

pub mod ui;
pub mod me;
pub mod node;
pub mod metrics;
pub mod storage;
pub mod system;

```

### crates/svc-admin/src/dto/node.rs
<a id="crates-svc-admin-src-dto-node-rs"></a>

```rust
// crates/svc-admin/src/dto/node.rs
//
// RO:WHAT — DTOs for node inventory and status views.
// RO:WHY  — Keep the JSON contract between svc-admin and the SPA explicit
//          and decoupled from internal config/reg structs.
// RO:INTERACTS — nodes::registry, router::nodes, router::node_status,
//                metrics::sampler (for facet metrics).

use serde::{Deserialize, Serialize};

/// Summary used on the main node list.
///
/// NOTE: Uses snake_case field names to align with the TypeScript DTO
/// in `ui/src/types/admin-api.ts`.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct NodeSummary {
    /// Registry key / stable identifier.
    pub id: String,
    /// Human-friendly name, configured per-node.
    pub display_name: String,
    /// Optional profile hint (e.g. "macronode" / "micronode").
    pub profile: Option<String>,
}

/// Detailed view used on the node detail page.
///
/// NOTE: Uses snake_case for `display_name` to match the SPA contract.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AdminStatusView {
    pub id: String,
    pub display_name: String,
    /// Optional profile hint, e.g. "macronode".
    pub profile: Option<String>,
    /// Version string reported by the node (e.g., "0.1.0").
    /// May be absent when we only have coarse health/ready probes.
    pub version: Option<String>,
    /// Per-plane status (gateway/storage/index/mailbox/overlay/dht).
    pub planes: Vec<PlaneStatus>,
}

/// Per-plane status used inside AdminStatusView.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct PlaneStatus {
    pub name: String,
    pub health: String,
    pub ready: bool,
    /// Restart count for this plane, as reported by the node.
    ///
    /// Invariants:
    /// - Non-negative counter.
    /// - Exposed as a simple integer so the UI can show it without graphing.
    pub restart_count: u64,
}

/// Result of a node-level control-plane action (reload/shutdown/etc.).
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct NodeActionResponse {
    /// Node id that the action targeted.
    pub node_id: String,
    /// Logical action name, e.g. "reload" or "shutdown" or "debug-crash".
    pub action: String,
    /// Whether the action was accepted by the node (best-effort).
    pub accepted: bool,
    /// Optional human-readable message for operators.
    pub message: Option<String>,
}

/// Capability flags for actions, exposed on the SPA side so we can show/hide
/// buttons per-node depending on config and node profile.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct NodeActionsCapabilities {
    pub can_reload: bool,
    pub can_shutdown: bool,
}

impl NodeActionsCapabilities {
    pub fn disabled() -> Self {
        Self {
            can_reload: false,
            can_shutdown: false,
        }
    }
}

```

### crates/svc-admin/src/dto/storage.rs
<a id="crates-svc-admin-src-dto-storage-rs"></a>

```rust
// crates/svc-admin/src/dto/storage.rs
//
// RO:WHAT — Curated storage/DB inventory DTOs for svc-admin.
// RO:WHY  — SPA expects stable, operator-friendly shapes regardless of node internals.
// RO:SOURCE — proxied from node admin-plane storage endpoints when available.
// RO:INVARIANTS —
//   - camelCase JSON for SPA.
//   - Sizes are bytes (u64).
//   - Optional enrichment fields are allowed (UI can ignore).

use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct FilePermissionDto {
    #[serde(skip_serializing_if = "Option::is_none")]
    pub mode: Option<String>, // e.g. "0755"

    #[serde(skip_serializing_if = "Option::is_none")]
    pub owner: Option<String>, // e.g. "ron" or "uid:501"

    #[serde(skip_serializing_if = "Option::is_none")]
    pub group: Option<String>, // e.g. "ron"

    #[serde(skip_serializing_if = "Option::is_none")]
    pub world_readable: Option<bool>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub world_writable: Option<bool>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct StorageBandwidthDto {
    #[serde(skip_serializing_if = "Option::is_none")]
    pub read_bytes_per_sec: Option<u64>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub write_bytes_per_sec: Option<u64>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub iops: Option<u64>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct StorageSummaryDto {
    // ---- SPA contract (v1) ----
    pub fs_type: String,
    pub mount: String,

    pub total_bytes: u64,
    pub used_bytes: u64,
    pub free_bytes: u64,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub io_read_bps: Option<u64>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub io_write_bps: Option<u64>,

    // ---- Optional enrichment (safe to add; UI can ignore) ----
    #[serde(skip_serializing_if = "Option::is_none")]
    pub node_id: Option<String>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub updated_at: Option<String>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub db_count: Option<u32>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub read_only: Option<bool>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub permission: Option<FilePermissionDto>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub bandwidth: Option<StorageBandwidthDto>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub notes: Option<Vec<String>>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct DatabaseEntryDto {
    // ---- SPA contract (v1) ----
    pub name: String,
    pub engine: String,
    pub size_bytes: u64,

    pub mode: String,
    pub owner: String,

    /// "ok" | "degraded" | "error"
    pub health: String,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub notes: Option<String>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub world_readable: Option<bool>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub world_writable: Option<bool>,

    // ---- Optional enrichment ----
    #[serde(skip_serializing_if = "Option::is_none")]
    pub updated_at: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct DatabaseDetailDto {
    // ---- SPA contract (v1) ----
    pub name: String,
    pub engine: String,
    pub size_bytes: u64,

    pub mode: String,
    pub owner: String,

    /// "ok" | "degraded" | "error"
    pub health: String,

    pub path_alias: String,

    pub file_count: u64,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub last_compaction: Option<String>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub approx_keys: Option<u64>,

    pub warnings: Vec<String>,

    // ---- Optional enrichment ----
    #[serde(skip_serializing_if = "Option::is_none")]
    pub updated_at: Option<String>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub permissions: Option<FilePermissionDto>,
}

```

### crates/svc-admin/src/dto/system.rs
<a id="crates-svc-admin-src-dto-system-rs"></a>

```rust
// crates/svc-admin/src/dto/system.rs
//
// RO:WHAT — System summary DTO (CPU/RAM + optional net rates) proxied from a node.
// RO:WHY  — SPA can render truthful utilization tiles without mocks/scraping.
// RO:INVARIANTS —
//   - camelCase JSON for SPA
//   - bytes are bytes (u64)
//   - optional rates may be None

use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct SystemSummaryDto {
    pub updated_at: String,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub cpu_percent: Option<f32>,

    pub ram_total_bytes: u64,
    pub ram_used_bytes: u64,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub net_rx_bps: Option<u64>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub net_tx_bps: Option<u64>,
}

```

### crates/svc-admin/src/dto/ui.rs
<a id="crates-svc-admin-src-dto-ui-rs"></a>

```rust
// crates/svc-admin/src/dto/ui.rs
//
// RO:WHAT — UI config DTOs exposed to the svc-admin SPA.
// RO:WHY — Provide a stable, documented JSON contract for theme, locale,
//          read-only mode, and dev-only toggles, driven by Config/UiCfg.
// RO:INTERACTS — config::UiCfg, server/router (ui_config handler),
//                crates/svc-admin/ui/src/api/adminClient.ts,
//                i18n/index.ts, theme/ThemeProvider.tsx.
// RO:INVARIANTS — JSON field names are camelCase and must stay in sync with
//                 ALL_DOCS / API.MD and the TypeScript UiConfigDto. Values
//                 are derived from Config and must reflect actual behavior
//                 (e.g., readOnly must match ui.read_only).

use serde::{Deserialize, Serialize};

use crate::config::Config;

/// UI config consumed by the SPA via `GET /api/ui-config`.
#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct UiConfigDto {
    /// Default theme ("light", "dark", "system", etc.).
    pub default_theme: String,

    /// Themes the operator can select in the UI.
    pub available_themes: Vec<String>,

    /// Default language / locale ("en-US", "es-ES", ...).
    pub default_language: String,

    /// Languages the operator can select in the UI.
    pub available_languages: Vec<String>,

    /// When true, the SPA should not render any mutating controls.
    pub read_only: bool,

    /// Dev-only configuration for the UI, safe to expose to the browser.
    pub dev: UiDevDto,
}

/// Dev-only UI config surfaced to the SPA.
#[derive(Debug, Clone, Serialize, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct UiDevDto {
    /// Whether the App Playground client should be available in the UI.
    pub enable_app_playground: bool,
}

impl UiConfigDto {
    pub fn from_cfg(cfg: &Config) -> Self {
        Self {
            default_theme: cfg.ui.default_theme.clone(),
            // For now this is a fixed set; later we can plumb this from config.
            available_themes: vec!["light".into(), "dark".into()],
            default_language: cfg.ui.default_language.clone(),
            // Likewise, a fixed set for the developer preview.
            available_languages: vec!["en-US".into(), "es-ES".into()],
            read_only: cfg.ui.read_only,
            dev: UiDevDto {
                enable_app_playground: cfg.ui.dev.enable_app_playground,
            },
        }
    }
}

```

### crates/svc-admin/src/error.rs
<a id="crates-svc-admin-src-error-rs"></a>

```rust
use thiserror::Error;

pub type Result<T> = std::result::Result<T, Error>;

#[derive(Debug, Error)]
pub enum Error {
    #[error("config error: {0}")]
    Config(String),

    #[error("io error: {0}")]
    Io(#[from] std::io::Error),

    #[error("http error: {0}")]
    Http(#[from] reqwest::Error),

    #[error("serde error: {0}")]
    Serde(#[from] serde_json::Error),

    #[error("auth error: {0}")]
    Auth(String),

    #[error("upstream node error: {0}")]
    Upstream(String),

    #[error("other: {0}")]
    Other(String),
}

```

### crates/svc-admin/src/interop.rs
<a id="crates-svc-admin-src-interop-rs"></a>

```rust
// crates/svc-admin/src/interop.rs
//
// Interop helper module for tests and SDK harnesses.
// See docs/INTEROP.MD for the invariants and supported flows.

pub struct InteropHarness;

impl Default for InteropHarness {
    fn default() -> Self {
        Self::new()
    }
}

impl InteropHarness {
    pub fn new() -> Self {
        Self
    }
}

```

### crates/svc-admin/src/lib.rs
<a id="crates-svc-admin-src-lib-rs"></a>

```rust
// crates/svc-admin/src/lib.rs

pub mod auth;
pub mod cli;
pub mod config;
pub mod dto;
pub mod error;
pub mod metrics;
pub mod nodes;
pub mod observability;
pub mod router;
pub mod server;
pub mod state;
pub mod interop;

pub use crate::config::Config;
pub use crate::error::Error;

```

### crates/svc-admin/src/metrics/actions.rs
<a id="crates-svc-admin-src-metrics-actions-rs"></a>

```rust
// crates/svc-admin/src/metrics/actions.rs
//
// WHAT: Prometheus counters for svc-admin governance / security events.
// WHY:  Make control-plane behavior observable: which actions are being
//       rejected, where auth is failing, and how often upstream nodes are
//       misbehaving.
// METRICS:
//   - ron_svc_admin_rejected_total{reason}
//       * Counts rejected control-plane actions (reload/shutdown/etc.).
//       * Example reasons: "disabled", "unauth", "forbidden", "node_not_found",
//         "upstream_error".
//   - ron_svc_admin_auth_failures_total{scope}
//       * Counts auth resolution failures, grouped by scope:
//         "ui"  → /api/me
//         "node"→ per-node actions.
//   - ron_svc_admin_upstream_errors_total{kind}
//       * Counts upstream I/O errors talking to nodes, grouped by kind:
//         "timeout", "connect", "status", "http", "parse", etc.

use std::sync::OnceLock;

use prometheus::{IntCounterVec, Opts};

fn rejected_total() -> &'static IntCounterVec {
    static REJECTED_TOTAL: OnceLock<IntCounterVec> = OnceLock::new();

    REJECTED_TOTAL.get_or_init(|| {
        let vec = IntCounterVec::new(
            Opts::new(
                "svc_admin_rejected_total",
                "Total number of rejected node actions in svc-admin.",
            )
            .namespace("ron"),
            &["reason"],
        )
        .expect("svc_admin_rejected_total counter must be constructible");

        prometheus::default_registry()
            .register(Box::new(vec.clone()))
            .expect("svc_admin_rejected_total must register successfully");

        vec
    })
}

fn auth_failures_total() -> &'static IntCounterVec {
    static AUTH_FAILURES_TOTAL: OnceLock<IntCounterVec> = OnceLock::new();

    AUTH_FAILURES_TOTAL.get_or_init(|| {
        let vec = IntCounterVec::new(
            Opts::new(
                "svc_admin_auth_failures_total",
                "Total number of auth resolution failures in svc-admin.",
            )
            .namespace("ron"),
            &["scope"],
        )
        .expect("svc_admin_auth_failures_total counter must be constructible");

        prometheus::default_registry()
            .register(Box::new(vec.clone()))
            .expect("svc_admin_auth_failures_total must register successfully");

        vec
    })
}

fn upstream_errors_total() -> &'static IntCounterVec {
    static UPSTREAM_ERRORS_TOTAL: OnceLock<IntCounterVec> = OnceLock::new();

    UPSTREAM_ERRORS_TOTAL.get_or_init(|| {
        let vec = IntCounterVec::new(
            Opts::new(
                "svc_admin_upstream_errors_total",
                "Total number of upstream node I/O errors observed by svc-admin.",
            )
            .namespace("ron"),
            &["kind"],
        )
        .expect("svc_admin_upstream_errors_total counter must be constructible");

        prometheus::default_registry()
            .register(Box::new(vec.clone()))
            .expect("svc_admin_upstream_errors_total must register successfully");

        vec
    })
}

/// Increment the rejected actions counter for a given reason.
///
/// Typical reasons:
///   - "disabled"        → action disabled in config
///   - "unauth"          → auth resolution failed
///   - "forbidden"       → caller lacks required role
///   - "node_not_found"  → unknown node id
///   - "upstream_error"  → upstream node rejected/failed the action
pub fn inc_rejection(reason: &str) {
    rejected_total().with_label_values(&[reason]).inc();
}

/// Increment the auth failures counter for a given scope.
///
/// Typical scopes:
///   - "ui"   → `/api/me`
///   - "node" → node-level actions
pub fn inc_auth_failure(scope: &str) {
    auth_failures_total().with_label_values(&[scope]).inc();
}

/// Increment the upstream errors counter for a given error kind.
///
/// Typical kinds:
///   - "timeout" → request timed out
///   - "connect" → TCP connect failed
///   - "status"  → non-2xx HTTP status from upstream
///   - "http"    → other HTTP/protocol error
///   - "parse"   → invalid/malformed metrics body
pub fn inc_upstream_error(kind: &str) {
    upstream_errors_total()
        .with_label_values(&[kind])
        .inc();
}

```

### crates/svc-admin/src/metrics/facet.rs
<a id="crates-svc-admin-src-metrics-facet-rs"></a>

```rust
// crates/svc-admin/src/metrics/facet.rs
//
// RO:WHAT — Short-horizon facet metrics store (per-node, per-facet rolling RPS/error view).
// RO:WHY  — Pillar 4 (Observability); Concerns PERF|RES — power an operator-facing dashboard without TSDB.
// RO:INTERACTS — crate::metrics::sampler, crate::dto::metrics::FacetMetricsSummary
// RO:INVARIANTS — in-memory only; bounded window; no .await inside locks; monotonically increasing counters only.
// RO:METRICS — does not emit metrics itself; aggregates node-exposed
//              `ron_facet_requests_total{facet=...,result=...}`.
// RO:CONFIG — window duration typically derived from `Config.polling.metrics_window`.
// RO:SECURITY — no secrets/PII; operates solely on already-scraped Prometheus text.

use std::collections::{HashMap, VecDeque};
use std::sync::{Arc, RwLock};
use std::time::{Duration, Instant};

use crate::dto::metrics::FacetMetricsSummary;

/// A point-in-time snapshot of counters for a single facet on a node.
///
/// Produced by the metrics sampler after parsing Prometheus text.
#[derive(Debug, Clone)]
pub struct FacetSnapshot {
    /// Logical facet name, e.g. `"gateway.app"`, `"overlay.connect"`.
    pub facet: String,
    /// Monotonic counter of total requests for this facet.
    pub requests_total: f64,
    /// Monotonic counter of *error* requests for this facet.
    pub errors_total: f64,
}

/// Internal key: `(node_id, facet_name)`.
#[derive(Debug, Clone, Hash, Eq, PartialEq)]
struct FacetKey {
    node_id: String,
    facet: String,
}

#[derive(Debug, Clone)]
struct FacetPoint {
    ts: Instant,
    requests_total: f64,
    errors_total: f64,
}

#[derive(Debug)]
struct Inner {
    window: Duration,
    series: HashMap<FacetKey, VecDeque<FacetPoint>>,
}

/// Short-horizon facet metrics store.
///
/// This is intentionally small and in-memory only. It exists to serve
/// `/api/nodes/{id}/metrics/facets` and similar read APIs for the
/// admin UI – not long-term historical queries.
#[derive(Clone, Debug)]
pub struct FacetMetrics {
    inner: Arc<RwLock<Inner>>,
}

impl FacetMetrics {
    /// Create a new facet metrics store with the given rolling `window`.
    ///
    /// Samples older than this window will be pruned on each update.
    pub fn new(window: Duration) -> Self {
        FacetMetrics {
            inner: Arc::new(RwLock::new(Inner {
                window,
                series: HashMap::new(),
            })),
        }
    }

    /// Return the configured rolling window.
    pub fn window(&self) -> Duration {
        let inner = self.inner.read().expect("facet metrics store poisoned");
        inner.window
    }

    /// Push a new scrape worth of facet snapshots for a single node.
    ///
    /// The sampler should call this after:
    ///
    /// 1. Fetching `/metrics` from the node.
    /// 2. Parsing it into one [`FacetSnapshot`] per facet.
    ///
    /// This method:
    /// - appends a new `FacetPoint` for each facet key
    /// - prunes samples older than the configured window
    pub fn update_from_scrape<I>(&self, node_id: &str, snapshots: I)
    where
        I: IntoIterator<Item = FacetSnapshot>,
    {
        let now = Instant::now();

        let mut inner = self.inner.write().expect("facet metrics store poisoned");
        let cutoff = now
            .checked_sub(inner.window)
            // In the extremely unlikely case that `window` is larger than
            // the `Instant` epoch, fall back to "now" to avoid panics.
            .unwrap_or(now);

        for snapshot in snapshots {
            let key = FacetKey {
                node_id: node_id.to_owned(),
                facet: snapshot.facet.clone(),
            };

            let entry = inner.series.entry(key).or_default();

            entry.push_back(FacetPoint {
                ts: now,
                requests_total: snapshot.requests_total,
                errors_total: snapshot.errors_total,
            });

            // Drop samples that have fallen out of the rolling window.
            while let Some(front) = entry.front() {
                if front.ts >= cutoff {
                    break;
                }
                entry.pop_front();
            }
        }

        // Clean out any series that ended up empty (all points pruned).
        inner.series.retain(|_, deque| !deque.is_empty());
    }

    /// Build facet-level summaries for a single node.
    ///
    /// We *prefer* to derive approximate RPS and error-rate per facet by
    /// looking at the oldest and newest points inside the rolling window
    /// and computing deltas over elapsed wall time.
    ///
    /// However, for operator ergonomics we **always** surface facets as
    /// soon as we have at least one sample for them:
    ///
    /// - If we have 2+ samples and a non-zero window, we compute true
    ///   rate-based stats.
    /// - If we only have a single sample (or zero delta), we show:
    ///     * `rps = 0.0`
    ///     * `error_rate` derived from the latest totals (or `0.0`).
    ///
    /// Latency fields are currently stubbed to `0.0` until we begin
    /// consuming facet latency metrics from nodes.
    ///
    /// NEW:
    /// - We also expose sampler health via `last_sample_age_secs`, which
    ///   is the age (in seconds) of the most recent sample for each facet.
    pub fn summaries_for_node(&self, node_id: &str) -> Vec<FacetMetricsSummary> {
        let now = Instant::now();
        let inner = self.inner.read().expect("facet metrics store poisoned");
        let mut out = Vec::new();

        for (key, deque) in inner.series.iter() {
            if key.node_id != node_id {
                continue;
            }

            let first = match deque.front() {
                Some(p) => p,
                None => continue,
            };
            let last = match deque.back() {
                Some(p) => p,
                None => continue,
            };

            let elapsed = last.ts.saturating_duration_since(first.ts);
            let window_secs = elapsed.as_secs_f64();

            // Default: static view derived from the most recent totals.
            let mut rps = 0.0;
            let mut error_rate = {
                let req = last.requests_total.max(0.0);
                let err = last.errors_total.clamp(0.0, req);
                if req > 0.0 {
                    (err / req).clamp(0.0, 1.0)
                } else {
                    0.0
                }
            };

            // If we have a real window (2+ points and non-zero duration),
            // upgrade to a rolling rate-based view.
            if deque.len() >= 2 && window_secs > 0.0 {
                let req_delta = (last.requests_total - first.requests_total).max(0.0);
                let err_delta = (last.errors_total - first.errors_total).max(0.0);

                if req_delta > 0.0 {
                    rps = req_delta / window_secs;
                    error_rate = (err_delta / req_delta).clamp(0.0, 1.0);
                } else {
                    // No traffic during the observed window – keep rps=0
                    // and fall back to the latest error_rate we computed
                    // above (typically 0.0).
                }
            }

            // Age of the most recent sample for this facet, as observed by
            // the sampler. This drives Metrics: Fresh/Stale UI.
            let last_sample_age_secs = now
                .checked_duration_since(last.ts)
                .map(|d| d.as_secs_f64());

            out.push(FacetMetricsSummary {
                facet: key.facet.clone(),
                rps,
                error_rate,
                // TODO: once we start ingesting facet latency metrics
                // (e.g., histograms), derive these properly.
                p95_latency_ms: 0.0,
                p99_latency_ms: 0.0,
                last_sample_age_secs,
            });
        }

        // Stable sort order for UI determinism.
        out.sort_by(|a, b| a.facet.cmp(&b.facet));

        out
    }
}

```

### crates/svc-admin/src/metrics/mod.rs
<a id="crates-svc-admin-src-metrics-mod-rs"></a>

```rust
// crates/svc-admin/src/metrics/mod.rs
//
// RO:WHAT — Metrics/observability modules for svc-admin.
// RO:WHY  — Group Prometheus integration and in-memory facet sampling behind
//          a small, well-namespaced surface.
// RO:INTERACTS — prometheus, router, server bootstrap, nodes::registry.
// RO:INVARIANTS —
//   - Submodules own their metric registration (OnceLock + default registry).
//   - No business logic lives here; only observability plumbing.

pub mod actions;
pub mod facet;
pub mod prometheus_bridge;
pub mod sampler;

```

### crates/svc-admin/src/metrics/prometheus_bridge.rs
<a id="crates-svc-admin-src-metrics-prometheusbridge-rs"></a>

```rust
// crates/svc-admin/src/metrics/prometheus_bridge.rs

//! Prometheus bridge for svc-admin.
//!
//! This module is intentionally small for now: we expose a `/metrics`
//! handler and register a couple of node inventory gauges. Later
//! slices will add per-facet metrics, fan-out stats, etc.

use crate::config::Config;
use axum::{
    http::{header, StatusCode},
    response::{IntoResponse, Response},
};
use prometheus::{Encoder, IntGauge, IntGaugeVec, Opts, TextEncoder};
use std::collections::HashMap;
use std::sync::OnceLock;

/// Total number of nodes known to svc-admin.
static NODES_TOTAL: OnceLock<IntGauge> = OnceLock::new();

/// Node counts grouped by environment.
static NODES_BY_ENV: OnceLock<IntGaugeVec> = OnceLock::new();

fn nodes_total() -> &'static IntGauge {
    NODES_TOTAL.get_or_init(|| {
        let gauge = IntGauge::with_opts(
            Opts::new(
                "svc_admin_nodes_total",
                "Total number of nodes registered in svc-admin.",
            )
            .namespace("ron"),
        )
        .expect("svc_admin_nodes_total gauge must be constructible");

        prometheus::default_registry()
            .register(Box::new(gauge.clone()))
            .expect("svc_admin_nodes_total must register successfully");

        gauge
    })
}

fn nodes_by_env() -> &'static IntGaugeVec {
    NODES_BY_ENV.get_or_init(|| {
        let vec = IntGaugeVec::new(
            Opts::new(
                "svc_admin_nodes_by_env",
                "Number of nodes by environment.",
            )
            .namespace("ron"),
            &["environment"],
        )
        .expect("svc_admin_nodes_by_env gauge must be constructible");

        prometheus::default_registry()
            .register(Box::new(vec.clone()))
            .expect("svc_admin_nodes_by_env must register successfully");

        vec
    })
}

/// Initialize static node inventory metrics from the config.
///
/// This should be called once at startup; the metrics are effectively
/// static until we add dynamic config reloads.
pub fn init_node_inventory_metrics(config: &Config) {
    let total = config.nodes.len() as i64;
    nodes_total().set(total);

    let mut by_env: HashMap<&str, i64> = HashMap::new();
    for node in config.nodes.values() {
        let env = node.environment.as_str();
        *by_env.entry(env).or_insert(0) += 1;
    }

    let gauge_vec = nodes_by_env();
    // Clear any existing values before setting.
    gauge_vec.reset();

    for (env, count) in by_env {
        gauge_vec.with_label_values(&[env]).set(count);
    }
}

/// Axum handler for `/metrics`.
pub async fn metrics_handler() -> Response {
    let encoder = TextEncoder::new();
    let metric_families = prometheus::gather();

    let mut buffer = Vec::new();
    if let Err(err) = encoder.encode(&metric_families, &mut buffer) {
        tracing::error!(error = ?err, "failed to encode Prometheus metrics");
        return StatusCode::INTERNAL_SERVER_ERROR.into_response();
    }

    let body = match String::from_utf8(buffer) {
        Ok(s) => s,
        Err(err) => {
            tracing::error!(error = ?err, "metrics output was not valid UTF-8");
            return StatusCode::INTERNAL_SERVER_ERROR.into_response();
        }
    };

    (
        StatusCode::OK,
        [(header::CONTENT_TYPE, encoder.format_type().to_string())],
        body,
    )
        .into_response()
}

```

### crates/svc-admin/src/metrics/sampler.rs
<a id="crates-svc-admin-src-metrics-sampler-rs"></a>

```rust
// crates/svc-admin/src/metrics/sampler.rs
//
// RO:WHAT — Background sampler tasks that scrape node `/metrics` and feed facet aggregates.
// RO:WHY  — Pillar 4 (Observability); Concerns PERF|RES — live health without
//          overloading nodes or blocking shutdown.
// RO:INTERACTS — crate::metrics::facet::{FacetMetrics, FacetSnapshot},
//                NodeCfg-derived targets, Prometheus text endpoints.
// RO:INVARIANTS — sampler loops observe shutdown; no blocking I/O under shared
//                 locks; degrade gracefully on parse/HTTP errors.
// RO:METRICS — drives `FacetMetrics` (for the UI) and increments
//              `ron_svc_admin_upstream_errors_total{kind}` when scrapes fail.
// RO:CONFIG — interval/timeout/window derived from `Config.polling.*` and
//             per-node `NodeCfg`.
// RO:SECURITY — only reads public `/metrics`; no credentials/PII; rely on
//               upstream nodes for any auth.
// RO:TEST — unit: `parse_facet_snapshots_aggregates_by_facet`; integration:
//           future HTTP/admin API tests.

use std::collections::HashMap;
use std::time::Duration;

use tokio::sync::watch;
use tokio::task::JoinHandle;
use tokio::time;
use tracing::{debug, warn};

use crate::metrics::actions;
use crate::metrics::facet::{FacetMetrics, FacetSnapshot};

/// A concrete node target for the sampler.
///
/// This is intentionally decoupled from `NodeCfg` so that we can
/// construct targets from configuration, tests, or ad-hoc callers
/// without hard-coding config types here.
#[derive(Clone, Debug)]
pub struct NodeMetricsTarget {
    /// Logical node id (e.g., `"example-node"`).
    pub node_id: String,
    /// Full URL to the node’s Prometheus `/metrics` endpoint.
    pub metrics_url: String,
    /// Optional per-request timeout for polling this node.
    pub timeout: Option<Duration>,
}

/// Spawn one sampler task per target.
///
/// Each sampler will:
/// - Align to the current time.
/// - Poll `<metrics_url>` every `interval`.
/// - Parse facet metrics and push them into `facet_metrics`.
/// - Exit promptly when `shutdown` flips to `true`.
///
/// Returns a vector of `JoinHandle<()>` so the caller can await or
/// detach them as part of the broader server lifecycle.
pub fn spawn_samplers(
    targets: Vec<NodeMetricsTarget>,
    interval: Duration,
    facet_metrics: FacetMetrics,
    shutdown: watch::Receiver<bool>,
) -> Vec<JoinHandle<()>> {
    let mut handles = Vec::with_capacity(targets.len());

    for target in targets {
        let metrics_clone = facet_metrics.clone();
        let mut shutdown_clone = shutdown.clone();

        let handle = tokio::spawn(async move {
            run_sampler_for_target(target, interval, metrics_clone, &mut shutdown_clone).await;
        });

        handles.push(handle);
    }

    handles
}

async fn run_sampler_for_target(
    target: NodeMetricsTarget,
    interval: Duration,
    facet_metrics: FacetMetrics,
    shutdown: &mut watch::Receiver<bool>,
) {
    let client = reqwest::Client::new();

    debug!(
        node_id = %target.node_id,
        url = %target.metrics_url,
        "starting facet metrics sampler for node",
    );

    // Seed at least one sample as soon as possible.
    if let Err(err) = sample_once(&client, &target, &facet_metrics).await {
        // Count upstream failures by kind for observability.
        actions::inc_upstream_error(err.kind_label());
        warn!(
            node_id = %target.node_id,
            url = %target.metrics_url,
            error = ?err,
            "initial metrics sample failed (will retry on interval)",
        );
    }

    loop {
        tokio::select! {
            changed = shutdown.changed() => {
                // If the sender has been dropped, we treat that as a
                // shutdown signal as well.
                if changed.is_err() || *shutdown.borrow() {
                    debug!(
                        node_id = %target.node_id,
                        url = %target.metrics_url,
                        "facet metrics sampler shutting down",
                    );
                    break;
                }
            }
            _ = time::sleep(interval) => {
                if let Err(err) = sample_once(&client, &target, &facet_metrics).await {
                    // We do not fail the sampler permanently on transient
                    // errors; they show up as gaps / stale data in the UI.
                    actions::inc_upstream_error(err.kind_label());
                    warn!(
                        node_id = %target.node_id,
                        url = %target.metrics_url,
                        error = ?err,
                        "facet metrics sample failed",
                    );
                }
            }
        }
    }
}

#[derive(Debug)]
#[allow(dead_code)] // Fields/variants are only observed via Debug logging in the current slice.
enum SamplerError {
    Http(reqwest::Error),
    Parse(String),
}

impl SamplerError {
    /// Coarse-grained label for Prometheus `kind` dimension on
    /// `ron_svc_admin_upstream_errors_total`.
    fn kind_label(&self) -> &'static str {
        match self {
            SamplerError::Http(err) => {
                if err.is_timeout() {
                    "timeout"
                } else if err.is_connect() {
                    "connect"
                } else if err.is_status() {
                    "status"
                } else {
                    "http"
                }
            }
            SamplerError::Parse(_) => "parse",
        }
    }
}

impl From<reqwest::Error> for SamplerError {
    fn from(err: reqwest::Error) -> Self {
        SamplerError::Http(err)
    }
}

async fn sample_once(
    client: &reqwest::Client,
    target: &NodeMetricsTarget,
    facet_metrics: &FacetMetrics,
) -> Result<(), SamplerError> {
    let mut request = client.get(&target.metrics_url);

    if let Some(timeout) = target.timeout {
        request = request.timeout(timeout);
    }

    let response = request.send().await?.error_for_status()?;
    let body = response.text().await?;

    let snapshots = parse_facet_snapshots(&body)?;
    if !snapshots.is_empty() {
        facet_metrics.update_from_scrape(&target.node_id, snapshots);
    }

    Ok(())
}

/// Parse facet counters from a Prometheus text exposition.
///
/// We currently look for lines of the form:
///
/// ```text
/// ron_facet_requests_total{facet="overlay.connect",result="ok"} 123
/// ron_facet_requests_total{facet="overlay.connect",result="error"} 4
/// ron_facet_requests_total{facet="overlay.jobs",result="ok"} 42
/// ```
///
/// For each `facet`, we aggregate all matching series into:
/// - `requests_total` = sum(all results)
/// - `errors_total`   = sum(result in {"error","err","failure","5xx"})
fn parse_facet_snapshots(body: &str) -> Result<Vec<FacetSnapshot>, SamplerError> {
    let mut counters: HashMap<String, (f64, f64)> = HashMap::new();

    for raw_line in body.lines() {
        let line = raw_line.trim();

        if line.is_empty() || line.starts_with('#') {
            continue;
        }

        // We only care about the facet requests counter for now.
        if !line.starts_with("ron_facet_requests_total") {
            continue;
        }

        let (metric_and_labels, value_str) = match line.split_once(' ') {
            Some((left, right)) => (left.trim(), right.trim()),
            None => continue,
        };

        let value: f64 = match value_str.parse() {
            Ok(v) => v,
            Err(_) => {
                // Degrade on parse errors; don't abort the whole scrape.
                continue;
            }
        };

        // Split `name{labels}` into `name` and `labels`.
        let labels_str = match metric_and_labels.find('{') {
            Some(start) => {
                let end = match metric_and_labels.rfind('}') {
                    Some(e) if e > start => e,
                    _ => continue,
                };
                &metric_and_labels[start + 1..end]
            }
            None => "",
        };

        let mut facet: Option<String> = None;
        let mut result: Option<String> = None;

        for part in labels_str.split(',') {
            let trimmed = part.trim();
            if trimmed.is_empty() {
                continue;
            }

            let (key, raw_value) = match trimmed.split_once('=') {
                Some((k, v)) => (k.trim(), v.trim()),
                None => continue,
            };

            let unquoted = raw_value.trim_matches('"');

            match key {
                "facet" => facet = Some(unquoted.to_string()),
                "result" => result = Some(unquoted.to_string()),
                _ => {}
            }
        }

        let facet_key = match facet {
            Some(f) => f,
            None => continue,
        };

        let entry = counters.entry(facet_key).or_insert((0.0, 0.0));
        entry.0 += value;

        if let Some(res) = result {
            let res_lower = res.to_ascii_lowercase();
            if matches!(
                res_lower.as_str(),
                "error" | "err" | "failure" | "fail" | "5xx"
            ) {
                entry.1 += value;
            }
        }
    }

    let mut out = Vec::new();

    for (facet, (requests_total, errors_total)) in counters {
        out.push(FacetSnapshot {
            facet,
            requests_total,
            errors_total,
        });
    }

    Ok(out)
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn parse_facet_snapshots_aggregates_by_facet() {
        let body = r#"
# HELP ron_facet_requests_total Total facet requests.
# TYPE ron_facet_requests_total counter
ron_facet_requests_total{facet="overlay.connect",result="ok"} 10
ron_facet_requests_total{facet="overlay.connect",result="error"} 2
ron_facet_requests_total{facet="overlay.jobs",result="ok"} 5
ron_facet_requests_total{facet="overlay.jobs",result="err"} 1
"#;

        let snapshots = parse_facet_snapshots(body).expect("parser should succeed");

        assert_eq!(snapshots.len(), 2);

        let mut by_facet: HashMap<String, (f64, f64)> = HashMap::new();
        for snap in snapshots {
            by_facet.insert(snap.facet.clone(), (snap.requests_total, snap.errors_total));
        }

        let (req_connect, err_connect) = by_facet.get("overlay.connect").unwrap();
        assert_eq!(*req_connect, 12.0);
        assert_eq!(*err_connect, 2.0);

        let (req_jobs, err_jobs) = by_facet.get("overlay.jobs").unwrap();
        assert_eq!(*req_jobs, 6.0);
        assert_eq!(*err_jobs, 1.0);
    }
}

```

### crates/svc-admin/src/nodes/client.rs
<a id="crates-svc-admin-src-nodes-client-rs"></a>

```rust
// crates/svc-admin/src/nodes/client.rs

//! RO:WHAT — Node admin HTTP client used by svc-admin to talk to node admin planes.
//! RO:WHY  — Centralize per-node HTTP rules (timeouts, http/https policy, optional endpoints).
//! RO:INTERACTS — crate::config::NodeCfg, crate::nodes::status, dto::node::AdminStatusView
//! RO:INVARIANTS — deny http:// unless insecure_http=true; no lock across .await; optional endpoints may be missing (404/405/501)
//! RO:METRICS/LOGS — logs degraded paths and upstream failures (no direct metrics)
//! RO:SECURITY — does not inject creds yet; node enforces its own auth/dev gates
//! RO:TEST — unit tests in this module

//! Node admin HTTP client.
//!
//! This is the svc-admin side of the "admin plane" contract: it knows how to
//! talk to a node's `/api/v1/status`, `/healthz`, `/readyz`, `/version` and
//! control-plane action endpoints over HTTP(S).
//!
//! Design goals for v1:
//! - Honor per-node config (`base_url`, `insecure_http`, `default_timeout`).
//! - Fail fast on obviously bad config (no scheme, http:// with insecure_http=false).
//! - Treat /healthz + /readyz as *truthful* signals: any non-2xx ⇒ error.
//! - Prefer the aggregated `/api/v1/status` endpoint when available.
//! - Be conservative about parsing: fallback to "any 2xx with non-empty body" when
//!   `/readyz` doesn't return JSON.
//! - Keep control-plane actions (reload/shutdown/debug-crash) thin wrappers over
//!   POST endpoints.
//! - Provide “optional endpoint” helpers for slices that roll out gradually
//!   (404/405/501 should be treated as “missing”, not “fatal”).
//!
//! Normalization into `AdminStatusView` lives in `nodes::status` and is
//! called from here; the HTTP fetching logic itself stays thin.

use crate::config::NodeCfg;
use crate::dto::node::AdminStatusView;
use crate::error::{Error, Result};
use crate::nodes::status::{self, RawStatus};
use reqwest::Client;
use serde::de::DeserializeOwned;
use std::time::Duration;
use tracing::{debug, warn};

/// Thin wrapper around a shared `reqwest::Client`.
///
/// `NodeClient` itself is stateless; per-node configuration is passed to each
/// call via `&NodeCfg`.
#[derive(Clone)]
pub struct NodeClient {
    http: Client,
}

impl Default for NodeClient {
    fn default() -> Self {
        Self::new()
    }
}

impl NodeClient {
    /// Construct a new `NodeClient` with a basic `reqwest::Client`.
    ///
    /// This should never fail with our current configuration; if it does, we
    /// prefer a loud panic during boot rather than silently limping along.
    pub fn new() -> Self {
        let http = Client::builder()
            .user_agent("svc-admin/0.1.0")
            .build()
            .expect("building reqwest client for NodeClient should not fail");

        Self { http }
    }

    /// Build a full URL for a given node + path.
    ///
    /// - Ensures `base_url` has a scheme (`http://` or `https://`).
    /// - Denies plain `http://` unless `insecure_http=true` is set on the node.
    fn build_url(cfg: &NodeCfg, path: &str) -> Result<String> {
        let base = cfg.base_url.trim_end_matches('/');

        if !(base.starts_with("http://") || base.starts_with("https://")) {
            return Err(Error::Config(format!(
                "node base_url must start with http:// or https:// (got {base})"
            )));
        }

        if base.starts_with("http://") && !cfg.insecure_http {
            return Err(Error::Config(format!(
                "node base_url uses http:// but insecure_http=false (base_url={base})"
            )));
        }

        Ok(format!("{base}{path}"))
    }

    /// Pick an effective timeout for this node, if any.
    ///
    /// For now we only respect the per-node default; later we can layer in
    /// service-wide defaults from `Config::server`.
    fn effective_timeout(cfg: &NodeCfg) -> Option<Duration> {
        cfg.default_timeout
    }

    fn apply_timeout(
        &self,
        cfg: &NodeCfg,
        req: reqwest::RequestBuilder,
    ) -> reqwest::RequestBuilder {
        if let Some(t) = Self::effective_timeout(cfg) {
            req.timeout(t)
        } else {
            req
        }
    }

    fn is_missing_endpoint_status(status: reqwest::StatusCode) -> bool {
        status == reqwest::StatusCode::NOT_FOUND
            || status == reqwest::StatusCode::METHOD_NOT_ALLOWED
            || status == reqwest::StatusCode::NOT_IMPLEMENTED
    }

    async fn get_text(&self, cfg: &NodeCfg, path: &str) -> Result<String> {
        let url = Self::build_url(cfg, path)?;
        let req = self.http.get(&url);
        let req = self.apply_timeout(cfg, req);

        let rsp = req.send().await?.error_for_status()?;
        Ok(rsp.text().await?)
    }

    async fn get_json<T>(&self, cfg: &NodeCfg, path: &str) -> Result<T>
    where
        T: DeserializeOwned,
    {
        let url = Self::build_url(cfg, path)?;
        let req = self.http.get(&url);
        let req = self.apply_timeout(cfg, req);

        let rsp = req.send().await?.error_for_status()?;
        Ok(rsp.json().await?)
    }

    /// Like `get_json`, but treats (404/405/501) as “missing endpoint” and returns `Ok(None)`.
    ///
    /// This is critical for gradual rollout slices (storage/playground/etc) where
    /// nodes may not implement the endpoint yet.
    async fn get_json_optional<T>(&self, cfg: &NodeCfg, path: &str) -> Result<Option<T>>
    where
        T: DeserializeOwned,
    {
        let url = Self::build_url(cfg, path)?;
        let req = self.http.get(&url);
        let req = self.apply_timeout(cfg, req);

        let rsp = req.send().await?;
        let status = rsp.status();

        if Self::is_missing_endpoint_status(status) {
            return Ok(None);
        }

        if !status.is_success() {
            return Err(Error::Upstream(format!(
                "GET {} → non-success status {}",
                url, status
            )));
        }

        Ok(Some(rsp.json().await?))
    }

    async fn post_unit_action(&self, cfg: &NodeCfg, path: &str) -> Result<()> {
        let url = Self::build_url(cfg, path)?;
        let req = self.http.post(&url);
        let req = self.apply_timeout(cfg, req);

        let rsp = req.send().await?;
        let status = rsp.status();

        if !status.is_success() {
            return Err(Error::Upstream(format!(
                "POST {} → non-success status {}",
                url, status
            )));
        }

        Ok(())
    }

    // -------------------------------------------------------------------------
    // Public API
    // -------------------------------------------------------------------------

    /// Probe `/healthz` for a node.
    ///
    /// Any 2xx with a non-empty body is considered "healthy". Non-2xx or
    /// network errors bubble up as `Error::Http` (via `reqwest::Error`).
    pub async fn fetch_health(&self, cfg: &NodeCfg) -> Result<bool> {
        let body = self.get_text(cfg, "/healthz").await?;
        Ok(!body.trim().is_empty())
    }

    /// Probe `/readyz` for a node.
    ///
    /// Happy path: node returns `{"ready":true|false}` JSON.
    ///
    /// Fallback path: if JSON parsing fails but the HTTP status is 2xx, we do a
    /// second attempt as plain text and treat "any non-empty body" as `ready=true`.
    pub async fn fetch_ready(&self, cfg: &NodeCfg) -> Result<bool> {
        #[derive(serde::Deserialize)]
        struct ReadyDto {
            ready: bool,
        }

        match self.get_json::<ReadyDto>(cfg, "/readyz").await {
            Ok(dto) => Ok(dto.ready),
            Err(e) => {
                warn!(
                    error = %e,
                    "failed to parse /readyz as JSON, falling back to text mode"
                );
                let body = self.get_text(cfg, "/readyz").await?;
                Ok(!body.trim().is_empty())
            }
        }
    }

    /// Fetch `/version` from the node.
    ///
    /// Returns:
    /// - `Ok(Some(version))` if the node responds with a non-empty body.
    /// - `Ok(None)` on empty body or if we can't fetch/parse the version.
    ///
    /// We **log and degrade** on error here instead of failing hard: version
    /// is informational, not an SLA signal.
    pub async fn fetch_version(&self, cfg: &NodeCfg) -> Result<Option<String>> {
        match self.get_text(cfg, "/version").await {
            Ok(body) => {
                let v = body.trim();
                if v.is_empty() {
                    Ok(None)
                } else {
                    Ok(Some(v.to_string()))
                }
            }
            Err(e) => {
                warn!(error = %e, "failed to fetch /version from node");
                Ok(None)
            }
        }
    }

    /// Combined status call used by `NodeRegistry`.
    ///
    /// Preferred path:
    /// - Call `/api/v1/status` and normalize using `nodes::status::from_raw`.
    ///
    /// Fallback path:
    /// - If `/api/v1/status` fails, probe `healthz/readyz/version` and
    ///   return a placeholder view with whatever signal we managed to get.
    pub async fn fetch_status(&self, id: &str, cfg: &NodeCfg) -> Result<AdminStatusView> {
        // --- Preferred: aggregated status endpoint -------------------------
        match self.get_json::<RawStatus>(cfg, "/api/v1/status").await {
            Ok(raw) => {
                let view = status::from_raw(id, cfg, raw);
                debug!(
                    node_id = id,
                    version = view.version.as_deref().unwrap_or("unknown"),
                    planes = view.planes.len(),
                    "fetched node status via /api/v1/status"
                );
                return Ok(view);
            }
            Err(err) => {
                warn!(
                    node_id = id,
                    error = %err,
                    "failed to fetch /api/v1/status, degrading to health/ready/version probes"
                );
            }
        }

        // --- Fallback: triple probe + placeholder -------------------------
        let health_ok = self.fetch_health(cfg).await.unwrap_or(false);
        let ready_ok = self.fetch_ready(cfg).await.unwrap_or(false);
        let version = self.fetch_version(cfg).await.unwrap_or(None);

        let mut view = status::build_status_placeholder();
        view.id = id.to_string();
        view.display_name = cfg
            .display_name
            .clone()
            .unwrap_or_else(|| id.to_string());
        // Prefer any forced profile hint from config.
        view.profile = cfg.forced_profile.clone();
        // Whatever we managed to fetch (or None if that also failed).
        view.version = version;

        let status_label = if !health_ok {
            "down"
        } else if !ready_ok {
            "degraded"
        } else {
            "ready"
        };

        debug!(
            node_id = id,
            %status_label,
            ready = ready_ok,
            health = health_ok,
            version = view.version.as_deref().unwrap_or("unknown"),
            "fetched node status via degraded probes"
        );

        Ok(view)
    }

    /// Optional helper for future gradual rollout endpoints.
    ///
    /// (Not used by the current Playground MVP, but used for future “node-assisted”
    /// validation or “capabilities” probes without breaking older nodes.)
    pub async fn try_get_json<T>(&self, cfg: &NodeCfg, path: &str) -> Result<Option<T>>
    where
        T: DeserializeOwned,
    {
        self.get_json_optional(cfg, path).await
    }

    /// Ask the node to reload its configuration.
    ///
    /// Contract:
    /// - POST /api/v1/reload
    /// - Empty request/response body.
    pub async fn reload(&self, cfg: &NodeCfg) -> Result<()> {
        self.post_unit_action(cfg, "/api/v1/reload").await
    }

    /// Ask the node to shut down gracefully.
    ///
    /// Contract:
    /// - POST /api/v1/shutdown
    /// - Empty request/response body.
    pub async fn shutdown(&self, cfg: &NodeCfg) -> Result<()> {
        self.post_unit_action(cfg, "/api/v1/shutdown").await
    }

    /// Dev-only: ask the node to synthesize a crash in one of its services.
    ///
    /// Contract (macronode admin plane):
    ///   POST /api/v1/debug/crash
    ///   POST /api/v1/debug/crash?service=svc-gateway
    ///
    /// We keep this thin: svc-admin just proxies the request and lets the node
    /// enforce its own dev-mode / auth gates.
    pub async fn debug_crash(&self, cfg: &NodeCfg, service: Option<&str>) -> Result<()> {
        let mut path = String::from("/api/v1/debug/crash");
        if let Some(svc) = service {
            // NOTE: service names are simple (e.g. "svc-gateway"), so we
            // avoid pulling in a URL-encoding crate here.
            path.push_str("?service=");
            path.push_str(svc);
        }

        self.post_unit_action(cfg, &path).await
    }

    /// Early primitive kept for backward-compat with older experiments.
    ///
    /// For now we implement this as a no-op; new call sites should use the
    /// more explicit methods above.
    pub async fn ping_node(&self, _id: &str) -> Result<()> {
        Ok(())
    }
}

// -----------------------------------------------------------------------------
// Tests
// -----------------------------------------------------------------------------

#[cfg(test)]
mod tests {
    use super::*;
    use axum::{routing::get, Router};
    use std::net::SocketAddr;
    use tokio::net::TcpListener;

    fn make_test_node_cfg(addr: SocketAddr) -> NodeCfg {
        NodeCfg {
            base_url: format!("http://{}", addr),
            display_name: Some("Test Node".to_string()),
            environment: "dev".to_string(),
            insecure_http: true,
            forced_profile: None,
            macaroon_path: None,
            default_timeout: Some(Duration::from_secs(2)),
        }
    }

    async fn start_fake_admin_plane() -> SocketAddr {
        async fn healthz() -> &'static str {
            "ok"
        }

        async fn readyz() -> &'static str {
            // Simple non-JSON body still counts as "ready" in fallback path.
            "ready"
        }

        async fn version() -> &'static str {
            "1.2.3-test"
        }

        let app = Router::new()
            .route("/healthz", get(healthz))
            .route("/readyz", get(readyz))
            .route("/version", get(version));

        let listener = TcpListener::bind("127.0.0.1:0")
            .await
            .expect("bind test admin plane");
        let addr = listener.local_addr().expect("local_addr");

        tokio::spawn(async move {
            axum::serve(listener, app)
                .await
                .expect("serve fake admin plane");
        });

        addr
    }

    #[tokio::test(flavor = "current_thread")]
    async fn node_client_can_talk_to_fake_admin_plane() {
        let addr = start_fake_admin_plane().await;
        let cfg = make_test_node_cfg(addr);
        let client = NodeClient::new();

        let healthy = client.fetch_health(&cfg).await.expect("health");
        assert!(healthy, "healthz should report healthy");

        let ready = client.fetch_ready(&cfg).await.expect("ready");
        assert!(ready, "readyz should be treated as ready via fallback");

        let version = client
            .fetch_version(&cfg)
            .await
            .expect("version fetch")
            .expect("version should be present");
        assert_eq!(version, "1.2.3-test");
    }

    #[tokio::test(flavor = "current_thread")]
    async fn node_client_rejects_http_when_insecure_http_false() {
        let cfg = NodeCfg {
            base_url: "http://127.0.0.1:12345".to_string(),
            display_name: None,
            environment: "dev".to_string(),
            insecure_http: false,
            forced_profile: None,
            macaroon_path: None,
            default_timeout: None,
        };

        let client = NodeClient::new();
        let err = client.fetch_health(&cfg).await.unwrap_err();

        let msg = format!("{err}");
        assert!(
            msg.contains("insecure_http=false"),
            "expected config error about insecure_http, got: {msg}"
        );
    }
}

```

### crates/svc-admin/src/nodes/mod.rs
<a id="crates-svc-admin-src-nodes-mod-rs"></a>

```rust
// crates/svc-admin/src/nodes/mod.rs

//! Node registry and HTTP client for talking to RON-CORE nodes.
//!
//! This module is the “admin plane view” of nodes: it knows how to
//! list nodes (from config) and query their basic status over HTTP.

pub mod client;
pub mod registry;
pub mod status;

pub use client::NodeClient;
pub use registry::NodeRegistry;

```

### crates/svc-admin/src/nodes/registry.rs
<a id="crates-svc-admin-src-nodes-registry-rs"></a>

```rust
// crates/svc-admin/src/nodes/registry.rs
//
// RO:WHAT — In-memory registry of nodes known to svc-admin.
// RO:WHY  — Centralize node lookup, status fetching, and control-plane actions.
// RO:INTERACTS — config::NodesCfg, nodes::client::NodeClient, nodes::status, dto::node
// RO:INVARIANTS — node ids are config keys; no locks held across .await; failures degrade to placeholders (but keep correct id/display_name)
// RO:METRICS/LOGS — warns on failed upstream calls; audit logs live at router action handlers
// RO:SECURITY — registry does not grant authority; auth gates happen at router/action layer
// RO:TEST — exercised by HTTP smoke + future action tests

use crate::config::{NodeCfg, NodesCfg};
use crate::dto::node::{AdminStatusView, NodeActionResponse, NodeSummary};
use crate::dto::storage::{DatabaseDetailDto, DatabaseEntryDto, StorageSummaryDto};
use crate::error::{Error, Result};
use crate::nodes::client::NodeClient;
use crate::nodes::status;
use crate::dto::system::SystemSummaryDto;
use std::collections::BTreeMap;
use std::sync::Arc;

/// Read-only node registry backed by configuration.
#[derive(Clone)]
pub struct NodeRegistry {
    nodes: Arc<BTreeMap<String, NodeCfg>>,
    client: NodeClient,
}

impl NodeRegistry {
    /// Construct a new registry from the config-driven map.
    pub fn new(cfg: &NodesCfg) -> Self {
        Self {
            nodes: Arc::new(cfg.clone()),
            client: NodeClient::new(),
        }
    }

    /// Return a summary list for UI listing.
    pub fn list_summaries(&self) -> Vec<NodeSummary> {
        self.nodes
            .iter()
            .map(|(id, cfg)| NodeSummary {
                id: id.clone(),
                display_name: cfg
                    .display_name
                    .clone()
                    .unwrap_or_else(|| id.clone()),
                profile: cfg.forced_profile.clone(),
            })
            .collect()
    }

    /// Whether a node id exists in the registry.
    pub fn contains(&self, id: &str) -> bool {
        self.nodes.contains_key(id)
    }

    /// Return the status view for a given node id, if present.
    ///
    /// This will:
    /// - Look up the node in the config registry.
    /// - Call NodeClient::fetch_status to do real HTTP calls.
    /// - On failure, log and fall back to a placeholder view **with correct identity**.
    pub async fn get_status(&self, id: &str) -> Option<AdminStatusView> {
        let cfg = match self.nodes.get(id) {
            Some(c) => c,
            None => return None,
        };

        match self.client.fetch_status(id, cfg).await {
            Ok(view) => Some(view),
            Err(err) => {
                tracing::warn!(
                    node_id = id,
                    error = %err,
                    "failed to fetch node status; returning placeholder view"
                );

                let mut view = status::build_status_placeholder();
                view.id = id.to_string();
                view.display_name = cfg
                    .display_name
                    .clone()
                    .unwrap_or_else(|| id.to_string());
                view.profile = cfg.forced_profile.clone();
                Some(view)
            }
        }
    }

    /// Internal helper: fetch cfg for a node id or yield a config error.
    fn cfg_for(&self, id: &str) -> Result<&NodeCfg> {
        self.nodes.get(id).ok_or_else(|| {
            Error::Config(format!(
                "unknown node id `{id}` requested for control-plane action"
            ))
        })
    }

    // -------------------------------------------------------------------------
    // Storage proxy (optional endpoints)
    // -------------------------------------------------------------------------
    //
    // Contract (node admin plane; future rollout):
    // - GET /api/v1/storage/summary
    // - GET /api/v1/storage/databases
    // - GET /api/v1/storage/databases/{name}
    //
    // IMPORTANT: these are optional. Missing endpoints (404/405/501) => Ok(None)
    // so the UI can fall back to mock mode cleanly.

    fn validate_db_name_for_path(name: &str) -> Result<()> {
        // Keep it strict for v1 to avoid pulling in extra URL encoding deps.
        // If you later need richer names, we can implement percent-encoding.
        let ok = name.chars().all(|c| {
            c.is_ascii_alphanumeric() || matches!(c, '-' | '_' | '.' )
        });

        if ok {
            Ok(())
        } else {
            Err(Error::Config(format!(
                "invalid database name for path segment: `{name}` (allowed: [A-Za-z0-9._-])"
            )))
        }
    }

    pub async fn try_storage_summary(&self, id: &str) -> Result<Option<StorageSummaryDto>> {
        let cfg = self.cfg_for(id)?;
        self.client
            .try_get_json::<StorageSummaryDto>(cfg, "/api/v1/storage/summary")
            .await
    }

    pub async fn try_storage_databases(&self, id: &str) -> Result<Option<Vec<DatabaseEntryDto>>> {
        let cfg = self.cfg_for(id)?;
        self.client
            .try_get_json::<Vec<DatabaseEntryDto>>(cfg, "/api/v1/storage/databases")
            .await
    }

    pub async fn try_storage_database_detail(
        &self,
        id: &str,
        name: &str,
    ) -> Result<Option<DatabaseDetailDto>> {
        Self::validate_db_name_for_path(name)?;
        let cfg = self.cfg_for(id)?;
        let path = format!("/api/v1/storage/databases/{name}");
        self.client
            .try_get_json::<DatabaseDetailDto>(cfg, &path)
            .await
    }
    pub async fn try_system_summary(&self, id: &str) -> Result<Option<SystemSummaryDto>> {
    let cfg = self.cfg_for(id)?;
    self.client
        .try_get_json::<SystemSummaryDto>(cfg, "/api/v1/system/summary")
        .await
    }


    // -------------------------------------------------------------------------
    // Actions
    // -------------------------------------------------------------------------

    /// Ask a node to reload configuration.
    pub async fn reload_node(&self, id: &str) -> Result<NodeActionResponse> {
        let cfg = self.cfg_for(id)?;
        self.client.reload(cfg).await?;
        Ok(NodeActionResponse {
            node_id: id.to_string(),
            action: "reload".to_string(),
            accepted: true,
            message: None,
        })
    }

    /// Ask a node to shut down gracefully.
    pub async fn shutdown_node(&self, id: &str) -> Result<NodeActionResponse> {
        let cfg = self.cfg_for(id)?;
        self.client.shutdown(cfg).await?;
        Ok(NodeActionResponse {
            node_id: id.to_string(),
            action: "shutdown".to_string(),
            accepted: true,
            message: None,
        })
    }

    /// Dev-only: proxy a synthetic crash request to the given node.
    ///
    /// This does *not* actually kill any workers; it just forwards the
    /// request to the node's `/api/v1/debug/crash` endpoint, which publishes
    /// a `KernelEvent::ServiceCrashed { service }` onto the bus. The node's
    /// supervisor then bumps restart counters.
    pub async fn debug_crash_node(
        &self,
        id: &str,
        service: Option<String>,
    ) -> Result<NodeActionResponse> {
        let cfg = self.cfg_for(id)?;

        // Delegate to the NodeClient's dev-only helper.
        self.client
            .debug_crash(cfg, service.as_deref())
            .await?;

        let action = match service.as_deref() {
            Some(svc) => format!("debug_crash({svc})"),
            None => "debug_crash".to_string(),
        };

        Ok(NodeActionResponse {
            node_id: id.to_string(),
            action,
            accepted: true,
            message: Some("debug crash forwarded to node admin plane".to_string()),
        })
    }
}

```

### crates/svc-admin/src/nodes/status.rs
<a id="crates-svc-admin-src-nodes-status-rs"></a>

```rust
// crates/svc-admin/src/nodes/status.rs
//
// RO:WHAT — Normalization helpers for node status.
// RO:WHY  — Keep the `/api/v1/status` wire contract isolated so NodeClient
//          and the SPA-facing DTOs can stay simple.
// RO:INTERACTS — dto::node, config::NodeCfg, nodes::client.
//
// Wire shape here mirrors the macronode/micronode RON-STATUS-V1 subset.

use serde::{Deserialize, Serialize};

use crate::config::NodeCfg;
use crate::dto::node::{AdminStatusView, PlaneStatus};

/// Internal representation of `/api/v1/status` responses from nodes.
///
/// Mirrors the macronode/micronode admin-plane status DTO.
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RawStatus {
    pub profile: Option<String>,
    pub version: String,
    pub planes: Vec<RawPlaneStatus>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct RawPlaneStatus {
    pub name: String,
    pub health: String,
    pub ready: bool,
    // Matches macronode's `restart_count` field on the wire exactly.
    pub restart_count: u64,
}

/// Build a placeholder view used when we cannot reach the node.
///
/// This is what NodeClient falls back to when `/api/v1/status` is missing
/// or fails, combined with coarse /healthz + /readyz + /version probes.
pub fn build_status_placeholder() -> AdminStatusView {
    AdminStatusView {
        id: "unknown".to_string(),
        display_name: "Unknown node".to_string(),
        profile: None,
        version: None,
        planes: Vec::new(),
    }
}

/// Normalize a RawStatus + NodeCfg into an AdminStatusView.
///
/// Invariants:
/// - `id` is always the registry key, not derived from the node.
/// - `display_name` prefers NodeCfg.display_name, falls back to id.
/// - `profile` prefers raw.profile, falls back to NodeCfg.forced_profile.
/// - `version` is taken from raw.version.
/// - Planes are 1:1 mapped into PlaneStatus DTOs.
pub fn from_raw(id: &str, cfg: &NodeCfg, raw: RawStatus) -> AdminStatusView {
    let display_name = cfg
        .display_name
        .clone()
        .unwrap_or_else(|| id.to_string());

    let profile = raw.profile.or_else(|| cfg.forced_profile.clone());

    let version = Some(raw.version);

    let planes = raw
        .planes
        .into_iter()
        .map(|p| PlaneStatus {
            name: p.name,
            health: p.health,
            ready: p.ready,
            restart_count: p.restart_count,
        })
        .collect();

    AdminStatusView {
        id: id.to_string(),
        display_name,
        profile,
        version,
        planes,
    }
}

```

### crates/svc-admin/src/observability.rs
<a id="crates-svc-admin-src-observability-rs"></a>

```rust
// crates/svc-admin/src/observability.rs

use tracing_subscriber::{fmt, EnvFilter};
use tracing_subscriber::util::SubscriberInitExt;

/// Initialize tracing for svc-admin.
///
/// This is intentionally tolerant of being called multiple times (eg. in
/// tests that spin up more than one server in a single process). If a global
/// subscriber is already installed, we just ignore the error.
pub fn init_tracing() {
    let filter = EnvFilter::try_from_default_env()
        .unwrap_or_else(|_| {
            // Default to something sensible for local dev/tests
            EnvFilter::new("info,svc_admin=info,axum=warn,tower_http=warn")
        });

    // Use `try_init()` so a second call does *not* panic with
    // `SetGlobalDefaultError("a global default trace dispatcher has already been set")`.
    let _ = fmt::Subscriber::builder()
        .with_env_filter(filter)
        .finish()
        .try_init();
}

```

### crates/svc-admin/src/router.rs
<a id="crates-svc-admin-src-router-rs"></a>

```rust
// crates/svc-admin/src/router.rs
//
// RO:WHAT — HTTP surface for svc-admin (health, metrics, API).
// RO:WHY  — Provide a small, well-defined admin/control-plane API for
//           operators and the SPA (nodes, metrics, identity, actions).
// RO:INTERACTS — state::AppState, dto::{ui,me,node,metrics}, auth,
//                metrics::prometheus_bridge, nodes::registry.
// RO:INVARIANTS —
//   - Read-only GET endpoints are always safe for untrusted callers.
//   - Control-plane actions (reload/shutdown/debug-crash) are gated by config + auth.
//   - No blocking operations; all IO is async via axum/reqwest.
//
// RO:PLAYGROUND — Dev-only slice:
//   - Hidden behind ui.dev.enable_app_playground (404 when disabled).
//   - MVP is *read-only*: examples + manifest validation only.
//   - No remote execution, no node mutation, no filesystem browsing.

use std::sync::Arc;

use axum::{
    extract::{Path, State},
    http::{HeaderMap, StatusCode},
    response::IntoResponse,
    routing::{get, post},
    Json, Router,
};

use crate::{
    auth,
    dto,
    error::Error as SvcError,
    metrics::actions as action_metrics,
    state::AppState,
};

/// Build the axum router for svc-admin.
///
/// This is used by server bootstrap for both the main UI/API and the
/// metrics/health listener (the latter only uses a subset of routes).
pub fn build_router(state: Arc<AppState>) -> Router {
    Router::new()
        .route("/healthz", get(healthz))
        .route("/readyz", get(readyz))
        // Prometheus metrics for svc-admin itself (default registry).
        .route(
            "/metrics",
            get(crate::metrics::prometheus_bridge::metrics_handler),
        )
        .route("/api/ui-config", get(ui_config))
        .route("/api/me", get(me))
        .route("/api/nodes", get(nodes))
        .route("/api/nodes/:id/status", get(node_status))
        .route("/api/nodes/:id/metrics/facets", get(node_facets))
        // ✅ System summary (CPU/RAM/NET) — optional rollout
        .route("/api/nodes/:id/system/summary", get(node_system_summary))
        // Storage / DB inventory (read-only; node support rolls out behind capability).
        .route("/api/nodes/:id/storage/summary", get(node_storage_summary))
        .route("/api/nodes/:id/storage/databases", get(node_storage_databases))
        .route(
            "/api/nodes/:id/storage/databases/:name",
            get(node_storage_database_detail),
        )
        // Dev-only App Playground (gated by ui.dev.enable_app_playground).
        .route("/api/playground/examples", get(playground_examples))
        .route(
            "/api/playground/manifest/validate",
            post(playground_validate_manifest),
        )
        // Control-plane actions (config + auth gated).
        .route("/api/nodes/:id/reload", post(node_reload))
        .route("/api/nodes/:id/shutdown", post(node_shutdown))
        // Dev-only debug hook: synthetic crash for a node's service/plane.
        .route("/api/nodes/:id/debug/crash", post(node_debug_crash))
        .with_state(state)
}

/// Liveness probe.
///
/// Invariant: if this is not 200/"ok", the process is very unhealthy.
async fn healthz() -> &'static str {
    "ok"
}

/// Readiness probe.
///
/// For now this always returns `{ "ready": true }` but is wired to AppState so
/// we can gate on real readiness later (node registry, samplers, etc.).
async fn readyz(State(_state): State<Arc<AppState>>) -> Json<serde_json::Value> {
    Json(serde_json::json!({ "ready": true }))
}

/// UI config consumed by the SPA for theme/lang/read-only state.
async fn ui_config(State(state): State<Arc<AppState>>) -> Json<dto::ui::UiConfigDto> {
    Json(dto::ui::UiConfigDto::from_cfg(&state.config))
}

/// Resolve identity for UI scope.
///
/// Phase 1 behavior:
/// - If auth fails, increment auth failure metric and fall back to dev identity
///   to keep the UI usable.
fn resolve_identity_ui(state: &Arc<AppState>, headers: &HeaderMap) -> auth::Identity {
    let auth_cfg = &state.config.auth;
    match auth::resolve_identity_from_headers(auth_cfg, headers) {
        Ok(idn) => idn,
        Err(err) => {
            action_metrics::inc_auth_failure("ui");
            tracing::warn!(
                target: "svc_admin::auth",
                scope = "ui",
                mode = %auth_cfg.mode,
                error = ?err,
                "failed to resolve identity for /api/me; falling back to dev identity"
            );
            auth::Identity::dev_fallback()
        }
    }
}

/// Resolve identity for node/action scope.
///
/// Phase 1 behavior:
/// - If auth fails: increment auth failure + rejection("unauth") and return 401.
fn resolve_identity_node_or_unauth(
    state: &Arc<AppState>,
    headers: &HeaderMap,
    action: &'static str,
    node_id: &str,
) -> Result<auth::Identity, StatusCode> {
    let auth_cfg = &state.config.auth;
    match auth::resolve_identity_from_headers(auth_cfg, headers) {
        Ok(idn) => Ok(idn),
        Err(err) => {
            action_metrics::inc_auth_failure("node");
            action_metrics::inc_rejection("unauth");
            tracing::warn!(
                target: "svc_admin::auth",
                action,
                node_id = %node_id,
                mode = %auth_cfg.mode,
                error = ?err,
                "action rejected: failed to resolve identity"
            );
            Err(StatusCode::UNAUTHORIZED)
        }
    }
}

fn ensure_node_exists(state: &Arc<AppState>, id: &str) -> Result<(), StatusCode> {
    if state.nodes.contains(id) {
        Ok(())
    } else {
        Err(StatusCode::NOT_FOUND)
    }
}

fn map_registry_err(err: &SvcError) -> StatusCode {
    match err {
        SvcError::Config(_) => StatusCode::BAD_REQUEST,
        SvcError::Serde(_) => StatusCode::BAD_GATEWAY,
        SvcError::Http(_) => StatusCode::BAD_GATEWAY,
        SvcError::Upstream(_) => StatusCode::BAD_GATEWAY,
        SvcError::Io(_) => StatusCode::INTERNAL_SERVER_ERROR,
        SvcError::Auth(_) => StatusCode::UNAUTHORIZED,
        SvcError::Other(_) => StatusCode::INTERNAL_SERVER_ERROR,
    }
}

/// Identity endpoint for the current user.
async fn me(State(state): State<Arc<AppState>>, headers: HeaderMap) -> Json<dto::me::MeResponse> {
    let auth_cfg = &state.config.auth;
    let identity = resolve_identity_ui(&state, &headers);
    Json(dto::me::MeResponse::from_identity(identity, auth_cfg))
}

/// List all configured nodes as NodeSummary DTOs.
async fn nodes(State(state): State<Arc<AppState>>) -> Json<Vec<dto::node::NodeSummary>> {
    Json(state.nodes.list_summaries())
}

/// GET /api/nodes/{id}/system/summary
///
/// Behavior:
/// - 404 if node id not registered
/// - 501 if node does not implement system endpoints yet
/// - 502/500/400 depending on local/upstream failures
async fn node_system_summary(
    Path(id): Path<String>,
    State(state): State<Arc<AppState>>,
) -> Result<Json<dto::system::SystemSummaryDto>, StatusCode> {
    ensure_node_exists(&state, &id)?;

    match state.nodes.try_system_summary(&id).await {
        Ok(Some(dto)) => Ok(Json(dto)),
        Ok(None) => Err(StatusCode::NOT_IMPLEMENTED),
        Err(err) => {
            tracing::warn!(
                target: "svc_admin::system",
                node_id = %id,
                error = %err,
                "failed to fetch system summary from node admin plane"
            );
            Err(map_registry_err(&err))
        }
    }
}

/// Status view for a single node.
///
/// Returns 404 if the node id is not in the registry.
async fn node_status(
    Path(id): Path<String>,
    State(state): State<Arc<AppState>>,
) -> Result<Json<dto::node::AdminStatusView>, StatusCode> {
    match state.nodes.get_status(&id).await {
        Some(view) => Ok(Json(view)),
        None => Err(StatusCode::NOT_FOUND),
    }
}

/// Facet metrics for a single node.
async fn node_facets(
    Path(id): Path<String>,
    State(state): State<Arc<AppState>>,
) -> Json<Vec<dto::metrics::FacetMetricsSummary>> {
    Json(state.facet_metrics.summaries_for_node(&id))
}

/// GET /api/nodes/{id}/storage/summary
async fn node_storage_summary(
    Path(id): Path<String>,
    State(state): State<Arc<AppState>>,
) -> Result<Json<dto::storage::StorageSummaryDto>, StatusCode> {
    ensure_node_exists(&state, &id)?;

    match state.nodes.try_storage_summary(&id).await {
        Ok(Some(dto)) => Ok(Json(dto)),
        Ok(None) => Err(StatusCode::NOT_IMPLEMENTED),
        Err(err) => {
            tracing::warn!(
                target: "svc_admin::storage",
                node_id = %id,
                error = %err,
                "failed to fetch storage summary from node admin plane"
            );
            Err(map_registry_err(&err))
        }
    }
}

/// GET /api/nodes/{id}/storage/databases
async fn node_storage_databases(
    Path(id): Path<String>,
    State(state): State<Arc<AppState>>,
) -> Result<Json<Vec<dto::storage::DatabaseEntryDto>>, StatusCode> {
    ensure_node_exists(&state, &id)?;

    match state.nodes.try_storage_databases(&id).await {
        Ok(Some(list)) => Ok(Json(list)),
        Ok(None) => Err(StatusCode::NOT_IMPLEMENTED),
        Err(err) => {
            tracing::warn!(
                target: "svc_admin::storage",
                node_id = %id,
                error = %err,
                "failed to fetch storage databases list from node admin plane"
            );
            Err(map_registry_err(&err))
        }
    }
}

/// GET /api/nodes/{id}/storage/databases/{name}
async fn node_storage_database_detail(
    Path((id, name)): Path<(String, String)>,
    State(state): State<Arc<AppState>>,
) -> Result<Json<dto::storage::DatabaseDetailDto>, StatusCode> {
    ensure_node_exists(&state, &id)?;

    match state.nodes.try_storage_database_detail(&id, &name).await {
        Ok(Some(dto)) => Ok(Json(dto)),
        Ok(None) => Err(StatusCode::NOT_IMPLEMENTED),
        Err(err) => {
            tracing::warn!(
                target: "svc_admin::storage",
                node_id = %id,
                db = %name,
                error = %err,
                "failed to fetch storage database detail from node admin plane"
            );
            Err(map_registry_err(&err))
        }
    }
}

// -----------------------------------------------------------------------------
// Dev-only App Playground
// -----------------------------------------------------------------------------

fn playground_enabled(state: &Arc<AppState>) -> bool {
    state.config.ui.dev.enable_app_playground
}

fn ensure_playground_enabled(state: &Arc<AppState>) -> Result<(), StatusCode> {
    if playground_enabled(state) {
        Ok(())
    } else {
        Err(StatusCode::NOT_FOUND)
    }
}

#[derive(Debug, Clone, serde::Serialize)]
#[serde(rename_all = "camelCase")]
struct PlaygroundExampleDto {
    id: String,
    title: String,
    description: String,
    manifest_toml: String,
}

#[derive(Debug, serde::Deserialize)]
#[serde(rename_all = "camelCase")]
struct PlaygroundValidateManifestReq {
    manifest_toml: String,
}

#[derive(Debug, serde::Serialize)]
#[serde(rename_all = "camelCase")]
struct PlaygroundValidateManifestResp {
    ok: bool,
    errors: Vec<String>,
    warnings: Vec<String>,
    parsed: Option<serde_json::Value>,
}

async fn playground_examples(
    State(state): State<Arc<AppState>>,
) -> Result<Json<Vec<PlaygroundExampleDto>>, StatusCode> {
    ensure_playground_enabled(&state)?;

    let examples = vec![
        PlaygroundExampleDto {
            id: "hello-world".to_string(),
            title: "Hello World Facet".to_string(),
            description: "Minimal manifest with a single GET route.".to_string(),
            manifest_toml: r#"[package]
name = "hello-world"
version = "0.1.0"

[facet]
kind = "http"
description = "Hello world facet"

[routes]
"/hello" = { method = "GET", response = "Hello from RON-CORE" }
"#
            .to_string(),
        },
        PlaygroundExampleDto {
            id: "echo-json".to_string(),
            title: "Echo JSON Facet".to_string(),
            description: "Shows POST + JSON (validation only in playground MVP).".to_string(),
            manifest_toml: r#"[package]
name = "echo-json"
version = "0.1.0"

[facet]
kind = "http"
description = "Echo JSON payloads"

[routes]
"/echo" = { method = "POST", content_type = "application/json" }
"#
            .to_string(),
        },
    ];

    Ok(Json(examples))
}

async fn playground_validate_manifest(
    State(state): State<Arc<AppState>>,
    Json(body): Json<PlaygroundValidateManifestReq>,
) -> Result<Json<PlaygroundValidateManifestResp>, StatusCode> {
    ensure_playground_enabled(&state)?;

    let mut errors: Vec<String> = Vec::new();
    let mut warnings: Vec<String> = Vec::new();

    let parsed_toml: Option<toml::Value> = match toml::from_str::<toml::Value>(&body.manifest_toml)
    {
        Ok(v) => Some(v),
        Err(e) => {
            errors.push(format!("TOML parse error: {e}"));
            None
        }
    };

    let parsed_json = if let Some(v) = &parsed_toml {
        match serde_json::to_value(v) {
            Ok(j) => Some(j),
            Err(e) => {
                errors.push(format!("Could not convert parsed TOML to JSON: {e}"));
                None
            }
        }
    } else {
        None
    };

    if let Some(v) = parsed_toml {
        let pkg = v.get("package").and_then(|x| x.as_table());

        let pkg_name_ok = pkg
            .and_then(|t| t.get("name"))
            .and_then(|x| x.as_str())
            .map(|s| !s.trim().is_empty())
            .unwrap_or(false);

        let pkg_ver_ok = pkg
            .and_then(|t| t.get("version"))
            .and_then(|x| x.as_str())
            .map(|s| !s.trim().is_empty())
            .unwrap_or(false);

        if !pkg_name_ok {
            errors.push("Missing required [package].name".to_string());
        }
        if !pkg_ver_ok {
            errors.push("Missing required [package].version".to_string());
        }

        let has_routes = v.get("routes").and_then(|x| x.as_table()).is_some();
        if !has_routes {
            warnings.push("No [routes] table found (expected for HTTP facets).".to_string());
        }

        let has_facet = v.get("facet").and_then(|x| x.as_table()).is_some();
        if !has_facet {
            warnings.push("No [facet] table found (metadata recommended).".to_string());
        }
    }

    Ok(Json(PlaygroundValidateManifestResp {
        ok: errors.is_empty(),
        errors,
        warnings,
        parsed: parsed_json,
    }))
}

#[derive(Debug, serde::Deserialize)]
struct DebugCrashRequest {
    service: Option<String>,
}

async fn node_debug_crash(
    Path(id): Path<String>,
    State(state): State<Arc<AppState>>,
    Json(body): Json<DebugCrashRequest>,
) -> Result<Json<dto::node::NodeActionResponse>, StatusCode> {
    if !state.nodes.contains(&id) {
        tracing::info!(
            target: "svc_admin::audit",
            action = "debug_crash",
            node_id = %id,
            reason = "node_not_found",
            "debug crash rejected: unknown node id"
        );
        return Err(StatusCode::NOT_FOUND);
    }

    match state.nodes.debug_crash_node(&id, body.service).await {
        Ok(resp) => {
            tracing::info!(
                target: "svc_admin::audit",
                action = "debug_crash",
                node_id = %resp.node_id,
                "debug crash forwarded to node admin plane"
            );
            Ok(Json(resp))
        }
        Err(err) => {
            tracing::warn!(
                target: "svc_admin::audit",
                action = "debug_crash",
                node_id = %id,
                error = %err,
                "debug crash proxy failed"
            );
            Err(StatusCode::BAD_GATEWAY)
        }
    }
}

async fn node_reload(
    Path(id): Path<String>,
    State(state): State<Arc<AppState>>,
    headers: HeaderMap,
) -> Result<Json<dto::node::NodeActionResponse>, StatusCode> {
    if !state.config.actions.enable_reload {
        action_metrics::inc_rejection("disabled");
        tracing::warn!(
            target: "svc_admin::audit",
            action = "reload",
            node_id = %id,
            reason = "disabled",
            "node reload rejected: action disabled in config"
        );
        return Err(StatusCode::NOT_FOUND);
    }

    let identity = resolve_identity_node_or_unauth(&state, &headers, "reload", &id)?;

    let allowed = identity.roles.iter().any(|r| r == "admin" || r == "ops");
    if !allowed {
        action_metrics::inc_rejection("forbidden");
        tracing::warn!(
            target: "svc_admin::audit",
            action = "reload",
            node_id = %id,
            subject = %identity.subject,
            roles = ?identity.roles,
            "node reload rejected: forbidden (missing role)"
        );
        return Err(StatusCode::FORBIDDEN);
    }

    if !state.nodes.contains(&id) {
        action_metrics::inc_rejection("node_not_found");
        tracing::info!(
            target: "svc_admin::audit",
            action = "reload",
            node_id = %id,
            subject = %identity.subject,
            roles = ?identity.roles,
            "node reload rejected: unknown node id"
        );
        return Err(StatusCode::NOT_FOUND);
    }

    match state.nodes.reload_node(&id).await {
        Ok(resp) => {
            tracing::info!(
                target: "svc_admin::audit",
                action = "reload",
                node_id = %resp.node_id,
                subject = %identity.subject,
                roles = ?identity.roles,
                "node reload requested"
            );
            Ok(Json(resp))
        }
        Err(err) => {
            action_metrics::inc_rejection("upstream_error");
            tracing::warn!(
                target: "svc_admin::audit",
                action = "reload",
                node_id = %id,
                subject = %identity.subject,
                roles = ?identity.roles,
                error = %err,
                "node reload failed"
            );
            Err(StatusCode::BAD_GATEWAY)
        }
    }
}

async fn node_shutdown(
    Path(id): Path<String>,
    State(state): State<Arc<AppState>>,
    headers: HeaderMap,
) -> Result<Json<dto::node::NodeActionResponse>, StatusCode> {
    if !state.config.actions.enable_shutdown {
        action_metrics::inc_rejection("disabled");
        tracing::warn!(
            target: "svc_admin::audit",
            action = "shutdown",
            node_id = %id,
            reason = "disabled",
            "node shutdown rejected: action disabled in config"
        );
        return Err(StatusCode::NOT_FOUND);
    }

    let identity = resolve_identity_node_or_unauth(&state, &headers, "shutdown", &id)?;

    let allowed = identity.roles.iter().any(|r| r == "admin");
    if !allowed {
        action_metrics::inc_rejection("forbidden");
        tracing::warn!(
            target: "svc_admin::audit",
            action = "shutdown",
            node_id = %id,
            subject = %identity.subject,
            roles = ?identity.roles,
            "node shutdown rejected: forbidden (missing role)"
        );
        return Err(StatusCode::FORBIDDEN);
    }

    if !state.nodes.contains(&id) {
        action_metrics::inc_rejection("node_not_found");
        tracing::info!(
            target: "svc_admin::audit",
            action = "shutdown",
            node_id = %id,
            subject = %identity.subject,
            roles = ?identity.roles,
            "node shutdown rejected: unknown node id"
        );
        return Err(StatusCode::NOT_FOUND);
    }

    match state.nodes.shutdown_node(&id).await {
        Ok(resp) => {
            tracing::info!(
                target: "svc_admin::audit",
                action = "shutdown",
                node_id = %resp.node_id,
                subject = %identity.subject,
                roles = ?identity.roles,
                "node shutdown requested"
            );
            Ok(Json(resp))
        }
        Err(err) => {
            action_metrics::inc_rejection("upstream_error");
            tracing::warn!(
                target: "svc_admin::audit",
                action = "shutdown",
                node_id = %id,
                subject = %identity.subject,
                roles = ?identity.roles,
                error = %err,
                "node shutdown failed"
            );
            Err(StatusCode::BAD_GATEWAY)
        }
    }
}

```

### crates/svc-admin/src/server.rs
<a id="crates-svc-admin-src-server-rs"></a>

```rust
// crates/svc-admin/src/server.rs

//! Server bootstrap for svc-admin.

use crate::{
    config::Config,
    metrics::{
        prometheus_bridge,
        sampler::{self, NodeMetricsTarget},
    },
    observability,
    router,
    state::AppState,
};
use anyhow::Result;
use std::sync::Arc;
use tokio::{
    net::TcpListener,
    signal,
    sync::watch,
};

/// Run svc-admin with the given config.
pub async fn run(config: Config) -> Result<()> {
    observability::init_tracing();

    // Initialize static metrics derived from config.
    prometheus_bridge::init_node_inventory_metrics(&config);

    let state = Arc::new(AppState::new(config.clone()));

    // Spawn background facet samplers for any configured nodes.
    //
    // These will:
    // - scrape `<base_url>/metrics` on each node
    // - aggregate facet counters into `state.facet_metrics`
    // - exit promptly when the shutdown channel is tripped
    let sampler_shutdown_tx = spawn_facet_samplers(&config, &state);

    let app = router::build_router(state.clone());

    // We validated these addresses during config load.
    let ui_bind_addr = &config.server.bind_addr;
    let metrics_bind_addr = &config.server.metrics_addr;

    let main_listener = TcpListener::bind(ui_bind_addr).await?;
    let metrics_listener = TcpListener::bind(metrics_bind_addr).await?;

    tracing::info!(
        bind_addr = %ui_bind_addr,
        "svc-admin listening for UI/API",
    );
    tracing::info!(
        bind_addr = %metrics_bind_addr,
        "svc-admin listening for health/metrics",
    );

    // For now we run the metrics/health server as a simple background task.
    // If we want full graceful shutdown here as well, we can add a separate
    // shutdown future, but Ctrl+C will terminate the process either way.
    let metrics_app = app.clone();
    let metrics_task = tokio::spawn(async move {
        if let Err(err) = axum::serve(metrics_listener, metrics_app).await {
            tracing::error!(error = ?err, "metrics/health server error");
        }
    });

    // Main UI/API server with graceful shutdown.
    let shutdown = shutdown_signal(sampler_shutdown_tx);
    let main_task = axum::serve(main_listener, app)
        .with_graceful_shutdown(shutdown);

    tokio::select! {
        res = main_task => {
            if let Err(err) = res {
                tracing::error!(error = ?err, "main server error");
            }
        }
        _ = metrics_task => {
            tracing::warn!("metrics/health task exited");
        }
    }

    Ok(())
}

/// Build `NodeMetricsTarget`s from config and spawn facet samplers.
///
/// Returns a shutdown sender that can be used to stop all samplers.
fn spawn_facet_samplers(
    config: &Config,
    state: &Arc<AppState>,
) -> watch::Sender<bool> {
    // Channel used to broadcast shutdown to all sampler tasks.
    let (shutdown_tx, shutdown_rx) = watch::channel(false);

    // Derive one metrics target per configured node.
    let mut targets = Vec::new();
    for (id, node_cfg) in &config.nodes {
        let base = node_cfg.base_url.trim_end_matches('/');

        // For now we assume each node exposes a Prometheus text endpoint at `/metrics`.
        let metrics_url = format!("{base}/metrics");

        targets.push(NodeMetricsTarget {
            node_id: id.clone(),
            metrics_url,
            timeout: node_cfg.default_timeout,
        });
    }

    if targets.is_empty() {
        tracing::info!("no nodes configured; facet sampler pool will remain empty");
        return shutdown_tx;
    }

    let facet_metrics = state.facet_metrics.clone();
    let interval = config.polling.metrics_interval;

    tracing::info!(
        node_count = targets.len(),
        interval_secs = ?interval.as_secs(),
        "spawning facet metrics samplers for configured nodes",
    );

    // Spawn one sampler task per node. We intentionally do not track the
    // JoinHandles yet; they are long-lived background tasks whose lifetime
    // is bound to the process. In a future slice we can add explicit
    // supervision and restart logic if needed.
    let _handles = sampler::spawn_samplers(targets, interval, facet_metrics, shutdown_rx);

    shutdown_tx
}

/// Shutdown future used by Axum to drain the main server.
///
/// This waits for Ctrl+C and then:
/// - logs that we're shutting down
/// - signals all sampler tasks to exit by sending `true` on the watch channel
async fn shutdown_signal(sampler_shutdown_tx: watch::Sender<bool>) {
    if let Err(err) = signal::ctrl_c().await {
        tracing::error!(error = ?err, "failed to install Ctrl+C handler");
        return;
    }

    tracing::info!("shutdown signal received, draining svc-admin");

    if let Err(err) = sampler_shutdown_tx.send(true) {
        tracing::warn!(
            error = ?err,
            "failed to send shutdown signal to facet samplers (receiver dropped?)"
        );
    }
}

```

### crates/svc-admin/src/state.rs
<a id="crates-svc-admin-src-state-rs"></a>

```rust
use crate::config::Config;
use crate::metrics::facet::FacetMetrics;
use crate::nodes::registry::NodeRegistry;

/// Shared application state for svc-admin.
///
/// This gets wrapped in an Arc and shared with all HTTP handlers.
#[derive(Clone)]
pub struct AppState {
    /// Static/slow-changing config for svc-admin itself.
    pub config: Config,

    /// Registry of known nodes + their admin plane connection info.
    pub nodes: NodeRegistry,

    /// Short-horizon facet metrics store populated by background samplers.
    ///
    /// This is intentionally in-memory only and bounded by
    /// `config.polling.metrics_window`.
    pub facet_metrics: FacetMetrics,
}

impl AppState {
    /// Construct application state from config.
    ///
    /// This is the single entry point used by `server::run` when wiring
    /// the Axum router.
    pub fn new(config: Config) -> Self {
        let registry = NodeRegistry::new(&config.nodes);

        // Use the configured rolling window for facet metrics.
        let facet_window = config.polling.metrics_window;
        let facet_metrics = FacetMetrics::new(facet_window);

        Self {
            config,
            nodes: registry,
            facet_metrics,
        }
    }
}

```

### crates/svc-admin/tests/auth_me_http.rs
<a id="crates-svc-admin-tests-authmehttp-rs"></a>

```rust
// crates/svc-admin/tests/auth_me_http.rs

use std::time::Duration;

use reqwest::Client;
use svc_admin::{config::Config, server};
use tokio::task::JoinHandle;

/// Spin up svc-admin with the given config, wait for /healthz on the
/// metrics port to pass, and return a join handle plus the base UI URL.
async fn spawn_svc_admin(config: Config) -> (JoinHandle<()>, String) {
    let ui_addr = config.server.bind_addr.clone();
    let metrics_addr = config.server.metrics_addr.clone();

    let handle = tokio::spawn(async move {
        // If this panics, the test should fail loudly.
        server::run(config).await.expect("svc-admin server exited with error");
    });

    wait_for_healthz(&metrics_addr).await;

    (handle, format!("http://{}", ui_addr))
}

async fn wait_for_healthz(metrics_addr: &str) {
    let client = Client::new();
    let url = format!("http://{}/healthz", metrics_addr);

    for _ in 0..50 {
        match client.get(&url).send().await {
            Ok(resp) if resp.status().is_success() => return,
            _ => {
                tokio::time::sleep(Duration::from_millis(100)).await;
            }
        }
    }

    panic!("svc-admin /healthz did not become ready on {}", metrics_addr);
}

#[tokio::test]
async fn me_returns_dev_identity_in_none_mode() {
    // Start from the crate's default config so we inherit all the right
    // defaults (nodes, polling, etc.) and only tweak what we need.
    let mut config = Config::default();
    config.server.bind_addr = "127.0.0.1:5400".to_string();
    config.server.metrics_addr = "127.0.0.1:5410".to_string();
    config.auth.mode = "none".to_string();

    let (handle, base_url) = spawn_svc_admin(config).await;
    let client = Client::new();

    let resp = client
        .get(format!("{}/api/me", base_url))
        .send()
        .await
        .expect("request to /api/me failed");

    assert!(
        resp.status().is_success(),
        "expected 2xx from /api/me in none mode, got {}",
        resp.status()
    );

    let body: serde_json::Value = resp
        .json()
        .await
        .expect("failed to deserialize /api/me body as JSON");

    // Shape is defined by dto::me::MeResponse (camelCase via serde).
    assert_eq!(body["subject"], "dev-operator");
    assert_eq!(body["displayName"], "Dev Operator");
    assert_eq!(body["authMode"], "none");

    let roles = body["roles"]
        .as_array()
        .expect("roles should be an array");
    assert!(
        roles.iter().any(|r| r == "admin"),
        "roles should contain 'admin', got {:?}",
        roles
    );

    // In none mode we expect no login URL (serialized as JSON null).
    assert!(
        body["loginUrl"].is_null(),
        "loginUrl should be null in none mode, got {:?}",
        body["loginUrl"]
    );

    // We don't care about the metrics sampler loop for this test, so just
    // tear down the server task.
    handle.abort();
}

#[tokio::test]
async fn me_uses_ingress_headers_when_mode_is_ingress() {
    let mut config = Config::default();
    // Use different ports from the previous test to avoid any flakiness
    // around port reuse if the OS keeps them in TIME_WAIT briefly.
    config.server.bind_addr = "127.0.0.1:5401".to_string();
    config.server.metrics_addr = "127.0.0.1:5411".to_string();
    config.auth.mode = "ingress".to_string();

    let (handle, base_url) = spawn_svc_admin(config).await;
    let client = Client::new();

    // These header names follow the ingress backend defaults (X-User / X-Groups).
    let resp = client
        .get(format!("{}/api/me", base_url))
        .header("X-User", "alice@example.com")
        .header("X-Groups", "admin,ops")
        .send()
        .await
        .expect("request to /api/me failed");

    assert!(
        resp.status().is_success(),
        "expected 2xx from /api/me in ingress mode, got {}",
        resp.status()
    );

    let body: serde_json::Value = resp
        .json()
        .await
        .expect("failed to deserialize /api/me body as JSON");

    assert_eq!(body["subject"], "alice@example.com");
    assert_eq!(body["displayName"], "alice@example.com");
    assert_eq!(body["authMode"], "ingress");

    let roles = body["roles"]
        .as_array()
        .expect("roles should be an array");
    assert_eq!(roles.len(), 2, "expected exactly 2 roles, got {:?}", roles);
    assert!(
        roles.iter().any(|r| r == "admin"),
        "roles should contain 'admin', got {:?}",
        roles
    );
    assert!(
        roles.iter().any(|r| r == "ops"),
        "roles should contain 'ops', got {:?}",
        roles
    );

    // In ingress mode we still don't expect a loginUrl from svc-admin itself;
    // the upstream ingress is responsible for auth flows.
    assert!(
        body["loginUrl"].is_null(),
        "loginUrl should be null in ingress mode, got {:?}",
        body["loginUrl"]
    );

    handle.abort();
}

```

### crates/svc-admin/tests/config_env.rs
<a id="crates-svc-admin-tests-configenv-rs"></a>

```rust
// crates/svc-admin/tests/config_env.rs
//
// WHAT: Small sanity tests around Config::load() and env overrides.
// WHY: Ensures our env-driven config loader is wired correctly without
//      pulling in the whole server stack.
//
// NOTES:
// - Tests mutate process env; we keep everything in a single test and
//   clean up at the end to avoid surprises for other tests.

use std::env;
use svc_admin::config::Config;

#[test]
fn env_overrides_are_respected() {
    // Make sure file-based config guardrail does not trip.
    env::remove_var("SVC_ADMIN_CONFIG");

    // --- First load: bind_addr + legacy UI theme var -----------------------

    env::set_var("SVC_ADMIN_BIND_ADDR", "127.0.0.1:7777");
    env::set_var("SVC_ADMIN_UI_DEFAULT_THEME", "dark");

    let cfg = Config::load().expect("Config::load() with env overrides should succeed");

    // bind_addr should reflect the env override.
    assert_eq!(
        cfg.server.bind_addr,
        "127.0.0.1:7777",
        "bind_addr must honor SVC_ADMIN_BIND_ADDR"
    );

    // default_theme should use the legacy/default theme env key.
    assert_eq!(
        cfg.ui.default_theme,
        "dark",
        "default_theme must honor SVC_ADMIN_UI_DEFAULT_THEME"
    );

    // --- Second load: new UI theme var should take precedence -------------

    // Clear the legacy theme var and set the new one.
    env::remove_var("SVC_ADMIN_UI_DEFAULT_THEME");
    env::set_var("SVC_ADMIN_UI_THEME", "neon");

    let cfg2 = Config::load().expect("Config::load() with SVC_ADMIN_UI_THEME should succeed");

    assert_eq!(
        cfg2.ui.default_theme,
        "neon",
        "default_theme must honor SVC_ADMIN_UI_THEME when set"
    );

    // --- Cleanup -----------------------------------------------------------

    env::remove_var("SVC_ADMIN_BIND_ADDR");
    env::remove_var("SVC_ADMIN_UI_DEFAULT_THEME");
    env::remove_var("SVC_ADMIN_UI_THEME");
}

```

### crates/svc-admin/tests/fake_node.rs
<a id="crates-svc-admin-tests-fakenode-rs"></a>

```rust
// crates/svc-admin/tests/fake_node.rs
//
// WHAT: Integration tests for NodeRegistry + NodeClient against a fake node.
// WHY: Validates that svc-admin can successfully fan out to a node's
//      /api/v1/status endpoint and normalize it into AdminStatusView.
// INTERACTS: crate::config::{NodeCfg, NodesCfg}, crate::nodes::registry::NodeRegistry,
//            Axum router (test-only), reqwest (via NodeClient).
// INVARIANTS:
//   - Tests must not rely on hard-coded ports; they bind 127.0.0.1:0.
//   - Fake node schema matches the minimal RawStatus shape expected by
//     NodeClient (profile, version, planes[*]).
//   - Tests are self-contained and do not require a running macronode.

use axum::{routing::get, Json, Router};
use serde::Serialize;
use std::net::SocketAddr;
use std::time::Duration;
use svc_admin::config::{NodeCfg, NodesCfg};
use svc_admin::nodes::registry::NodeRegistry;
use tokio::net::TcpListener;
use tokio::task::JoinHandle;

/// Shape of the fake node's `/api/v1/status` response.
///
/// This intentionally matches the fields consumed by NodeClient's RawStatus.
#[derive(Debug, Serialize)]
struct FakePlane {
    name: String,
    health: String,
    ready: bool,
    restart_count: u64,
}

#[derive(Debug, Serialize)]
struct FakeStatus {
    profile: String,
    version: String,
    planes: Vec<FakePlane>,
}

/// Axum handler for `/api/v1/status` on the fake node.
async fn fake_status() -> Json<FakeStatus> {
    Json(FakeStatus {
        profile: "macronode".to_string(),
        version: "1.2.3-test".to_string(),
        planes: vec![FakePlane {
            name: "gateway".to_string(),
            health: "ok".to_string(),
            ready: true,
            restart_count: 1,
        }],
    })
}

/// Spawn a fake node admin-plane HTTP server on 127.0.0.1:0.
///
/// Returns the bound SocketAddr and a JoinHandle for the server task.
async fn spawn_fake_node() -> (SocketAddr, JoinHandle<()>) {
    let app = Router::new().route("/api/v1/status", get(fake_status));

    let listener = TcpListener::bind("127.0.0.1:0")
        .await
        .expect("bind fake node");
    let addr = listener
        .local_addr()
        .expect("get fake node local address");

    let handle = tokio::spawn(async move {
        if let Err(err) = axum::serve(listener, app).await {
            eprintln!("fake node server error: {err}");
        }
    });

    (addr, handle)
}

#[tokio::test]
async fn node_registry_returns_real_status_from_fake_node() {
    let (addr, _handle) = spawn_fake_node().await;

    // Build a NodesCfg with a single fake node pointing at our ephemeral addr.
    let mut nodes = NodesCfg::new();
    nodes.insert(
        "fake-node".into(),
        NodeCfg {
            base_url: format!("http://{}", addr),
            display_name: Some("Fake Node".into()),
            environment: "test".into(),
            insecure_http: true,

            // New fields added in Config v2:
            forced_profile: Some("macronode".into()),
            macaroon_path: None,
            default_timeout: Some(Duration::from_secs(2)),
        },
    );

    let registry = NodeRegistry::new(&nodes);

    let status = registry
        .get_status("fake-node")
        .await
        .expect("node status should exist");

    assert_eq!(status.id, "fake-node");
    assert_eq!(status.display_name, "Fake Node");
    assert_eq!(status.profile.as_deref(), Some("macronode"));
    assert_eq!(status.version.as_deref(), Some("1.2.3-test"));

    assert_eq!(status.planes.len(), 1);
    let plane = &status.planes[0];
    assert_eq!(plane.name, "gateway");
    assert_eq!(plane.health, "ok");
    assert!(plane.ready);
    assert_eq!(plane.restart_count, 1);
}

```

### crates/svc-admin/tests/http_smoke.rs
<a id="crates-svc-admin-tests-httpsmoke-rs"></a>

```rust
// crates/svc-admin/tests/http_smoke.rs

use std::collections::BTreeMap;
use std::time::Duration;

use reqwest::Client;
use svc_admin::config::{
    ActionsCfg, AuthCfg, Config, LogCfg, NodeCfg, NodesCfg, PollingCfg,
    ServerCfg, TlsCfg, UiCfg, UiDevCfg,
};
use svc_admin::server;

#[tokio::test]
async fn healthz_and_metrics_smoke() {
    // Build a minimal but explicit config so we don't depend on env.
    let server = ServerCfg {
        bind_addr: "127.0.0.1:5300".to_string(),
        metrics_addr: "127.0.0.1:5310".to_string(),
        max_conns: 128,
        read_timeout: Duration::from_secs(5),
        write_timeout: Duration::from_secs(5),
        idle_timeout: Duration::from_secs(60),
        tls: TlsCfg::default(),
    };

    let auth = AuthCfg::default();

    let ui = UiCfg {
        default_theme: "light".to_string(),
        default_language: "en-US".to_string(),
        read_only: true,
        dev: UiDevCfg::default(),
    };

    let mut nodes: NodesCfg = BTreeMap::new();
    nodes.insert(
        "example-node".to_string(),
        NodeCfg {
            base_url: "http://127.0.0.1:9000".to_string(),
            display_name: Some("Example Node".to_string()),
            environment: "dev".to_string(),
            insecure_http: true,
            forced_profile: Some("macronode".to_string()),
            macaroon_path: None,
            default_timeout: Some(Duration::from_secs(2)),
        },
    );

    let cfg = Config {
        server,
        auth,
        ui,
        nodes,
        polling: PollingCfg::default(),
        log: LogCfg::default(),
        actions: ActionsCfg::default(),
    };

    // Spawn svc-admin in the background.
    let _handle = tokio::spawn(server::run(cfg));

    // Give it a moment to bind listeners. If this flakes later we can
    // replace it with a proper readiness probe.
    tokio::time::sleep(Duration::from_millis(250)).await;

    let client = Client::new();

    // /healthz on metrics port
    let health = client
        .get("http://127.0.0.1:5310/healthz")
        .send()
        .await
        .expect("healthz request should succeed");
    assert!(health.status().is_success());
    let body = health.text().await.expect("healthz body must be text");
    assert_eq!(body, "ok");

    // /metrics on metrics port
    let metrics = client
        .get("http://127.0.0.1:5310/metrics")
        .send()
        .await
        .expect("metrics request should succeed");
    assert!(metrics.status().is_success());
    let metrics_body = metrics
        .text()
        .await
        .expect("metrics body must be text");

    // Sanity checks: we should see our node inventory gauges.
    assert!(
        metrics_body.contains("ron_svc_admin_nodes_total"),
        "metrics output should contain ron_svc_admin_nodes_total\n{}",
        metrics_body
    );
    assert!(
        metrics_body.contains("ron_svc_admin_nodes_by_env"),
        "metrics output should contain ron_svc_admin_nodes_by_env\n{}",
        metrics_body
    );
}

```

### crates/svc-admin/ui/dist/assets/index-ByM1dBcT.css
<a id="crates-svc-admin-ui-dist-assets-index-ByM1dBcT-css"></a>

```css
*,*:before,*:after{box-sizing:border-box}:root{color-scheme:light dark;--svc-admin-font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;--svc-admin-color-bg: #f8fafc;--svc-admin-color-bg-elevated: #ffffff;--svc-admin-color-border-subtle: #e2e8f0;--svc-admin-color-text: #0f172a;--svc-admin-color-text-muted: #64748b;--svc-admin-color-accent: #6366f1;--svc-admin-color-accent-soft: rgba(99, 102, 241, .08);--svc-admin-color-danger-soft: #fee2e2;--svc-admin-color-danger-border: #fecaca;--svc-admin-color-danger-text: #991b1b;--svc-admin-radius-md: 10px;--svc-admin-radius-lg: 14px;--svc-admin-shadow-soft: 0 10px 30px rgba(15, 23, 42, .12)}[data-theme=dark]{--svc-admin-color-bg: #020617;--svc-admin-color-bg-elevated: #020617;--svc-admin-color-border-subtle: #1f2937;--svc-admin-color-text: #e5e7eb;--svc-admin-color-text-muted: #9ca3af;--svc-admin-color-accent: #818cf8;--svc-admin-color-accent-soft: rgba(129, 140, 248, .16);--svc-admin-color-danger-soft: #451717;--svc-admin-color-danger-border: #7f1d1d;--svc-admin-color-danger-text: #fecaca}html,body{margin:0;padding:0;height:100%}body{font-family:var(--svc-admin-font-family);background-color:var(--svc-admin-color-bg);color:var(--svc-admin-color-text)}.svc-admin-shell{display:flex;min-height:100vh;background-color:var(--svc-admin-color-bg)}.svc-admin-sidebar{width:240px;padding:1.5rem 1.25rem;background-color:var(--svc-admin-color-bg-elevated);border-right:1px solid var(--svc-admin-color-border-subtle);display:flex;flex-direction:column;gap:1.5rem}.svc-admin-sidebar h2{margin:0;font-size:1.1rem;letter-spacing:.04em}.svc-admin-sidebar nav ul{list-style:none;margin:0;padding:0}.svc-admin-sidebar nav li{margin-bottom:.4rem}.svc-admin-sidebar a{text-decoration:none;color:var(--svc-admin-color-text-muted);font-size:.95rem}.svc-admin-sidebar a:hover{color:var(--svc-admin-color-accent)}.svc-admin-main{flex:1;min-width:0;display:flex;flex-direction:column}.svc-admin-topbar{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1.5rem;background-color:var(--svc-admin-color-bg-elevated);border-bottom:1px solid var(--svc-admin-color-border-subtle)}.svc-admin-topbar-left span{font-weight:500}.svc-admin-topbar-right{display:flex;align-items:center;gap:.75rem}.svc-admin-topbar-right select,.svc-admin-topbar-right button{font:inherit;border-radius:999px;border:1px solid var(--svc-admin-color-border-subtle);background-color:transparent;padding:.35rem .85rem;cursor:pointer}.svc-admin-topbar-right button:hover,.svc-admin-topbar-right select:hover{border-color:var(--svc-admin-color-accent)}.svc-admin-main main{flex:1;min-width:0;padding:1.5rem}.svc-admin-node-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1rem;align-items:stretch}.svc-admin-node-card{background-color:var(--svc-admin-color-bg-elevated);border-radius:var(--svc-admin-radius-lg);border:1px solid var(--svc-admin-color-border-subtle);padding:1rem 1.25rem;box-shadow:var(--svc-admin-shadow-soft);transition:border-color .16s ease-out,box-shadow .16s ease-out,transform .16s ease-out}.svc-admin-node-card:hover{border-color:var(--svc-admin-color-accent);box-shadow:0 14px 40px #0f172a33;transform:translateY(-1px)}.svc-admin-metric-chart{background-color:var(--svc-admin-color-bg-elevated);border-radius:var(--svc-admin-radius-lg);border:1px solid var(--svc-admin-color-border-subtle);padding:1rem 1.25rem;margin-top:1rem}.svc-admin-empty-state{padding:1.25rem;border-radius:var(--svc-admin-radius-md);border:1px dashed var(--svc-admin-color-border-subtle);color:var(--svc-admin-color-text-muted);text-align:center;font-size:.95rem}.svc-admin-error-banner{padding:.75rem 1rem;border-radius:var(--svc-admin-radius-md);background-color:var(--svc-admin-color-danger-soft);border:1px solid var(--svc-admin-color-danger-border);color:var(--svc-admin-color-danger-text);font-size:.9rem;margin-bottom:1rem}

```

### crates/svc-admin/ui/dist/assets/index-D-C-b-5N.js
<a id="crates-svc-admin-ui-dist-assets-index-D-C-b-5N-js"></a>

```javascript
function Od(u,a){for(var s=0;s<a.length;s++){const f=a[s];if(typeof f!="string"&&!Array.isArray(f)){for(const m in f)if(m!=="default"&&!(m in u)){const w=Object.getOwnPropertyDescriptor(f,m);w&&Object.defineProperty(u,m,w.get?w:{enumerable:!0,get:()=>f[m]})}}}return Object.freeze(Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))f(m);new MutationObserver(m=>{for(const w of m)if(w.type==="childList")for(const S of w.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&f(S)}).observe(document,{childList:!0,subtree:!0});function s(m){const w={};return m.integrity&&(w.integrity=m.integrity),m.referrerPolicy&&(w.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?w.credentials="include":m.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function f(m){if(m.ep)return;m.ep=!0;const w=s(m);fetch(m.href,w)}})();function gc(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var $o={exports:{}},jr={},Ho={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za;function Id(){if(Za)return G;Za=1;var u=Symbol.for("react.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),L=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),z=Symbol.iterator;function $(v){return v===null||typeof v!="object"?null:(v=z&&v[z]||v["@@iterator"],typeof v=="function"?v:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,U={};function M(v,N,X){this.props=v,this.context=N,this.refs=U,this.updater=X||q}M.prototype.isReactComponent={},M.prototype.setState=function(v,N){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,N,"setState")},M.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function b(){}b.prototype=M.prototype;function te(v,N,X){this.props=v,this.context=N,this.refs=U,this.updater=X||q}var J=te.prototype=new b;J.constructor=te,Y(J,M.prototype),J.isPureReactComponent=!0;var ie=Array.isArray,ye=Object.prototype.hasOwnProperty,_e={current:null},Ee={key:!0,ref:!0,__self:!0,__source:!0};function De(v,N,X){var Z,ne={},re=null,se=null;if(N!=null)for(Z in N.ref!==void 0&&(se=N.ref),N.key!==void 0&&(re=""+N.key),N)ye.call(N,Z)&&!Ee.hasOwnProperty(Z)&&(ne[Z]=N[Z]);var oe=arguments.length-2;if(oe===1)ne.children=X;else if(1<oe){for(var pe=Array(oe),Je=0;Je<oe;Je++)pe[Je]=arguments[Je+2];ne.children=pe}if(v&&v.defaultProps)for(Z in oe=v.defaultProps,oe)ne[Z]===void 0&&(ne[Z]=oe[Z]);return{$$typeof:u,type:v,key:re,ref:se,props:ne,_owner:_e.current}}function at(v,N){return{$$typeof:u,type:v.type,key:N,ref:v.ref,props:v.props,_owner:v._owner}}function tt(v){return typeof v=="object"&&v!==null&&v.$$typeof===u}function gt(v){var N={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(X){return N[X]})}var We=/\/+/g;function ze(v,N){return typeof v=="object"&&v!==null&&v.key!=null?gt(""+v.key):N.toString(36)}function Ge(v,N,X,Z,ne){var re=typeof v;(re==="undefined"||re==="boolean")&&(v=null);var se=!1;if(v===null)se=!0;else switch(re){case"string":case"number":se=!0;break;case"object":switch(v.$$typeof){case u:case a:se=!0}}if(se)return se=v,ne=ne(se),v=Z===""?"."+ze(se,0):Z,ie(ne)?(X="",v!=null&&(X=v.replace(We,"$&/")+"/"),Ge(ne,N,X,"",function(Je){return Je})):ne!=null&&(tt(ne)&&(ne=at(ne,X+(!ne.key||se&&se.key===ne.key?"":(""+ne.key).replace(We,"$&/")+"/")+v)),N.push(ne)),1;if(se=0,Z=Z===""?".":Z+":",ie(v))for(var oe=0;oe<v.length;oe++){re=v[oe];var pe=Z+ze(re,oe);se+=Ge(re,N,X,pe,ne)}else if(pe=$(v),typeof pe=="function")for(v=pe.call(v),oe=0;!(re=v.next()).done;)re=re.value,pe=Z+ze(re,oe++),se+=Ge(re,N,X,pe,ne);else if(re==="object")throw N=String(v),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return se}function Ve(v,N,X){if(v==null)return v;var Z=[],ne=0;return Ge(v,Z,"","",function(re){return N.call(X,re,ne++)}),Z}function Oe(v){if(v._status===-1){var N=v._result;N=N(),N.then(function(X){(v._status===0||v._status===-1)&&(v._status=1,v._result=X)},function(X){(v._status===0||v._status===-1)&&(v._status=2,v._result=X)}),v._status===-1&&(v._status=0,v._result=N)}if(v._status===1)return v._result.default;throw v._result}var ce={current:null},R={transition:null},F={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:R,ReactCurrentOwner:_e};function I(){throw Error("act(...) is not supported in production builds of React.")}return G.Children={map:Ve,forEach:function(v,N,X){Ve(v,function(){N.apply(this,arguments)},X)},count:function(v){var N=0;return Ve(v,function(){N++}),N},toArray:function(v){return Ve(v,function(N){return N})||[]},only:function(v){if(!tt(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},G.Component=M,G.Fragment=s,G.Profiler=m,G.PureComponent=te,G.StrictMode=f,G.Suspense=k,G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,G.act=I,G.cloneElement=function(v,N,X){if(v==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+v+".");var Z=Y({},v.props),ne=v.key,re=v.ref,se=v._owner;if(N!=null){if(N.ref!==void 0&&(re=N.ref,se=_e.current),N.key!==void 0&&(ne=""+N.key),v.type&&v.type.defaultProps)var oe=v.type.defaultProps;for(pe in N)ye.call(N,pe)&&!Ee.hasOwnProperty(pe)&&(Z[pe]=N[pe]===void 0&&oe!==void 0?oe[pe]:N[pe])}var pe=arguments.length-2;if(pe===1)Z.children=X;else if(1<pe){oe=Array(pe);for(var Je=0;Je<pe;Je++)oe[Je]=arguments[Je+2];Z.children=oe}return{$$typeof:u,type:v.type,key:ne,ref:re,props:Z,_owner:se}},G.createContext=function(v){return v={$$typeof:S,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},v.Provider={$$typeof:w,_context:v},v.Consumer=v},G.createElement=De,G.createFactory=function(v){var N=De.bind(null,v);return N.type=v,N},G.createRef=function(){return{current:null}},G.forwardRef=function(v){return{$$typeof:E,render:v}},G.isValidElement=tt,G.lazy=function(v){return{$$typeof:O,_payload:{_status:-1,_result:v},_init:Oe}},G.memo=function(v,N){return{$$typeof:L,type:v,compare:N===void 0?null:N}},G.startTransition=function(v){var N=R.transition;R.transition={};try{v()}finally{R.transition=N}},G.unstable_act=I,G.useCallback=function(v,N){return ce.current.useCallback(v,N)},G.useContext=function(v){return ce.current.useContext(v)},G.useDebugValue=function(){},G.useDeferredValue=function(v){return ce.current.useDeferredValue(v)},G.useEffect=function(v,N){return ce.current.useEffect(v,N)},G.useId=function(){return ce.current.useId()},G.useImperativeHandle=function(v,N,X){return ce.current.useImperativeHandle(v,N,X)},G.useInsertionEffect=function(v,N){return ce.current.useInsertionEffect(v,N)},G.useLayoutEffect=function(v,N){return ce.current.useLayoutEffect(v,N)},G.useMemo=function(v,N){return ce.current.useMemo(v,N)},G.useReducer=function(v,N,X){return ce.current.useReducer(v,N,X)},G.useRef=function(v){return ce.current.useRef(v)},G.useState=function(v){return ce.current.useState(v)},G.useSyncExternalStore=function(v,N,X){return ce.current.useSyncExternalStore(v,N,X)},G.useTransition=function(){return ce.current.useTransition()},G.version="18.3.1",G}var qa;function qo(){return qa||(qa=1,Ho.exports=Id()),Ho.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba;function Md(){if(ba)return jr;ba=1;var u=qo(),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,m=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function S(E,k,L){var O,z={},$=null,q=null;L!==void 0&&($=""+L),k.key!==void 0&&($=""+k.key),k.ref!==void 0&&(q=k.ref);for(O in k)f.call(k,O)&&!w.hasOwnProperty(O)&&(z[O]=k[O]);if(E&&E.defaultProps)for(O in k=E.defaultProps,k)z[O]===void 0&&(z[O]=k[O]);return{$$typeof:a,type:E,key:$,ref:q,props:z,_owner:m.current}}return jr.Fragment=s,jr.jsx=S,jr.jsxs=S,jr}var ec;function Fd(){return ec||(ec=1,$o.exports=Md()),$o.exports}var p=Fd(),j=qo();const bo=gc(j),Ud=Od({__proto__:null,default:bo},[j]);var Vl={},Qo={exports:{}},Xe={},Ko={exports:{}},Yo={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc;function Dd(){return tc||(tc=1,(function(u){function a(R,F){var I=R.length;R.push(F);e:for(;0<I;){var v=I-1>>>1,N=R[v];if(0<m(N,F))R[v]=F,R[I]=N,I=v;else break e}}function s(R){return R.length===0?null:R[0]}function f(R){if(R.length===0)return null;var F=R[0],I=R.pop();if(I!==F){R[0]=I;e:for(var v=0,N=R.length,X=N>>>1;v<X;){var Z=2*(v+1)-1,ne=R[Z],re=Z+1,se=R[re];if(0>m(ne,I))re<N&&0>m(se,ne)?(R[v]=se,R[re]=I,v=re):(R[v]=ne,R[Z]=I,v=Z);else if(re<N&&0>m(se,I))R[v]=se,R[re]=I,v=re;else break e}}return F}function m(R,F){var I=R.sortIndex-F.sortIndex;return I!==0?I:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;u.unstable_now=function(){return w.now()}}else{var S=Date,E=S.now();u.unstable_now=function(){return S.now()-E}}var k=[],L=[],O=1,z=null,$=3,q=!1,Y=!1,U=!1,M=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(R){for(var F=s(L);F!==null;){if(F.callback===null)f(L);else if(F.startTime<=R)f(L),F.sortIndex=F.expirationTime,a(k,F);else break;F=s(L)}}function ie(R){if(U=!1,J(R),!Y)if(s(k)!==null)Y=!0,Oe(ye);else{var F=s(L);F!==null&&ce(ie,F.startTime-R)}}function ye(R,F){Y=!1,U&&(U=!1,b(De),De=-1),q=!0;var I=$;try{for(J(F),z=s(k);z!==null&&(!(z.expirationTime>F)||R&&!gt());){var v=z.callback;if(typeof v=="function"){z.callback=null,$=z.priorityLevel;var N=v(z.expirationTime<=F);F=u.unstable_now(),typeof N=="function"?z.callback=N:z===s(k)&&f(k),J(F)}else f(k);z=s(k)}if(z!==null)var X=!0;else{var Z=s(L);Z!==null&&ce(ie,Z.startTime-F),X=!1}return X}finally{z=null,$=I,q=!1}}var _e=!1,Ee=null,De=-1,at=5,tt=-1;function gt(){return!(u.unstable_now()-tt<at)}function We(){if(Ee!==null){var R=u.unstable_now();tt=R;var F=!0;try{F=Ee(!0,R)}finally{F?ze():(_e=!1,Ee=null)}}else _e=!1}var ze;if(typeof te=="function")ze=function(){te(We)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,Ve=Ge.port2;Ge.port1.onmessage=We,ze=function(){Ve.postMessage(null)}}else ze=function(){M(We,0)};function Oe(R){Ee=R,_e||(_e=!0,ze())}function ce(R,F){De=M(function(){R(u.unstable_now())},F)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(R){R.callback=null},u.unstable_continueExecution=function(){Y||q||(Y=!0,Oe(ye))},u.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):at=0<R?Math.floor(1e3/R):5},u.unstable_getCurrentPriorityLevel=function(){return $},u.unstable_getFirstCallbackNode=function(){return s(k)},u.unstable_next=function(R){switch($){case 1:case 2:case 3:var F=3;break;default:F=$}var I=$;$=F;try{return R()}finally{$=I}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var I=$;$=R;try{return F()}finally{$=I}},u.unstable_scheduleCallback=function(R,F,I){var v=u.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?v+I:v):I=v,R){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=I+N,R={id:O++,callback:F,priorityLevel:R,startTime:I,expirationTime:N,sortIndex:-1},I>v?(R.sortIndex=I,a(L,R),s(k)===null&&R===s(L)&&(U?(b(De),De=-1):U=!0,ce(ie,I-v))):(R.sortIndex=N,a(k,R),Y||q||(Y=!0,Oe(ye))),R},u.unstable_shouldYield=gt,u.unstable_wrapCallback=function(R){var F=$;return function(){var I=$;$=F;try{return R.apply(this,arguments)}finally{$=I}}}})(Yo)),Yo}var nc;function Bd(){return nc||(nc=1,Ko.exports=Dd()),Ko.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rc;function Ad(){if(rc)return Xe;rc=1;var u=qo(),a=Bd();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,m={};function w(e,t){S(e,t),S(e+"Capture",t)}function S(e,t){for(m[e]=t,e=0;e<t.length;e++)f.add(t[e])}var E=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k=Object.prototype.hasOwnProperty,L=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O={},z={};function $(e){return k.call(z,e)?!0:k.call(O,e)?!1:L.test(e)?z[e]=!0:(O[e]=!0,!1)}function q(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Y(e,t,n,r){if(t===null||typeof t>"u"||q(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function U(e,t,n,r,l,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){M[e]=new U(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];M[t]=new U(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){M[e]=new U(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){M[e]=new U(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){M[e]=new U(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){M[e]=new U(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){M[e]=new U(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){M[e]=new U(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){M[e]=new U(e,5,!1,e.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function te(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(b,te);M[t]=new U(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(b,te);M[t]=new U(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(b,te);M[t]=new U(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){M[e]=new U(e,1,!1,e.toLowerCase(),null,!1,!1)}),M.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){M[e]=new U(e,1,!1,e.toLowerCase(),null,!0,!0)});function J(e,t,n,r){var l=M.hasOwnProperty(t)?M[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Y(t,n,l,r)&&(n=null),r||l===null?$(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ie=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ye=Symbol.for("react.element"),_e=Symbol.for("react.portal"),Ee=Symbol.for("react.fragment"),De=Symbol.for("react.strict_mode"),at=Symbol.for("react.profiler"),tt=Symbol.for("react.provider"),gt=Symbol.for("react.context"),We=Symbol.for("react.forward_ref"),ze=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),R=Symbol.iterator;function F(e){return e===null||typeof e!="object"?null:(e=R&&e[R]||e["@@iterator"],typeof e=="function"?e:null)}var I=Object.assign,v;function N(e){if(v===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);v=t&&t[1]||""}return`
`+v+e}var X=!1;function Z(e,t){if(!e||X)return"";X=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var r=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){r=x}e.call(t.prototype)}else{try{throw Error()}catch(x){r=x}e()}}catch(x){if(x&&r&&typeof x.stack=="string"){for(var l=x.stack.split(`
`),i=r.stack.split(`
`),o=l.length-1,c=i.length-1;1<=o&&0<=c&&l[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(l[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||l[o]!==i[c]){var d=`
`+l[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{X=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function ne(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1),e;case 11:return e=Z(e.type.render,!1),e;case 1:return e=Z(e.type,!0),e;default:return""}}function re(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ee:return"Fragment";case _e:return"Portal";case at:return"Profiler";case De:return"StrictMode";case ze:return"Suspense";case Ge:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gt:return(e.displayName||"Context")+".Consumer";case tt:return(e._context.displayName||"Context")+".Provider";case We:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ve:return t=e.displayName||null,t!==null?t:re(e.type)||"Memo";case Oe:t=e._payload,e=e._init;try{return re(e(t))}catch{}}return null}function se(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(t);case 8:return t===De?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function oe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Je(e){var t=pe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zr(e){e._valueTracker||(e._valueTracker=Je(e))}function ru(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=pe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Or(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Gl(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function lu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=oe(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function iu(e,t){t=t.checked,t!=null&&J(e,"checked",t,!1)}function Jl(e,t){iu(e,t);var n=oe(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Zl(e,t.type,oe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ou(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Zl(e,t,n){(t!=="number"||Or(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vn=Array.isArray;function mn(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+oe(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ql(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(s(92));if(Vn(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:oe(n)}}function su(e,t){var n=oe(t.value),r=oe(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function au(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ir,fu=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ir.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $n(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fc=["Webkit","ms","Moz","O"];Object.keys(Hn).forEach(function(e){Fc.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hn[t]=Hn[e]})});function du(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Hn.hasOwnProperty(e)&&Hn[e]?(""+t).trim():t+"px"}function pu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=du(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Uc=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ei(e,t){if(t){if(Uc[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function ti(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ni=null;function ri(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var li=null,vn=null,gn=null;function hu(e){if(e=dr(e)){if(typeof li!="function")throw Error(s(280));var t=e.stateNode;t&&(t=rl(t),li(e.stateNode,e.type,t))}}function mu(e){vn?gn?gn.push(e):gn=[e]:vn=e}function vu(){if(vn){var e=vn,t=gn;if(gn=vn=null,hu(e),t)for(e=0;e<t.length;e++)hu(t[e])}}function gu(e,t){return e(t)}function yu(){}var ii=!1;function wu(e,t,n){if(ii)return e(t,n);ii=!0;try{return gu(e,t,n)}finally{ii=!1,(vn!==null||gn!==null)&&(yu(),vu())}}function Qn(e,t){var n=e.stateNode;if(n===null)return null;var r=rl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var oi=!1;if(E)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){oi=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{oi=!1}function Dc(e,t,n,r,l,i,o,c,d){var x=Array.prototype.slice.call(arguments,3);try{t.apply(n,x)}catch(_){this.onError(_)}}var Yn=!1,Mr=null,Fr=!1,ui=null,Bc={onError:function(e){Yn=!0,Mr=e}};function Ac(e,t,n,r,l,i,o,c,d){Yn=!1,Mr=null,Dc.apply(Bc,arguments)}function Wc(e,t,n,r,l,i,o,c,d){if(Ac.apply(this,arguments),Yn){if(Yn){var x=Mr;Yn=!1,Mr=null}else throw Error(s(198));Fr||(Fr=!0,ui=x)}}function bt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Su(e){if(bt(e)!==e)throw Error(s(188))}function Vc(e){var t=e.alternate;if(!t){if(t=bt(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var i=l.alternate;if(i===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===n)return Su(l),e;if(i===r)return Su(l),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=l,r=i;else{for(var o=!1,c=l.child;c;){if(c===n){o=!0,n=l,r=i;break}if(c===r){o=!0,r=l,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=l;break}if(c===r){o=!0,r=i,n=l;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function ku(e){return e=Vc(e),e!==null?Eu(e):null}function Eu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Eu(e);if(t!==null)return t;e=e.sibling}return null}var Cu=a.unstable_scheduleCallback,Nu=a.unstable_cancelCallback,$c=a.unstable_shouldYield,Hc=a.unstable_requestPaint,we=a.unstable_now,Qc=a.unstable_getCurrentPriorityLevel,si=a.unstable_ImmediatePriority,_u=a.unstable_UserBlockingPriority,Ur=a.unstable_NormalPriority,Kc=a.unstable_LowPriority,ju=a.unstable_IdlePriority,Dr=null,yt=null;function Yc(e){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Dr,e,void 0,(e.current.flags&128)===128)}catch{}}var ct=Math.clz32?Math.clz32:Jc,Xc=Math.log,Gc=Math.LN2;function Jc(e){return e>>>=0,e===0?32:31-(Xc(e)/Gc|0)|0}var Br=64,Ar=4194304;function Xn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wr(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~l;c!==0?r=Xn(c):(i&=o,i!==0&&(r=Xn(i)))}else o=n&~l,o!==0?r=Xn(o):i!==0&&(r=Xn(i));if(r===0)return 0;if(t!==0&&t!==r&&(t&l)===0&&(l=r&-r,i=t&-t,l>=i||l===16&&(i&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ct(t),l=1<<n,r|=e[n],t&=~l;return r}function Zc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ct(i),c=1<<o,d=l[o];d===-1?((c&n)===0||(c&r)!==0)&&(l[o]=Zc(c,t)):d<=t&&(e.expiredLanes|=c),i&=~c}}function ai(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pu(){var e=Br;return Br<<=1,(Br&4194240)===0&&(Br=64),e}function ci(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gn(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ct(t),e[t]=n}function bc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-ct(n),i=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~i}}function fi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ct(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var ue=0;function Ru(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Lu,di,Tu,zu,Ou,pi=!1,Vr=[],Tt=null,zt=null,Ot=null,Jn=new Map,Zn=new Map,It=[],ef="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Iu(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Jn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zn.delete(t.pointerId)}}function qn(e,t,n,r,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[l]},t!==null&&(t=dr(t),t!==null&&di(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function tf(e,t,n,r,l){switch(t){case"focusin":return Tt=qn(Tt,e,t,n,r,l),!0;case"dragenter":return zt=qn(zt,e,t,n,r,l),!0;case"mouseover":return Ot=qn(Ot,e,t,n,r,l),!0;case"pointerover":var i=l.pointerId;return Jn.set(i,qn(Jn.get(i)||null,e,t,n,r,l)),!0;case"gotpointercapture":return i=l.pointerId,Zn.set(i,qn(Zn.get(i)||null,e,t,n,r,l)),!0}return!1}function Mu(e){var t=en(e.target);if(t!==null){var n=bt(t);if(n!==null){if(t=n.tag,t===13){if(t=xu(n),t!==null){e.blockedOn=t,Ou(e.priority,function(){Tu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $r(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ni=r,n.target.dispatchEvent(r),ni=null}else return t=dr(n),t!==null&&di(t),e.blockedOn=n,!1;t.shift()}return!0}function Fu(e,t,n){$r(e)&&n.delete(t)}function nf(){pi=!1,Tt!==null&&$r(Tt)&&(Tt=null),zt!==null&&$r(zt)&&(zt=null),Ot!==null&&$r(Ot)&&(Ot=null),Jn.forEach(Fu),Zn.forEach(Fu)}function bn(e,t){e.blockedOn===t&&(e.blockedOn=null,pi||(pi=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,nf)))}function er(e){function t(l){return bn(l,e)}if(0<Vr.length){bn(Vr[0],e);for(var n=1;n<Vr.length;n++){var r=Vr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Tt!==null&&bn(Tt,e),zt!==null&&bn(zt,e),Ot!==null&&bn(Ot,e),Jn.forEach(t),Zn.forEach(t),n=0;n<It.length;n++)r=It[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&(n=It[0],n.blockedOn===null);)Mu(n),n.blockedOn===null&&It.shift()}var yn=ie.ReactCurrentBatchConfig,Hr=!0;function rf(e,t,n,r){var l=ue,i=yn.transition;yn.transition=null;try{ue=1,hi(e,t,n,r)}finally{ue=l,yn.transition=i}}function lf(e,t,n,r){var l=ue,i=yn.transition;yn.transition=null;try{ue=4,hi(e,t,n,r)}finally{ue=l,yn.transition=i}}function hi(e,t,n,r){if(Hr){var l=mi(e,t,n,r);if(l===null)zi(e,t,r,Qr,n),Iu(e,r);else if(tf(l,e,t,n,r))r.stopPropagation();else if(Iu(e,r),t&4&&-1<ef.indexOf(e)){for(;l!==null;){var i=dr(l);if(i!==null&&Lu(i),i=mi(e,t,n,r),i===null&&zi(e,t,r,Qr,n),i===l)break;l=i}l!==null&&r.stopPropagation()}else zi(e,t,r,null,n)}}var Qr=null;function mi(e,t,n,r){if(Qr=null,e=ri(r),e=en(e),e!==null)if(t=bt(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qr=e,null}function Uu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qc()){case si:return 1;case _u:return 4;case Ur:case Kc:return 16;case ju:return 536870912;default:return 16}default:return 16}}var Mt=null,vi=null,Kr=null;function Du(){if(Kr)return Kr;var e,t=vi,n=t.length,r,l="value"in Mt?Mt.value:Mt.textContent,i=l.length;for(e=0;e<n&&t[e]===l[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===l[i-r];r++);return Kr=l.slice(e,1<r?1-r:void 0)}function Yr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xr(){return!0}function Bu(){return!1}function Ze(e){function t(n,r,l,i,o){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xr:Bu,this.isPropagationStopped=Bu,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),t}var wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gi=Ze(wn),tr=I({},wn,{view:0,detail:0}),of=Ze(tr),yi,wi,nr,Gr=I({},tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Si,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nr&&(nr&&e.type==="mousemove"?(yi=e.screenX-nr.screenX,wi=e.screenY-nr.screenY):wi=yi=0,nr=e),yi)},movementY:function(e){return"movementY"in e?e.movementY:wi}}),Au=Ze(Gr),uf=I({},Gr,{dataTransfer:0}),sf=Ze(uf),af=I({},tr,{relatedTarget:0}),xi=Ze(af),cf=I({},wn,{animationName:0,elapsedTime:0,pseudoElement:0}),ff=Ze(cf),df=I({},wn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pf=Ze(df),hf=I({},wn,{data:0}),Wu=Ze(hf),mf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gf[e])?!!t[e]:!1}function Si(){return yf}var wf=I({},tr,{key:function(e){if(e.key){var t=mf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Si,charCode:function(e){return e.type==="keypress"?Yr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xf=Ze(wf),Sf=I({},Gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vu=Ze(Sf),kf=I({},tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Si}),Ef=Ze(kf),Cf=I({},wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nf=Ze(Cf),_f=I({},Gr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jf=Ze(_f),Pf=[9,13,27,32],ki=E&&"CompositionEvent"in window,rr=null;E&&"documentMode"in document&&(rr=document.documentMode);var Rf=E&&"TextEvent"in window&&!rr,$u=E&&(!ki||rr&&8<rr&&11>=rr),Hu=" ",Qu=!1;function Ku(e,t){switch(e){case"keyup":return Pf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xn=!1;function Lf(e,t){switch(e){case"compositionend":return Yu(t);case"keypress":return t.which!==32?null:(Qu=!0,Hu);case"textInput":return e=t.data,e===Hu&&Qu?null:e;default:return null}}function Tf(e,t){if(xn)return e==="compositionend"||!ki&&Ku(e,t)?(e=Du(),Kr=vi=Mt=null,xn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $u&&t.locale!=="ko"?null:t.data;default:return null}}var zf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zf[e.type]:t==="textarea"}function Gu(e,t,n,r){mu(r),t=el(t,"onChange"),0<t.length&&(n=new gi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var lr=null,ir=null;function Of(e){ps(e,0)}function Jr(e){var t=Nn(e);if(ru(t))return e}function If(e,t){if(e==="change")return t}var Ju=!1;if(E){var Ei;if(E){var Ci="oninput"in document;if(!Ci){var Zu=document.createElement("div");Zu.setAttribute("oninput","return;"),Ci=typeof Zu.oninput=="function"}Ei=Ci}else Ei=!1;Ju=Ei&&(!document.documentMode||9<document.documentMode)}function qu(){lr&&(lr.detachEvent("onpropertychange",bu),ir=lr=null)}function bu(e){if(e.propertyName==="value"&&Jr(ir)){var t=[];Gu(t,ir,e,ri(e)),wu(Of,t)}}function Mf(e,t,n){e==="focusin"?(qu(),lr=t,ir=n,lr.attachEvent("onpropertychange",bu)):e==="focusout"&&qu()}function Ff(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jr(ir)}function Uf(e,t){if(e==="click")return Jr(t)}function Df(e,t){if(e==="input"||e==="change")return Jr(t)}function Bf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ft=typeof Object.is=="function"?Object.is:Bf;function or(e,t){if(ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!k.call(t,l)||!ft(e[l],t[l]))return!1}return!0}function es(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ts(e,t){var n=es(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=es(n)}}function ns(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ns(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rs(){for(var e=window,t=Or();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Or(e.document)}return t}function Ni(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Af(e){var t=rs(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ns(n.ownerDocument.documentElement,n)){if(r!==null&&Ni(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,i=Math.min(r.start,l);r=r.end===void 0?i:Math.min(r.end,l),!e.extend&&i>r&&(l=r,r=i,i=l),l=ts(n,i);var o=ts(n,r);l&&o&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wf=E&&"documentMode"in document&&11>=document.documentMode,Sn=null,_i=null,ur=null,ji=!1;function ls(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ji||Sn==null||Sn!==Or(r)||(r=Sn,"selectionStart"in r&&Ni(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ur&&or(ur,r)||(ur=r,r=el(_i,"onSelect"),0<r.length&&(t=new gi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Sn)))}function Zr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kn={animationend:Zr("Animation","AnimationEnd"),animationiteration:Zr("Animation","AnimationIteration"),animationstart:Zr("Animation","AnimationStart"),transitionend:Zr("Transition","TransitionEnd")},Pi={},is={};E&&(is=document.createElement("div").style,"AnimationEvent"in window||(delete kn.animationend.animation,delete kn.animationiteration.animation,delete kn.animationstart.animation),"TransitionEvent"in window||delete kn.transitionend.transition);function qr(e){if(Pi[e])return Pi[e];if(!kn[e])return e;var t=kn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in is)return Pi[e]=t[n];return e}var os=qr("animationend"),us=qr("animationiteration"),ss=qr("animationstart"),as=qr("transitionend"),cs=new Map,fs="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ft(e,t){cs.set(e,t),w(t,[e])}for(var Ri=0;Ri<fs.length;Ri++){var Li=fs[Ri],Vf=Li.toLowerCase(),$f=Li[0].toUpperCase()+Li.slice(1);Ft(Vf,"on"+$f)}Ft(os,"onAnimationEnd"),Ft(us,"onAnimationIteration"),Ft(ss,"onAnimationStart"),Ft("dblclick","onDoubleClick"),Ft("focusin","onFocus"),Ft("focusout","onBlur"),Ft(as,"onTransitionEnd"),S("onMouseEnter",["mouseout","mouseover"]),S("onMouseLeave",["mouseout","mouseover"]),S("onPointerEnter",["pointerout","pointerover"]),S("onPointerLeave",["pointerout","pointerover"]),w("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),w("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),w("onBeforeInput",["compositionend","keypress","textInput","paste"]),w("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hf=new Set("cancel close invalid load scroll toggle".split(" ").concat(sr));function ds(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Wc(r,t,void 0,e),e.currentTarget=null}function ps(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],d=c.instance,x=c.currentTarget;if(c=c.listener,d!==i&&l.isPropagationStopped())break e;ds(l,c,x),i=d}else for(o=0;o<r.length;o++){if(c=r[o],d=c.instance,x=c.currentTarget,c=c.listener,d!==i&&l.isPropagationStopped())break e;ds(l,c,x),i=d}}}if(Fr)throw e=ui,Fr=!1,ui=null,e}function fe(e,t){var n=t[Di];n===void 0&&(n=t[Di]=new Set);var r=e+"__bubble";n.has(r)||(hs(t,e,2,!1),n.add(r))}function Ti(e,t,n){var r=0;t&&(r|=4),hs(n,e,r,t)}var br="_reactListening"+Math.random().toString(36).slice(2);function ar(e){if(!e[br]){e[br]=!0,f.forEach(function(n){n!=="selectionchange"&&(Hf.has(n)||Ti(n,!1,e),Ti(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[br]||(t[br]=!0,Ti("selectionchange",!1,t))}}function hs(e,t,n,r){switch(Uu(t)){case 1:var l=rf;break;case 4:l=lf;break;default:l=hi}n=l.bind(null,t,n,e),l=void 0,!oi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function zi(e,t,n,r,l){var i=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===l||c.nodeType===8&&c.parentNode===l)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===l||d.nodeType===8&&d.parentNode===l))return;o=o.return}for(;c!==null;){if(o=en(c),o===null)return;if(d=o.tag,d===5||d===6){r=i=o;continue e}c=c.parentNode}}r=r.return}wu(function(){var x=i,_=ri(n),P=[];e:{var C=cs.get(e);if(C!==void 0){var D=gi,A=e;switch(e){case"keypress":if(Yr(n)===0)break e;case"keydown":case"keyup":D=xf;break;case"focusin":A="focus",D=xi;break;case"focusout":A="blur",D=xi;break;case"beforeblur":case"afterblur":D=xi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=Au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=Ef;break;case os:case us:case ss:D=ff;break;case as:D=Nf;break;case"scroll":D=of;break;case"wheel":D=jf;break;case"copy":case"cut":case"paste":D=pf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=Vu}var W=(t&4)!==0,xe=!W&&e==="scroll",g=W?C!==null?C+"Capture":null:C;W=[];for(var h=x,y;h!==null;){y=h;var T=y.stateNode;if(y.tag===5&&T!==null&&(y=T,g!==null&&(T=Qn(h,g),T!=null&&W.push(cr(h,T,y)))),xe)break;h=h.return}0<W.length&&(C=new D(C,A,null,n,_),P.push({event:C,listeners:W}))}}if((t&7)===0){e:{if(C=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",C&&n!==ni&&(A=n.relatedTarget||n.fromElement)&&(en(A)||A[Et]))break e;if((D||C)&&(C=_.window===_?_:(C=_.ownerDocument)?C.defaultView||C.parentWindow:window,D?(A=n.relatedTarget||n.toElement,D=x,A=A?en(A):null,A!==null&&(xe=bt(A),A!==xe||A.tag!==5&&A.tag!==6)&&(A=null)):(D=null,A=x),D!==A)){if(W=Au,T="onMouseLeave",g="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(W=Vu,T="onPointerLeave",g="onPointerEnter",h="pointer"),xe=D==null?C:Nn(D),y=A==null?C:Nn(A),C=new W(T,h+"leave",D,n,_),C.target=xe,C.relatedTarget=y,T=null,en(_)===x&&(W=new W(g,h+"enter",A,n,_),W.target=y,W.relatedTarget=xe,T=W),xe=T,D&&A)t:{for(W=D,g=A,h=0,y=W;y;y=En(y))h++;for(y=0,T=g;T;T=En(T))y++;for(;0<h-y;)W=En(W),h--;for(;0<y-h;)g=En(g),y--;for(;h--;){if(W===g||g!==null&&W===g.alternate)break t;W=En(W),g=En(g)}W=null}else W=null;D!==null&&ms(P,C,D,W,!1),A!==null&&xe!==null&&ms(P,xe,A,W,!0)}}e:{if(C=x?Nn(x):window,D=C.nodeName&&C.nodeName.toLowerCase(),D==="select"||D==="input"&&C.type==="file")var V=If;else if(Xu(C))if(Ju)V=Df;else{V=Ff;var H=Mf}else(D=C.nodeName)&&D.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(V=Uf);if(V&&(V=V(e,x))){Gu(P,V,n,_);break e}H&&H(e,C,x),e==="focusout"&&(H=C._wrapperState)&&H.controlled&&C.type==="number"&&Zl(C,"number",C.value)}switch(H=x?Nn(x):window,e){case"focusin":(Xu(H)||H.contentEditable==="true")&&(Sn=H,_i=x,ur=null);break;case"focusout":ur=_i=Sn=null;break;case"mousedown":ji=!0;break;case"contextmenu":case"mouseup":case"dragend":ji=!1,ls(P,n,_);break;case"selectionchange":if(Wf)break;case"keydown":case"keyup":ls(P,n,_)}var Q;if(ki)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else xn?Ku(e,n)&&(K="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(K="onCompositionStart");K&&($u&&n.locale!=="ko"&&(xn||K!=="onCompositionStart"?K==="onCompositionEnd"&&xn&&(Q=Du()):(Mt=_,vi="value"in Mt?Mt.value:Mt.textContent,xn=!0)),H=el(x,K),0<H.length&&(K=new Wu(K,e,null,n,_),P.push({event:K,listeners:H}),Q?K.data=Q:(Q=Yu(n),Q!==null&&(K.data=Q)))),(Q=Rf?Lf(e,n):Tf(e,n))&&(x=el(x,"onBeforeInput"),0<x.length&&(_=new Wu("onBeforeInput","beforeinput",null,n,_),P.push({event:_,listeners:x}),_.data=Q))}ps(P,t)})}function cr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function el(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=Qn(e,n),i!=null&&r.unshift(cr(e,i,l)),i=Qn(e,t),i!=null&&r.push(cr(e,i,l))),e=e.return}return r}function En(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ms(e,t,n,r,l){for(var i=t._reactName,o=[];n!==null&&n!==r;){var c=n,d=c.alternate,x=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&x!==null&&(c=x,l?(d=Qn(n,i),d!=null&&o.unshift(cr(n,d,c))):l||(d=Qn(n,i),d!=null&&o.push(cr(n,d,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Qf=/\r\n?/g,Kf=/\u0000|\uFFFD/g;function vs(e){return(typeof e=="string"?e:""+e).replace(Qf,`
`).replace(Kf,"")}function tl(e,t,n){if(t=vs(t),vs(e)!==t&&n)throw Error(s(425))}function nl(){}var Oi=null,Ii=null;function Mi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fi=typeof setTimeout=="function"?setTimeout:void 0,Yf=typeof clearTimeout=="function"?clearTimeout:void 0,gs=typeof Promise=="function"?Promise:void 0,Xf=typeof queueMicrotask=="function"?queueMicrotask:typeof gs<"u"?function(e){return gs.resolve(null).then(e).catch(Gf)}:Fi;function Gf(e){setTimeout(function(){throw e})}function Ui(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),er(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);er(t)}function Ut(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ys(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Cn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Cn,fr="__reactProps$"+Cn,Et="__reactContainer$"+Cn,Di="__reactEvents$"+Cn,Jf="__reactListeners$"+Cn,Zf="__reactHandles$"+Cn;function en(e){var t=e[wt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Et]||n[wt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ys(e);e!==null;){if(n=e[wt])return n;e=ys(e)}return t}e=n,n=e.parentNode}return null}function dr(e){return e=e[wt]||e[Et],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function rl(e){return e[fr]||null}var Bi=[],_n=-1;function Dt(e){return{current:e}}function de(e){0>_n||(e.current=Bi[_n],Bi[_n]=null,_n--)}function ae(e,t){_n++,Bi[_n]=e.current,e.current=t}var Bt={},Ie=Dt(Bt),$e=Dt(!1),tn=Bt;function jn(e,t){var n=e.type.contextTypes;if(!n)return Bt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in n)l[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function He(e){return e=e.childContextTypes,e!=null}function ll(){de($e),de(Ie)}function ws(e,t,n){if(Ie.current!==Bt)throw Error(s(168));ae(Ie,t),ae($e,n)}function xs(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(s(108,se(e)||"Unknown",l));return I({},n,r)}function il(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bt,tn=Ie.current,ae(Ie,e),ae($e,$e.current),!0}function Ss(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=xs(e,t,tn),r.__reactInternalMemoizedMergedChildContext=e,de($e),de(Ie),ae(Ie,e)):de($e),ae($e,n)}var Ct=null,ol=!1,Ai=!1;function ks(e){Ct===null?Ct=[e]:Ct.push(e)}function qf(e){ol=!0,ks(e)}function At(){if(!Ai&&Ct!==null){Ai=!0;var e=0,t=ue;try{var n=Ct;for(ue=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ct=null,ol=!1}catch(l){throw Ct!==null&&(Ct=Ct.slice(e+1)),Cu(si,At),l}finally{ue=t,Ai=!1}}return null}var Pn=[],Rn=0,ul=null,sl=0,nt=[],rt=0,nn=null,Nt=1,_t="";function rn(e,t){Pn[Rn++]=sl,Pn[Rn++]=ul,ul=e,sl=t}function Es(e,t,n){nt[rt++]=Nt,nt[rt++]=_t,nt[rt++]=nn,nn=e;var r=Nt;e=_t;var l=32-ct(r)-1;r&=~(1<<l),n+=1;var i=32-ct(t)+l;if(30<i){var o=l-l%5;i=(r&(1<<o)-1).toString(32),r>>=o,l-=o,Nt=1<<32-ct(t)+l|n<<l|r,_t=i+e}else Nt=1<<i|n<<l|r,_t=e}function Wi(e){e.return!==null&&(rn(e,1),Es(e,1,0))}function Vi(e){for(;e===ul;)ul=Pn[--Rn],Pn[Rn]=null,sl=Pn[--Rn],Pn[Rn]=null;for(;e===nn;)nn=nt[--rt],nt[rt]=null,_t=nt[--rt],nt[rt]=null,Nt=nt[--rt],nt[rt]=null}var qe=null,be=null,he=!1,dt=null;function Cs(e,t){var n=ut(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ns(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qe=e,be=Ut(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qe=e,be=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=nn!==null?{id:Nt,overflow:_t}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ut(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qe=e,be=null,!0):!1;default:return!1}}function $i(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hi(e){if(he){var t=be;if(t){var n=t;if(!Ns(e,t)){if($i(e))throw Error(s(418));t=Ut(n.nextSibling);var r=qe;t&&Ns(e,t)?Cs(r,n):(e.flags=e.flags&-4097|2,he=!1,qe=e)}}else{if($i(e))throw Error(s(418));e.flags=e.flags&-4097|2,he=!1,qe=e}}}function _s(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qe=e}function al(e){if(e!==qe)return!1;if(!he)return _s(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mi(e.type,e.memoizedProps)),t&&(t=be)){if($i(e))throw js(),Error(s(418));for(;t;)Cs(e,t),t=Ut(t.nextSibling)}if(_s(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){be=Ut(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}be=null}}else be=qe?Ut(e.stateNode.nextSibling):null;return!0}function js(){for(var e=be;e;)e=Ut(e.nextSibling)}function Ln(){be=qe=null,he=!1}function Qi(e){dt===null?dt=[e]:dt.push(e)}var bf=ie.ReactCurrentBatchConfig;function pr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var l=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var c=l.refs;o===null?delete c[i]:c[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function cl(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ps(e){var t=e._init;return t(e._payload)}function Rs(e){function t(g,h){if(e){var y=g.deletions;y===null?(g.deletions=[h],g.flags|=16):y.push(h)}}function n(g,h){if(!e)return null;for(;h!==null;)t(g,h),h=h.sibling;return null}function r(g,h){for(g=new Map;h!==null;)h.key!==null?g.set(h.key,h):g.set(h.index,h),h=h.sibling;return g}function l(g,h){return g=Xt(g,h),g.index=0,g.sibling=null,g}function i(g,h,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<h?(g.flags|=2,h):y):(g.flags|=2,h)):(g.flags|=1048576,h)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function c(g,h,y,T){return h===null||h.tag!==6?(h=Uo(y,g.mode,T),h.return=g,h):(h=l(h,y),h.return=g,h)}function d(g,h,y,T){var V=y.type;return V===Ee?_(g,h,y.props.children,T,y.key):h!==null&&(h.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Oe&&Ps(V)===h.type)?(T=l(h,y.props),T.ref=pr(g,h,y),T.return=g,T):(T=Il(y.type,y.key,y.props,null,g.mode,T),T.ref=pr(g,h,y),T.return=g,T)}function x(g,h,y,T){return h===null||h.tag!==4||h.stateNode.containerInfo!==y.containerInfo||h.stateNode.implementation!==y.implementation?(h=Do(y,g.mode,T),h.return=g,h):(h=l(h,y.children||[]),h.return=g,h)}function _(g,h,y,T,V){return h===null||h.tag!==7?(h=dn(y,g.mode,T,V),h.return=g,h):(h=l(h,y),h.return=g,h)}function P(g,h,y){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Uo(""+h,g.mode,y),h.return=g,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ye:return y=Il(h.type,h.key,h.props,null,g.mode,y),y.ref=pr(g,null,h),y.return=g,y;case _e:return h=Do(h,g.mode,y),h.return=g,h;case Oe:var T=h._init;return P(g,T(h._payload),y)}if(Vn(h)||F(h))return h=dn(h,g.mode,y,null),h.return=g,h;cl(g,h)}return null}function C(g,h,y,T){var V=h!==null?h.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return V!==null?null:c(g,h,""+y,T);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ye:return y.key===V?d(g,h,y,T):null;case _e:return y.key===V?x(g,h,y,T):null;case Oe:return V=y._init,C(g,h,V(y._payload),T)}if(Vn(y)||F(y))return V!==null?null:_(g,h,y,T,null);cl(g,y)}return null}function D(g,h,y,T,V){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(y)||null,c(h,g,""+T,V);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ye:return g=g.get(T.key===null?y:T.key)||null,d(h,g,T,V);case _e:return g=g.get(T.key===null?y:T.key)||null,x(h,g,T,V);case Oe:var H=T._init;return D(g,h,y,H(T._payload),V)}if(Vn(T)||F(T))return g=g.get(y)||null,_(h,g,T,V,null);cl(h,T)}return null}function A(g,h,y,T){for(var V=null,H=null,Q=h,K=h=0,Re=null;Q!==null&&K<y.length;K++){Q.index>K?(Re=Q,Q=null):Re=Q.sibling;var le=C(g,Q,y[K],T);if(le===null){Q===null&&(Q=Re);break}e&&Q&&le.alternate===null&&t(g,Q),h=i(le,h,K),H===null?V=le:H.sibling=le,H=le,Q=Re}if(K===y.length)return n(g,Q),he&&rn(g,K),V;if(Q===null){for(;K<y.length;K++)Q=P(g,y[K],T),Q!==null&&(h=i(Q,h,K),H===null?V=Q:H.sibling=Q,H=Q);return he&&rn(g,K),V}for(Q=r(g,Q);K<y.length;K++)Re=D(Q,g,K,y[K],T),Re!==null&&(e&&Re.alternate!==null&&Q.delete(Re.key===null?K:Re.key),h=i(Re,h,K),H===null?V=Re:H.sibling=Re,H=Re);return e&&Q.forEach(function(Gt){return t(g,Gt)}),he&&rn(g,K),V}function W(g,h,y,T){var V=F(y);if(typeof V!="function")throw Error(s(150));if(y=V.call(y),y==null)throw Error(s(151));for(var H=V=null,Q=h,K=h=0,Re=null,le=y.next();Q!==null&&!le.done;K++,le=y.next()){Q.index>K?(Re=Q,Q=null):Re=Q.sibling;var Gt=C(g,Q,le.value,T);if(Gt===null){Q===null&&(Q=Re);break}e&&Q&&Gt.alternate===null&&t(g,Q),h=i(Gt,h,K),H===null?V=Gt:H.sibling=Gt,H=Gt,Q=Re}if(le.done)return n(g,Q),he&&rn(g,K),V;if(Q===null){for(;!le.done;K++,le=y.next())le=P(g,le.value,T),le!==null&&(h=i(le,h,K),H===null?V=le:H.sibling=le,H=le);return he&&rn(g,K),V}for(Q=r(g,Q);!le.done;K++,le=y.next())le=D(Q,g,K,le.value,T),le!==null&&(e&&le.alternate!==null&&Q.delete(le.key===null?K:le.key),h=i(le,h,K),H===null?V=le:H.sibling=le,H=le);return e&&Q.forEach(function(zd){return t(g,zd)}),he&&rn(g,K),V}function xe(g,h,y,T){if(typeof y=="object"&&y!==null&&y.type===Ee&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ye:e:{for(var V=y.key,H=h;H!==null;){if(H.key===V){if(V=y.type,V===Ee){if(H.tag===7){n(g,H.sibling),h=l(H,y.props.children),h.return=g,g=h;break e}}else if(H.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Oe&&Ps(V)===H.type){n(g,H.sibling),h=l(H,y.props),h.ref=pr(g,H,y),h.return=g,g=h;break e}n(g,H);break}else t(g,H);H=H.sibling}y.type===Ee?(h=dn(y.props.children,g.mode,T,y.key),h.return=g,g=h):(T=Il(y.type,y.key,y.props,null,g.mode,T),T.ref=pr(g,h,y),T.return=g,g=T)}return o(g);case _e:e:{for(H=y.key;h!==null;){if(h.key===H)if(h.tag===4&&h.stateNode.containerInfo===y.containerInfo&&h.stateNode.implementation===y.implementation){n(g,h.sibling),h=l(h,y.children||[]),h.return=g,g=h;break e}else{n(g,h);break}else t(g,h);h=h.sibling}h=Do(y,g.mode,T),h.return=g,g=h}return o(g);case Oe:return H=y._init,xe(g,h,H(y._payload),T)}if(Vn(y))return A(g,h,y,T);if(F(y))return W(g,h,y,T);cl(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,h!==null&&h.tag===6?(n(g,h.sibling),h=l(h,y),h.return=g,g=h):(n(g,h),h=Uo(y,g.mode,T),h.return=g,g=h),o(g)):n(g,h)}return xe}var Tn=Rs(!0),Ls=Rs(!1),fl=Dt(null),dl=null,zn=null,Ki=null;function Yi(){Ki=zn=dl=null}function Xi(e){var t=fl.current;de(fl),e._currentValue=t}function Gi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function On(e,t){dl=e,Ki=zn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Qe=!0),e.firstContext=null)}function lt(e){var t=e._currentValue;if(Ki!==e)if(e={context:e,memoizedValue:t,next:null},zn===null){if(dl===null)throw Error(s(308));zn=e,dl.dependencies={lanes:0,firstContext:e}}else zn=zn.next=e;return t}var ln=null;function Ji(e){ln===null?ln=[e]:ln.push(e)}function Ts(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,Ji(t)):(n.next=l.next,l.next=n),t.interleaved=n,jt(e,r)}function jt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wt=!1;function Zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ee&2)!==0){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,jt(e,n)}return l=r.interleaved,l===null?(t.next=t,Ji(r)):(t.next=l.next,l.next=t),r.interleaved=t,jt(e,n)}function pl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fi(e,n)}}function Os(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?l=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?l=i=t:i=i.next=t}else l=i=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hl(e,t,n,r){var l=e.updateQueue;Wt=!1;var i=l.firstBaseUpdate,o=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var d=c,x=d.next;d.next=null,o===null?i=x:o.next=x,o=d;var _=e.alternate;_!==null&&(_=_.updateQueue,c=_.lastBaseUpdate,c!==o&&(c===null?_.firstBaseUpdate=x:c.next=x,_.lastBaseUpdate=d))}if(i!==null){var P=l.baseState;o=0,_=x=d=null,c=i;do{var C=c.lane,D=c.eventTime;if((r&C)===C){_!==null&&(_=_.next={eventTime:D,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var A=e,W=c;switch(C=t,D=n,W.tag){case 1:if(A=W.payload,typeof A=="function"){P=A.call(D,P,C);break e}P=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=W.payload,C=typeof A=="function"?A.call(D,P,C):A,C==null)break e;P=I({},P,C);break e;case 2:Wt=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,C=l.effects,C===null?l.effects=[c]:C.push(c))}else D={eventTime:D,lane:C,tag:c.tag,payload:c.payload,callback:c.callback,next:null},_===null?(x=_=D,d=P):_=_.next=D,o|=C;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;C=c,c=C.next,C.next=null,l.lastBaseUpdate=C,l.shared.pending=null}}while(!0);if(_===null&&(d=P),l.baseState=d,l.firstBaseUpdate=x,l.lastBaseUpdate=_,t=l.shared.interleaved,t!==null){l=t;do o|=l.lane,l=l.next;while(l!==t)}else i===null&&(l.shared.lanes=0);sn|=o,e.lanes=o,e.memoizedState=P}}function Is(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(s(191,l));l.call(r)}}}var hr={},xt=Dt(hr),mr=Dt(hr),vr=Dt(hr);function on(e){if(e===hr)throw Error(s(174));return e}function qi(e,t){switch(ae(vr,t),ae(mr,e),ae(xt,hr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bl(t,e)}de(xt),ae(xt,t)}function In(){de(xt),de(mr),de(vr)}function Ms(e){on(vr.current);var t=on(xt.current),n=bl(t,e.type);t!==n&&(ae(mr,e),ae(xt,n))}function bi(e){mr.current===e&&(de(xt),de(mr))}var me=Dt(0);function ml(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var eo=[];function to(){for(var e=0;e<eo.length;e++)eo[e]._workInProgressVersionPrimary=null;eo.length=0}var vl=ie.ReactCurrentDispatcher,no=ie.ReactCurrentBatchConfig,un=0,ve=null,Ce=null,je=null,gl=!1,gr=!1,yr=0,ed=0;function Me(){throw Error(s(321))}function ro(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ft(e[n],t[n]))return!1;return!0}function lo(e,t,n,r,l,i){if(un=i,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vl.current=e===null||e.memoizedState===null?ld:id,e=n(r,l),gr){i=0;do{if(gr=!1,yr=0,25<=i)throw Error(s(301));i+=1,je=Ce=null,t.updateQueue=null,vl.current=od,e=n(r,l)}while(gr)}if(vl.current=xl,t=Ce!==null&&Ce.next!==null,un=0,je=Ce=ve=null,gl=!1,t)throw Error(s(300));return e}function io(){var e=yr!==0;return yr=0,e}function St(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?ve.memoizedState=je=e:je=je.next=e,je}function it(){if(Ce===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=je===null?ve.memoizedState:je.next;if(t!==null)je=t,Ce=e;else{if(e===null)throw Error(s(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},je===null?ve.memoizedState=je=e:je=je.next=e}return je}function wr(e,t){return typeof t=="function"?t(e):t}function oo(e){var t=it(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var r=Ce,l=r.baseQueue,i=n.pending;if(i!==null){if(l!==null){var o=l.next;l.next=i.next,i.next=o}r.baseQueue=l=i,n.pending=null}if(l!==null){i=l.next,r=r.baseState;var c=o=null,d=null,x=i;do{var _=x.lane;if((un&_)===_)d!==null&&(d=d.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),r=x.hasEagerState?x.eagerState:e(r,x.action);else{var P={lane:_,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};d===null?(c=d=P,o=r):d=d.next=P,ve.lanes|=_,sn|=_}x=x.next}while(x!==null&&x!==i);d===null?o=r:d.next=c,ft(r,t.memoizedState)||(Qe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do i=l.lane,ve.lanes|=i,sn|=i,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function uo(e){var t=it(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,i=t.memoizedState;if(l!==null){n.pending=null;var o=l=l.next;do i=e(i,o.action),o=o.next;while(o!==l);ft(i,t.memoizedState)||(Qe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Fs(){}function Us(e,t){var n=ve,r=it(),l=t(),i=!ft(r.memoizedState,l);if(i&&(r.memoizedState=l,Qe=!0),r=r.queue,so(As.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||je!==null&&je.memoizedState.tag&1){if(n.flags|=2048,xr(9,Bs.bind(null,n,r,l,t),void 0,null),Pe===null)throw Error(s(349));(un&30)!==0||Ds(n,t,l)}return l}function Ds(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Bs(e,t,n,r){t.value=n,t.getSnapshot=r,Ws(t)&&Vs(e)}function As(e,t,n){return n(function(){Ws(t)&&Vs(e)})}function Ws(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ft(e,n)}catch{return!0}}function Vs(e){var t=jt(e,1);t!==null&&vt(t,e,1,-1)}function $s(e){var t=St();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:e},t.queue=e,e=e.dispatch=rd.bind(null,ve,e),[t.memoizedState,e]}function xr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hs(){return it().memoizedState}function yl(e,t,n,r){var l=St();ve.flags|=e,l.memoizedState=xr(1|t,n,void 0,r===void 0?null:r)}function wl(e,t,n,r){var l=it();r=r===void 0?null:r;var i=void 0;if(Ce!==null){var o=Ce.memoizedState;if(i=o.destroy,r!==null&&ro(r,o.deps)){l.memoizedState=xr(t,n,i,r);return}}ve.flags|=e,l.memoizedState=xr(1|t,n,i,r)}function Qs(e,t){return yl(8390656,8,e,t)}function so(e,t){return wl(2048,8,e,t)}function Ks(e,t){return wl(4,2,e,t)}function Ys(e,t){return wl(4,4,e,t)}function Xs(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gs(e,t,n){return n=n!=null?n.concat([e]):null,wl(4,4,Xs.bind(null,t,e),n)}function ao(){}function Js(e,t){var n=it();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ro(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zs(e,t){var n=it();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ro(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qs(e,t,n){return(un&21)===0?(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=n):(ft(n,t)||(n=Pu(),ve.lanes|=n,sn|=n,e.baseState=!0),t)}function td(e,t){var n=ue;ue=n!==0&&4>n?n:4,e(!0);var r=no.transition;no.transition={};try{e(!1),t()}finally{ue=n,no.transition=r}}function bs(){return it().memoizedState}function nd(e,t,n){var r=Kt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ea(e))ta(t,n);else if(n=Ts(e,t,n,r),n!==null){var l=Ae();vt(n,e,r,l),na(n,t,r)}}function rd(e,t,n){var r=Kt(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ea(e))ta(t,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,c=i(o,n);if(l.hasEagerState=!0,l.eagerState=c,ft(c,o)){var d=t.interleaved;d===null?(l.next=l,Ji(t)):(l.next=d.next,d.next=l),t.interleaved=l;return}}catch{}finally{}n=Ts(e,t,l,r),n!==null&&(l=Ae(),vt(n,e,r,l),na(n,t,r))}}function ea(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function ta(e,t){gr=gl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function na(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fi(e,n)}}var xl={readContext:lt,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useInsertionEffect:Me,useLayoutEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useMutableSource:Me,useSyncExternalStore:Me,useId:Me,unstable_isNewReconciler:!1},ld={readContext:lt,useCallback:function(e,t){return St().memoizedState=[e,t===void 0?null:t],e},useContext:lt,useEffect:Qs,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yl(4194308,4,Xs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yl(4194308,4,e,t)},useInsertionEffect:function(e,t){return yl(4,2,e,t)},useMemo:function(e,t){var n=St();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=St();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=nd.bind(null,ve,e),[r.memoizedState,e]},useRef:function(e){var t=St();return e={current:e},t.memoizedState=e},useState:$s,useDebugValue:ao,useDeferredValue:function(e){return St().memoizedState=e},useTransition:function(){var e=$s(!1),t=e[0];return e=td.bind(null,e[1]),St().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ve,l=St();if(he){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),Pe===null)throw Error(s(349));(un&30)!==0||Ds(r,t,n)}l.memoizedState=n;var i={value:n,getSnapshot:t};return l.queue=i,Qs(As.bind(null,r,i,e),[e]),r.flags|=2048,xr(9,Bs.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=St(),t=Pe.identifierPrefix;if(he){var n=_t,r=Nt;n=(r&~(1<<32-ct(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=yr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ed++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},id={readContext:lt,useCallback:Js,useContext:lt,useEffect:so,useImperativeHandle:Gs,useInsertionEffect:Ks,useLayoutEffect:Ys,useMemo:Zs,useReducer:oo,useRef:Hs,useState:function(){return oo(wr)},useDebugValue:ao,useDeferredValue:function(e){var t=it();return qs(t,Ce.memoizedState,e)},useTransition:function(){var e=oo(wr)[0],t=it().memoizedState;return[e,t]},useMutableSource:Fs,useSyncExternalStore:Us,useId:bs,unstable_isNewReconciler:!1},od={readContext:lt,useCallback:Js,useContext:lt,useEffect:so,useImperativeHandle:Gs,useInsertionEffect:Ks,useLayoutEffect:Ys,useMemo:Zs,useReducer:uo,useRef:Hs,useState:function(){return uo(wr)},useDebugValue:ao,useDeferredValue:function(e){var t=it();return Ce===null?t.memoizedState=e:qs(t,Ce.memoizedState,e)},useTransition:function(){var e=uo(wr)[0],t=it().memoizedState;return[e,t]},useMutableSource:Fs,useSyncExternalStore:Us,useId:bs,unstable_isNewReconciler:!1};function pt(e,t){if(e&&e.defaultProps){t=I({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function co(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:I({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Sl={isMounted:function(e){return(e=e._reactInternals)?bt(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ae(),l=Kt(e),i=Pt(r,l);i.payload=t,n!=null&&(i.callback=n),t=Vt(e,i,l),t!==null&&(vt(t,e,l,r),pl(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ae(),l=Kt(e),i=Pt(r,l);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Vt(e,i,l),t!==null&&(vt(t,e,l,r),pl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ae(),r=Kt(e),l=Pt(n,r);l.tag=2,t!=null&&(l.callback=t),t=Vt(e,l,r),t!==null&&(vt(t,e,r,n),pl(t,e,r))}};function ra(e,t,n,r,l,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!or(n,r)||!or(l,i):!0}function la(e,t,n){var r=!1,l=Bt,i=t.contextType;return typeof i=="object"&&i!==null?i=lt(i):(l=He(t)?tn:Ie.current,r=t.contextTypes,i=(r=r!=null)?jn(e,l):Bt),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Sl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=i),t}function ia(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Sl.enqueueReplaceState(t,t.state,null)}function fo(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Zi(e);var i=t.contextType;typeof i=="object"&&i!==null?l.context=lt(i):(i=He(t)?tn:Ie.current,l.context=jn(e,i)),l.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(co(e,t,i,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Sl.enqueueReplaceState(l,l.state,null),hl(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Mn(e,t){try{var n="",r=t;do n+=ne(r),r=r.return;while(r);var l=n}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:l,digest:null}}function po(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ud=typeof WeakMap=="function"?WeakMap:Map;function oa(e,t,n){n=Pt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Pl||(Pl=!0,Ro=r),ho(e,t)},n}function ua(e,t,n){n=Pt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){ho(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ho(e,t),typeof r!="function"&&(Ht===null?Ht=new Set([this]):Ht.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function sa(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ud;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Sd.bind(null,e,t,n),t.then(e,e))}function aa(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ca(e,t,n,r,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Pt(-1,1),t.tag=2,Vt(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var sd=ie.ReactCurrentOwner,Qe=!1;function Be(e,t,n,r){t.child=e===null?Ls(t,null,n,r):Tn(t,e.child,n,r)}function fa(e,t,n,r,l){n=n.render;var i=t.ref;return On(t,l),r=lo(e,t,n,r,i,l),n=io(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Rt(e,t,l)):(he&&n&&Wi(t),t.flags|=1,Be(e,t,r,l),t.child)}function da(e,t,n,r,l){if(e===null){var i=n.type;return typeof i=="function"&&!Fo(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,pa(e,t,i,r,l)):(e=Il(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,(e.lanes&l)===0){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:or,n(o,r)&&e.ref===t.ref)return Rt(e,t,l)}return t.flags|=1,e=Xt(i,r),e.ref=t.ref,e.return=t,t.child=e}function pa(e,t,n,r,l){if(e!==null){var i=e.memoizedProps;if(or(i,r)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=r=i,(e.lanes&l)!==0)(e.flags&131072)!==0&&(Qe=!0);else return t.lanes=e.lanes,Rt(e,t,l)}return mo(e,t,n,r,l)}function ha(e,t,n){var r=t.pendingProps,l=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(Un,et),et|=n;else{if((n&1073741824)===0)return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ae(Un,et),et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ae(Un,et),et|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ae(Un,et),et|=r;return Be(e,t,l,n),t.child}function ma(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function mo(e,t,n,r,l){var i=He(n)?tn:Ie.current;return i=jn(t,i),On(t,l),n=lo(e,t,n,r,i,l),r=io(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Rt(e,t,l)):(he&&r&&Wi(t),t.flags|=1,Be(e,t,n,l),t.child)}function va(e,t,n,r,l){if(He(n)){var i=!0;il(t)}else i=!1;if(On(t,l),t.stateNode===null)El(e,t),la(t,n,r),fo(t,n,r,l),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,x=n.contextType;typeof x=="object"&&x!==null?x=lt(x):(x=He(n)?tn:Ie.current,x=jn(t,x));var _=n.getDerivedStateFromProps,P=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function";P||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||d!==x)&&ia(t,o,r,x),Wt=!1;var C=t.memoizedState;o.state=C,hl(t,r,o,l),d=t.memoizedState,c!==r||C!==d||$e.current||Wt?(typeof _=="function"&&(co(t,n,_,r),d=t.memoizedState),(c=Wt||ra(t,n,c,r,C,d,x))?(P||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=x,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,zs(e,t),c=t.memoizedProps,x=t.type===t.elementType?c:pt(t.type,c),o.props=x,P=t.pendingProps,C=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=lt(d):(d=He(n)?tn:Ie.current,d=jn(t,d));var D=n.getDerivedStateFromProps;(_=typeof D=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==P||C!==d)&&ia(t,o,r,d),Wt=!1,C=t.memoizedState,o.state=C,hl(t,r,o,l);var A=t.memoizedState;c!==P||C!==A||$e.current||Wt?(typeof D=="function"&&(co(t,n,D,r),A=t.memoizedState),(x=Wt||ra(t,n,x,r,C,A,d)||!1)?(_||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=A),o.props=r,o.state=A,o.context=d,r=x):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),r=!1)}return vo(e,t,n,r,i,l)}function vo(e,t,n,r,l,i){ma(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return l&&Ss(t,n,!1),Rt(e,t,i);r=t.stateNode,sd.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Tn(t,e.child,null,i),t.child=Tn(t,null,c,i)):Be(e,t,c,i),t.memoizedState=r.state,l&&Ss(t,n,!0),t.child}function ga(e){var t=e.stateNode;t.pendingContext?ws(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ws(e,t.context,!1),qi(e,t.containerInfo)}function ya(e,t,n,r,l){return Ln(),Qi(l),t.flags|=256,Be(e,t,n,r),t.child}var go={dehydrated:null,treeContext:null,retryLane:0};function yo(e){return{baseLanes:e,cachePool:null,transitions:null}}function wa(e,t,n){var r=t.pendingProps,l=me.current,i=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(l&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),ae(me,l&1),e===null)return Hi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ml(o,r,0,null),e=dn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=yo(n),t.memoizedState=go,e):wo(t,o));if(l=e.memoizedState,l!==null&&(c=l.dehydrated,c!==null))return ad(e,t,o,r,c,l,n);if(i){i=r.fallback,o=t.mode,l=e.child,c=l.sibling;var d={mode:"hidden",children:r.children};return(o&1)===0&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Xt(l,d),r.subtreeFlags=l.subtreeFlags&14680064),c!==null?i=Xt(c,i):(i=dn(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?yo(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=go,r}return i=e.child,e=i.sibling,r=Xt(i,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function wo(e,t){return t=Ml({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kl(e,t,n,r){return r!==null&&Qi(r),Tn(t,e.child,null,n),e=wo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ad(e,t,n,r,l,i,o){if(n)return t.flags&256?(t.flags&=-257,r=po(Error(s(422))),kl(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,l=t.mode,r=Ml({mode:"visible",children:r.children},l,0,null),i=dn(i,l,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,(t.mode&1)!==0&&Tn(t,e.child,null,o),t.child.memoizedState=yo(o),t.memoizedState=go,i);if((t.mode&1)===0)return kl(e,t,o,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(s(419)),r=po(i,r,void 0),kl(e,t,o,r)}if(c=(o&e.childLanes)!==0,Qe||c){if(r=Pe,r!==null){switch(o&-o){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(r.suspendedLanes|o))!==0?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,jt(e,l),vt(r,e,l,-1))}return Mo(),r=po(Error(s(421))),kl(e,t,o,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=kd.bind(null,e),l._reactRetry=t,null):(e=i.treeContext,be=Ut(l.nextSibling),qe=t,he=!0,dt=null,e!==null&&(nt[rt++]=Nt,nt[rt++]=_t,nt[rt++]=nn,Nt=e.id,_t=e.overflow,nn=t),t=wo(t,r.children),t.flags|=4096,t)}function xa(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Gi(e.return,t,n)}function xo(e,t,n,r,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=l)}function Sa(e,t,n){var r=t.pendingProps,l=r.revealOrder,i=r.tail;if(Be(e,t,r.children,n),r=me.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xa(e,n,t);else if(e.tag===19)xa(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ae(me,r),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&ml(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),xo(t,!1,l,n,i);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&ml(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}xo(t,!0,n,null,i);break;case"together":xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function El(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=Xt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Xt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cd(e,t,n){switch(t.tag){case 3:ga(t),Ln();break;case 5:Ms(t);break;case 1:He(t.type)&&il(t);break;case 4:qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;ae(fl,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ae(me,me.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?wa(e,t,n):(ae(me,me.current&1),e=Rt(e,t,n),e!==null?e.sibling:null);ae(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Sa(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ae(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,ha(e,t,n)}return Rt(e,t,n)}var ka,So,Ea,Ca;ka=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},So=function(){},Ea=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,on(xt.current);var i=null;switch(n){case"input":l=Gl(e,l),r=Gl(e,r),i=[];break;case"select":l=I({},l,{value:void 0}),r=I({},r,{value:void 0}),i=[];break;case"textarea":l=ql(e,l),r=ql(e,r),i=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=nl)}ei(n,r);var o;n=null;for(x in l)if(!r.hasOwnProperty(x)&&l.hasOwnProperty(x)&&l[x]!=null)if(x==="style"){var c=l[x];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(m.hasOwnProperty(x)?i||(i=[]):(i=i||[]).push(x,null));for(x in r){var d=r[x];if(c=l!=null?l[x]:void 0,r.hasOwnProperty(x)&&d!==c&&(d!=null||c!=null))if(x==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(i||(i=[]),i.push(x,n)),n=d;else x==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(i=i||[]).push(x,d)):x==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(x,""+d):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(m.hasOwnProperty(x)?(d!=null&&x==="onScroll"&&fe("scroll",e),i||c===d||(i=[])):(i=i||[]).push(x,d))}n&&(i=i||[]).push("style",n);var x=i;(t.updateQueue=x)&&(t.flags|=4)}},Ca=function(e,t,n,r){n!==r&&(t.flags|=4)};function Sr(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fd(e,t,n){var r=t.pendingProps;switch(Vi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return He(t.type)&&ll(),Fe(t),null;case 3:return r=t.stateNode,In(),de($e),de(Ie),to(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(al(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,dt!==null&&(zo(dt),dt=null))),So(e,t),Fe(t),null;case 5:bi(t);var l=on(vr.current);if(n=t.type,e!==null&&t.stateNode!=null)Ea(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(s(166));return Fe(t),null}if(e=on(xt.current),al(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[wt]=t,r[fr]=i,e=(t.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(l=0;l<sr.length;l++)fe(sr[l],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":lu(r,i),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},fe("invalid",r);break;case"textarea":uu(r,i),fe("invalid",r)}ei(n,i),l=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&tl(r.textContent,c,e),l=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&tl(r.textContent,c,e),l=["children",""+c]):m.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&fe("scroll",r)}switch(n){case"input":zr(r),ou(r,i,!0);break;case"textarea":zr(r),au(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nl)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[wt]=t,e[fr]=r,ka(e,t,!1,!1),t.stateNode=e;e:{switch(o=ti(n,r),n){case"dialog":fe("cancel",e),fe("close",e),l=r;break;case"iframe":case"object":case"embed":fe("load",e),l=r;break;case"video":case"audio":for(l=0;l<sr.length;l++)fe(sr[l],e);l=r;break;case"source":fe("error",e),l=r;break;case"img":case"image":case"link":fe("error",e),fe("load",e),l=r;break;case"details":fe("toggle",e),l=r;break;case"input":lu(e,r),l=Gl(e,r),fe("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=I({},r,{value:void 0}),fe("invalid",e);break;case"textarea":uu(e,r),l=ql(e,r),fe("invalid",e);break;default:l=r}ei(n,l),c=l;for(i in c)if(c.hasOwnProperty(i)){var d=c[i];i==="style"?pu(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&fu(e,d)):i==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&$n(e,d):typeof d=="number"&&$n(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(m.hasOwnProperty(i)?d!=null&&i==="onScroll"&&fe("scroll",e):d!=null&&J(e,i,d,o))}switch(n){case"input":zr(e),ou(e,r,!1);break;case"textarea":zr(e),au(e);break;case"option":r.value!=null&&e.setAttribute("value",""+oe(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?mn(e,!!r.multiple,i,!1):r.defaultValue!=null&&mn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=nl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fe(t),null;case 6:if(e&&t.stateNode!=null)Ca(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(s(166));if(n=on(vr.current),on(xt.current),al(t)){if(r=t.stateNode,n=t.memoizedProps,r[wt]=t,(i=r.nodeValue!==n)&&(e=qe,e!==null))switch(e.tag){case 3:tl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wt]=t,t.stateNode=r}return Fe(t),null;case 13:if(de(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&be!==null&&(t.mode&1)!==0&&(t.flags&128)===0)js(),Ln(),t.flags|=98560,i=!1;else if(i=al(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(s(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));i[wt]=t}else Ln(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Fe(t),i=!1}else dt!==null&&(zo(dt),dt=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(me.current&1)!==0?Ne===0&&(Ne=3):Mo())),t.updateQueue!==null&&(t.flags|=4),Fe(t),null);case 4:return In(),So(e,t),e===null&&ar(t.stateNode.containerInfo),Fe(t),null;case 10:return Xi(t.type._context),Fe(t),null;case 17:return He(t.type)&&ll(),Fe(t),null;case 19:if(de(me),i=t.memoizedState,i===null)return Fe(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Sr(i,!1);else{if(Ne!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=ml(e),o!==null){for(t.flags|=128,Sr(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ae(me,me.current&1|2),t.child}e=e.sibling}i.tail!==null&&we()>Dn&&(t.flags|=128,r=!0,Sr(i,!1),t.lanes=4194304)}else{if(!r)if(e=ml(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Sr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!he)return Fe(t),null}else 2*we()-i.renderingStartTime>Dn&&n!==1073741824&&(t.flags|=128,r=!0,Sr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=we(),t.sibling=null,n=me.current,ae(me,r?n&1|2:n&1),t):(Fe(t),null);case 22:case 23:return Io(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(et&1073741824)!==0&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function dd(e,t){switch(Vi(t),t.tag){case 1:return He(t.type)&&ll(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return In(),de($e),de(Ie),to(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return bi(t),null;case 13:if(de(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(me),null;case 4:return In(),null;case 10:return Xi(t.type._context),null;case 22:case 23:return Io(),null;case 24:return null;default:return null}}var Cl=!1,Ue=!1,pd=typeof WeakSet=="function"?WeakSet:Set,B=null;function Fn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ge(e,t,r)}else n.current=null}function ko(e,t,n){try{n()}catch(r){ge(e,t,r)}}var Na=!1;function hd(e,t){if(Oi=Hr,e=rs(),Ni(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,d=-1,x=0,_=0,P=e,C=null;t:for(;;){for(var D;P!==n||l!==0&&P.nodeType!==3||(c=o+l),P!==i||r!==0&&P.nodeType!==3||(d=o+r),P.nodeType===3&&(o+=P.nodeValue.length),(D=P.firstChild)!==null;)C=P,P=D;for(;;){if(P===e)break t;if(C===n&&++x===l&&(c=o),C===i&&++_===r&&(d=o),(D=P.nextSibling)!==null)break;P=C,C=P.parentNode}P=D}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ii={focusedElem:e,selectionRange:n},Hr=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var A=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var W=A.memoizedProps,xe=A.memoizedState,g=t.stateNode,h=g.getSnapshotBeforeUpdate(t.elementType===t.type?W:pt(t.type,W),xe);g.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(T){ge(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return A=Na,Na=!1,A}function kr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var i=l.destroy;l.destroy=void 0,i!==void 0&&ko(t,n,i)}l=l.next}while(l!==r)}}function Nl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Eo(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _a(e){var t=e.alternate;t!==null&&(e.alternate=null,_a(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wt],delete t[fr],delete t[Di],delete t[Jf],delete t[Zf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ja(e){return e.tag===5||e.tag===3||e.tag===4}function Pa(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ja(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Co(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=nl));else if(r!==4&&(e=e.child,e!==null))for(Co(e,t,n),e=e.sibling;e!==null;)Co(e,t,n),e=e.sibling}function No(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(No(e,t,n),e=e.sibling;e!==null;)No(e,t,n),e=e.sibling}var Le=null,ht=!1;function $t(e,t,n){for(n=n.child;n!==null;)Ra(e,t,n),n=n.sibling}function Ra(e,t,n){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Dr,n)}catch{}switch(n.tag){case 5:Ue||Fn(n,t);case 6:var r=Le,l=ht;Le=null,$t(e,t,n),Le=r,ht=l,Le!==null&&(ht?(e=Le,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(ht?(e=Le,n=n.stateNode,e.nodeType===8?Ui(e.parentNode,n):e.nodeType===1&&Ui(e,n),er(e)):Ui(Le,n.stateNode));break;case 4:r=Le,l=ht,Le=n.stateNode.containerInfo,ht=!0,$t(e,t,n),Le=r,ht=l;break;case 0:case 11:case 14:case 15:if(!Ue&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var i=l,o=i.destroy;i=i.tag,o!==void 0&&((i&2)!==0||(i&4)!==0)&&ko(n,t,o),l=l.next}while(l!==r)}$t(e,t,n);break;case 1:if(!Ue&&(Fn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){ge(n,t,c)}$t(e,t,n);break;case 21:$t(e,t,n);break;case 22:n.mode&1?(Ue=(r=Ue)||n.memoizedState!==null,$t(e,t,n),Ue=r):$t(e,t,n);break;default:$t(e,t,n)}}function La(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new pd),t.forEach(function(r){var l=Ed.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function mt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var i=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Le=c.stateNode,ht=!1;break e;case 3:Le=c.stateNode.containerInfo,ht=!0;break e;case 4:Le=c.stateNode.containerInfo,ht=!0;break e}c=c.return}if(Le===null)throw Error(s(160));Ra(i,o,l),Le=null,ht=!1;var d=l.alternate;d!==null&&(d.return=null),l.return=null}catch(x){ge(l,t,x)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ta(t,e),t=t.sibling}function Ta(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mt(t,e),kt(e),r&4){try{kr(3,e,e.return),Nl(3,e)}catch(W){ge(e,e.return,W)}try{kr(5,e,e.return)}catch(W){ge(e,e.return,W)}}break;case 1:mt(t,e),kt(e),r&512&&n!==null&&Fn(n,n.return);break;case 5:if(mt(t,e),kt(e),r&512&&n!==null&&Fn(n,n.return),e.flags&32){var l=e.stateNode;try{$n(l,"")}catch(W){ge(e,e.return,W)}}if(r&4&&(l=e.stateNode,l!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&iu(l,i),ti(c,o);var x=ti(c,i);for(o=0;o<d.length;o+=2){var _=d[o],P=d[o+1];_==="style"?pu(l,P):_==="dangerouslySetInnerHTML"?fu(l,P):_==="children"?$n(l,P):J(l,_,P,x)}switch(c){case"input":Jl(l,i);break;case"textarea":su(l,i);break;case"select":var C=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var D=i.value;D!=null?mn(l,!!i.multiple,D,!1):C!==!!i.multiple&&(i.defaultValue!=null?mn(l,!!i.multiple,i.defaultValue,!0):mn(l,!!i.multiple,i.multiple?[]:"",!1))}l[fr]=i}catch(W){ge(e,e.return,W)}}break;case 6:if(mt(t,e),kt(e),r&4){if(e.stateNode===null)throw Error(s(162));l=e.stateNode,i=e.memoizedProps;try{l.nodeValue=i}catch(W){ge(e,e.return,W)}}break;case 3:if(mt(t,e),kt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{er(t.containerInfo)}catch(W){ge(e,e.return,W)}break;case 4:mt(t,e),kt(e);break;case 13:mt(t,e),kt(e),l=e.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(Po=we())),r&4&&La(e);break;case 22:if(_=n!==null&&n.memoizedState!==null,e.mode&1?(Ue=(x=Ue)||_,mt(t,e),Ue=x):mt(t,e),kt(e),r&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!_&&(e.mode&1)!==0)for(B=e,_=e.child;_!==null;){for(P=B=_;B!==null;){switch(C=B,D=C.child,C.tag){case 0:case 11:case 14:case 15:kr(4,C,C.return);break;case 1:Fn(C,C.return);var A=C.stateNode;if(typeof A.componentWillUnmount=="function"){r=C,n=C.return;try{t=r,A.props=t.memoizedProps,A.state=t.memoizedState,A.componentWillUnmount()}catch(W){ge(r,n,W)}}break;case 5:Fn(C,C.return);break;case 22:if(C.memoizedState!==null){Ia(P);continue}}D!==null?(D.return=C,B=D):Ia(P)}_=_.sibling}e:for(_=null,P=e;;){if(P.tag===5){if(_===null){_=P;try{l=P.stateNode,x?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=P.stateNode,d=P.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=du("display",o))}catch(W){ge(e,e.return,W)}}}else if(P.tag===6){if(_===null)try{P.stateNode.nodeValue=x?"":P.memoizedProps}catch(W){ge(e,e.return,W)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;_===P&&(_=null),P=P.return}_===P&&(_=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:mt(t,e),kt(e),r&4&&La(e);break;case 21:break;default:mt(t,e),kt(e)}}function kt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ja(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&($n(l,""),r.flags&=-33);var i=Pa(e);No(e,i,l);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Pa(e);Co(e,c,o);break;default:throw Error(s(161))}}catch(d){ge(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function md(e,t,n){B=e,za(e)}function za(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var l=B,i=l.child;if(l.tag===22&&r){var o=l.memoizedState!==null||Cl;if(!o){var c=l.alternate,d=c!==null&&c.memoizedState!==null||Ue;c=Cl;var x=Ue;if(Cl=o,(Ue=d)&&!x)for(B=l;B!==null;)o=B,d=o.child,o.tag===22&&o.memoizedState!==null?Ma(l):d!==null?(d.return=o,B=d):Ma(l);for(;i!==null;)B=i,za(i),i=i.sibling;B=l,Cl=c,Ue=x}Oa(e)}else(l.subtreeFlags&8772)!==0&&i!==null?(i.return=l,B=i):Oa(e)}}function Oa(e){for(;B!==null;){var t=B;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ue||Nl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ue)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:pt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Is(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Is(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var x=t.alternate;if(x!==null){var _=x.memoizedState;if(_!==null){var P=_.dehydrated;P!==null&&er(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ue||t.flags&512&&Eo(t)}catch(C){ge(t,t.return,C)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function Ia(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function Ma(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Nl(4,t)}catch(d){ge(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(d){ge(t,l,d)}}var i=t.return;try{Eo(t)}catch(d){ge(t,i,d)}break;case 5:var o=t.return;try{Eo(t)}catch(d){ge(t,o,d)}}}catch(d){ge(t,t.return,d)}if(t===e){B=null;break}var c=t.sibling;if(c!==null){c.return=t.return,B=c;break}B=t.return}}var vd=Math.ceil,_l=ie.ReactCurrentDispatcher,_o=ie.ReactCurrentOwner,ot=ie.ReactCurrentBatchConfig,ee=0,Pe=null,Se=null,Te=0,et=0,Un=Dt(0),Ne=0,Er=null,sn=0,jl=0,jo=0,Cr=null,Ke=null,Po=0,Dn=1/0,Lt=null,Pl=!1,Ro=null,Ht=null,Rl=!1,Qt=null,Ll=0,Nr=0,Lo=null,Tl=-1,zl=0;function Ae(){return(ee&6)!==0?we():Tl!==-1?Tl:Tl=we()}function Kt(e){return(e.mode&1)===0?1:(ee&2)!==0&&Te!==0?Te&-Te:bf.transition!==null?(zl===0&&(zl=Pu()),zl):(e=ue,e!==0||(e=window.event,e=e===void 0?16:Uu(e.type)),e)}function vt(e,t,n,r){if(50<Nr)throw Nr=0,Lo=null,Error(s(185));Gn(e,n,r),((ee&2)===0||e!==Pe)&&(e===Pe&&((ee&2)===0&&(jl|=n),Ne===4&&Yt(e,Te)),Ye(e,r),n===1&&ee===0&&(t.mode&1)===0&&(Dn=we()+500,ol&&At()))}function Ye(e,t){var n=e.callbackNode;qc(e,t);var r=Wr(e,e===Pe?Te:0);if(r===0)n!==null&&Nu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Nu(n),t===1)e.tag===0?qf(Ua.bind(null,e)):ks(Ua.bind(null,e)),Xf(function(){(ee&6)===0&&At()}),n=null;else{switch(Ru(r)){case 1:n=si;break;case 4:n=_u;break;case 16:n=Ur;break;case 536870912:n=ju;break;default:n=Ur}n=Qa(n,Fa.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fa(e,t){if(Tl=-1,zl=0,(ee&6)!==0)throw Error(s(327));var n=e.callbackNode;if(Bn()&&e.callbackNode!==n)return null;var r=Wr(e,e===Pe?Te:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Ol(e,r);else{t=r;var l=ee;ee|=2;var i=Ba();(Pe!==e||Te!==t)&&(Lt=null,Dn=we()+500,cn(e,t));do try{wd();break}catch(c){Da(e,c)}while(!0);Yi(),_l.current=i,ee=l,Se!==null?t=0:(Pe=null,Te=0,t=Ne)}if(t!==0){if(t===2&&(l=ai(e),l!==0&&(r=l,t=To(e,l))),t===1)throw n=Er,cn(e,0),Yt(e,r),Ye(e,we()),n;if(t===6)Yt(e,r);else{if(l=e.current.alternate,(r&30)===0&&!gd(l)&&(t=Ol(e,r),t===2&&(i=ai(e),i!==0&&(r=i,t=To(e,i))),t===1))throw n=Er,cn(e,0),Yt(e,r),Ye(e,we()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:fn(e,Ke,Lt);break;case 3:if(Yt(e,r),(r&130023424)===r&&(t=Po+500-we(),10<t)){if(Wr(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){Ae(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Fi(fn.bind(null,e,Ke,Lt),t);break}fn(e,Ke,Lt);break;case 4:if(Yt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var o=31-ct(r);i=1<<o,o=t[o],o>l&&(l=o),r&=~i}if(r=l,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vd(r/1960))-r,10<r){e.timeoutHandle=Fi(fn.bind(null,e,Ke,Lt),r);break}fn(e,Ke,Lt);break;case 5:fn(e,Ke,Lt);break;default:throw Error(s(329))}}}return Ye(e,we()),e.callbackNode===n?Fa.bind(null,e):null}function To(e,t){var n=Cr;return e.current.memoizedState.isDehydrated&&(cn(e,t).flags|=256),e=Ol(e,t),e!==2&&(t=Ke,Ke=n,t!==null&&zo(t)),e}function zo(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function gd(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],i=l.getSnapshot;l=l.value;try{if(!ft(i(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yt(e,t){for(t&=~jo,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ct(t),r=1<<n;e[n]=-1,t&=~r}}function Ua(e){if((ee&6)!==0)throw Error(s(327));Bn();var t=Wr(e,0);if((t&1)===0)return Ye(e,we()),null;var n=Ol(e,t);if(e.tag!==0&&n===2){var r=ai(e);r!==0&&(t=r,n=To(e,r))}if(n===1)throw n=Er,cn(e,0),Yt(e,t),Ye(e,we()),n;if(n===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fn(e,Ke,Lt),Ye(e,we()),null}function Oo(e,t){var n=ee;ee|=1;try{return e(t)}finally{ee=n,ee===0&&(Dn=we()+500,ol&&At())}}function an(e){Qt!==null&&Qt.tag===0&&(ee&6)===0&&Bn();var t=ee;ee|=1;var n=ot.transition,r=ue;try{if(ot.transition=null,ue=1,e)return e()}finally{ue=r,ot.transition=n,ee=t,(ee&6)===0&&At()}}function Io(){et=Un.current,de(Un)}function cn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Yf(n)),Se!==null)for(n=Se.return;n!==null;){var r=n;switch(Vi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ll();break;case 3:In(),de($e),de(Ie),to();break;case 5:bi(r);break;case 4:In();break;case 13:de(me);break;case 19:de(me);break;case 10:Xi(r.type._context);break;case 22:case 23:Io()}n=n.return}if(Pe=e,Se=e=Xt(e.current,null),Te=et=t,Ne=0,Er=null,jo=jl=sn=0,Ke=Cr=null,ln!==null){for(t=0;t<ln.length;t++)if(n=ln[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=l,r.next=o}n.pending=r}ln=null}return e}function Da(e,t){do{var n=Se;try{if(Yi(),vl.current=xl,gl){for(var r=ve.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}gl=!1}if(un=0,je=Ce=ve=null,gr=!1,yr=0,_o.current=null,n===null||n.return===null){Ne=1,Er=t,Se=null;break}e:{var i=e,o=n.return,c=n,d=t;if(t=Te,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var x=d,_=c,P=_.tag;if((_.mode&1)===0&&(P===0||P===11||P===15)){var C=_.alternate;C?(_.updateQueue=C.updateQueue,_.memoizedState=C.memoizedState,_.lanes=C.lanes):(_.updateQueue=null,_.memoizedState=null)}var D=aa(o);if(D!==null){D.flags&=-257,ca(D,o,c,i,t),D.mode&1&&sa(i,x,t),t=D,d=x;var A=t.updateQueue;if(A===null){var W=new Set;W.add(d),t.updateQueue=W}else A.add(d);break e}else{if((t&1)===0){sa(i,x,t),Mo();break e}d=Error(s(426))}}else if(he&&c.mode&1){var xe=aa(o);if(xe!==null){(xe.flags&65536)===0&&(xe.flags|=256),ca(xe,o,c,i,t),Qi(Mn(d,c));break e}}i=d=Mn(d,c),Ne!==4&&(Ne=2),Cr===null?Cr=[i]:Cr.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=oa(i,d,t);Os(i,g);break e;case 1:c=d;var h=i.type,y=i.stateNode;if((i.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ht===null||!Ht.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var T=ua(i,c,t);Os(i,T);break e}}i=i.return}while(i!==null)}Wa(n)}catch(V){t=V,Se===n&&n!==null&&(Se=n=n.return);continue}break}while(!0)}function Ba(){var e=_l.current;return _l.current=xl,e===null?xl:e}function Mo(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Pe===null||(sn&268435455)===0&&(jl&268435455)===0||Yt(Pe,Te)}function Ol(e,t){var n=ee;ee|=2;var r=Ba();(Pe!==e||Te!==t)&&(Lt=null,cn(e,t));do try{yd();break}catch(l){Da(e,l)}while(!0);if(Yi(),ee=n,_l.current=r,Se!==null)throw Error(s(261));return Pe=null,Te=0,Ne}function yd(){for(;Se!==null;)Aa(Se)}function wd(){for(;Se!==null&&!$c();)Aa(Se)}function Aa(e){var t=Ha(e.alternate,e,et);e.memoizedProps=e.pendingProps,t===null?Wa(e):Se=t,_o.current=null}function Wa(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=fd(n,t,et),n!==null){Se=n;return}}else{if(n=dd(n,t),n!==null){n.flags&=32767,Se=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ne=6,Se=null;return}}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ne===0&&(Ne=5)}function fn(e,t,n){var r=ue,l=ot.transition;try{ot.transition=null,ue=1,xd(e,t,n,r)}finally{ot.transition=l,ue=r}return null}function xd(e,t,n,r){do Bn();while(Qt!==null);if((ee&6)!==0)throw Error(s(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(bc(e,i),e===Pe&&(Se=Pe=null,Te=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Rl||(Rl=!0,Qa(Ur,function(){return Bn(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=ot.transition,ot.transition=null;var o=ue;ue=1;var c=ee;ee|=4,_o.current=null,hd(e,n),Ta(n,e),Af(Ii),Hr=!!Oi,Ii=Oi=null,e.current=n,md(n),Hc(),ee=c,ue=o,ot.transition=i}else e.current=n;if(Rl&&(Rl=!1,Qt=e,Ll=l),i=e.pendingLanes,i===0&&(Ht=null),Yc(n.stateNode),Ye(e,we()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Pl)throw Pl=!1,e=Ro,Ro=null,e;return(Ll&1)!==0&&e.tag!==0&&Bn(),i=e.pendingLanes,(i&1)!==0?e===Lo?Nr++:(Nr=0,Lo=e):Nr=0,At(),null}function Bn(){if(Qt!==null){var e=Ru(Ll),t=ot.transition,n=ue;try{if(ot.transition=null,ue=16>e?16:e,Qt===null)var r=!1;else{if(e=Qt,Qt=null,Ll=0,(ee&6)!==0)throw Error(s(331));var l=ee;for(ee|=4,B=e.current;B!==null;){var i=B,o=i.child;if((B.flags&16)!==0){var c=i.deletions;if(c!==null){for(var d=0;d<c.length;d++){var x=c[d];for(B=x;B!==null;){var _=B;switch(_.tag){case 0:case 11:case 15:kr(8,_,i)}var P=_.child;if(P!==null)P.return=_,B=P;else for(;B!==null;){_=B;var C=_.sibling,D=_.return;if(_a(_),_===x){B=null;break}if(C!==null){C.return=D,B=C;break}B=D}}}var A=i.alternate;if(A!==null){var W=A.child;if(W!==null){A.child=null;do{var xe=W.sibling;W.sibling=null,W=xe}while(W!==null)}}B=i}}if((i.subtreeFlags&2064)!==0&&o!==null)o.return=i,B=o;else e:for(;B!==null;){if(i=B,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:kr(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,B=g;break e}B=i.return}}var h=e.current;for(B=h;B!==null;){o=B;var y=o.child;if((o.subtreeFlags&2064)!==0&&y!==null)y.return=o,B=y;else e:for(o=h;B!==null;){if(c=B,(c.flags&2048)!==0)try{switch(c.tag){case 0:case 11:case 15:Nl(9,c)}}catch(V){ge(c,c.return,V)}if(c===o){B=null;break e}var T=c.sibling;if(T!==null){T.return=c.return,B=T;break e}B=c.return}}if(ee=l,At(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Dr,e)}catch{}r=!0}return r}finally{ue=n,ot.transition=t}}return!1}function Va(e,t,n){t=Mn(n,t),t=oa(e,t,1),e=Vt(e,t,1),t=Ae(),e!==null&&(Gn(e,1,t),Ye(e,t))}function ge(e,t,n){if(e.tag===3)Va(e,e,n);else for(;t!==null;){if(t.tag===3){Va(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ht===null||!Ht.has(r))){e=Mn(n,e),e=ua(t,e,1),t=Vt(t,e,1),e=Ae(),t!==null&&(Gn(t,1,e),Ye(t,e));break}}t=t.return}}function Sd(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ae(),e.pingedLanes|=e.suspendedLanes&n,Pe===e&&(Te&n)===n&&(Ne===4||Ne===3&&(Te&130023424)===Te&&500>we()-Po?cn(e,0):jo|=n),Ye(e,t)}function $a(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ar,Ar<<=1,(Ar&130023424)===0&&(Ar=4194304)));var n=Ae();e=jt(e,t),e!==null&&(Gn(e,t,n),Ye(e,n))}function kd(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$a(e,n)}function Ed(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}r!==null&&r.delete(t),$a(e,n)}var Ha;Ha=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$e.current)Qe=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Qe=!1,cd(e,t,n);Qe=(e.flags&131072)!==0}else Qe=!1,he&&(t.flags&1048576)!==0&&Es(t,sl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;El(e,t),e=t.pendingProps;var l=jn(t,Ie.current);On(t,n),l=lo(null,t,r,e,l,n);var i=io();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,He(r)?(i=!0,il(t)):i=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Zi(t),l.updater=Sl,t.stateNode=l,l._reactInternals=t,fo(t,r,e,n),t=vo(null,t,r,!0,i,n)):(t.tag=0,he&&i&&Wi(t),Be(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(El(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Nd(r),e=pt(r,e),l){case 0:t=mo(null,t,r,e,n);break e;case 1:t=va(null,t,r,e,n);break e;case 11:t=fa(null,t,r,e,n);break e;case 14:t=da(null,t,r,pt(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:pt(r,l),mo(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:pt(r,l),va(e,t,r,l,n);case 3:e:{if(ga(t),e===null)throw Error(s(387));r=t.pendingProps,i=t.memoizedState,l=i.element,zs(e,t),hl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){l=Mn(Error(s(423)),t),t=ya(e,t,r,n,l);break e}else if(r!==l){l=Mn(Error(s(424)),t),t=ya(e,t,r,n,l);break e}else for(be=Ut(t.stateNode.containerInfo.firstChild),qe=t,he=!0,dt=null,n=Ls(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ln(),r===l){t=Rt(e,t,n);break e}Be(e,t,r,n)}t=t.child}return t;case 5:return Ms(t),e===null&&Hi(t),r=t.type,l=t.pendingProps,i=e!==null?e.memoizedProps:null,o=l.children,Mi(r,l)?o=null:i!==null&&Mi(r,i)&&(t.flags|=32),ma(e,t),Be(e,t,o,n),t.child;case 6:return e===null&&Hi(t),null;case 13:return wa(e,t,n);case 4:return qi(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tn(t,null,r,n):Be(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:pt(r,l),fa(e,t,r,l,n);case 7:return Be(e,t,t.pendingProps,n),t.child;case 8:return Be(e,t,t.pendingProps.children,n),t.child;case 12:return Be(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,i=t.memoizedProps,o=l.value,ae(fl,r._currentValue),r._currentValue=o,i!==null)if(ft(i.value,o)){if(i.children===l.children&&!$e.current){t=Rt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(i.tag===1){d=Pt(-1,n&-n),d.tag=2;var x=i.updateQueue;if(x!==null){x=x.shared;var _=x.pending;_===null?d.next=d:(d.next=_.next,_.next=d),x.pending=d}}i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),Gi(i.return,n,t),c.lanes|=n;break}d=d.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(s(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Gi(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Be(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,On(t,n),l=lt(l),r=r(l),t.flags|=1,Be(e,t,r,n),t.child;case 14:return r=t.type,l=pt(r,t.pendingProps),l=pt(r.type,l),da(e,t,r,l,n);case 15:return pa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:pt(r,l),El(e,t),t.tag=1,He(r)?(e=!0,il(t)):e=!1,On(t,n),la(t,r,l),fo(t,r,l,n),vo(null,t,r,!0,e,n);case 19:return Sa(e,t,n);case 22:return ha(e,t,n)}throw Error(s(156,t.tag))};function Qa(e,t){return Cu(e,t)}function Cd(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(e,t,n,r){return new Cd(e,t,n,r)}function Fo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nd(e){if(typeof e=="function")return Fo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===We)return 11;if(e===Ve)return 14}return 2}function Xt(e,t){var n=e.alternate;return n===null?(n=ut(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Il(e,t,n,r,l,i){var o=2;if(r=e,typeof e=="function")Fo(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ee:return dn(n.children,l,i,t);case De:o=8,l|=8;break;case at:return e=ut(12,n,t,l|2),e.elementType=at,e.lanes=i,e;case ze:return e=ut(13,n,t,l),e.elementType=ze,e.lanes=i,e;case Ge:return e=ut(19,n,t,l),e.elementType=Ge,e.lanes=i,e;case ce:return Ml(n,l,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tt:o=10;break e;case gt:o=9;break e;case We:o=11;break e;case Ve:o=14;break e;case Oe:o=16,r=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=ut(o,n,t,l),t.elementType=e,t.type=r,t.lanes=i,t}function dn(e,t,n,r){return e=ut(7,e,r,t),e.lanes=n,e}function Ml(e,t,n,r){return e=ut(22,e,r,t),e.elementType=ce,e.lanes=n,e.stateNode={isHidden:!1},e}function Uo(e,t,n){return e=ut(6,e,null,t),e.lanes=n,e}function Do(e,t,n){return t=ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _d(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ci(0),this.expirationTimes=ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Bo(e,t,n,r,l,i,o,c,d){return e=new _d(e,t,n,c,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ut(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zi(i),e}function jd(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_e,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ka(e){if(!e)return Bt;e=e._reactInternals;e:{if(bt(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(He(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var n=e.type;if(He(n))return xs(e,n,t)}return t}function Ya(e,t,n,r,l,i,o,c,d){return e=Bo(n,r,!0,e,l,i,o,c,d),e.context=Ka(null),n=e.current,r=Ae(),l=Kt(n),i=Pt(r,l),i.callback=t??null,Vt(n,i,l),e.current.lanes=l,Gn(e,l,r),Ye(e,r),e}function Fl(e,t,n,r){var l=t.current,i=Ae(),o=Kt(l);return n=Ka(n),t.context===null?t.context=n:t.pendingContext=n,t=Pt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vt(l,t,o),e!==null&&(vt(e,l,o,i),pl(e,l,o)),o}function Ul(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xa(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ao(e,t){Xa(e,t),(e=e.alternate)&&Xa(e,t)}function Pd(){return null}var Ga=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wo(e){this._internalRoot=e}Dl.prototype.render=Wo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Fl(e,t,null,null)},Dl.prototype.unmount=Wo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;an(function(){Fl(null,e,null,null)}),t[Et]=null}};function Dl(e){this._internalRoot=e}Dl.prototype.unstable_scheduleHydration=function(e){if(e){var t=zu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&t!==0&&t<It[n].priority;n++);It.splice(n,0,e),n===0&&Mu(e)}};function Vo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ja(){}function Rd(e,t,n,r,l){if(l){if(typeof r=="function"){var i=r;r=function(){var x=Ul(o);i.call(x)}}var o=Ya(t,r,e,0,null,!1,!1,"",Ja);return e._reactRootContainer=o,e[Et]=o.current,ar(e.nodeType===8?e.parentNode:e),an(),o}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var c=r;r=function(){var x=Ul(d);c.call(x)}}var d=Bo(e,0,!1,null,null,!1,!1,"",Ja);return e._reactRootContainer=d,e[Et]=d.current,ar(e.nodeType===8?e.parentNode:e),an(function(){Fl(t,d,n,r)}),d}function Al(e,t,n,r,l){var i=n._reactRootContainer;if(i){var o=i;if(typeof l=="function"){var c=l;l=function(){var d=Ul(o);c.call(d)}}Fl(t,o,e,l)}else o=Rd(n,t,e,l,r);return Ul(o)}Lu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Xn(t.pendingLanes);n!==0&&(fi(t,n|1),Ye(t,we()),(ee&6)===0&&(Dn=we()+500,At()))}break;case 13:an(function(){var r=jt(e,1);if(r!==null){var l=Ae();vt(r,e,1,l)}}),Ao(e,1)}},di=function(e){if(e.tag===13){var t=jt(e,134217728);if(t!==null){var n=Ae();vt(t,e,134217728,n)}Ao(e,134217728)}},Tu=function(e){if(e.tag===13){var t=Kt(e),n=jt(e,t);if(n!==null){var r=Ae();vt(n,e,t,r)}Ao(e,t)}},zu=function(){return ue},Ou=function(e,t){var n=ue;try{return ue=e,t()}finally{ue=n}},li=function(e,t,n){switch(t){case"input":if(Jl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=rl(r);if(!l)throw Error(s(90));ru(r),Jl(r,l)}}}break;case"textarea":su(e,n);break;case"select":t=n.value,t!=null&&mn(e,!!n.multiple,t,!1)}},gu=Oo,yu=an;var Ld={usingClientEntryPoint:!1,Events:[dr,Nn,rl,mu,vu,Oo]},_r={findFiberByHostInstance:en,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Td={bundleType:_r.bundleType,version:_r.version,rendererPackageName:_r.rendererPackageName,rendererConfig:_r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ku(e),e===null?null:e.stateNode},findFiberByHostInstance:_r.findFiberByHostInstance||Pd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wl.isDisabled&&Wl.supportsFiber)try{Dr=Wl.inject(Td),yt=Wl}catch{}}return Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ld,Xe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vo(t))throw Error(s(200));return jd(e,t,null,n)},Xe.createRoot=function(e,t){if(!Vo(e))throw Error(s(299));var n=!1,r="",l=Ga;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Bo(e,1,!1,null,null,n,!1,r,l),e[Et]=t.current,ar(e.nodeType===8?e.parentNode:e),new Wo(t)},Xe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=ku(t),e=e===null?null:e.stateNode,e},Xe.flushSync=function(e){return an(e)},Xe.hydrate=function(e,t,n){if(!Bl(t))throw Error(s(200));return Al(null,e,t,!0,n)},Xe.hydrateRoot=function(e,t,n){if(!Vo(e))throw Error(s(405));var r=n!=null&&n.hydratedSources||null,l=!1,i="",o=Ga;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Ya(t,null,e,1,n??null,l,!1,i,o),e[Et]=t.current,ar(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Dl(t)},Xe.render=function(e,t,n){if(!Bl(t))throw Error(s(200));return Al(null,e,t,!1,n)},Xe.unmountComponentAtNode=function(e){if(!Bl(e))throw Error(s(40));return e._reactRootContainer?(an(function(){Al(null,null,e,!1,function(){e._reactRootContainer=null,e[Et]=null})}),!0):!1},Xe.unstable_batchedUpdates=Oo,Xe.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bl(n))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Al(e,t,n,!1,r)},Xe.version="18.3.1-next-f1338f8080-20240426",Xe}var lc;function yc(){if(lc)return Qo.exports;lc=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(a){console.error(a)}}return u(),Qo.exports=Ad(),Qo.exports}var ic;function Wd(){if(ic)return Vl;ic=1;var u=yc();return Vl.createRoot=u.createRoot,Vl.hydrateRoot=u.hydrateRoot,Vl}var Vd=Wd();const $d=gc(Vd);yc();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rr(){return Rr=Object.assign?Object.assign.bind():function(u){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(u[f]=s[f])}return u},Rr.apply(this,arguments)}var Jt;(function(u){u.Pop="POP",u.Push="PUSH",u.Replace="REPLACE"})(Jt||(Jt={}));const oc="popstate";function Hd(u){u===void 0&&(u={});function a(f,m){let{pathname:w,search:S,hash:E}=f.location;return Go("",{pathname:w,search:S,hash:E},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function s(f,m){return typeof m=="string"?m:$l(m)}return Kd(a,s,null,u)}function ke(u,a){if(u===!1||u===null||typeof u>"u")throw new Error(a)}function eu(u,a){if(!u){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function Qd(){return Math.random().toString(36).substr(2,8)}function uc(u,a){return{usr:u.state,key:u.key,idx:a}}function Go(u,a,s,f){return s===void 0&&(s=null),Rr({pathname:typeof u=="string"?u:u.pathname,search:"",hash:""},typeof a=="string"?Wn(a):a,{state:s,key:a&&a.key||f||Qd()})}function $l(u){let{pathname:a="/",search:s="",hash:f=""}=u;return s&&s!=="?"&&(a+=s.charAt(0)==="?"?s:"?"+s),f&&f!=="#"&&(a+=f.charAt(0)==="#"?f:"#"+f),a}function Wn(u){let a={};if(u){let s=u.indexOf("#");s>=0&&(a.hash=u.substr(s),u=u.substr(0,s));let f=u.indexOf("?");f>=0&&(a.search=u.substr(f),u=u.substr(0,f)),u&&(a.pathname=u)}return a}function Kd(u,a,s,f){f===void 0&&(f={});let{window:m=document.defaultView,v5Compat:w=!1}=f,S=m.history,E=Jt.Pop,k=null,L=O();L==null&&(L=0,S.replaceState(Rr({},S.state,{idx:L}),""));function O(){return(S.state||{idx:null}).idx}function z(){E=Jt.Pop;let M=O(),b=M==null?null:M-L;L=M,k&&k({action:E,location:U.location,delta:b})}function $(M,b){E=Jt.Push;let te=Go(U.location,M,b);L=O()+1;let J=uc(te,L),ie=U.createHref(te);try{S.pushState(J,"",ie)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;m.location.assign(ie)}w&&k&&k({action:E,location:U.location,delta:1})}function q(M,b){E=Jt.Replace;let te=Go(U.location,M,b);L=O();let J=uc(te,L),ie=U.createHref(te);S.replaceState(J,"",ie),w&&k&&k({action:E,location:U.location,delta:0})}function Y(M){let b=m.location.origin!=="null"?m.location.origin:m.location.href,te=typeof M=="string"?M:$l(M);return te=te.replace(/ $/,"%20"),ke(b,"No window.location.(origin|href) available to create URL for href: "+te),new URL(te,b)}let U={get action(){return E},get location(){return u(m,S)},listen(M){if(k)throw new Error("A history only accepts one active listener");return m.addEventListener(oc,z),k=M,()=>{m.removeEventListener(oc,z),k=null}},createHref(M){return a(m,M)},createURL:Y,encodeLocation(M){let b=Y(M);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:$,replace:q,go(M){return S.go(M)}};return U}var sc;(function(u){u.data="data",u.deferred="deferred",u.redirect="redirect",u.error="error"})(sc||(sc={}));function Yd(u,a,s){return s===void 0&&(s="/"),Xd(u,a,s)}function Xd(u,a,s,f){let m=typeof a=="string"?Wn(a):a,w=tu(m.pathname||"/",s);if(w==null)return null;let S=wc(u);Gd(S);let E=null;for(let k=0;E==null&&k<S.length;++k){let L=up(w);E=lp(S[k],L)}return E}function wc(u,a,s,f){a===void 0&&(a=[]),s===void 0&&(s=[]),f===void 0&&(f="");let m=(w,S,E)=>{let k={relativePath:E===void 0?w.path||"":E,caseSensitive:w.caseSensitive===!0,childrenIndex:S,route:w};k.relativePath.startsWith("/")&&(ke(k.relativePath.startsWith(f),'Absolute route path "'+k.relativePath+'" nested under path '+('"'+f+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),k.relativePath=k.relativePath.slice(f.length));let L=Zt([f,k.relativePath]),O=s.concat(k);w.children&&w.children.length>0&&(ke(w.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+L+'".')),wc(w.children,a,O,L)),!(w.path==null&&!w.index)&&a.push({path:L,score:np(L,w.index),routesMeta:O})};return u.forEach((w,S)=>{var E;if(w.path===""||!((E=w.path)!=null&&E.includes("?")))m(w,S);else for(let k of xc(w.path))m(w,S,k)}),a}function xc(u){let a=u.split("/");if(a.length===0)return[];let[s,...f]=a,m=s.endsWith("?"),w=s.replace(/\?$/,"");if(f.length===0)return m?[w,""]:[w];let S=xc(f.join("/")),E=[];return E.push(...S.map(k=>k===""?w:[w,k].join("/"))),m&&E.push(...S),E.map(k=>u.startsWith("/")&&k===""?"/":k)}function Gd(u){u.sort((a,s)=>a.score!==s.score?s.score-a.score:rp(a.routesMeta.map(f=>f.childrenIndex),s.routesMeta.map(f=>f.childrenIndex)))}const Jd=/^:[\w-]+$/,Zd=3,qd=2,bd=1,ep=10,tp=-2,ac=u=>u==="*";function np(u,a){let s=u.split("/"),f=s.length;return s.some(ac)&&(f+=tp),a&&(f+=qd),s.filter(m=>!ac(m)).reduce((m,w)=>m+(Jd.test(w)?Zd:w===""?bd:ep),f)}function rp(u,a){return u.length===a.length&&u.slice(0,-1).every((f,m)=>f===a[m])?u[u.length-1]-a[a.length-1]:0}function lp(u,a,s){let{routesMeta:f}=u,m={},w="/",S=[];for(let E=0;E<f.length;++E){let k=f[E],L=E===f.length-1,O=w==="/"?a:a.slice(w.length)||"/",z=ip({path:k.relativePath,caseSensitive:k.caseSensitive,end:L},O),$=k.route;if(!z)return null;Object.assign(m,z.params),S.push({params:m,pathname:Zt([w,z.pathname]),pathnameBase:dp(Zt([w,z.pathnameBase])),route:$}),z.pathnameBase!=="/"&&(w=Zt([w,z.pathnameBase]))}return S}function ip(u,a){typeof u=="string"&&(u={path:u,caseSensitive:!1,end:!0});let[s,f]=op(u.path,u.caseSensitive,u.end),m=a.match(s);if(!m)return null;let w=m[0],S=w.replace(/(.)\/+$/,"$1"),E=m.slice(1);return{params:f.reduce((L,O,z)=>{let{paramName:$,isOptional:q}=O;if($==="*"){let U=E[z]||"";S=w.slice(0,w.length-U.length).replace(/(.)\/+$/,"$1")}const Y=E[z];return q&&!Y?L[$]=void 0:L[$]=(Y||"").replace(/%2F/g,"/"),L},{}),pathname:w,pathnameBase:S,pattern:u}}function op(u,a,s){a===void 0&&(a=!1),s===void 0&&(s=!0),eu(u==="*"||!u.endsWith("*")||u.endsWith("/*"),'Route path "'+u+'" will be treated as if it were '+('"'+u.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+u.replace(/\*$/,"/*")+'".'));let f=[],m="^"+u.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(S,E,k)=>(f.push({paramName:E,isOptional:k!=null}),k?"/?([^\\/]+)?":"/([^\\/]+)"));return u.endsWith("*")?(f.push({paramName:"*"}),m+=u==="*"||u==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?m+="\\/*$":u!==""&&u!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,a?void 0:"i"),f]}function up(u){try{return u.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return eu(!1,'The URL path "'+u+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),u}}function tu(u,a){if(a==="/")return u;if(!u.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,f=u.charAt(s);return f&&f!=="/"?null:u.slice(s)||"/"}const sp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ap=u=>sp.test(u);function cp(u,a){a===void 0&&(a="/");let{pathname:s,search:f="",hash:m=""}=typeof u=="string"?Wn(u):u,w;if(s)if(ap(s))w=s;else{if(s.includes("//")){let S=s;s=s.replace(/\/\/+/g,"/"),eu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(S+" -> "+s))}s.startsWith("/")?w=cc(s.substring(1),"/"):w=cc(s,a)}else w=a;return{pathname:w,search:pp(f),hash:hp(m)}}function cc(u,a){let s=a.replace(/\/+$/,"").split("/");return u.split("/").forEach(m=>{m===".."?s.length>1&&s.pop():m!=="."&&s.push(m)}),s.length>1?s.join("/"):"/"}function Xo(u,a,s,f){return"Cannot include a '"+u+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(f)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fp(u){return u.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function Sc(u,a){let s=fp(u);return a?s.map((f,m)=>m===s.length-1?f.pathname:f.pathnameBase):s.map(f=>f.pathnameBase)}function kc(u,a,s,f){f===void 0&&(f=!1);let m;typeof u=="string"?m=Wn(u):(m=Rr({},u),ke(!m.pathname||!m.pathname.includes("?"),Xo("?","pathname","search",m)),ke(!m.pathname||!m.pathname.includes("#"),Xo("#","pathname","hash",m)),ke(!m.search||!m.search.includes("#"),Xo("#","search","hash",m)));let w=u===""||m.pathname==="",S=w?"/":m.pathname,E;if(S==null)E=s;else{let z=a.length-1;if(!f&&S.startsWith("..")){let $=S.split("/");for(;$[0]==="..";)$.shift(),z-=1;m.pathname=$.join("/")}E=z>=0?a[z]:"/"}let k=cp(m,E),L=S&&S!=="/"&&S.endsWith("/"),O=(w||S===".")&&s.endsWith("/");return!k.pathname.endsWith("/")&&(L||O)&&(k.pathname+="/"),k}const Zt=u=>u.join("/").replace(/\/\/+/g,"/"),dp=u=>u.replace(/\/+$/,"").replace(/^\/*/,"/"),pp=u=>!u||u==="?"?"":u.startsWith("?")?u:"?"+u,hp=u=>!u||u==="#"?"":u.startsWith("#")?u:"#"+u;function mp(u){return u!=null&&typeof u.status=="number"&&typeof u.statusText=="string"&&typeof u.internal=="boolean"&&"data"in u}const Ec=["post","put","patch","delete"];new Set(Ec);const vp=["get",...Ec];new Set(vp);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lr(){return Lr=Object.assign?Object.assign.bind():function(u){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(u[f]=s[f])}return u},Lr.apply(this,arguments)}const nu=j.createContext(null),gp=j.createContext(null),hn=j.createContext(null),Ql=j.createContext(null),qt=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Cc=j.createContext(null);function yp(u,a){let{relative:s}=a===void 0?{}:a;Tr()||ke(!1);let{basename:f,navigator:m}=j.useContext(hn),{hash:w,pathname:S,search:E}=_c(u,{relative:s}),k=S;return f!=="/"&&(k=S==="/"?f:Zt([f,S])),m.createHref({pathname:k,search:E,hash:w})}function Tr(){return j.useContext(Ql)!=null}function Kl(){return Tr()||ke(!1),j.useContext(Ql).location}function Nc(u){j.useContext(hn).static||j.useLayoutEffect(u)}function wp(){let{isDataRoute:u}=j.useContext(qt);return u?Op():xp()}function xp(){Tr()||ke(!1);let u=j.useContext(nu),{basename:a,future:s,navigator:f}=j.useContext(hn),{matches:m}=j.useContext(qt),{pathname:w}=Kl(),S=JSON.stringify(Sc(m,s.v7_relativeSplatPath)),E=j.useRef(!1);return Nc(()=>{E.current=!0}),j.useCallback(function(L,O){if(O===void 0&&(O={}),!E.current)return;if(typeof L=="number"){f.go(L);return}let z=kc(L,JSON.parse(S),w,O.relative==="path");u==null&&a!=="/"&&(z.pathname=z.pathname==="/"?a:Zt([a,z.pathname])),(O.replace?f.replace:f.push)(z,O.state,O)},[a,f,S,w,u])}function Sp(){let{matches:u}=j.useContext(qt),a=u[u.length-1];return a?a.params:{}}function _c(u,a){let{relative:s}=a===void 0?{}:a,{future:f}=j.useContext(hn),{matches:m}=j.useContext(qt),{pathname:w}=Kl(),S=JSON.stringify(Sc(m,f.v7_relativeSplatPath));return j.useMemo(()=>kc(u,JSON.parse(S),w,s==="path"),[u,S,w,s])}function kp(u,a){return Ep(u,a)}function Ep(u,a,s,f){Tr()||ke(!1);let{navigator:m}=j.useContext(hn),{matches:w}=j.useContext(qt),S=w[w.length-1],E=S?S.params:{};S&&S.pathname;let k=S?S.pathnameBase:"/";S&&S.route;let L=Kl(),O;if(a){var z;let M=typeof a=="string"?Wn(a):a;k==="/"||(z=M.pathname)!=null&&z.startsWith(k)||ke(!1),O=M}else O=L;let $=O.pathname||"/",q=$;if(k!=="/"){let M=k.replace(/^\//,"").split("/");q="/"+$.replace(/^\//,"").split("/").slice(M.length).join("/")}let Y=Yd(u,{pathname:q}),U=Pp(Y&&Y.map(M=>Object.assign({},M,{params:Object.assign({},E,M.params),pathname:Zt([k,m.encodeLocation?m.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?k:Zt([k,m.encodeLocation?m.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),w,s,f);return a&&U?j.createElement(Ql.Provider,{value:{location:Lr({pathname:"/",search:"",hash:"",state:null,key:"default"},O),navigationType:Jt.Pop}},U):U}function Cp(){let u=zp(),a=mp(u)?u.status+" "+u.statusText:u instanceof Error?u.message:JSON.stringify(u),s=u instanceof Error?u.stack:null,m={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},a),s?j.createElement("pre",{style:m},s):null,null)}const Np=j.createElement(Cp,null);class _p extends j.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,s){return s.location!==a.location||s.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:s.error,location:s.location,revalidation:a.revalidation||s.revalidation}}componentDidCatch(a,s){console.error("React Router caught the following error during render",a,s)}render(){return this.state.error!==void 0?j.createElement(qt.Provider,{value:this.props.routeContext},j.createElement(Cc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jp(u){let{routeContext:a,match:s,children:f}=u,m=j.useContext(nu);return m&&m.static&&m.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(m.staticContext._deepestRenderedBoundaryId=s.route.id),j.createElement(qt.Provider,{value:a},f)}function Pp(u,a,s,f){var m;if(a===void 0&&(a=[]),s===void 0&&(s=null),f===void 0&&(f=null),u==null){var w;if(!s)return null;if(s.errors)u=s.matches;else if((w=f)!=null&&w.v7_partialHydration&&a.length===0&&!s.initialized&&s.matches.length>0)u=s.matches;else return null}let S=u,E=(m=s)==null?void 0:m.errors;if(E!=null){let O=S.findIndex(z=>z.route.id&&(E==null?void 0:E[z.route.id])!==void 0);O>=0||ke(!1),S=S.slice(0,Math.min(S.length,O+1))}let k=!1,L=-1;if(s&&f&&f.v7_partialHydration)for(let O=0;O<S.length;O++){let z=S[O];if((z.route.HydrateFallback||z.route.hydrateFallbackElement)&&(L=O),z.route.id){let{loaderData:$,errors:q}=s,Y=z.route.loader&&$[z.route.id]===void 0&&(!q||q[z.route.id]===void 0);if(z.route.lazy||Y){k=!0,L>=0?S=S.slice(0,L+1):S=[S[0]];break}}}return S.reduceRight((O,z,$)=>{let q,Y=!1,U=null,M=null;s&&(q=E&&z.route.id?E[z.route.id]:void 0,U=z.route.errorElement||Np,k&&(L<0&&$===0?(Ip("route-fallback"),Y=!0,M=null):L===$&&(Y=!0,M=z.route.hydrateFallbackElement||null)));let b=a.concat(S.slice(0,$+1)),te=()=>{let J;return q?J=U:Y?J=M:z.route.Component?J=j.createElement(z.route.Component,null):z.route.element?J=z.route.element:J=O,j.createElement(jp,{match:z,routeContext:{outlet:O,matches:b,isDataRoute:s!=null},children:J})};return s&&(z.route.ErrorBoundary||z.route.errorElement||$===0)?j.createElement(_p,{location:s.location,revalidation:s.revalidation,component:U,error:q,children:te(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):te()},null)}var jc=(function(u){return u.UseBlocker="useBlocker",u.UseRevalidator="useRevalidator",u.UseNavigateStable="useNavigate",u})(jc||{}),Pc=(function(u){return u.UseBlocker="useBlocker",u.UseLoaderData="useLoaderData",u.UseActionData="useActionData",u.UseRouteError="useRouteError",u.UseNavigation="useNavigation",u.UseRouteLoaderData="useRouteLoaderData",u.UseMatches="useMatches",u.UseRevalidator="useRevalidator",u.UseNavigateStable="useNavigate",u.UseRouteId="useRouteId",u})(Pc||{});function Rp(u){let a=j.useContext(nu);return a||ke(!1),a}function Lp(u){let a=j.useContext(gp);return a||ke(!1),a}function Tp(u){let a=j.useContext(qt);return a||ke(!1),a}function Rc(u){let a=Tp(),s=a.matches[a.matches.length-1];return s.route.id||ke(!1),s.route.id}function zp(){var u;let a=j.useContext(Cc),s=Lp(),f=Rc();return a!==void 0?a:(u=s.errors)==null?void 0:u[f]}function Op(){let{router:u}=Rp(jc.UseNavigateStable),a=Rc(Pc.UseNavigateStable),s=j.useRef(!1);return Nc(()=>{s.current=!0}),j.useCallback(function(m,w){w===void 0&&(w={}),s.current&&(typeof m=="number"?u.navigate(m):u.navigate(m,Lr({fromRouteId:a},w)))},[u,a])}const fc={};function Ip(u,a,s){fc[u]||(fc[u]=!0)}function Mp(u,a){u==null||u.v7_startTransition,u==null||u.v7_relativeSplatPath}function An(u){ke(!1)}function Fp(u){let{basename:a="/",children:s=null,location:f,navigationType:m=Jt.Pop,navigator:w,static:S=!1,future:E}=u;Tr()&&ke(!1);let k=a.replace(/^\/*/,"/"),L=j.useMemo(()=>({basename:k,navigator:w,static:S,future:Lr({v7_relativeSplatPath:!1},E)}),[k,E,w,S]);typeof f=="string"&&(f=Wn(f));let{pathname:O="/",search:z="",hash:$="",state:q=null,key:Y="default"}=f,U=j.useMemo(()=>{let M=tu(O,k);return M==null?null:{location:{pathname:M,search:z,hash:$,state:q,key:Y},navigationType:m}},[k,O,z,$,q,Y,m]);return U==null?null:j.createElement(hn.Provider,{value:L},j.createElement(Ql.Provider,{children:s,value:U}))}function Up(u){let{children:a,location:s}=u;return kp(Jo(a),s)}new Promise(()=>{});function Jo(u,a){a===void 0&&(a=[]);let s=[];return j.Children.forEach(u,(f,m)=>{if(!j.isValidElement(f))return;let w=[...a,m];if(f.type===j.Fragment){s.push.apply(s,Jo(f.props.children,w));return}f.type!==An&&ke(!1),!f.props.index||!f.props.children||ke(!1);let S={id:f.props.id||w.join("-"),caseSensitive:f.props.caseSensitive,element:f.props.element,Component:f.props.Component,index:f.props.index,path:f.props.path,loader:f.props.loader,action:f.props.action,errorElement:f.props.errorElement,ErrorBoundary:f.props.ErrorBoundary,hasErrorBoundary:f.props.ErrorBoundary!=null||f.props.errorElement!=null,shouldRevalidate:f.props.shouldRevalidate,handle:f.props.handle,lazy:f.props.lazy};f.props.children&&(S.children=Jo(f.props.children,w)),s.push(S)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zo(){return Zo=Object.assign?Object.assign.bind():function(u){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(u[f]=s[f])}return u},Zo.apply(this,arguments)}function Dp(u,a){if(u==null)return{};var s={},f=Object.keys(u),m,w;for(w=0;w<f.length;w++)m=f[w],!(a.indexOf(m)>=0)&&(s[m]=u[m]);return s}function Bp(u){return!!(u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)}function Ap(u,a){return u.button===0&&(!a||a==="_self")&&!Bp(u)}const Wp=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Vp="6";try{window.__reactRouterVersion=Vp}catch{}const $p="startTransition",dc=Ud[$p];function Hp(u){let{basename:a,children:s,future:f,window:m}=u,w=j.useRef();w.current==null&&(w.current=Hd({window:m,v5Compat:!0}));let S=w.current,[E,k]=j.useState({action:S.action,location:S.location}),{v7_startTransition:L}=f||{},O=j.useCallback(z=>{L&&dc?dc(()=>k(z)):k(z)},[k,L]);return j.useLayoutEffect(()=>S.listen(O),[S,O]),j.useEffect(()=>Mp(f),[f]),j.createElement(Fp,{basename:a,children:s,location:E.location,navigationType:E.action,navigator:S,future:f})}const Qp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hl=j.forwardRef(function(a,s){let{onClick:f,relative:m,reloadDocument:w,replace:S,state:E,target:k,to:L,preventScrollReset:O,viewTransition:z}=a,$=Dp(a,Wp),{basename:q}=j.useContext(hn),Y,U=!1;if(typeof L=="string"&&Kp.test(L)&&(Y=L,Qp))try{let J=new URL(window.location.href),ie=L.startsWith("//")?new URL(J.protocol+L):new URL(L),ye=tu(ie.pathname,q);ie.origin===J.origin&&ye!=null?L=ye+ie.search+ie.hash:U=!0}catch{}let M=yp(L,{relative:m}),b=Yp(L,{replace:S,state:E,target:k,preventScrollReset:O,relative:m,viewTransition:z});function te(J){f&&f(J),J.defaultPrevented||b(J)}return j.createElement("a",Zo({},$,{href:Y||M,onClick:U||w?f:te,ref:s,target:k}))});var pc;(function(u){u.UseScrollRestoration="useScrollRestoration",u.UseSubmit="useSubmit",u.UseSubmitFetcher="useSubmitFetcher",u.UseFetcher="useFetcher",u.useViewTransitionState="useViewTransitionState"})(pc||(pc={}));var hc;(function(u){u.UseFetcher="useFetcher",u.UseFetchers="useFetchers",u.UseScrollRestoration="useScrollRestoration"})(hc||(hc={}));function Yp(u,a){let{target:s,replace:f,state:m,preventScrollReset:w,relative:S,viewTransition:E}=a===void 0?{}:a,k=wp(),L=Kl(),O=_c(u,{relative:S});return j.useCallback(z=>{if(Ap(z,s)){z.preventDefault();let $=f!==void 0?f:$l(L)===$l(O);k(u,{replace:$,state:m,preventScrollReset:w,relative:S,viewTransition:E})}},[L,k,O,f,m,s,u,w,S,E])}function Xp(){return p.jsxs("aside",{className:"svc-admin-sidebar",children:[p.jsx("h2",{children:"🦀 RON-CORE 🧅"}),p.jsx("nav",{children:p.jsxs("ul",{children:[p.jsx("li",{children:p.jsx(Hl,{to:"/",children:"Nodes"})}),p.jsx("li",{children:p.jsx(Hl,{to:"/settings",children:"Settings"})})]})})]})}const Gp={light:{background:"#f8fafc",foreground:"#0f172a"},dark:{background:"#020617",foreground:"#e2e8f0"}},Lc="";async function Pr(u){const a=await fetch(Lc+u);if(!a.ok)throw new Error(`Request failed: ${a.status}`);return a.json()}async function mc(u){const a=await fetch(Lc+u,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Request failed: ${a.status}`);return a.json()}const st={getUiConfig:()=>Pr("/api/ui-config"),getMe:()=>Pr("/api/me"),getNodes:()=>Pr("/api/nodes"),getNodeStatus:u=>Pr(`/api/nodes/${encodeURIComponent(u)}/status`),getNodeFacetMetrics:u=>Pr(`/api/nodes/${encodeURIComponent(u)}/metrics/facets`),reloadNode:u=>mc(`/api/nodes/${encodeURIComponent(u)}/reload`),shutdownNode:u=>mc(`/api/nodes/${encodeURIComponent(u)}/shutdown`)},Tc=j.createContext(void 0),Jp="light",Zp=({children:u})=>{const[a,s]=j.useState(Jp);return j.useEffect(()=>{document.documentElement.dataset.theme=a},[a]),j.useEffect(()=>{let f=!1;return st.getUiConfig().then(m=>{if(f)return;const w=m.defaultTheme;w&&w in Gp&&s(w)}).catch(()=>{}),()=>{f=!0}},[]),p.jsx(Tc.Provider,{value:{theme:a,setTheme:s},children:u})};function zc(){const u=j.useContext(Tc);if(!u)throw new Error("useTheme must be used within ThemeProvider");return u}function qp(){const{theme:u,setTheme:a}=zc(),s=u==="light",f=s?"dark":"light",m=s?"Switch to dark theme":"Switch to light theme",w=s?"☾":"☀︎",S=()=>{a(f)};return p.jsx("button",{type:"button","aria-label":m,title:m,className:"svc-admin-theme-toggle",onClick:S,children:w})}const vc="en-US",Oc=j.createContext(void 0),bp=({children:u})=>{const[a,s]=j.useState(vc),[f,m]=j.useState({});j.useEffect(()=>{let E=!1;return fetch(`/locales/${a}.json`).then(k=>k.json()).then(k=>{E||m(k)}).catch(()=>{E||m({})}),()=>{E=!0}},[a]),j.useEffect(()=>{let E=!1;return st.getUiConfig().then(k=>{if(E)return;const L=k.defaultLanguage;L&&typeof L=="string"&&s(O=>O===vc?L:O)}).catch(()=>{}),()=>{E=!0}},[]);const S={locale:a,t:E=>f[E]??E,setLocale:s};return bo.createElement(Oc.Provider,{value:S},u)};function Yl(){const u=j.useContext(Oc);if(!u)throw new Error("useI18n must be used within I18nProvider");return u}function eh(){const{locale:u,setLocale:a}=Yl(),s=f=>{a(f.target.value)};return p.jsxs("select",{className:"svc-admin-language-switcher",value:u,onChange:s,"aria-label":"Select language",children:[p.jsx("option",{value:"en-US",children:"EN"}),p.jsx("option",{value:"es-ES",children:"ES"})]})}function th(){const[u,a]=j.useState({loading:!0,error:null,me:null});j.useEffect(()=>{let S=!1;return st.getMe().then(E=>{S||a({loading:!1,error:null,me:E})}).catch(E=>{S||a({loading:!1,error:"identity-unavailable",me:null})}),()=>{S=!0}},[]);const{loading:s,error:f,me:m}=u;let w=null;if(s)w=p.jsx("span",{className:"svc-admin-topbar-identity svc-admin-topbar-identity-loading",children:"Loading…"});else if(f)w=p.jsx("span",{className:"svc-admin-topbar-identity svc-admin-topbar-identity-error",children:"Identity unavailable"});else if(m){const S=m.roles&&m.roles.length>0?` · ${m.roles.join(", ")}`:"";w=p.jsxs("span",{className:"svc-admin-topbar-identity",children:[m.displayName," ",p.jsxs("span",{className:"svc-admin-topbar-identity-auth",children:["(",m.authMode,S,")"]})]})}else w=p.jsx("span",{className:"svc-admin-topbar-identity svc-admin-topbar-identity-anon",children:"Anonymous"});return p.jsxs("header",{className:"svc-admin-topbar",children:[p.jsx("div",{className:"svc-admin-topbar-left",children:p.jsx("span",{children:"RON-CORE Admin"})}),p.jsxs("div",{className:"svc-admin-topbar-right",children:[w,p.jsx(eh,{}),p.jsx(qp,{})]})]})}function nh({children:u}){return p.jsxs("div",{className:"svc-admin-shell",children:[p.jsx(Xp,{}),p.jsxs("div",{className:"svc-admin-main",children:[p.jsx(th,{}),p.jsx("main",{children:u})]})]})}function rh({node:u}){return p.jsxs(Hl,{to:`/nodes/${encodeURIComponent(u.id)}`,className:"svc-admin-node-card",children:[p.jsx("h3",{className:"svc-admin-node-title",children:u.display_name}),p.jsxs("p",{className:"svc-admin-node-subtitle",children:[p.jsx("span",{className:"svc-admin-node-label",children:"Profile:"})," ",p.jsx("span",{className:"svc-admin-node-profile",children:u.profile})]})]})}function Xl(){return p.jsx("div",{children:"Loading..."})}function pn({message:u}){return p.jsx("div",{className:"svc-admin-error-banner",children:u})}function Ic({message:u}){return p.jsx("div",{className:"svc-admin-empty-state",children:u})}function lh(){const{t:u}=Yl(),[a,s]=j.useState([]),[f,m]=j.useState(!0),[w,S]=j.useState(null);return j.useEffect(()=>{let E=!1;return m(!0),S(null),st.getNodes().then(k=>{E||s(k)}).catch(k=>{if(E)return;const L=k instanceof Error?k.message:"Failed to load nodes";S(L)}).finally(()=>{E||m(!1)}),()=>{E=!0}},[]),p.jsxs("div",{className:"svc-admin-page svc-admin-page-nodes",children:[p.jsxs("header",{className:"svc-admin-page-header",children:[p.jsx("h1",{children:u("nav.nodes")}),p.jsx("p",{children:"Overview of nodes registered in this svc-admin instance."})]}),f&&p.jsx(Xl,{}),!f&&w&&p.jsx(pn,{message:w}),!f&&!w&&a.length===0&&p.jsx(Ic,{message:"No nodes configured. Check svc-admin config for node registry entries."}),!f&&!w&&a.length>0&&p.jsx("div",{className:"svc-admin-node-grid",children:a.map(E=>p.jsx(rh,{node:E},E.id))})]})}function Mc({status:u}){return p.jsx("span",{className:`svc-admin-node-status svc-admin-node-status-${u}`,children:u})}function ih({planes:u}){return u.length?p.jsxs("table",{className:"svc-admin-plane-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Plane"}),p.jsx("th",{children:"Health"}),p.jsx("th",{children:"Ready"}),p.jsx("th",{children:"Restarts"})]})}),p.jsx("tbody",{children:u.map(a=>p.jsxs("tr",{children:[p.jsx("td",{children:a.name}),p.jsx("td",{children:p.jsx(Mc,{status:a.health})}),p.jsx("td",{children:a.ready?"Ready":"Not ready"}),p.jsx("td",{children:a.restart_count})]},a.name))})]}):p.jsx("p",{children:"No plane status reported by this node yet."})}function oh({facet:u,rps:a,errorRate:s,p95:f,p99:m}){const w=Math.round(s*1e3)/10,S=Math.min(a,100),E=Math.min(f/10,100);return p.jsxs("div",{className:"svc-admin-metric-chart",children:[p.jsxs("div",{className:"svc-admin-metric-chart-header",children:[p.jsx("strong",{children:u}),p.jsxs("span",{className:"svc-admin-metric-chart-summary",children:[a.toFixed(1)," req/s · ",w,"% errors"]})]}),p.jsxs("div",{className:"svc-admin-metric-chart-bars",children:[p.jsx("div",{className:"svc-admin-metric-chart-bar svc-admin-metric-chart-bar-rps",style:{width:`${S}%`}}),p.jsx("div",{className:"svc-admin-metric-chart-bar svc-admin-metric-chart-bar-latency",style:{width:`${E}%`}})]}),p.jsxs("div",{className:"svc-admin-metric-chart-footer",children:[p.jsxs("span",{children:["p95: ",f.toFixed(1)," ms"]}),p.jsxs("span",{children:["p99: ",m.toFixed(1)," ms"]})]})]})}function uh({facets:u,loading:a,error:s}){const f=!!u&&u.length>0;return p.jsxs("section",{className:"svc-admin-section svc-admin-section-node-metrics",children:[p.jsxs("header",{className:"svc-admin-section-header",children:[p.jsx("div",{className:"svc-admin-section-title-row",children:p.jsx("h2",{className:"svc-admin-section-title",children:"Facet metrics"})}),p.jsx("p",{className:"svc-admin-section-subtitle",children:"Recent request rate, error rate, and latency percentiles per facet."})]}),a&&p.jsxs("div",{className:"svc-admin-section-body svc-admin-section-body-centered",children:[p.jsx(Xl,{}),p.jsx("p",{className:"svc-admin-section-body-note",children:"Loading facet metrics from node…"})]}),!a&&s&&p.jsxs("div",{className:"svc-admin-section-body",children:[p.jsx(pn,{message:`Failed to load facet metrics from node. The node's admin plane or /metrics endpoint may be offline or refusing connections. (${s})`}),p.jsx("p",{className:"svc-admin-section-body-note",children:"svc-admin will keep retrying on a short interval. If this is your dev environment and no node is actually running on the configured admin URL, this warning is expected."})]}),!a&&!s&&!f&&p.jsx("div",{className:"svc-admin-section-body",children:p.jsx(Ic,{message:"No facet metrics observed yet. The node may be starting up or has not emitted facet metrics in the recent sampling window."})}),!a&&!s&&f&&p.jsx("div",{className:"svc-admin-section-body",children:p.jsx("div",{className:"svc-admin-metric-chart-grid",children:u.map(m=>p.jsx(oh,{facet:m.facet,rps:m.rps,errorRate:m.error_rate,p95:m.p95_latency_ms,p99:m.p99_latency_ms},m.facet))})})]})}function sh(u){return u.length?u.some(a=>a.health==="down")?"down":u.some(a=>a.health==="degraded")?"degraded":"healthy":"degraded"}function ah(){const{t:u}=Yl(),s=Sp().id??"",[f,m]=j.useState(null),[w,S]=j.useState(!0),[E,k]=j.useState(null),[L,O]=j.useState(null),[z,$]=j.useState(!0),[q,Y]=j.useState(null),[U,M]=j.useState(!0),[b,te]=j.useState([]),[J,ie]=j.useState(null),[ye,_e]=j.useState(!0),[Ee,De]=j.useState(null),[at,tt]=j.useState(null),[gt,We]=j.useState(null),ze=j.useMemo(()=>f?sh(f.planes):null,[f]),Ge=(f==null?void 0:f.display_name)??s;j.useEffect(()=>{if(!s)return;let R=!1;return m(null),k(null),S(!0),st.getNodeStatus(s).then(F=>{R||m(F)}).catch(F=>{if(R)return;const I=F instanceof Error?F.message:"Failed to load node status";k(I)}).finally(()=>{R||S(!1)}),()=>{R=!0}},[s]),j.useEffect(()=>{if(!s)return;let R=!1;return O(null),Y(null),$(!0),st.getNodeFacetMetrics(s).then(F=>{R||O(F)}).catch(F=>{if(R)return;const I=F instanceof Error?F.message:"Failed to load facet metrics";Y(I)}).finally(()=>{R||$(!1)}),()=>{R=!0}},[s]),j.useEffect(()=>{let R=!1;return ie(null),_e(!0),Promise.all([st.getUiConfig(),st.getMe()]).then(([F,I])=>{R||(M(F.readOnly),te(I.roles??[]))}).catch(F=>{if(R)return;const I=F instanceof Error?F.message:"Failed to load operator info";ie(I)}).finally(()=>{R||_e(!1)}),()=>{R=!0}},[]);const Ve=j.useMemo(()=>!U&&b.some(R=>R==="admin"||R==="ops"),[U,b]),Oe=!!f&&!ye&&!J;async function ce(R){if(f){We(null),tt(null),De(R);try{let F;if(R==="reload"?F=await st.reloadNode(f.id):F=await st.shutdownNode(f.id),!F.accepted)We(F.message??u("node.actions.genericError"));else{const I=u(R==="reload"?"node.actions.reloadAccepted":"node.actions.shutdownAccepted");tt(F.message??I)}}catch(F){const I=F instanceof Error?F.message:u("node.actions.genericError");We(I)}finally{De(null)}}}return w||ye?p.jsx("div",{className:"svc-admin-page svc-admin-page-node",children:p.jsx("div",{className:"svc-admin-section",children:p.jsx(Xl,{})})}):E||J?p.jsx("div",{className:"svc-admin-page svc-admin-page-node",children:p.jsx("div",{className:"svc-admin-section",children:p.jsx(pn,{message:E??J??"Something went wrong while loading the node."})})}):f?p.jsxs("div",{className:"svc-admin-page svc-admin-page-node",children:[p.jsxs("header",{className:"svc-admin-page-header svc-admin-page-header-node",children:[p.jsxs("div",{children:[p.jsx("h1",{children:Ge}),p.jsx("p",{className:"svc-admin-page-subtitle",children:"Status, planes, and metrics for this node."}),p.jsxs("p",{className:"svc-admin-node-meta",children:[p.jsxs("span",{className:"svc-admin-node-id",children:[p.jsx("strong",{children:"ID:"})," ",f.id]})," ",f.profile&&p.jsxs("span",{className:"svc-admin-node-profile",children:[p.jsx("strong",{children:"Profile:"})," ",f.profile]})," ",f.version&&p.jsxs("span",{className:"svc-admin-node-version",children:[p.jsx("strong",{children:"Version:"})," ",f.version]})]})]}),p.jsxs("div",{className:"svc-admin-page-header-actions",children:[p.jsxs(Hl,{to:"/",className:"svc-admin-link-muted",children:["← ",u("nav.nodes")]}),ze&&p.jsx(Mc,{status:ze})]})]}),p.jsxs("section",{className:"svc-admin-section svc-admin-section-node-overview",children:[p.jsx("h2",{children:"Planes"}),p.jsx(ih,{planes:f.planes})]}),p.jsx("section",{className:"svc-admin-section svc-admin-section-node-metrics",children:p.jsx(uh,{facets:L,loading:z,error:q})}),Oe&&p.jsxs("section",{className:"svc-admin-section svc-admin-section-node-actions",children:[p.jsx("h2",{children:u("node.actions.title")}),J&&p.jsx(pn,{message:J}),!J&&!Ve&&p.jsx("p",{className:"svc-admin-node-actions-help",children:u(U?"node.actions.readOnlyHelp":"node.actions.insufficientRole")}),p.jsxs("div",{className:"svc-admin-node-actions-buttons",children:[p.jsx("button",{type:"button",className:"svc-admin-node-action-button",disabled:!Ve||Ee==="reload",onClick:()=>ce("reload"),children:u(Ee==="reload"?"node.actions.reloadInProgress":"node.actions.reload")}),p.jsx("button",{type:"button",className:"svc-admin-node-action-button svc-admin-node-action-button-danger",disabled:!Ve||Ee==="shutdown",onClick:()=>ce("shutdown"),children:u(Ee==="shutdown"?"node.actions.shutdownInProgress":"node.actions.shutdown")})]}),at&&p.jsx("p",{className:"svc-admin-node-actions-message",children:at}),gt&&p.jsx(pn,{message:gt})]})]}):p.jsx("div",{className:"svc-admin-page svc-admin-page-node",children:p.jsx("div",{className:"svc-admin-section",children:p.jsx(pn,{message:"Node not found."})})})}function ch(){var q,Y;const{theme:u,setTheme:a}=zc(),{locale:s,setLocale:f,t:m}=Yl(),[w,S]=j.useState({loading:!0,error:null,uiConfig:null,me:null});j.useEffect(()=>{let U=!1;async function M(){try{const[b,te]=await Promise.all([st.getUiConfig(),st.getMe()]);if(U)return;S({loading:!1,error:null,uiConfig:b,me:te})}catch(b){if(U)return;const te=b instanceof Error?b.message:"Failed to load settings";S({loading:!1,error:te,uiConfig:null,me:null})}}return M(),()=>{U=!0}},[]);const{loading:E,error:k,uiConfig:L,me:O}=w,z=((q=L==null?void 0:L.availableThemes)==null?void 0:q.filter(U=>!!U))??["light","dark"],$=L!=null&&L.availableLanguages&&L.availableLanguages.length>0?L.availableLanguages:["en-US","es-ES"];return p.jsxs("div",{className:"svc-admin-page svc-admin-page-settings",children:[p.jsxs("header",{className:"svc-admin-page-header",children:[p.jsx("h1",{children:m("nav.settings")}),p.jsx("p",{children:"Configure your admin UI preferences and inspect instance metadata."})]}),E&&p.jsx(Xl,{}),!E&&k&&p.jsx(pn,{message:k}),!E&&!k&&p.jsxs(p.Fragment,{children:[p.jsxs("section",{className:"svc-admin-card",style:{marginBottom:"1.5rem"},children:[p.jsx("h2",{children:"UI preferences"}),p.jsxs("p",{style:{marginTop:"0.25rem",marginBottom:"1rem"},children:["These settings apply to your browser only. Backend defaults still come from"," ",p.jsx("code",{children:"/api/ui-config"}),"."]}),p.jsxs("div",{style:{marginBottom:"1.5rem"},children:[p.jsx("h3",{style:{marginBottom:"0.25rem"},children:"Theme"}),p.jsx("p",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"0.9rem"},children:"Choose between light and dark themes for the console."}),p.jsx("div",{role:"radiogroup","aria-label":"Theme",children:z.map(U=>p.jsxs("label",{style:{display:"inline-flex",alignItems:"center",marginRight:"1rem",fontSize:"0.95rem"},children:[p.jsx("input",{type:"radio",name:"theme",value:U,checked:u===U,onChange:()=>a(U)}),p.jsx("span",{style:{marginLeft:"0.5rem",textTransform:"capitalize"},children:U})]},U))})]}),p.jsxs("div",{children:[p.jsx("h3",{style:{marginBottom:"0.25rem"},children:"Language"}),p.jsx("p",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"0.9rem"},children:"Select the language for labels and navigation inside svc-admin."}),p.jsx("select",{value:s,onChange:U=>f(U.target.value),"aria-label":"Select language",style:{padding:"0.4rem 0.6rem",borderRadius:6,border:"1px solid var(--svc-admin-color-border-subtle)",backgroundColor:"var(--svc-admin-color-bg-elevated)",color:"var(--svc-admin-color-text)"},children:$.map(U=>p.jsx("option",{value:U,children:U},U))})]})]}),p.jsxs("section",{className:"svc-admin-card",children:[p.jsx("h2",{children:"Instance & access"}),p.jsx("p",{style:{marginTop:"0.25rem",marginBottom:"1rem",fontSize:"0.9rem"},children:"Read-only mode, app playground flag, and your current identity as reported by the svc-admin backend."}),p.jsxs("dl",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) minmax(0, 2fr)",rowGap:"0.5rem",columnGap:"1rem",margin:0},children:[L&&p.jsxs(p.Fragment,{children:[p.jsx("dt",{style:{fontWeight:600},children:"Read-only UI"}),p.jsx("dd",{style:{margin:0},children:L.readOnly?"Enabled (no mutations allowed)":"Disabled"}),p.jsx("dt",{style:{fontWeight:600},children:"App playground"}),p.jsx("dd",{style:{margin:0},children:(Y=L.dev)!=null&&Y.enableAppPlayground?"Enabled for this instance":"Disabled (hidden from UI)"}),p.jsx("dt",{style:{fontWeight:600},children:"Default theme"}),p.jsx("dd",{style:{margin:0},children:L.defaultTheme}),p.jsx("dt",{style:{fontWeight:600},children:"Default language"}),p.jsx("dd",{style:{margin:0},children:L.defaultLanguage})]}),O&&p.jsxs(p.Fragment,{children:[p.jsx("dt",{style:{fontWeight:600},children:"Operator"}),p.jsxs("dd",{style:{margin:0},children:[O.displayName," (",O.subject,")"]}),p.jsx("dt",{style:{fontWeight:600},children:"Roles"}),p.jsx("dd",{style:{margin:0},children:O.roles&&O.roles.length>0?O.roles.join(", "):"none"}),p.jsx("dt",{style:{fontWeight:600},children:"Auth mode"}),p.jsx("dd",{style:{margin:0},children:O.authMode}),O.loginUrl&&p.jsxs(p.Fragment,{children:[p.jsx("dt",{style:{fontWeight:600},children:"Login URL"}),p.jsx("dd",{style:{margin:0},children:p.jsx("a",{href:O.loginUrl,children:O.loginUrl})})]})]})]})]})]})]})}function fh(){return p.jsxs("div",{children:[p.jsx("h1",{children:"Login"}),p.jsx("p",{children:"Passport / SSO login flow will appear here."})]})}function dh(){return p.jsxs("div",{children:[p.jsx("h1",{children:"404"}),p.jsx("p",{children:"Page not found."})]})}function ph(){return p.jsx(nh,{children:p.jsxs(Up,{children:[p.jsx(An,{path:"/",element:p.jsx(lh,{})}),p.jsx(An,{path:"/nodes/:id",element:p.jsx(ah,{})}),p.jsx(An,{path:"/settings",element:p.jsx(ch,{})}),p.jsx(An,{path:"/login",element:p.jsx(fh,{})}),p.jsx(An,{path:"*",element:p.jsx(dh,{})})]})})}const hh=document.getElementById("root");$d.createRoot(hh).render(p.jsx(bo.StrictMode,{children:p.jsx(Zp,{children:p.jsx(bp,{children:p.jsx(Hp,{children:p.jsx(ph,{})})})})}));

```

### crates/svc-admin/ui/dist/index.html
<a id="crates-svc-admin-ui-dist-index-html"></a>

```html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>RON-CORE Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="module" crossorigin src="/assets/index-D-C-b-5N.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-ByM1dBcT.css">
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>

```

### crates/svc-admin/ui/dist/locales/en-US.json
<a id="crates-svc-admin-ui-dist-locales-en-US-json"></a>

```json
{
  "app.title": "RON-CORE Admin",
  "nav.nodes": "Nodes",
  "nav.settings": "Settings",
  "nav.login": "Login",

  "node.actions.title": "Actions",
  "node.actions.readOnlyHelp": "This console is currently in read-only mode. Mutating actions are disabled.",
  "node.actions.insufficientRole": "You do not have permission to perform node actions.",
  "node.actions.reload": "Reload config",
  "node.actions.reloadInProgress": "Reloading…",
  "node.actions.shutdown": "Shutdown node",
  "node.actions.shutdownInProgress": "Shutting down…",
  "node.actions.reloadAccepted": "Reload request accepted.",
  "node.actions.shutdownAccepted": "Shutdown request accepted.",
  "node.actions.genericError": "The node action failed."
}

```

### crates/svc-admin/ui/dist/locales/es-ES.json
<a id="crates-svc-admin-ui-dist-locales-es-ES-json"></a>

```json
{
  "app.title": "RON-CORE Admin",
  "nav.nodes": "Nodos",
  "nav.settings": "Ajustes",
  "nav.login": "Iniciar sesión",

  "node.actions.title": "Acciones",
  "node.actions.readOnlyHelp": "Esta consola está en modo solo lectura. Las acciones que modifican el nodo están deshabilitadas.",
  "node.actions.insufficientRole": "No tienes permiso para realizar acciones sobre el nodo.",
  "node.actions.reload": "Recargar configuración",
  "node.actions.reloadInProgress": "Recargando…",
  "node.actions.shutdown": "Apagar nodo",
  "node.actions.shutdownInProgress": "Apagando…",
  "node.actions.reloadAccepted": "Solicitud de recarga aceptada.",
  "node.actions.shutdownAccepted": "Solicitud de apagado aceptada.",
  "node.actions.genericError": "La acción sobre el nodo falló."
}

```

### crates/svc-admin/ui/index.html
<a id="crates-svc-admin-ui-index-html"></a>

```html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>RON-CORE Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>

```

### crates/svc-admin/ui/package-lock.json
<a id="crates-svc-admin-ui-package-lock-json"></a>

```json
{
  "name": "svc-admin-ui",
  "version": "0.1.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "svc-admin-ui",
      "version": "0.1.0",
      "dependencies": {
        "react": "^18.0.0",
        "react-dom": "^18.0.0",
        "react-router-dom": "^6.0.0"
      },
      "devDependencies": {
        "@types/react": "^18.0.0",
        "@types/react-dom": "^18.0.0",
        "@typescript-eslint/eslint-plugin": "^8.0.0",
        "@typescript-eslint/parser": "^8.0.0",
        "@vitejs/plugin-react": "^4.0.0",
        "eslint": "^9.0.0",
        "eslint-plugin-react-hooks": "^5.0.0",
        "typescript": "^5.0.0",
        "vite": "^6.0.0"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.5.tgz",
      "integrity": "sha512-6uFXyCayocRbqhZOB+6XcuZbkMNimwfVGFji8CTZnCzOHVGvDqzvitu1re2AU5LROliz7eQPhB8CpAMvnx9EjA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.5.tgz",
      "integrity": "sha512-e7jT4DxYvIDLk1ZHmU/m/mB19rex9sv0c2ftBtjSBv+kVM/902eh0fINUzD7UwLLNR+jU585GxUJ8/EBfAM5fw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/core/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.5.tgz",
      "integrity": "sha512-3EwLFhZ38J4VyIP6WNtt2kUdW9dokXA9Cr4IVIFHuCpZ3H8/YFOl5JjZHisrn1fATPBmKKqXzDFvh9fUwHz6CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.5.tgz",
      "integrity": "sha512-KKBU1VGYR7ORr3At5HAtUQ+TV3SzRCXmA/8OdDZiLDBIZxVyzXuztPjfLd3BV1PRAQGCMWWSHYhL0F8d5uHBDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.5"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-self": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.27.1.tgz",
      "integrity": "sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-source": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.27.1.tgz",
      "integrity": "sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.5.tgz",
      "integrity": "sha512-TCCj4t55U90khlYkVV/0TfkJkAkUg3jZFA3Neb7unZT8CPok7iiRfaX0F+WnqWqt7OxhOn0uBKXCw4lbL8W0aQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.5",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.5.tgz",
      "integrity": "sha512-qQ5m48eI/MFLQ5PxQj4PFaprjyCTLI37ElWMmNs0K8Lk3dVeOdNpB3ks8jc7yM5CDmVC73eMVk/trk3fgmrUpA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.25.12.tgz",
      "integrity": "sha512-Hhmwd6CInZ3dwpuGTF8fJG6yoWmsToE+vYgD4nytZVxcu1ulHpUQRAB1UJ8+N1Am3Mz4+xOByoQoSZf4D+CpkA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.25.12.tgz",
      "integrity": "sha512-VJ+sKvNA/GE7Ccacc9Cha7bpS8nyzVv0jdVgwNDaR4gDMC/2TTRc33Ip8qrNYUcpkOHUT5OZ0bUcNNVZQ9RLlg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.25.12.tgz",
      "integrity": "sha512-6AAmLG7zwD1Z159jCKPvAxZd4y/VTO0VkprYy+3N2FtJ8+BQWFXU+OxARIwA46c5tdD9SsKGZ/1ocqBS/gAKHg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.25.12.tgz",
      "integrity": "sha512-5jbb+2hhDHx5phYR2By8GTWEzn6I9UqR11Kwf22iKbNpYrsmRB18aX/9ivc5cabcUiAT/wM+YIZ6SG9QO6a8kg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.25.12.tgz",
      "integrity": "sha512-N3zl+lxHCifgIlcMUP5016ESkeQjLj/959RxxNYIthIg+CQHInujFuXeWbWMgnTo4cp5XVHqFPmpyu9J65C1Yg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.25.12.tgz",
      "integrity": "sha512-HQ9ka4Kx21qHXwtlTUVbKJOAnmG1ipXhdWTmNXiPzPfWKpXqASVcWdnf2bnL73wgjNrFXAa3yYvBSd9pzfEIpA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.25.12.tgz",
      "integrity": "sha512-gA0Bx759+7Jve03K1S0vkOu5Lg/85dou3EseOGUes8flVOGxbhDDh/iZaoek11Y8mtyKPGF3vP8XhnkDEAmzeg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.25.12.tgz",
      "integrity": "sha512-TGbO26Yw2xsHzxtbVFGEXBFH0FRAP7gtcPE7P5yP7wGy7cXK2oO7RyOhL5NLiqTlBh47XhmIUXuGciXEqYFfBQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.25.12.tgz",
      "integrity": "sha512-lPDGyC1JPDou8kGcywY0YILzWlhhnRjdof3UlcoqYmS9El818LLfJJc3PXXgZHrHCAKs/Z2SeZtDJr5MrkxtOw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.25.12.tgz",
      "integrity": "sha512-8bwX7a8FghIgrupcxb4aUmYDLp8pX06rGh5HqDT7bB+8Rdells6mHvrFHHW2JAOPZUbnjUpKTLg6ECyzvas2AQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.25.12.tgz",
      "integrity": "sha512-0y9KrdVnbMM2/vG8KfU0byhUN+EFCny9+8g202gYqSSVMonbsCfLjUO+rCci7pM0WBEtz+oK/PIwHkzxkyharA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.25.12.tgz",
      "integrity": "sha512-h///Lr5a9rib/v1GGqXVGzjL4TMvVTv+s1DPoxQdz7l/AYv6LDSxdIwzxkrPW438oUXiDtwM10o9PmwS/6Z0Ng==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.25.12.tgz",
      "integrity": "sha512-iyRrM1Pzy9GFMDLsXn1iHUm18nhKnNMWscjmp4+hpafcZjrr2WbT//d20xaGljXDBYHqRcl8HnxbX6uaA/eGVw==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.25.12.tgz",
      "integrity": "sha512-9meM/lRXxMi5PSUqEXRCtVjEZBGwB7P/D4yT8UG/mwIdze2aV4Vo6U5gD3+RsoHXKkHCfSxZKzmDssVlRj1QQA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.25.12.tgz",
      "integrity": "sha512-Zr7KR4hgKUpWAwb1f3o5ygT04MzqVrGEGXGLnj15YQDJErYu/BGg+wmFlIDOdJp0PmB0lLvxFIOXZgFRrdjR0w==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.25.12.tgz",
      "integrity": "sha512-MsKncOcgTNvdtiISc/jZs/Zf8d0cl/t3gYWX8J9ubBnVOwlk65UIEEvgBORTiljloIWnBzLs4qhzPkJcitIzIg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.25.12.tgz",
      "integrity": "sha512-uqZMTLr/zR/ed4jIGnwSLkaHmPjOjJvnm6TVVitAa08SLS9Z0VM8wIRx7gWbJB5/J54YuIMInDquWyYvQLZkgw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.25.12.tgz",
      "integrity": "sha512-xXwcTq4GhRM7J9A8Gv5boanHhRa/Q9KLVmcyXHCTaM4wKfIpWkdXiMog/KsnxzJ0A1+nD+zoecuzqPmCRyBGjg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.25.12.tgz",
      "integrity": "sha512-Ld5pTlzPy3YwGec4OuHh1aCVCRvOXdH8DgRjfDy/oumVovmuSzWfnSJg+VtakB9Cm0gxNO9BzWkj6mtO1FMXkQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.25.12.tgz",
      "integrity": "sha512-fF96T6KsBo/pkQI950FARU9apGNTSlZGsv1jZBAlcLL1MLjLNIWPBkj5NlSz8aAzYKg+eNqknrUJ24QBybeR5A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.25.12.tgz",
      "integrity": "sha512-MZyXUkZHjQxUvzK7rN8DJ3SRmrVrke8ZyRusHlP+kuwqTcfWLyqMOE3sScPPyeIXN/mDJIfGXvcMqCgYKekoQw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openharmony-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openharmony-arm64/-/openharmony-arm64-0.25.12.tgz",
      "integrity": "sha512-rm0YWsqUSRrjncSXGA7Zv78Nbnw4XL6/dzr20cyrQf7ZmRcsovpcRBdhD43Nuk3y7XIoW2OxMVvwuRvk9XdASg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.25.12.tgz",
      "integrity": "sha512-3wGSCDyuTHQUzt0nV7bocDy72r2lI33QL3gkDNGkod22EsYl04sMf0qLb8luNKTOmgF/eDEDP5BFNwoBKH441w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.25.12.tgz",
      "integrity": "sha512-rMmLrur64A7+DKlnSuwqUdRKyd3UE7oPJZmnljqEptesKM8wx9J8gx5u0+9Pq0fQQW8vqeKebwNXdfOyP+8Bsg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.25.12.tgz",
      "integrity": "sha512-HkqnmmBoCbCwxUKKNPBixiWDGCpQGVsrQfJoVGYLPT41XWF8lHuE5N6WhVia2n4o5QK5M4tYr21827fNhi4byQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.25.12.tgz",
      "integrity": "sha512-alJC0uCZpTFrSL0CCDjcgleBXPnCrEAhTBILpeAp7M/OFgoqtAetfBzX0xM00MUsVVPpVjlPuMbREqnZCXaTnA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.2",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.2.tgz",
      "integrity": "sha512-EriSTlt5OC9/7SXkRSCAhfSxxoSUgBm33OH+IkwbdpgoqsSsUg7y3uh+IICI/Qg4BBWr3U2i39RpmycbxMq4ew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/config-array": {
      "version": "0.21.1",
      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.1.tgz",
      "integrity": "sha512-aw1gNayWpdI/jSYVgzN5pL0cfzU02GT3NBpeT/DXbx1/1x7ZKxFPd9bwrzygx/qiwIQiJ1sw/zD8qY/kRvlGHA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/object-schema": "^2.1.7",
        "debug": "^4.3.1",
        "minimatch": "^3.1.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/config-array/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@eslint/config-array/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@eslint/config-helpers": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.4.2.tgz",
      "integrity": "sha512-gBrxN88gOIf3R7ja5K9slwNayVcZgK6SOUORm2uBzTeIEfeVaIhOpCtTox3P6R7o2jLFwLFTLnC7kU/RGcYEgw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/core": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.17.0.tgz",
      "integrity": "sha512-yL/sLrpmtDaFEiUj1osRP4TI2MDz1AddJL+jZ7KSqvBuliN4xqYY54IfdN8qD8Toa6g1iloph1fxQNkjOxrrpQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.3.tgz",
      "integrity": "sha512-Kr+LPIUVKz2qkx1HAMH8q1q6azbqBAsXJUxBl/ODDuVPX45Z9DfwB8tPjTi6nNZ8BuM3nbJxC5zCAg5elnBUTQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^10.0.1",
        "globals": "^14.0.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.1",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@eslint/js": {
      "version": "9.39.1",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.39.1.tgz",
      "integrity": "sha512-S26Stp4zCy88tH94QbBv3XCuzRQiZ9yXofEILmglYTh/Ug/a9/umqvgFtYBAo3Lp0nsI/5/qH1CCrbdK3AP1Tw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      }
    },
    "node_modules/@eslint/object-schema": {
      "version": "2.1.7",
      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.7.tgz",
      "integrity": "sha512-VtAOaymWVfZcmZbp6E2mympDIHvyjXs/12LqWYjVw6qjrfF+VK+fyG33kChz3nnK+SU5/NeHOqrTEHS8sXO3OA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.4.1.tgz",
      "integrity": "sha512-43/qtrDUokr7LJqoF2c3+RInu/t4zfrpYdoSDfYyhg52rwLV6TnOvdG4fXm7IkSB3wErkcmJS9iEhjVtOSEjjA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0",
        "levn": "^0.4.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@humanfs/core": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node": {
      "version": "0.16.7",
      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.7.tgz",
      "integrity": "sha512-/zUx+yOsIrG4Y43Eh2peDeKCxlRt/gET6aHfaKpuq267qXdYDFViVHfMaLyygZOnl0kGWxFIgsBy8QFuTLUXEQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanfs/core": "^0.19.1",
        "@humanwhocodes/retry": "^0.4.0"
      },
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/retry": {
      "version": "0.4.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@remix-run/router": {
      "version": "1.23.1",
      "resolved": "https://registry.npmjs.org/@remix-run/router/-/router-1.23.1.tgz",
      "integrity": "sha512-vDbaOzF7yT2Qs4vO6XV1MHcJv+3dgR1sT+l3B8xxOVhUC336prMvqrvsLL/9Dnw2xr6Qhz4J0dmS0llNAbnUmQ==",
      "license": "MIT",
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@rolldown/pluginutils": {
      "version": "1.0.0-beta.27",
      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-beta.27.tgz",
      "integrity": "sha512-+d0F4MKMCbeVUJwG96uQ4SgAznZNSq93I3V+9NHA4OpvqG8mRCpGdKmK8l/dl02h2CCDHwW2FqilnTyDcAnqjA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.53.3.tgz",
      "integrity": "sha512-mRSi+4cBjrRLoaal2PnqH82Wqyb+d3HsPUN/W+WslCXsZsyHa9ZeQQX/pQsZaVIWDkPcpV6jJ+3KLbTbgnwv8w==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.53.3.tgz",
      "integrity": "sha512-CbDGaMpdE9sh7sCmTrTUyllhrg65t6SwhjlMJsLr+J8YjFuPmCEjbBSx4Z/e4SmDyH3aB5hGaJUP2ltV/vcs4w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.53.3.tgz",
      "integrity": "sha512-Nr7SlQeqIBpOV6BHHGZgYBuSdanCXuw09hon14MGOLGmXAFYjx1wNvquVPmpZnl0tLjg25dEdr4IQ6GgyToCUA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.53.3.tgz",
      "integrity": "sha512-DZ8N4CSNfl965CmPktJ8oBnfYr3F8dTTNBQkRlffnUarJ2ohudQD17sZBa097J8xhQ26AwhHJ5mvUyQW8ddTsQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.53.3.tgz",
      "integrity": "sha512-yMTrCrK92aGyi7GuDNtGn2sNW+Gdb4vErx4t3Gv/Tr+1zRb8ax4z8GWVRfr3Jw8zJWvpGHNpss3vVlbF58DZ4w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.53.3.tgz",
      "integrity": "sha512-lMfF8X7QhdQzseM6XaX0vbno2m3hlyZFhwcndRMw8fbAGUGL3WFMBdK0hbUBIUYcEcMhVLr1SIamDeuLBnXS+Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.53.3.tgz",
      "integrity": "sha512-k9oD15soC/Ln6d2Wv/JOFPzZXIAIFLp6B+i14KhxAfnq76ajt0EhYc5YPeX6W1xJkAdItcVT+JhKl1QZh44/qw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.53.3.tgz",
      "integrity": "sha512-vTNlKq+N6CK/8UktsrFuc+/7NlEYVxgaEgRXVUVK258Z5ymho29skzW1sutgYjqNnquGwVUObAaxae8rZ6YMhg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.53.3.tgz",
      "integrity": "sha512-RGrFLWgMhSxRs/EWJMIFM1O5Mzuz3Xy3/mnxJp/5cVhZ2XoCAxJnmNsEyeMJtpK+wu0FJFWz+QF4mjCA7AUQ3w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.53.3.tgz",
      "integrity": "sha512-kASyvfBEWYPEwe0Qv4nfu6pNkITLTb32p4yTgzFCocHnJLAHs+9LjUu9ONIhvfT/5lv4YS5muBHyuV84epBo/A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loong64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.53.3.tgz",
      "integrity": "sha512-JiuKcp2teLJwQ7vkJ95EwESWkNRFJD7TQgYmCnrPtlu50b4XvT5MOmurWNrCj3IFdyjBQ5p9vnrX4JM6I8OE7g==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.53.3.tgz",
      "integrity": "sha512-EoGSa8nd6d3T7zLuqdojxC20oBfNT8nexBbB/rkxgKj5T5vhpAQKKnD+h3UkoMuTyXkP5jTjK/ccNRmQrPNDuw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.53.3.tgz",
      "integrity": "sha512-4s+Wped2IHXHPnAEbIB0YWBv7SDohqxobiiPA1FIWZpX+w9o2i4LezzH/NkFUl8LRci/8udci6cLq+jJQlh+0g==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.53.3.tgz",
      "integrity": "sha512-68k2g7+0vs2u9CxDt5ktXTngsxOQkSEV/xBbwlqYcUrAVh6P9EgMZvFsnHy4SEiUl46Xf0IObWVbMvPrr2gw8A==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.53.3.tgz",
      "integrity": "sha512-VYsFMpULAz87ZW6BVYw3I6sWesGpsP9OPcyKe8ofdg9LHxSbRMd7zrVrr5xi/3kMZtpWL/wC+UIJWJYVX5uTKg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.53.3.tgz",
      "integrity": "sha512-3EhFi1FU6YL8HTUJZ51imGJWEX//ajQPfqWLI3BQq4TlvHy4X0MOr5q3D2Zof/ka0d5FNdPwZXm3Yyib/UEd+w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.53.3.tgz",
      "integrity": "sha512-eoROhjcc6HbZCJr+tvVT8X4fW3/5g/WkGvvmwz/88sDtSJzO7r/blvoBDgISDiCjDRZmHpwud7h+6Q9JxFwq1Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-openharmony-arm64": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.53.3.tgz",
      "integrity": "sha512-OueLAWgrNSPGAdUdIjSWXw+u/02BRTcnfw9PN41D2vq/JSEPnJnVuBgw18VkN8wcd4fjUs+jFHVM4t9+kBSNLw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.53.3.tgz",
      "integrity": "sha512-GOFuKpsxR/whszbF/bzydebLiXIHSgsEUp6M0JI8dWvi+fFa1TD6YQa4aSZHtpmh2/uAlj/Dy+nmby3TJ3pkTw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.53.3.tgz",
      "integrity": "sha512-iah+THLcBJdpfZ1TstDFbKNznlzoxa8fmnFYK4V67HvmuNYkVdAywJSoteUszvBQ9/HqN2+9AZghbajMsFT+oA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-gnu": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.53.3.tgz",
      "integrity": "sha512-J9QDiOIZlZLdcot5NXEepDkstocktoVjkaKUtqzgzpt2yWjGlbYiKyp05rWwk4nypbYUNoFAztEgixoLaSETkg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.53.3.tgz",
      "integrity": "sha512-UhTd8u31dXadv0MopwGgNOBpUVROFKWVQgAg5N1ESyCz8AuBcMqm4AuTjrwgQKGDfoFuz02EuMRHQIw/frmYKQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/prop-types": {
      "version": "15.7.15",
      "resolved": "https://registry.npmjs.org/@types/prop-types/-/prop-types-15.7.15.tgz",
      "integrity": "sha512-F6bEyamV9jKGAFBEmlQnesRPGOQqS2+Uwi0Em15xenOxHaf2hv6L8YCVn3rPdPJOiJfPiCnLIRyvwVaqMY3MIw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/react": {
      "version": "18.3.27",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-18.3.27.tgz",
      "integrity": "sha512-cisd7gxkzjBKU2GgdYrTdtQx1SORymWyaAFhaxQPK9bYO9ot3Y5OikQRvY0VYQtvwjeQnizCINJAenh/V7MK2w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/prop-types": "*",
        "csstype": "^3.2.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "18.3.7",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-18.3.7.tgz",
      "integrity": "sha512-MEe3UeoENYVFXzoXEWsvcpg6ZvlrFNlOQ7EOsvhI3CfAXwzPfO8Qwuxd40nepsYKqyyVQnTdEfv68q91yLcKrQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "^18.0.0"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "8.48.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.48.1.tgz",
      "integrity": "sha512-X63hI1bxl5ohelzr0LY5coufyl0LJNthld+abwxpCoo6Gq+hSqhKwci7MUWkXo67mzgUK6YFByhmaHmUcuBJmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/regexpp": "^4.10.0",
        "@typescript-eslint/scope-manager": "8.48.1",
        "@typescript-eslint/type-utils": "8.48.1",
        "@typescript-eslint/utils": "8.48.1",
        "@typescript-eslint/visitor-keys": "8.48.1",
        "graphemer": "^1.4.0",
        "ignore": "^7.0.0",
        "natural-compare": "^1.4.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^8.48.1",
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "8.48.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-8.48.1.tgz",
      "integrity": "sha512-PC0PDZfJg8sP7cmKe6L3QIL8GZwU5aRvUFedqSIpw3B+QjRSUZeeITC2M5XKeMXEzL6wccN196iy3JLwKNvDVA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/scope-manager": "8.48.1",
        "@typescript-eslint/types": "8.48.1",
        "@typescript-eslint/typescript-estree": "8.48.1",
        "@typescript-eslint/visitor-keys": "8.48.1",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/project-service": {
      "version": "8.48.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/project-service/-/project-service-8.48.1.tgz",
      "integrity": "sha512-HQWSicah4s9z2/HifRPQ6b6R7G+SBx64JlFQpgSSHWPKdvCZX57XCbszg/bapbRsOEv42q5tayTYcEFpACcX1w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/tsconfig-utils": "^8.48.1",
        "@typescript-eslint/types": "^8.48.1",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "8.48.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-8.48.1.tgz",
      "integrity": "sha512-rj4vWQsytQbLxC5Bf4XwZ0/CKd362DkWMUkviT7DCS057SK64D5lH74sSGzhI6PDD2HCEq02xAP9cX68dYyg1w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.48.1",
        "@typescript-eslint/visitor-keys": "8.48.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/tsconfig-utils": {
      "version": "8.48.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/tsconfig-utils/-/tsconfig-utils-8.48.1.tgz",
      "integrity": "sha512-k0Jhs4CpEffIBm6wPaCXBAD7jxBtrHjrSgtfCjUvPp9AZ78lXKdTR8fxyZO5y4vWNlOvYXRtngSZNSn+H53Jkw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "8.48.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-8.48.1.tgz",
      "integrity": "sha512-1jEop81a3LrJQLTf/1VfPQdhIY4PlGDBc/i67EVWObrtvcziysbLN3oReexHOM6N3jyXgCrkBsZpqwH0hiDOQg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.48.1",
        "@typescript-eslint/typescript-estree": "8.48.1",
        "@typescript-eslint/utils": "8.48.1",
        "debug": "^4.3.4",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "8.48.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-8.48.1.tgz",
      "integrity": "sha512-+fZ3LZNeiELGmimrujsDCT4CRIbq5oXdHe7chLiW8qzqyPMnn1puNstCrMNVAqwcl2FdIxkuJ4tOs/RFDBVc/Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "8.48.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-8.48.1.tgz",
      "integrity": "sha512-/9wQ4PqaefTK6POVTjJaYS0bynCgzh6ClJHGSBj06XEHjkfylzB+A3qvyaXnErEZSaxhIo4YdyBgq6j4RysxDg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/project-service": "8.48.1",
        "@typescript-eslint/tsconfig-utils": "8.48.1",
        "@typescript-eslint/types": "8.48.1",
        "@typescript-eslint/visitor-keys": "8.48.1",
        "debug": "^4.3.4",
        "minimatch": "^9.0.4",
        "semver": "^7.6.0",
        "tinyglobby": "^0.2.15",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "8.48.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-8.48.1.tgz",
      "integrity": "sha512-fAnhLrDjiVfey5wwFRwrweyRlCmdz5ZxXz2G/4cLn0YDLjTapmN4gcCsTBR1N2rWnZSDeWpYtgLDsJt+FpmcwA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.7.0",
        "@typescript-eslint/scope-manager": "8.48.1",
        "@typescript-eslint/types": "8.48.1",
        "@typescript-eslint/typescript-estree": "8.48.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "8.48.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-8.48.1.tgz",
      "integrity": "sha512-BmxxndzEWhE4TIEEMBs8lP3MBWN3jFPs/p6gPm/wkv02o41hI6cq9AuSmGAaTTHPtA1FTi2jBre4A9rm5ZmX+Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.48.1",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys/node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@vitejs/plugin-react": {
      "version": "4.7.0",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-4.7.0.tgz",
      "integrity": "sha512-gUu9hwfWvvEDBBmgtAowQCojwZmJ5mcLn3aufeCsitijs3+f2NsrPtlAWIR6OPiqljl96GVCUbLe0HyqIpVaoA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.28.0",
        "@babel/plugin-transform-react-jsx-self": "^7.27.1",
        "@babel/plugin-transform-react-jsx-source": "^7.27.1",
        "@rolldown/pluginutils": "1.0.0-beta.27",
        "@types/babel__core": "^7.20.5",
        "react-refresh": "^0.17.0"
      },
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "peerDependencies": {
        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.9.3",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.9.3.tgz",
      "integrity": "sha512-8QdH6czo+G7uBsNo0GiUfouPN1lRzKdJTGnKXwe12gkFbnnOUaUKGN55dMkfy+mnxmvjwl9zcI4VncczcVXDhA==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/browserslist": {
      "version": "4.28.1",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.1.tgz",
      "integrity": "sha512-ZC5Bd0LgJXgwGqUknZY/vkUQ04r8NXnJZ3yYi4vDmSiZmC/pdSN0NbNRPxZpbtO4uAfDUAFffO8IZoM3Gj8IkA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "baseline-browser-mapping": "^2.9.0",
        "caniuse-lite": "^1.0.30001759",
        "electron-to-chromium": "^1.5.263",
        "node-releases": "^2.0.27",
        "update-browserslist-db": "^1.2.0"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001759",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001759.tgz",
      "integrity": "sha512-Pzfx9fOKoKvevQf8oCXoyNRQ5QyxJj+3O0Rqx2V5oxT61KGx8+n6hV/IUyJeifUci2clnmmKVpvtiqRzgiWjSw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/csstype": {
      "version": "3.2.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.2.3.tgz",
      "integrity": "sha512-z1HGKcYy2xA8AGQfwrn0PAy+PB7X/GSj3UVJW9qKyn43xWa+gl5nXmU4qqLMRzWVLFC8KusUX8T/0kCiOYpAIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.266",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.266.tgz",
      "integrity": "sha512-kgWEglXvkEfMH7rxP5OSZZwnaDWT7J9EoZCujhnpLbfi0bbNtRkgdX2E3gt0Uer11c61qCYktB3hwkAS325sJg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/esbuild": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.25.12.tgz",
      "integrity": "sha512-bbPBYYrtZbkt6Os6FiTLCTFxvq4tt3JKall1vRwshA3fdVztsLAatFaZobhkBC8/BrPetoa0oksYoKXoG4ryJg==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.25.12",
        "@esbuild/android-arm": "0.25.12",
        "@esbuild/android-arm64": "0.25.12",
        "@esbuild/android-x64": "0.25.12",
        "@esbuild/darwin-arm64": "0.25.12",
        "@esbuild/darwin-x64": "0.25.12",
        "@esbuild/freebsd-arm64": "0.25.12",
        "@esbuild/freebsd-x64": "0.25.12",
        "@esbuild/linux-arm": "0.25.12",
        "@esbuild/linux-arm64": "0.25.12",
        "@esbuild/linux-ia32": "0.25.12",
        "@esbuild/linux-loong64": "0.25.12",
        "@esbuild/linux-mips64el": "0.25.12",
        "@esbuild/linux-ppc64": "0.25.12",
        "@esbuild/linux-riscv64": "0.25.12",
        "@esbuild/linux-s390x": "0.25.12",
        "@esbuild/linux-x64": "0.25.12",
        "@esbuild/netbsd-arm64": "0.25.12",
        "@esbuild/netbsd-x64": "0.25.12",
        "@esbuild/openbsd-arm64": "0.25.12",
        "@esbuild/openbsd-x64": "0.25.12",
        "@esbuild/openharmony-arm64": "0.25.12",
        "@esbuild/sunos-x64": "0.25.12",
        "@esbuild/win32-arm64": "0.25.12",
        "@esbuild/win32-ia32": "0.25.12",
        "@esbuild/win32-x64": "0.25.12"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "9.39.1",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.39.1.tgz",
      "integrity": "sha512-BhHmn2yNOFA9H9JmmIVKJmd288g9hrVRDkdoIgRCRuSySRUHH7r/DI6aAXW9T1WwUuY3DFgrcaqB+deURBLR5g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.8.0",
        "@eslint-community/regexpp": "^4.12.1",
        "@eslint/config-array": "^0.21.1",
        "@eslint/config-helpers": "^0.4.2",
        "@eslint/core": "^0.17.0",
        "@eslint/eslintrc": "^3.3.1",
        "@eslint/js": "9.39.1",
        "@eslint/plugin-kit": "^0.4.1",
        "@humanfs/node": "^0.16.6",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@humanwhocodes/retry": "^0.4.2",
        "@types/estree": "^1.0.6",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.6",
        "debug": "^4.3.2",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^8.4.0",
        "eslint-visitor-keys": "^4.2.1",
        "espree": "^10.4.0",
        "esquery": "^1.5.0",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^8.0.0",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      },
      "peerDependencies": {
        "jiti": "*"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-5.2.0.tgz",
      "integrity": "sha512-+f15FfK64YQwZdJNELETdn5ibXEUQmW1DZL6KXhNnc2heoy/sg9VJJeT7n8TlMWouzWqSWavFkIhHyIbIAEapg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0"
      }
    },
    "node_modules/eslint-scope": {
      "version": "8.4.0",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.4.0.tgz",
      "integrity": "sha512-sNXOfKCn74rt8RICKMvJS7XKV/Xk9kA7DyJr8mJik3S7Cwgy3qlkkmyS2uQB3jiJg6VNdZd/pDBJu0nvG2NlTg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/eslint/node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint/node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/eslint/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/espree": {
      "version": "10.4.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-10.4.0.tgz",
      "integrity": "sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.15.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/espree/node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/file-entry-cache": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
      "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^4.0.0"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
      "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.4"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/globals": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
      "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/graphemer": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
      "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/ignore": {
      "version": "7.0.5",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-7.0.5.tgz",
      "integrity": "sha512-Hs59xBNfUIunMFgWAbGX5cq6893IbWg4KnrjbYwX3tx0ztorVgTDA6B2sxf8ejHJ4wz8BqGUMYlnzNBer5NvGg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.1.tgz",
      "integrity": "sha512-qQKT4zQxXl8lLwBtHMWwaTcGfFOZviOJet3Oy/xmGk2gZH677CJM9EvtfdSkgWcATZhj/55JZ0rmy3myCT5lsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/minimatch": {
      "version": "9.0.5",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
      "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-releases": {
      "version": "2.0.27",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/react": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react/-/react-18.3.1.tgz",
      "integrity": "sha512-wS+hAgJShR0KhEvPJArfuPVN1+Hz1t0Y6n5jLrGQbkb4urgPE/0Rve+1kMB1v/oWgHgm4WIcV+i7F2pTVj+2iQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-18.3.1.tgz",
      "integrity": "sha512-5m4nQKp+rZRb09LNH59GM4BxTh9251/ylbKIbpe7TpGxfJ+9kv6BLkLBXIjjspbgbnIBNqlI23tRnTWT0snUIw==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0",
        "scheduler": "^0.23.2"
      },
      "peerDependencies": {
        "react": "^18.3.1"
      }
    },
    "node_modules/react-refresh": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.17.0.tgz",
      "integrity": "sha512-z6F7K9bV85EfseRCp2bzrpyQ0Gkw1uLoCel9XBVWPg/TjRj94SkJzUTGfOa4bs7iJvBWtQG0Wq7wnI0syw3EBQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-router": {
      "version": "6.30.2",
      "resolved": "https://registry.npmjs.org/react-router/-/react-router-6.30.2.tgz",
      "integrity": "sha512-H2Bm38Zu1bm8KUE5NVWRMzuIyAV8p/JrOaBJAwVmp37AXG72+CZJlEBw6pdn9i5TBgLMhNDgijS4ZlblpHyWTA==",
      "license": "MIT",
      "dependencies": {
        "@remix-run/router": "1.23.1"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "react": ">=16.8"
      }
    },
    "node_modules/react-router-dom": {
      "version": "6.30.2",
      "resolved": "https://registry.npmjs.org/react-router-dom/-/react-router-dom-6.30.2.tgz",
      "integrity": "sha512-l2OwHn3UUnEVUqc6/1VMmR1cvZryZ3j3NzapC2eUXO1dB0sYp5mvwdjiXhpUbRb21eFow3qSxpP8Yv6oAU824Q==",
      "license": "MIT",
      "dependencies": {
        "@remix-run/router": "1.23.1",
        "react-router": "6.30.2"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "react": ">=16.8",
        "react-dom": ">=16.8"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/rollup": {
      "version": "4.53.3",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.53.3.tgz",
      "integrity": "sha512-w8GmOxZfBmKknvdXU1sdM9NHcoQejwF/4mNgj2JuEEdRaHwwF12K7e9eXn1nLZ07ad+du76mkVsyeb2rKGllsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.8"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.53.3",
        "@rollup/rollup-android-arm64": "4.53.3",
        "@rollup/rollup-darwin-arm64": "4.53.3",
        "@rollup/rollup-darwin-x64": "4.53.3",
        "@rollup/rollup-freebsd-arm64": "4.53.3",
        "@rollup/rollup-freebsd-x64": "4.53.3",
        "@rollup/rollup-linux-arm-gnueabihf": "4.53.3",
        "@rollup/rollup-linux-arm-musleabihf": "4.53.3",
        "@rollup/rollup-linux-arm64-gnu": "4.53.3",
        "@rollup/rollup-linux-arm64-musl": "4.53.3",
        "@rollup/rollup-linux-loong64-gnu": "4.53.3",
        "@rollup/rollup-linux-ppc64-gnu": "4.53.3",
        "@rollup/rollup-linux-riscv64-gnu": "4.53.3",
        "@rollup/rollup-linux-riscv64-musl": "4.53.3",
        "@rollup/rollup-linux-s390x-gnu": "4.53.3",
        "@rollup/rollup-linux-x64-gnu": "4.53.3",
        "@rollup/rollup-linux-x64-musl": "4.53.3",
        "@rollup/rollup-openharmony-arm64": "4.53.3",
        "@rollup/rollup-win32-arm64-msvc": "4.53.3",
        "@rollup/rollup-win32-ia32-msvc": "4.53.3",
        "@rollup/rollup-win32-x64-gnu": "4.53.3",
        "@rollup/rollup-win32-x64-msvc": "4.53.3",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/scheduler": {
      "version": "0.23.2",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.23.2.tgz",
      "integrity": "sha512-UOShsPwz7NrMUqhR6t0hWjFduvOzbtv7toDH1/hIrfRNIDBnnBWd0CwJTGvTpngVlmwGCdP9/Zl/tVrDqcuYzQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      }
    },
    "node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/ts-api-utils": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-2.1.0.tgz",
      "integrity": "sha512-CUgTZL1irw8u29bzrOD/nH85jqyc74D6SshFgujOIA7osm2Rz7dYH77agkx7H4FBNxDq7Cjf+IjaX/8zwFW+ZQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.12"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4"
      }
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/typescript": {
      "version": "5.9.3",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.3.tgz",
      "integrity": "sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.2.2.tgz",
      "integrity": "sha512-E85pfNzMQ9jpKkA7+TJAi4TJN+tBCuWh5rUcS/sv6cFi+1q9LYDwDI5dpUL0u/73EElyQ8d3TEaeW4sPedBqYA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/vite": {
      "version": "6.4.1",
      "resolved": "https://registry.npmjs.org/vite/-/vite-6.4.1.tgz",
      "integrity": "sha512-+Oxm7q9hDoLMyJOYfUYBuHQo+dkAloi33apOPP56pzj+vsdJDzr+j1NISE5pyaAuKL4A3UD34qd0lx5+kfKp2g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "^0.25.0",
        "fdir": "^6.4.4",
        "picomatch": "^4.0.2",
        "postcss": "^8.5.3",
        "rollup": "^4.34.9",
        "tinyglobby": "^0.2.13"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^18.0.0 || ^20.0.0 || >=22.0.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^18.0.0 || ^20.0.0 || >=22.0.0",
        "jiti": ">=1.21.0",
        "less": "*",
        "lightningcss": "^1.21.0",
        "sass": "*",
        "sass-embedded": "*",
        "stylus": "*",
        "sugarss": "*",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    }
  }
}

```

### crates/svc-admin/ui/package.json
<a id="crates-svc-admin-ui-package-json"></a>

```json
{
  "name": "svc-admin-ui",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint src --ext .ts,.tsx"
  },
  "dependencies": {
    "react": "^18.0.0",
    "react-dom": "^18.0.0",
    "react-router-dom": "^6.0.0"
  },
  "devDependencies": {
    "@types/react": "^18.0.0",
    "@types/react-dom": "^18.0.0",
    "@typescript-eslint/eslint-plugin": "^8.0.0",
    "@typescript-eslint/parser": "^8.0.0",
    "eslint": "^9.0.0",
    "eslint-plugin-react-hooks": "^5.0.0",
    "typescript": "^5.0.0",
    "vite": "^6.0.0",
    "@vitejs/plugin-react": "^4.0.0"
  }
}

```

### crates/svc-admin/ui/public/locales/en-US.json
<a id="crates-svc-admin-ui-public-locales-en-US-json"></a>

```json
{
  "app.title": "RON-CORE Admin",
  "nav.nodes": "Nodes",
  "nav.playground": "Playground",
  "nav.settings": "Settings",
  "nav.login": "Login",

  "playground.title": "Playground",
  "playground.subtitle": "Dev-only. Read-only MVP: examples + manifest validation.",
  "playground.disabled.title": "Playground is disabled",
  "playground.disabled.body": "This feature is dev-only and is currently turned off by configuration.",

  "node.actions.title": "Actions",
  "node.actions.readOnlyHelp": "This console is currently in read-only mode. Mutating actions are disabled.",
  "node.actions.insufficientRole": "You do not have permission to perform node actions.",
  "node.actions.reload": "Reload config",
  "node.actions.reloadInProgress": "Reloading…",
  "node.actions.shutdown": "Shutdown node",
  "node.actions.shutdownInProgress": "Shutting down…",
  "node.actions.reloadAccepted": "Reload request accepted.",
  "node.actions.shutdownAccepted": "Shutdown request accepted.",
  "node.actions.genericError": "The node action failed."
}

```

### crates/svc-admin/ui/public/locales/es-ES.json
<a id="crates-svc-admin-ui-public-locales-es-ES-json"></a>

```json
{
  "app.title": "RON-CORE Admin",
  "nav.nodes": "Nodos",
  "nav.playground": "Playground",
  "nav.settings": "Ajustes",
  "nav.login": "Iniciar sesión",

  "playground.title": "Playground",
  "playground.subtitle": "Solo dev. MVP de solo lectura: ejemplos + validación de manifiesto.",
  "playground.disabled.title": "El Playground está deshabilitado",
  "playground.disabled.body": "Esta función es solo para desarrollo y actualmente está desactivada por configuración.",

  "node.actions.title": "Acciones",
  "node.actions.readOnlyHelp": "Esta consola está en modo solo lectura. Las acciones que modifican el nodo están deshabilitadas.",
  "node.actions.insufficientRole": "No tienes permiso para realizar acciones sobre el nodo.",
  "node.actions.reload": "Recargar configuración",
  "node.actions.reloadInProgress": "Recargando…",
  "node.actions.shutdown": "Apagar nodo",
  "node.actions.shutdownInProgress": "Apagando…",
  "node.actions.reloadAccepted": "Solicitud de recarga aceptada.",
  "node.actions.shutdownAccepted": "Solicitud de apagado aceptada.",
  "node.actions.genericError": "La acción sobre el nodo falló."
}

```

### crates/svc-admin/ui/src/App.tsx
<a id="crates-svc-admin-ui-src-App-tsx"></a>

```tsx
/**
 * RO:WHAT — Top-level route table for the svc-admin SPA.
 * RO:WHY — Keeps navigation explicit and stable as the dashboard grows (DX).
 * RO:INTERACTS — Shell layout; routes/* pages; BrowserRouter in main.tsx.
 * RO:INVARIANTS — NotFound is last; no nested Routers; routes are client-side only.
 * RO:SECURITY — No privileged actions here; pages enforce dev gating/read-only.
 * RO:TEST — Manual smoke: /, /nodes/:id, /settings, /playground.
 */

// crates/svc-admin/ui/src/App.tsx

import React from 'react'
import { Routes, Route } from 'react-router-dom'
import { Shell } from './components/layout/Shell'
import { NodeListPage } from './routes/NodeListPage'
import { NodeDetailPage } from './routes/NodeDetailPage'
import { NodeStoragePage } from './routes/NodeStoragePage'
import { NodeDatabaseDetailPage } from './routes/NodeDatabaseDetailPage'
import { PlaygroundPage } from './routes/PlaygroundPage'
import { SettingsPage } from './routes/SettingsPage'
import { LoginPage } from './routes/LoginPage'
import { NotFoundPage } from './routes/NotFoundPage'

export default function App() {
  return (
    <Shell>
      <Routes>
        <Route path="/" element={<NodeListPage />} />
        <Route path="/nodes/:id" element={<NodeDetailPage />} />
        <Route path="/nodes/:id/storage" element={<NodeStoragePage />} />
        <Route
          path="/nodes/:id/storage/databases/:name"
          element={<NodeDatabaseDetailPage />}
        />
        <Route path="/playground" element={<PlaygroundPage />} />
        <Route path="/settings" element={<SettingsPage />} />
        <Route path="/login" element={<LoginPage />} />
        <Route path="*" element={<NotFoundPage />} />
      </Routes>
    </Shell>
  )
}

```

### crates/svc-admin/ui/src/api/adminClient.ts
<a id="crates-svc-admin-ui-src-api-adminClient-ts"></a>

```ts
// crates/svc-admin/ui/src/api/adminClient.ts
//
// RO:WHAT — Thin HTTP client for the svc-admin backend API.
// RO:WHY  — Centralize fetch + error shaping + JSON parsing for SPA routes.
// RO:INVARIANTS —
//   - All methods are read-only unless explicitly named as an action.
//   - Errors include `status` when available so callers can classify 404/501/etc.
//   - No implicit retries here (UI controls fetch cadence).
//   - Dev-only request logging is passive and bounded (ring buffer).
//
// NOTE: This file is a drop-in replacement for the common pattern used in svc-admin UI.

import type {
  UiConfigDto,
  MeResponse,
  NodeSummary,
  AdminStatusView,
  FacetMetricsSummary,
  NodeActionResponse,
  StorageSummaryDto,
  DatabaseEntryDto,
  DatabaseDetailDto,
  PlaygroundExampleDto,
  PlaygroundValidateManifestReq,
  PlaygroundValidateManifestResp,
  SystemSummaryDto,
} from '../types/admin-api'

export type HttpError = Error & { status?: number; body?: string }

function makeHttpError(message: string, status?: number, body?: string): HttpError {
  const err = new Error(message) as HttpError
  if (typeof status === 'number') err.status = status
  if (typeof body === 'string') err.body = body
  return err
}

export function isHttpError(err: unknown): err is HttpError {
  return !!err && typeof err === 'object' && ('status' in err || 'body' in err)
}

async function readTextSafe(r: Response): Promise<string> {
  try {
    return await r.text()
  } catch {
    return ''
  }
}

/**
 * Dev-only request log (bounded ring buffer).
 * WHY: During macronode integration, seeing the last N API calls, status codes,
 *      and timings prevents “it looks the same” / “is it broken?” loops.
 */
export type HttpLogEntry = {
  id: string
  at: string // ISO timestamp
  method: string
  path: string
  status?: number
  ok?: boolean
  duration_ms: number
  error?: string
  body_snippet?: string
}

type Listener = (entries: HttpLogEntry[]) => void

const MAX_LOG = 80
let logEntries: HttpLogEntry[] = []
const listeners = new Set<Listener>()

function pushLog(entry: HttpLogEntry) {
  logEntries = [entry, ...logEntries].slice(0, MAX_LOG)
  for (const fn of listeners) {
    try {
      fn(logEntries)
    } catch {
      // no-op
    }
  }
}

function nowIso(): string {
  return new Date().toISOString()
}

function randomId(): string {
  // Enough uniqueness for a dev ring buffer.
  return Math.random().toString(16).slice(2) + Math.random().toString(16).slice(2)
}

export const httpLog = {
  getEntries(): HttpLogEntry[] {
    return logEntries
  },
  subscribe(fn: Listener): () => void {
    listeners.add(fn)
    // push current immediately for convenience
    try {
      fn(logEntries)
    } catch {
      // no-op
    }
    return () => {
      listeners.delete(fn)
    }
  },
  clear(): void {
    logEntries = []
    for (const fn of listeners) {
      try {
        fn(logEntries)
      } catch {
        // no-op
      }
    }
  },
}

function buildHeaders(init?: RequestInit): HeadersInit {
  const headers: Record<string, string> = {
    Accept: 'application/json',
  }

  // Only set Content-Type if we actually have a body (or caller explicitly set it).
  // This keeps GETs "simple" and avoids surprises if we ever go cross-origin.
  const hasBody = typeof init?.body !== 'undefined' && init?.body !== null
  if (hasBody) headers['Content-Type'] = 'application/json'

  return {
    ...headers,
    ...(init?.headers ?? {}),
  }
}

async function requestJson<T>(path: string, init?: RequestInit): Promise<T> {
  const method = init?.method ?? 'GET'
  const started = performance.now()
  const id = randomId()
  let logged = false

  try {
    const r = await fetch(path, {
      ...init,
      headers: buildHeaders(init),
    })

    const duration_ms = Math.max(0, performance.now() - started)

    if (!r.ok) {
      const body = await readTextSafe(r)
      pushLog({
        id,
        at: nowIso(),
        method,
        path,
        status: r.status,
        ok: false,
        duration_ms,
        error: `${method} ${path} → ${r.status}`,
        body_snippet: body.slice(0, 600),
      })
      logged = true
      throw makeHttpError(`${method} ${path} → ${r.status}`, r.status, body)
    }

    // Some endpoints might return empty body; keep it strict and fail loudly.
    try {
      const json = (await r.json()) as T
      pushLog({
        id,
        at: nowIso(),
        method,
        path,
        status: r.status,
        ok: true,
        duration_ms,
      })
      logged = true
      return json
    } catch (e: any) {
      const body = await readTextSafe(r)
      pushLog({
        id,
        at: nowIso(),
        method,
        path,
        status: r.status,
        ok: false,
        duration_ms,
        error: `Failed to parse JSON from ${path}: ${String(e)}`,
        body_snippet: body.slice(0, 600),
      })
      logged = true
      throw makeHttpError(`Failed to parse JSON from ${path}: ${String(e)}`, r.status, body)
    }
  } catch (e: any) {
    const duration_ms = Math.max(0, performance.now() - started)

    // Only log here if we didn't already log a non-2xx or JSON parse error above.
    // This path is intended for network/CORS/abort failures.
    if (!logged) {
      pushLog({
        id,
        at: nowIso(),
        method,
        path,
        ok: false,
        duration_ms,
        error: e?.message ? String(e.message) : 'Request failed',
      })
    }

    throw e
  }
}

/**
 * Request JSON, but treat "missing endpoint" as null.
 * Useful for capability rollout (e.g. /system/summary not present on older nodes).
 */
async function requestMaybeJson<T>(path: string, init?: RequestInit): Promise<T | null> {
  try {
    return await requestJson<T>(path, init)
  } catch (e: any) {
    if (isHttpError(e)) {
      const s = e.status
      if (s === 404 || s === 405 || s === 501) return null
    }
    throw e
  }
}

async function requestVoid(path: string, init?: RequestInit): Promise<void> {
  const method = init?.method ?? 'GET'
  const started = performance.now()
  const id = randomId()
  let logged = false

  try {
    const r = await fetch(path, {
      ...init,
      headers: buildHeaders(init),
    })

    const duration_ms = Math.max(0, performance.now() - started)

    if (!r.ok) {
      const body = await readTextSafe(r)
      pushLog({
        id,
        at: nowIso(),
        method,
        path,
        status: r.status,
        ok: false,
        duration_ms,
        error: `${method} ${path} → ${r.status}`,
        body_snippet: body.slice(0, 600),
      })
      logged = true
      throw makeHttpError(`${method} ${path} → ${r.status}`, r.status, body)
    }

    pushLog({
      id,
      at: nowIso(),
      method,
      path,
      status: r.status,
      ok: true,
      duration_ms,
    })
    logged = true
  } catch (e: any) {
    const duration_ms = Math.max(0, performance.now() - started)
    if (!logged) {
      pushLog({
        id,
        at: nowIso(),
        method,
        path,
        ok: false,
        duration_ms,
        error: e?.message ? String(e.message) : 'Request failed',
      })
    }
    throw e
  }
}

export const adminClient = {
  // ---- UI/meta -----------------------------------------------------------

  async getUiConfig(): Promise<UiConfigDto> {
    return requestJson<UiConfigDto>('/api/ui-config')
  },

  async getMe(): Promise<MeResponse> {
    return requestJson<MeResponse>('/api/me')
  },

  // ---- Nodes -------------------------------------------------------------

  async getNodes(): Promise<NodeSummary[]> {
    return requestJson<NodeSummary[]>('/api/nodes')
  },

  async getNodeStatus(id: string): Promise<AdminStatusView> {
    return requestJson<AdminStatusView>(`/api/nodes/${encodeURIComponent(id)}/status`)
  },

  async getNodeFacetMetrics(id: string): Promise<FacetMetricsSummary[]> {
    return requestJson<FacetMetricsSummary[]>(
      `/api/nodes/${encodeURIComponent(id)}/metrics/facets`,
    )
  },

  // ---- System (capability rollout; may be missing) -----------------------

  async getNodeSystemSummary(id: string): Promise<SystemSummaryDto | null> {
    return requestMaybeJson<SystemSummaryDto>(
      `/api/nodes/${encodeURIComponent(id)}/system/summary`,
    )
  },

  // ---- Storage (read-only) ----------------------------------------------

  async getNodeStorageSummary(id: string): Promise<StorageSummaryDto> {
    return requestJson<StorageSummaryDto>(
      `/api/nodes/${encodeURIComponent(id)}/storage/summary`,
    )
  },

  async getNodeStorageDatabases(id: string): Promise<DatabaseEntryDto[]> {
    return requestJson<DatabaseEntryDto[]>(
      `/api/nodes/${encodeURIComponent(id)}/storage/databases`,
    )
  },

  async getNodeStorageDatabaseDetail(id: string, name: string): Promise<DatabaseDetailDto> {
    return requestJson<DatabaseDetailDto>(
      `/api/nodes/${encodeURIComponent(id)}/storage/databases/${encodeURIComponent(name)}`,
    )
  },

  // ---- Node actions (mutating; backend will gate) -------------------------

  async reloadNode(id: string): Promise<NodeActionResponse> {
    return requestJson<NodeActionResponse>(`/api/nodes/${encodeURIComponent(id)}/reload`, {
      method: 'POST',
      body: JSON.stringify({}),
    })
  },

  async shutdownNode(id: string): Promise<NodeActionResponse> {
    return requestJson<NodeActionResponse>(`/api/nodes/${encodeURIComponent(id)}/shutdown`, {
      method: 'POST',
      body: JSON.stringify({}),
    })
  },

  async debugCrashNode(id: string, service?: string | null): Promise<NodeActionResponse> {
    return requestJson<NodeActionResponse>(
      `/api/nodes/${encodeURIComponent(id)}/debug/crash`,
      {
        method: 'POST',
        body: JSON.stringify({ service: service ?? null }),
      },
    )
  },

  // ---- Playground (dev-only, read-only MVP) ------------------------------

  async getPlaygroundExamples(): Promise<PlaygroundExampleDto[]> {
    return requestJson<PlaygroundExampleDto[]>('/api/playground/examples')
  },

  async validatePlaygroundManifest(
    manifestToml: string,
  ): Promise<PlaygroundValidateManifestResp> {
    const req: PlaygroundValidateManifestReq = { manifestToml }
    return requestJson<PlaygroundValidateManifestResp>('/api/playground/manifest/validate', {
      method: 'POST',
      body: JSON.stringify(req),
    })
  },

  // ---- Misc --------------------------------------------------------------

  async ping(): Promise<void> {
    return requestVoid('/healthz', { method: 'GET' })
  },
}

```

### crates/svc-admin/ui/src/api/ronCorePlaygroundClient.ts
<a id="crates-svc-admin-ui-src-api-ronCorePlaygroundClient-ts"></a>

```ts
// crates/svc-admin/ui/src/api/ronCorePlaygroundClient.ts
//
// RO:WHAT — Thin fetch wrapper for svc-admin “App Playground” endpoints.
// RO:WHY  — Keep playground HTTP paths + DTO wiring isolated so UI routes/components
//           stay simple and we preserve the dev-only posture.
// RO:INTERACTS — types/admin-api.ts, Rust router.rs: /api/playground/*
// RO:INVARIANTS —
//   - Playground is dev-only; backend may return 404 when disabled (treat as “off”).
//   - No arbitrary proxying; only curated endpoints are called.
//   - Keep requests small; do not send large payloads.
// RO:SECURITY — No auth headers added here; browser auth/session (if any) is handled by same-origin.
// RO:TEST — Covered indirectly by UI smoke + manual dev flows.

import type {
  PlaygroundExample,
  PlaygroundValidateManifestResponse,
} from '../types/admin-api'

// Base URL strategy:
//
// - In dev, use relative URLs ("/api/...") so Vite proxies to backend (no CORS).
// - In production, SPA is served by svc-admin, so relative URLs still work.
// - If you want remote svc-admin, set VITE_SVC_ADMIN_BASE_URL (or VITE_API_BASE_URL).
const RAW_BASE_URL: string =
  (import.meta as any).env?.VITE_SVC_ADMIN_BASE_URL ??
  (import.meta as any).env?.VITE_API_BASE_URL ??
  ''

function buildUrl(path: string): string {
  if (!RAW_BASE_URL) return path
  const base = RAW_BASE_URL.replace(/\/+$/, '')
  return `${base}${path}`
}

export type FetchError = Error & { status?: number; statusText?: string }

async function handleResponse<T>(res: Response): Promise<T> {
  if (!res.ok) {
    let bodyText = ''
    try {
      bodyText = await res.text()
    } catch {
      // ignore
    }

    const msg =
      bodyText && bodyText.length < 1024
        ? `Request failed: ${res.status} ${res.statusText} - ${bodyText}`
        : `Request failed: ${res.status} ${res.statusText}`

    const err = new Error(msg) as FetchError
    err.status = res.status
    err.statusText = res.statusText
    throw err
  }

  const text = await res.text()
  if (!text) return undefined as unknown as T
  return JSON.parse(text) as T
}

async function fetchJson<T>(path: string, init?: RequestInit): Promise<T> {
  const res = await fetch(buildUrl(path), init)
  return handleResponse<T>(res)
}

function is404(err: unknown): boolean {
  const e = err as FetchError
  return typeof e?.status === 'number' && e.status === 404
}

export const ronCorePlaygroundClient = {
  /**
   * Returns dev-only examples for the playground.
   *
   * Backend returns 404 when playground is disabled.
   */
  async getExamples(): Promise<PlaygroundExample[]> {
    return fetchJson<PlaygroundExample[]>('/api/playground/examples')
  },

  /**
   * Validate a manifest TOML payload.
   *
   * Backend returns 404 when playground is disabled.
   */
  async validateManifest(
    manifestToml: string,
  ): Promise<PlaygroundValidateManifestResponse> {
    return fetchJson<PlaygroundValidateManifestResponse>(
      '/api/playground/manifest/validate',
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ manifestToml }),
      },
    )
  },

  /**
   * Convenience probe: returns true if playground appears enabled on this svc-admin.
   * If the endpoint is hidden (404), returns false.
   */
  async isEnabled(): Promise<boolean> {
    try {
      await ronCorePlaygroundClient.getExamples()
      return true
    } catch (err) {
      if (is404(err)) return false
      // For non-404 errors (network, 500, etc.), treat as “enabled but unhealthy”
      // so callers can still show a useful error state rather than “disabled”.
      return true
    }
  },
}

```

### crates/svc-admin/ui/src/components/common/LoadingSpinner.tsx
<a id="crates-svc-admin-ui-src-components-common-LoadingSpinner-tsx"></a>

```tsx
// crates/svc-admin/ui/src/components/common/LoadingSpinner.tsx

// Re-export the shared spinner so both paths work:
// - ../components/common/LoadingSpinner
// - ../components/shared/LoadingSpinner

// NOTE: This file is a shim because vite keeps throwing an error 

export { LoadingSpinner as default } from "../shared/LoadingSpinner";
export { LoadingSpinner } from "../shared/LoadingSpinner";

```

### crates/svc-admin/ui/src/components/dev/RequestInspectorDrawer.tsx
<a id="crates-svc-admin-ui-src-components-dev-RequestInspectorDrawer-tsx"></a>

```tsx
/**
 * RO:WHAT — Dev-only Request Inspector drawer for recent API calls.
 * RO:WHY — During macronode wiring, instantly shows which endpoints are failing
 *         (404/501/shape changes), plus latency and error payload snippets.
 * RO:INTERACTS — api/adminClient.httpLog (ring buffer); browser UI only.
 * RO:INVARIANTS — Bounded memory (ring buffer); no background retries; no PII
 *               persistence; drawer must not block normal UI interactions.
 * RO:SECURITY — Shows only what the browser already received; no secrets stored.
 * RO:TEST — Manual: trigger errors; ensure entries appear; copy details works.
 */

import React, { useEffect, useMemo, useState } from 'react'
import { httpLog, type HttpLogEntry } from '../../api/adminClient'

function toneForStatus(status?: number): 'ok' | 'warn' | 'bad' | 'muted' {
  if (status == null) return 'muted'
  if (status >= 200 && status < 300) return 'ok'
  if (status >= 300 && status < 400) return 'warn'
  if (status >= 400) return 'bad'
  return 'muted'
}

function fmtMs(ms: number): string {
  if (!Number.isFinite(ms)) return '—'
  if (ms < 1) return '<1ms'
  if (ms < 1000) return `${ms.toFixed(0)}ms`
  return `${(ms / 1000).toFixed(2)}s`
}

function pillStyle(tone: 'ok' | 'warn' | 'bad' | 'muted'): React.CSSProperties {
  const border = '1px solid rgba(255,255,255,0.14)'
  const base: React.CSSProperties = {
    padding: '2px 8px',
    borderRadius: 999,
    border,
    fontSize: 12,
    lineHeight: 1.2,
    fontVariantNumeric: 'tabular-nums',
    whiteSpace: 'nowrap',
  }
  if (tone === 'ok') return { ...base, background: 'rgba(16,185,129,0.14)', color: 'rgba(167,243,208,0.95)' }
  if (tone === 'warn') return { ...base, background: 'rgba(251,146,60,0.14)', color: 'rgba(254,215,170,0.95)' }
  if (tone === 'bad') return { ...base, background: 'rgba(244,63,94,0.14)', color: 'rgba(253,164,175,0.95)' }
  return { ...base, background: 'rgba(255,255,255,0.06)', color: 'rgba(226,232,240,0.92)' }
}

export function RequestInspectorDrawer() {
  const [open, setOpen] = useState(false)
  const [entries, setEntries] = useState<HttpLogEntry[]>(httpLog.getEntries())
  const [filter, setFilter] = useState('')
  const [selectedId, setSelectedId] = useState<string | null>(null)

  useEffect(() => {
    return httpLog.subscribe((e) => setEntries(e))
  }, [])

  const filtered = useMemo(() => {
    const q = filter.trim().toLowerCase()
    if (!q) return entries
    return entries.filter((e) => {
      const hay = `${e.method} ${e.path} ${e.status ?? ''} ${e.error ?? ''}`.toLowerCase()
      return hay.includes(q)
    })
  }, [entries, filter])

  const selected = useMemo(() => {
    if (!selectedId) return null
    return entries.find((e) => e.id === selectedId) ?? null
  }, [entries, selectedId])

  const drawerWidth = 520

  const containerStyle: React.CSSProperties = {
    position: 'fixed',
    right: 16,
    bottom: 16,
    zIndex: 9999,
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'flex-end',
    gap: 10,
    pointerEvents: 'none', // enable click only on inner controls
  }

  const buttonStyle: React.CSSProperties = {
    pointerEvents: 'auto',
    display: 'inline-flex',
    alignItems: 'center',
    gap: 8,
    padding: '10px 12px',
    borderRadius: 999,
    border: '1px solid rgba(255,255,255,0.16)',
    background: 'rgba(15,23,42,0.72)',
    backdropFilter: 'blur(10px)',
    color: 'rgba(226,232,240,0.95)',
    boxShadow: '0 14px 34px rgba(0,0,0,0.30)',
    cursor: 'pointer',
    userSelect: 'none',
    fontSize: 13,
  }

  const drawerStyle: React.CSSProperties = {
    pointerEvents: 'auto',
    width: drawerWidth,
    maxWidth: 'calc(100vw - 32px)',
    height: open ? 560 : 0,
    overflow: 'hidden',
    borderRadius: 18,
    border: open ? '1px solid rgba(255,255,255,0.14)' : '0px solid transparent',
    background: open
      ? 'rgba(2,6,23,0.82)'
      : 'transparent',
    backdropFilter: open ? 'blur(10px)' : undefined,
    boxShadow: open ? '0 18px 48px rgba(0,0,0,0.45)' : undefined,
    transition: 'height 160ms ease, border 160ms ease, background 160ms ease',
  }

  const headerStyle: React.CSSProperties = {
    padding: '12px 12px 10px 12px',
    borderBottom: '1px solid rgba(255,255,255,0.10)',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
    gap: 10,
  }

  const inputStyle: React.CSSProperties = {
    width: '100%',
    padding: '8px 10px',
    borderRadius: 12,
    border: '1px solid rgba(255,255,255,0.14)',
    background: 'rgba(15,23,42,0.55)',
    color: 'rgba(226,232,240,0.95)',
    outline: 'none',
    fontSize: 13,
  }

  const smallBtn: React.CSSProperties = {
    padding: '8px 10px',
    borderRadius: 12,
    border: '1px solid rgba(255,255,255,0.14)',
    background: 'rgba(255,255,255,0.06)',
    color: 'rgba(226,232,240,0.95)',
    cursor: 'pointer',
    fontSize: 13,
    whiteSpace: 'nowrap',
  }

  const listStyle: React.CSSProperties = {
    display: 'grid',
    gridTemplateColumns: '1fr',
    gap: 8,
    padding: 12,
    overflowY: 'auto',
    height: 320,
  }

  const detailStyle: React.CSSProperties = {
    padding: 12,
    borderTop: '1px solid rgba(255,255,255,0.10)',
    height: 560 - 56 - 320, // total - header - list (approx)
    overflow: 'auto',
  }

  const rowBase: React.CSSProperties = {
    borderRadius: 14,
    border: '1px solid rgba(255,255,255,0.10)',
    background: 'rgba(255,255,255,0.04)',
    padding: 10,
    cursor: 'pointer',
  }

  function copySelected() {
    if (!selected) return
    const text = JSON.stringify(selected, null, 2)
    navigator.clipboard?.writeText(text).catch(() => {
      // no-op
    })
  }

  return (
    <div style={containerStyle}>
      <div
        role="button"
        aria-label="Toggle request inspector"
        style={buttonStyle}
        onClick={() => setOpen((v) => !v)}
      >
        <span style={{ fontWeight: 700 }}>API</span>
        <span style={{ opacity: 0.9 }}>Requests</span>
        <span style={{ opacity: 0.75, fontVariantNumeric: 'tabular-nums' }}>
          ({entries.length})
        </span>
        <span style={{ opacity: 0.75 }}>{open ? '▾' : '▴'}</span>
      </div>

      <div style={drawerStyle} aria-hidden={!open}>
        <div style={headerStyle}>
          <div style={{ display: 'flex', flexDirection: 'column', gap: 2 }}>
            <div style={{ fontSize: 13, fontWeight: 700, color: 'rgba(226,232,240,0.95)' }}>
              Request Inspector
            </div>
            <div style={{ fontSize: 12, opacity: 0.75 }}>
              Dev-only. Shows recent SPA → svc-admin API calls.
            </div>
          </div>

          <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>
            <button type="button" style={smallBtn} onClick={() => httpLog.clear()}>
              Clear
            </button>
            <button
              type="button"
              style={{ ...smallBtn, opacity: selected ? 1 : 0.55, cursor: selected ? 'pointer' : 'not-allowed' }}
              disabled={!selected}
              onClick={copySelected}
            >
              Copy
            </button>
          </div>
        </div>

        <div style={{ padding: '0 12px 12px 12px' }}>
          <input
            style={inputStyle}
            value={filter}
            onChange={(e) => setFilter(e.target.value)}
            placeholder="Filter by path/status/error (e.g. /api/nodes 404)"
          />
        </div>

        <div style={listStyle}>
          {filtered.length === 0 ? (
            <div style={{ opacity: 0.75, fontSize: 13, padding: 8 }}>
              No matching requests.
            </div>
          ) : (
            filtered.map((e) => {
              const tone = toneForStatus(e.status)
              const active = e.id === selectedId

              return (
                <div
                  key={e.id}
                  style={{
                    ...rowBase,
                    border: active ? '1px solid rgba(99,102,241,0.55)' : rowBase.border,
                    background: active ? 'rgba(99,102,241,0.10)' : rowBase.background,
                  }}
                  onClick={() => setSelectedId(e.id)}
                >
                  <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', gap: 10 }}>
                    <div style={{ display: 'flex', gap: 8, alignItems: 'center', minWidth: 0 }}>
                      <span style={pillStyle(tone)}>
                        {e.status ?? '—'}
                      </span>
                      <span style={{ fontSize: 12, opacity: 0.85, fontVariantNumeric: 'tabular-nums' }}>
                        {fmtMs(e.duration_ms)}
                      </span>
                      <span style={{ fontSize: 12, opacity: 0.7, fontVariantNumeric: 'tabular-nums' }}>
                        {e.at.slice(11, 19)}
                      </span>
                    </div>

                    <div style={{ fontSize: 12, opacity: 0.8, whiteSpace: 'nowrap' }}>
                      {e.method}
                    </div>
                  </div>

                  <div style={{ marginTop: 6, fontSize: 13, lineHeight: 1.25, opacity: 0.95, wordBreak: 'break-word' }}>
                    <span style={{ opacity: 0.85 }}>{e.path}</span>
                  </div>

                  {e.error ? (
                    <div style={{ marginTop: 6, fontSize: 12, opacity: 0.8, color: 'rgba(253,164,175,0.92)' }}>
                      {e.error}
                    </div>
                  ) : null}
                </div>
              )
            })
          )}
        </div>

        <div style={detailStyle}>
          <div style={{ display: 'flex', alignItems: 'baseline', justifyContent: 'space-between', gap: 10 }}>
            <div style={{ fontSize: 13, fontWeight: 700, opacity: 0.95 }}>
              Details
            </div>
            <div style={{ fontSize: 12, opacity: 0.75 }}>
              {selected ? selected.id.slice(0, 8) : '—'}
            </div>
          </div>

          {!selected ? (
            <div style={{ marginTop: 10, opacity: 0.75, fontSize: 13 }}>
              Click a request above to inspect status/error payload snippets.
            </div>
          ) : (
            <div style={{ marginTop: 10, display: 'grid', gap: 8 }}>
              <div style={{ fontSize: 13, opacity: 0.92 }}>
                <strong>When:</strong> {selected.at}
              </div>
              <div style={{ fontSize: 13, opacity: 0.92 }}>
                <strong>Method:</strong> {selected.method}
              </div>
              <div style={{ fontSize: 13, opacity: 0.92 }}>
                <strong>Path:</strong> {selected.path}
              </div>
              <div style={{ fontSize: 13, opacity: 0.92 }}>
                <strong>Status:</strong> {selected.status ?? '—'}
              </div>
              <div style={{ fontSize: 13, opacity: 0.92 }}>
                <strong>Duration:</strong> {fmtMs(selected.duration_ms)}
              </div>

              {selected.error ? (
                <div style={{ fontSize: 13, opacity: 0.92, color: 'rgba(253,164,175,0.92)' }}>
                  <strong>Error:</strong> {selected.error}
                </div>
              ) : null}

              {selected.body_snippet ? (
                <div>
                  <div style={{ fontSize: 13, fontWeight: 700, opacity: 0.95, marginTop: 6 }}>
                    Body snippet
                  </div>
                  <pre
                    style={{
                      marginTop: 8,
                      padding: 10,
                      borderRadius: 14,
                      border: '1px solid rgba(255,255,255,0.10)',
                      background: 'rgba(255,255,255,0.04)',
                      overflowX: 'auto',
                      fontSize: 12,
                      lineHeight: 1.35,
                      color: 'rgba(226,232,240,0.95)',
                      whiteSpace: 'pre-wrap',
                      wordBreak: 'break-word',
                    }}
                  >
                    {selected.body_snippet}
                  </pre>
                </div>
              ) : (
                <div style={{ marginTop: 10, opacity: 0.75, fontSize: 13 }}>
                  No response body snippet recorded.
                </div>
              )}
            </div>
          )}
        </div>
      </div>
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/layout/LanguageSwitcher.tsx
<a id="crates-svc-admin-ui-src-components-layout-LanguageSwitcher-tsx"></a>

```tsx
import React from 'react'
import { useI18n } from '../../i18n'

export function LanguageSwitcher() {
  const { locale, setLocale } = useI18n()

  const handleChange = (event: React.ChangeEvent<HTMLSelectElement>) => {
    setLocale(event.target.value)
  }

  return (
    <select
      className="svc-admin-language-switcher"
      value={locale}
      onChange={handleChange}
      aria-label="Select language"
    >
      <option value="en-US">EN</option>
      <option value="es-ES">ES</option>
    </select>
  )
}

```

### crates/svc-admin/ui/src/components/layout/Shell.tsx
<a id="crates-svc-admin-ui-src-components-layout-Shell-tsx"></a>

```tsx
/**
 * RO:WHAT — App shell layout (Sidebar + TopBar + main content).
 * RO:WHY — Keeps operator navigation consistent across all routes; central place
 *         to mount dev-only tooling overlays without polluting pages.
 * RO:INTERACTS — Sidebar, TopBar, (dev) RequestInspectorDrawer.
 * RO:INVARIANTS — No nested routers; no conditional hooks; dev tools must not
 *               affect production behavior when Vite build is PROD.
 * RO:SECURITY — Dev tooling is UI-only; no secrets persisted; bounded logs.
 * RO:TEST — Manual: route navigation + open/close inspector; no layout shift.
 */

import React from 'react'
import { Sidebar } from './Sidebar'
import { TopBar } from './TopBar'
import { RequestInspectorDrawer } from '../dev/RequestInspectorDrawer'

type Props = {
  children: React.ReactNode
}

export function Shell({ children }: Props) {
  return (
    <div className="svc-admin-shell">
      <Sidebar />
      <div className="svc-admin-main">
        <TopBar />
        <main>{children}</main>

        {/* Dev-only request inspector (Vite dev server only). */}
        {import.meta.env.DEV ? <RequestInspectorDrawer /> : null}
      </div>
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/layout/Sidebar.tsx
<a id="crates-svc-admin-ui-src-components-layout-Sidebar-tsx"></a>

```tsx
// crates/svc-admin/ui/src/components/layout/Sidebar.tsx
//
// RO:WHAT — Sidebar navigation.
// RO:WHY  — Fast operator navigation; Playground is dev-only but should still be discoverable.
// RO:INVARIANTS —
//   - Always show the Playground link alongside Nodes/Settings.
//   - If ui-config fetch fails, assume Playground is disabled (safe posture).
//   - No sideways scroll / layout shift from active styles.
// RO:SECURITY — Dev flag gates behavior; backend endpoints remain hidden when disabled.
// RO:TEST — Manual: link present; when enabled it loads editor; when disabled it shows instructions.

import React, { useEffect, useState } from 'react'
import { NavLink } from 'react-router-dom'
import { adminClient } from '../../api/adminClient'

function linkClassName({ isActive }: { isActive: boolean }) {
  return isActive
    ? 'svc-admin-sidebar-link svc-admin-sidebar-link-active'
    : 'svc-admin-sidebar-link'
}

function devBadgeStyle(enabled: boolean): React.CSSProperties {
  return {
    display: 'inline-block',
    marginLeft: '0.5rem',
    padding: '0.05rem 0.45rem',
    borderRadius: 999,
    fontSize: '0.72rem',
    lineHeight: 1.2,
    opacity: enabled ? 0.9 : 0.8,
    border: '1px solid currentColor',
    transform: 'translateY(-1px)',
    whiteSpace: 'nowrap',
  }
}

export function Sidebar() {
  const [playgroundEnabled, setPlaygroundEnabled] = useState(false)

  useEffect(() => {
    let cancelled = false

    adminClient
      .getUiConfig()
      .then((cfg) => {
        if (cancelled) return
        setPlaygroundEnabled(Boolean(cfg?.dev?.enableAppPlayground))
      })
      .catch(() => {
        if (cancelled) return
        // Safe posture: if we can't fetch ui-config, assume disabled.
        setPlaygroundEnabled(false)
      })

    return () => {
      cancelled = true
    }
  }, [])

  return (
    <aside className="svc-admin-sidebar">
      <h2>🦀 RON-CORE 🧅</h2>

      <nav>
        <ul>
          <li>
            <NavLink to="/" className={linkClassName}>
              Nodes
            </NavLink>
          </li>

          <li>
            <NavLink
              to="/playground"
              className={linkClassName}
              style={{
                opacity: playgroundEnabled ? 1 : 0.65,
              }}
            >
              Playground
              <span style={devBadgeStyle(playgroundEnabled)}>
                {playgroundEnabled ? 'DEV' : 'DEV OFF'}
              </span>
            </NavLink>
          </li>

          <li>
            <NavLink to="/settings" className={linkClassName}>
              Settings
            </NavLink>
          </li>
        </ul>
      </nav>
    </aside>
  )
}

```

### crates/svc-admin/ui/src/components/layout/ThemeToggle.tsx
<a id="crates-svc-admin-ui-src-components-layout-ThemeToggle-tsx"></a>

```tsx
import React from 'react'
import { useTheme } from '../../theme/ThemeProvider'

export function ThemeToggle() {
  const { theme, setTheme } = useTheme()

  const isLight = theme === 'light'
  const nextTheme = isLight ? 'dark' : 'light'
  const label = isLight ? 'Switch to dark theme' : 'Switch to light theme'
  const icon = isLight ? '☾' : '☀︎'

  const handleClick = () => {
    setTheme(nextTheme)
  }

  return (
    <button
      type="button"
      aria-label={label}
      title={label}
      className="svc-admin-theme-toggle"
      onClick={handleClick}
    >
      {icon}
    </button>
  )
}

```

### crates/svc-admin/ui/src/components/layout/TopBar.tsx
<a id="crates-svc-admin-ui-src-components-layout-TopBar-tsx"></a>

```tsx
// crates/svc-admin/ui/src/components/layout/TopBar.tsx
//
// WHAT: Top navigation bar for the svc-admin SPA.
// WHY:  Central place for brand, theme + language toggles, and the
//       current operator identity (from `/api/me`).

import React, { useEffect, useState } from 'react'
import { ThemeToggle } from './ThemeToggle'
import { LanguageSwitcher } from './LanguageSwitcher'
import { adminClient } from '../../api/adminClient'
import type { MeResponse } from '../../types/admin-api'

type MeState = {
  loading: boolean
  error: string | null
  me: MeResponse | null
}

export function TopBar() {
  const [state, setState] = useState<MeState>({
    loading: true,
    error: null,
    me: null
  })

  useEffect(() => {
    let cancelled = false

    adminClient
      .getMe()
      .then((me) => {
        if (cancelled) return
        setState({
          loading: false,
          error: null,
          me
        })
      })
      .catch((_err) => {
        if (cancelled) return
        setState({
          loading: false,
          error: 'identity-unavailable',
          me: null
        })
      })

    return () => {
      cancelled = true
    }
  }, [])

  const { loading, error, me } = state

  let identityContent: React.ReactNode = null

  if (loading) {
    identityContent = (
      <span className="svc-admin-topbar-identity svc-admin-topbar-identity-loading">
        Loading&hellip;
      </span>
    )
  } else if (error) {
    identityContent = (
      <span className="svc-admin-topbar-identity svc-admin-topbar-identity-error">
        Identity unavailable
      </span>
    )
  } else if (me) {
    const rolesLabel =
      me.roles && me.roles.length > 0 ? ` · ${me.roles.join(', ')}` : ''

    identityContent = (
      <span className="svc-admin-topbar-identity">
        {me.displayName}{' '}
        <span className="svc-admin-topbar-identity-auth">
          ({me.authMode}
          {rolesLabel})
        </span>
      </span>
    )
  } else {
    identityContent = (
      <span className="svc-admin-topbar-identity svc-admin-topbar-identity-anon">
        Anonymous
      </span>
    )
  }

  return (
    <header className="svc-admin-topbar">
      <div className="svc-admin-topbar-left">
        <span>RON-CORE Admin</span>
      </div>
      <div className="svc-admin-topbar-right">
        {identityContent}
        <LanguageSwitcher />
        <ThemeToggle />
      </div>
    </header>
  )
}

```

### crates/svc-admin/ui/src/components/metrics/FacetMetricsPanel.tsx
<a id="crates-svc-admin-ui-src-components-metrics-FacetMetricsPanel-tsx"></a>

```tsx
// crates/svc-admin/ui/src/components/metrics/FacetMetricsPanel.tsx
//
// RO:WHAT — Facet metrics panel for a single node.
// RO:WHY  — Show a small, “ops-friendly” view of facet RPS/error/latency
//           with clear loading/error/empty states. This is where operators
//           will look first when a node’s behavior is weird.
// RO:INTERACTS —
//   - adminClient.getNodeFacetMetrics(id)  (via NodeDetailPage)
//   - MetricChart (SVG sparkline + summary)
//   - LoadingSpinner / ErrorBanner / EmptyState
//
// RO:INVARIANTS —
//   - Never throw; always render *something* (even in error).
//   - Keep a clear mental model for operators:
//       loading   → “svc-admin is fetching from node…”
//       error     → “svc-admin can’t reach facet metrics; node/admin plane
//                    or /metrics endpoint may be offline.”
//       no facets → “Node is up but no facet metrics observed (yet).”
//   - This component stays *purely presentational*; all fetching and
//     history accumulation happens in NodeDetailPage.

import React from 'react'
import type { FacetMetricsSummary } from '../../types/admin-api'
import { MetricChart } from './MetricChart'
import { LoadingSpinner } from '../shared/LoadingSpinner'
import { ErrorBanner } from '../shared/ErrorBanner'
import { EmptyState } from '../shared/EmptyState'

type Props = {
  facets: FacetMetricsSummary[] | null
  loading: boolean
  error?: string | null
  // Optional per-facet RPS history (oldest → newest), supplied by the page.
  historyByFacet?: Record<string, number[]>
}

export function FacetMetricsPanel({
  facets,
  loading,
  error,
  historyByFacet,
}: Props) {
  const hasFacets = !!facets && facets.length > 0

  return (
    <section className="svc-admin-section svc-admin-section-node-metrics">
      <header className="svc-admin-section-header">
        <div className="svc-admin-section-title-row">
          <h2 className="svc-admin-section-title">Facet metrics</h2>
        </div>
        <p className="svc-admin-section-subtitle">
          Recent request rate, error rate, and latency percentiles per facet.
        </p>
      </header>

      {loading && (
        <div className="svc-admin-section-body svc-admin-section-body-centered">
          <LoadingSpinner />
          <p className="svc-admin-section-body-note">
            Loading facet metrics from node&hellip;
          </p>
        </div>
      )}

      {!loading && error && (
        <div className="svc-admin-section-body">
          <ErrorBanner
            message={
              // We soften the raw “Request failed: XXX” into something more
              // operator-friendly but keep the raw message for debugging.
              `Failed to load facet metrics from node. The node's admin plane or /metrics endpoint may be offline or refusing connections. (${error})`
            }
          />
          <p className="svc-admin-section-body-note">
            svc-admin will keep retrying on a short interval. If this is your
            dev environment and no node is actually running on the configured
            admin URL, this warning is expected.
          </p>
        </div>
      )}

      {!loading && !error && !hasFacets && (
        <div className="svc-admin-section-body">
          <EmptyState message="No facet metrics observed yet. The node may be starting up or has not emitted facet metrics in the recent sampling window." />
        </div>
      )}

      {!loading && !error && hasFacets && facets && (
        <div className="svc-admin-section-body">
          <div className="svc-admin-metric-chart-grid">
            {facets.map((facet) => {
              const history = historyByFacet?.[facet.facet]

              return (
                <MetricChart
                  key={facet.facet}
                  facet={facet.facet}
                  rps={facet.rps}
                  errorRate={facet.error_rate}
                  p95={facet.p95_latency_ms}
                  p99={facet.p99_latency_ms}
                  history={history}
                />
              )
            })}
          </div>
        </div>
      )}
    </section>
  )
}

```

### crates/svc-admin/ui/src/components/metrics/MetricChart.tsx
<a id="crates-svc-admin-ui-src-components-metrics-MetricChart-tsx"></a>

```tsx
// crates/svc-admin/ui/src/components/metrics/MetricChart.tsx

import React from 'react'

type Props = {
  facet: string
  rps: number
  errorRate: number
  p95: number
  p99: number
  history?: number[]
}

function formatLatency(ms: number): string {
  if (!Number.isFinite(ms) || ms < 0) return 'n/a'
  if (ms < 1) return `${ms.toFixed(2)} ms`
  if (ms < 10) return `${ms.toFixed(1)} ms`
  if (ms < 1000) return `${Math.round(ms)} ms`
  const s = ms / 1000
  if (s < 10) return `${s.toFixed(1)} s`
  return `${Math.round(s)} s`
}

function clamp(n: number, lo: number, hi: number): number {
  return Math.max(lo, Math.min(hi, n))
}

export function MetricChart({
  facet,
  rps,
  errorRate,
  p95,
  p99,
  history,
}: Props) {
  const series = history && history.length > 0 ? history : [rps]

  const width = 80
  const height = 24
  const padding = 2

  const max = Math.max(...series)
  const min = Math.min(...series)
  const range = max - min || 1

  let points: string
  let lastX = width - padding
  let lastY = height / 2

  if (series.length === 1) {
    const midY = height / 2
    points = `${padding},${midY} ${width - padding},${midY}`
    lastX = width - padding
    lastY = midY
  } else {
    const coords = series.map((value, idx) => {
      const t = idx / (series.length - 1)
      const x = padding + t * (width - padding * 2)
      const norm = (value - min) / range
      const y = height - padding - norm * (height - padding * 2)
      return { x, y }
    })

    points = coords.map((c) => `${c.x},${c.y}`).join(' ')
    const last = coords[coords.length - 1]
    lastX = last.x
    lastY = last.y
  }

  // Keep the dot fully inside the viewBox even when it “breathes”.
  const dotRMin = 0.75
  const dotRMax = 1.0
  const dotPad = dotRMax + 0.55
  const dotX = clamp(lastX, dotPad, width - dotPad)
  const dotY = clamp(lastY, dotPad, height - dotPad)

  const rpsLabel = `${rps.toFixed(1)} rps`
  const errorLabel =
    errorRate > 0 ? `${(errorRate * 100).toFixed(1)}% errors` : null

  const topY = padding
  const bottomY = height - padding

  return (
    <article className="svc-admin-metric-chart">
      <header className="svc-admin-metric-chart-header">
        <span className="svc-admin-metric-chart-facet">{facet}</span>
        <span className="svc-admin-metric-chart-summary">
          <span className="svc-admin-metric-chart-summary-main">{rpsLabel}</span>
          {errorLabel && (
            <span className="svc-admin-metric-chart-summary-error">
              {errorLabel}
            </span>
          )}
        </span>
      </header>

      <div className="svc-admin-metric-chart-bars">
        <svg
          className="svc-admin-metric-chart-sparkline"
          viewBox={`0 0 ${width} ${height}`}
          preserveAspectRatio="none"
          aria-hidden="true"
        >
          <line
            x1={padding}
            y1={topY}
            x2={width - padding}
            y2={topY}
            stroke="currentColor"
            strokeWidth={0.4}
            strokeOpacity={0.25}
          />
          <line
            x1={padding}
            y1={bottomY}
            x2={width - padding}
            y2={bottomY}
            stroke="currentColor"
            strokeWidth={0.4}
            strokeOpacity={0.25}
          />

          <polyline
            fill="none"
            stroke="currentColor"
            strokeWidth={0.25}
            strokeLinecap="round"
            strokeLinejoin="round"
            points={points}
          />

          {/* “Breathing” dot anchored to the last point (no transform = no bobbing). */}
          <circle
            className="svc-admin-metric-chart-last-dot"
            cx={dotX}
            cy={dotY}
            r={dotRMin}
            fill="currentColor"
          >
            <animate
              attributeName="r"
              values={`${dotRMin};${dotRMax};${dotRMin}`}
              dur="3.25s"
              repeatCount="indefinite"
            />
            <animate
              attributeName="opacity"
              values="0.9;0.5;0.9"
              dur="3.25s"
              repeatCount="indefinite"
            />

          </circle>
        </svg>
      </div>

      <footer className="svc-admin-metric-chart-footer">
        <span className="svc-admin-metric-chart-footer-latency">
          p95 {formatLatency(p95)} / p99 {formatLatency(p99)}
        </span>
      </footer>
    </article>
  )
}

```

### crates/svc-admin/ui/src/components/nodes/NodeCard.tsx
<a id="crates-svc-admin-ui-src-components-nodes-NodeCard-tsx"></a>

```tsx
// crates/svc-admin/ui/src/components/nodes/NodeCard.tsx
//
// RO:WHAT — Compact card for a node on the Nodes overview page.
// RO:WHY  — Give operators a quick glance at profile + overall health +
//           plane/restart summary + metrics freshness, without clicking in.
// RO:INTERACTS —
//   - NodeListPage (passes NodeSummary + status + metrics health)
//   - NodeStatusBadge for overall health pill.
//
// NOTE:
//   - This component is now *selection-aware*.
//   - When `onSelect` is provided, the card renders as a <button> that
//     selects the node (used on NodeListPage + right-hand preview).
//   - When `onSelect` is not provided, we fall back to a simple <Link>
//     to `/nodes/:id` (useful for any future usages).

import React from 'react'
import { Link } from 'react-router-dom'
import type { NodeSummary } from '../../types/admin-api'
import { NodeStatusBadge } from './NodeStatusBadge'

export type Health = 'healthy' | 'degraded' | 'down'

export type NodeStatusSummary = {
  overallHealth: Health
  planeCount: number
  readyCount: number
  totalRestarts: number
}

export type MetricsHealth = 'fresh' | 'stale' | 'unreachable'

export type NodeCardProps = {
  node: NodeSummary
  statusSummary?: NodeStatusSummary
  statusLoading?: boolean
  statusError?: string | null
  metricsHealth?: MetricsHealth | null
  metricsLoading?: boolean
  metricsError?: string | null

  // New for selection-aware layout on NodeListPage:
  isSelected?: boolean
  onSelect?: () => void
}

function metricsPillClass(kind: 'loading' | 'na' | MetricsHealth) {
  const base = 'svc-admin-metrics-pill'
  switch (kind) {
    case 'loading':
      return `${base} ${base}--loading`
    case 'na':
      return `${base} ${base}--na`
    case 'fresh':
      return `${base} ${base}--fresh`
    case 'stale':
      return `${base} ${base}--stale`
    case 'unreachable':
      return `${base} ${base}--unreachable`
    default:
      return `${base} ${base}--na`
  }
}

/**
 * Small metrics pill used both on Node cards *and* in the Node preview panel.
 */
export function renderMetricsLabel(
  health: MetricsHealth | null | undefined,
  loading: boolean | undefined,
  error: string | null | undefined,
): JSX.Element {
  if (loading) {
    return <span className={metricsPillClass('loading')}>Metrics: loading…</span>
  }

  if (error || health === 'unreachable') {
    return (
      <span className={metricsPillClass('unreachable')}>
        Metrics: unreachable
      </span>
    )
  }

  if (!health) {
    return <span className={metricsPillClass('na')}>Metrics: n/a</span>
  }

  if (health === 'fresh') {
    return <span className={metricsPillClass('fresh')}>Metrics: fresh</span>
  }

  // stale
  return <span className={metricsPillClass('stale')}>Metrics: stale</span>
}

/**
 * Compact card used on the Nodes overview page.
 *
 * When `onSelect` is provided, the card acts like a selectable tile (button),
 * and we highlight the currently selected one.
 *
 * When `onSelect` is omitted, we fall back to a simple <Link> to the node
 * detail page.
 */
export function NodeCard({
  node,
  statusSummary,
  statusLoading = false,
  statusError = null,
  metricsHealth,
  metricsLoading,
  metricsError,
  isSelected = false,
  onSelect,
}: NodeCardProps) {
  const hasStatus = !!statusSummary && !statusLoading && !statusError

  const classNameBase = [
    'svc-admin-node-card',
    onSelect ? 'svc-admin-node-card--clickable' : '',
    isSelected ? 'svc-admin-node-card--selected' : '',
  ]
    .filter(Boolean)
    .join(' ')

  const inner = (
    <>
      <div className="svc-admin-node-card-header">
        <div>
          <h3 className="svc-admin-node-title">{node.display_name}</h3>
          <p className="svc-admin-node-subtitle">
            <span className="svc-admin-node-label">Profile:</span>{' '}
            <span className="svc-admin-node-profile">{node.profile}</span>
          </p>
        </div>

        {hasStatus && statusSummary && (
          <NodeStatusBadge status={statusSummary.overallHealth} />
        )}
      </div>

      <div className="svc-admin-node-card-body">
        {statusLoading && (
          <p className="svc-admin-node-meta svc-admin-node-meta-muted">
            Loading status…
          </p>
        )}

        {!statusLoading && statusError && (
          <p className="svc-admin-node-meta svc-admin-node-meta-error">
            Status unavailable
          </p>
        )}

        {!statusLoading && !statusError && hasStatus && statusSummary && (
          <p className="svc-admin-node-meta">
            <span>
              {statusSummary.readyCount}/{statusSummary.planeCount} planes ready
            </span>
            <span className="svc-admin-node-meta-dot">•</span>
            <span>
              {statusSummary.totalRestarts}{' '}
              {statusSummary.totalRestarts === 1 ? 'restart' : 'restarts'}
            </span>
          </p>
        )}

        {!statusLoading && !statusError && !hasStatus && (
          <p className="svc-admin-node-meta svc-admin-node-meta-muted">
            Status not loaded yet.
          </p>
        )}

        <div className="svc-admin-node-meta-metrics">
          {renderMetricsLabel(metricsHealth, metricsLoading, metricsError)}
        </div>
      </div>
    </>
  )

  // Selection-aware variant (used by NodeListPage with right-hand preview)
  if (onSelect) {
    return (
      <button type="button" className={classNameBase} onClick={onSelect}>
        {inner}
      </button>
    )
  }

  // Fallback: plain navigation card
  return (
    <Link
      to={`/nodes/${encodeURIComponent(node.id)}`}
      className={classNameBase}
    >
      {inner}
    </Link>
  )
}

```

### crates/svc-admin/ui/src/components/nodes/NodeDetailSidebar.tsx
<a id="crates-svc-admin-ui-src-components-nodes-NodeDetailSidebar-tsx"></a>

```tsx
// crates/svc-admin/ui/src/components/nodes/NodeDetailSidebar.tsx
//
// WHAT:
//   Right-hand sidebar on Node detail page.
//   Shows curated shortcuts (storage/db), a quick "data planes" glance,
//   and a playground stub.
//
// WHY:
//   Keeps the main operational view on the left while providing
//   quick-read panels on the right.

import React, { useMemo } from 'react'
import { Link } from 'react-router-dom'
import type { AdminStatusView } from '../../types/admin-api'
import type { MetricsHealth } from './NodeCard'

type PlaneLike = {
  name?: string
  health?: 'healthy' | 'degraded' | 'down' | string
  ready?: boolean | string
  restarts?: number
  restart_count?: number
  restartCount?: number
}

type Props = {
  status: AdminStatusView
  metricsHealth: MetricsHealth | null
  minSampleAgeSecs: number | null
  loading: boolean
  planes?: PlaneLike[] | null
}

function planeRestarts(p: PlaneLike): number {
  const a = p.restarts
  if (typeof a === 'number' && Number.isFinite(a)) return a
  const b = p.restart_count
  if (typeof b === 'number' && Number.isFinite(b)) return b
  const c = p.restartCount
  if (typeof c === 'number' && Number.isFinite(c)) return c
  return 0
}

function planeReady(p: PlaneLike): boolean | null {
  if (typeof p.ready === 'boolean') return p.ready
  if (typeof p.ready === 'string') {
    const s = p.ready.toLowerCase().trim()
    if (s === 'ready' || s === 'true' || s === 'ok') return true
    if (s === 'not_ready' || s === 'not ready' || s === 'false') return false
  }
  return null
}

function healthTone(h: string): 'ok' | 'warn' | 'bad' | 'muted' {
  const s = (h ?? '').toLowerCase()
  if (s === 'healthy') return 'ok'
  if (s === 'degraded') return 'warn'
  if (s === 'down') return 'bad'
  return 'muted'
}

function hasStorageCapability(status: AdminStatusView | null): boolean {
  if (!status) return false
  const caps = (status as any).capabilities
  // If not reported yet, don’t block in dev
  if (!Array.isArray(caps)) return true
  return caps.includes('storage.readonly.v1')
}

function Badge(props: {
  tone: 'ok' | 'warn' | 'bad' | 'muted'
  children: React.ReactNode
}) {
  const map: Record<
    typeof props.tone,
    { bg: string; fg: string; bd: string }
  > = {
    ok: {
      bg: 'rgba(16,185,129,0.10)',
      fg: 'rgba(110,231,183,0.95)',
      bd: 'rgba(16,185,129,0.22)',
    },
    warn: {
      bg: 'rgba(251,146,60,0.10)',
      fg: 'rgba(253,186,116,0.95)',
      bd: 'rgba(251,146,60,0.24)',
    },
    bad: {
      bg: 'rgba(244,63,94,0.10)',
      fg: 'rgba(253,164,175,0.95)',
      bd: 'rgba(244,63,94,0.24)',
    },
    muted: {
      bg: 'rgba(255,255,255,0.04)',
      fg: 'rgba(255,255,255,0.85)',
      bd: 'rgba(255,255,255,0.10)',
    },
  }
  const c = map[props.tone]
  return (
    <span
      style={{
        display: 'inline-flex',
        alignItems: 'center',
        padding: '3px 8px',
        borderRadius: 999,
        fontSize: 11,
        fontWeight: 850,
        background: c.bg,
        color: c.fg,
        border: `1px solid ${c.bd}`,
        whiteSpace: 'nowrap',
      }}
    >
      {props.children}
    </span>
  )
}

function Card(props: {
  title: string
  children: React.ReactNode
  footer?: React.ReactNode
}) {
  return (
    <div
      style={{
        borderRadius: 18,
        border: '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.12))',
        background:
          'linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.012))',
        boxShadow: '0 14px 34px rgba(0,0,0,0.20)',
        padding: 16,
      }}
    >
      <div style={{ fontSize: 14, fontWeight: 900, marginBottom: 8 }}>
        {props.title}
      </div>
      <div>{props.children}</div>
      {props.footer && <div style={{ marginTop: 12 }}>{props.footer}</div>}
    </div>
  )
}

export function NodeDetailSidebar({
  status,
  planes: planesProp,
  metricsHealth,
  minSampleAgeSecs,
  loading,
}: Props) {
  // ✅ ~10% narrower without touching layout CSS
  const wrapperStyle: React.CSSProperties = {
    width: '90%',
    marginLeft: 'auto',
  }

  const planes: PlaneLike[] = useMemo(() => {
    const fromProp = planesProp ?? null
    const fromStatus = ((status as any)?.planes as PlaneLike[]) ?? []
    return (fromProp && fromProp.length > 0 ? fromProp : fromStatus) ?? []
  }, [planesProp, status])

  const dataPlanes = useMemo(() => {
    const isDataPlane = (name: string) => {
      const s = name.toLowerCase()
      // Include both svc-* and friendly names
      return (
        s.startsWith('svc-') ||
        s.includes('storage') ||
        s.includes('index') ||
        s.includes('mailbox') ||
        s.includes('overlay') ||
        s.includes('dht') ||
        s.includes('db') ||
        s.includes('kv')
      )
    }

    return planes
      .map((p) => ({
        name: String(p.name ?? ''),
        health: String(p.health ?? 'unknown'),
        ready: planeReady(p),
        restarts: planeRestarts(p),
      }))
      .filter((p) => p.name.length > 0 && isDataPlane(p.name))
  }, [planes])

  const metricsPill = useMemo(() => {
    if (metricsHealth === 'fresh') return <Badge tone="ok">Metrics: fresh</Badge>
    if (metricsHealth === 'stale') return <Badge tone="warn">Metrics: stale</Badge>
    if (metricsHealth === 'unreachable')
      return <Badge tone="bad">Metrics: unreachable</Badge>
    return <Badge tone="muted">Metrics: unknown</Badge>
  }, [metricsHealth])

  // ✅ restore working storage link behavior
  const nodeId = status?.id ? String(status.id) : ''
  const canOpenStorage = nodeId.length > 0 && hasStorageCapability(status)
  const storageHref = `/nodes/${encodeURIComponent(nodeId)}/storage`

  return (
    <div style={wrapperStyle}>
      <div style={{ display: 'flex', flexDirection: 'column', gap: 14 }}>
        <Card
          title="Data & storage"
          footer={
            canOpenStorage ? (
              <Link to={storageHref} className="svc-admin-node-preview-open">
                <span>Open storage &amp; databases</span>
                <span className="svc-admin-node-preview-open-icon">→</span>
              </Link>
            ) : (
              <div style={{ fontSize: 13, opacity: 0.75 }}>
                {nodeId.length === 0
                  ? 'Node id unavailable.'
                  : 'Not supported by this node yet.'}
              </div>
            )
          }
        >
          <div style={{ fontSize: 13, opacity: 0.85, lineHeight: 1.35 }}>
            Databases, disk usage, and safe storage facts (read-only).
          </div>
        </Card>

        <Card title="Data planes">
          <div
            style={{
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'space-between',
              gap: 10,
              marginBottom: 10,
            }}
          >
            <div style={{ fontSize: 13, opacity: 0.85 }}>
              Quick read on storage-ish planes (health / readiness / restarts).
            </div>
            {metricsPill}
          </div>

          {loading && (
            <div style={{ fontSize: 13, opacity: 0.75 }}>Loading…</div>
          )}

          {!loading && dataPlanes.length === 0 && (
            <div style={{ fontSize: 13, opacity: 0.75 }}>
              No data-plane services reported for this node yet.
            </div>
          )}

          {!loading && dataPlanes.length > 0 && (
            <div style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>
              {dataPlanes.map((p) => {
                const tone = healthTone(p.health)
                return (
                  <div
                    key={p.name}
                    style={{
                      display: 'grid',
                      gridTemplateColumns: '1fr auto',
                      gap: 10,
                      alignItems: 'center',
                      padding: '10px 10px',
                      borderRadius: 14,
                      background: 'rgba(255,255,255,0.02)',
                      border: '1px solid rgba(255,255,255,0.08)',
                    }}
                  >
                    <div style={{ minWidth: 0 }}>
                      <div style={{ fontWeight: 900, fontSize: 13 }}>
                        {p.name}
                      </div>
                      <div
                        style={{
                          display: 'flex',
                          gap: 8,
                          flexWrap: 'wrap',
                          marginTop: 6,
                        }}
                      >
                        <Badge tone={tone}>
                          {p.health.toLowerCase() === 'unknown'
                            ? 'Unknown'
                            : p.health.charAt(0).toUpperCase() + p.health.slice(1)}
                        </Badge>

                        <Badge
                          tone={
                            p.ready === true
                              ? 'ok'
                              : p.ready === false
                                ? 'warn'
                                : 'muted'
                          }
                        >
                          {p.ready === true
                            ? 'Ready'
                            : p.ready === false
                              ? 'Not ready'
                              : 'Unknown'}
                        </Badge>

                        <Badge tone="muted">{p.restarts} restarts</Badge>
                      </div>
                    </div>

                    <div
                      style={{
                        fontSize: 12,
                        opacity: 0.75,
                        textAlign: 'right',
                      }}
                      title="Minimum facet sample age (proxy for metrics freshness)."
                    >
                      {minSampleAgeSecs != null ? `${minSampleAgeSecs.toFixed(1)}s` : '—'}
                    </div>
                  </div>
                )
              })}
            </div>
          )}
        </Card>

        <Card
          title="Playground"
          footer={
            <button
              type="button"
              disabled
              style={{
                width: '100%',
                borderRadius: 999,
                padding: '9px 12px',
                background: 'rgba(255,255,255,0.03)',
                border: '1px solid rgba(255,255,255,0.10)',
                color: 'rgba(255,255,255,0.55)',
                fontWeight: 800,
                cursor: 'not-allowed',
              }}
            >
              Run (coming soon)
            </button>
          }
        >
          <div style={{ fontSize: 13, opacity: 0.85, lineHeight: 1.35 }}>
            Future home for a read-only playground (safe queries, targeted metrics,
            and structured logs) scoped to this node. For now this is just a stub.
          </div>

          <pre
            style={{
              marginTop: 10,
              padding: 12,
              borderRadius: 14,
              background: 'rgba(0,0,0,0.28)',
              border: '1px solid rgba(255,255,255,0.08)',
              fontSize: 12,
              overflowX: 'auto',
              opacity: 0.9,
            }}
          >
{`# Example (stub)
# SELECT * FROM jobs LIMIT 25;`}
          </pre>
        </Card>
      </div>
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/nodes/NodePreviewPanel.tsx
<a id="crates-svc-admin-ui-src-components-nodes-NodePreviewPanel-tsx"></a>

```tsx
// crates/svc-admin/ui/src/components/nodes/NodePreviewPanel.tsx
//
// WHAT:
//   Right-hand “preview” panel on the Nodes overview page.
//   Shows richer details for the currently selected node plus a
//   metrics pill and an "Open →" button to jump to the detail page.
//
// WHY:
//   Mirrors the God-tier mock: cards on the left, focused preview on the
//   right so operators can scan quickly but still get depth on hover/click.
//
// INTERACTS:
//   - NodeListPage (passes selected node + status + metrics)
//   - NodeStatusBadge for overall health
//   - NodeCard.renderMetricsLabel for metrics freshness pill
//   - adminClient.getNodeStorageSummary(nodeId) (preview storage ring)
//   - adminClient.getNodeSystemSummary(nodeId)  (preview CPU/RAM/Network)
//     falls back to deterministic mock when endpoint missing (404/405/501)
//
// NOTE:
//   - This panel supports an optional "Planes" table, matching the mock.
//   - To populate it, pass `planes` from the selected node's status view.

import React, { useEffect, useMemo, useState } from 'react'
import { Link } from 'react-router-dom'
import type {
  NodeSummary,
  StorageSummaryDto,
  SystemSummaryDto,
} from '../../types/admin-api'
import { adminClient } from '../../api/adminClient'
import { NodeStatusBadge } from './NodeStatusBadge'
import type { NodeStatusSummary, MetricsHealth, Health } from './NodeCard'
import { renderMetricsLabel } from './NodeCard'

type PlaneLike = {
  name?: string
  health?: 'healthy' | 'degraded' | 'down' | string
  ready?: boolean | string
  restarts?: number
  restart_count?: number
  restartCount?: number
}

type Props = {
  node: NodeSummary | null
  statusSummary?: NodeStatusSummary
  metricsHealth?: MetricsHealth | null
  metricsLoading?: boolean
  metricsError?: string | null
  planes?: PlaneLike[] | null
}

type FetchErr = Error & { status?: number }
type DataSource = 'live' | 'mock'

function isMissingEndpoint(err: unknown): boolean {
  const e = err as FetchErr
  const s = e && typeof e.status === 'number' ? e.status : undefined
  if (s === 404 || s === 405 || s === 501) return true

  const msg = e?.message ?? ''
  return (
    msg.includes(' 404 ') ||
    msg.includes(' 405 ') ||
    msg.includes(' 501 ') ||
    msg.toLowerCase().includes('not found') ||
    msg.toLowerCase().includes('not implemented')
  )
}

function clampPct(p: number): number {
  if (!Number.isFinite(p)) return 0
  return Math.max(0, Math.min(100, p))
}

function fmtBytes(bytes: number): string {
  if (!Number.isFinite(bytes) || bytes < 0) return 'n/a'
  const units = ['B', 'KiB', 'MiB', 'GiB', 'TiB'] as const
  let v = bytes
  let i = 0
  while (v >= 1024 && i < units.length - 1) {
    v /= 1024
    i++
  }
  const digits = i === 0 ? 0 : i <= 2 ? 1 : 2
  return `${v.toFixed(digits)} ${units[i]}`
}

function fmtBytesPerSec(bytesPerSec: number): string {
  if (!Number.isFinite(bytesPerSec) || bytesPerSec < 0) return 'n/a'
  return `${fmtBytes(bytesPerSec)}/s`
}

function fmtBps(bitsPerSec: number): string {
  if (!Number.isFinite(bitsPerSec) || bitsPerSec < 0) return 'n/a'
  const units = ['bps', 'Kbps', 'Mbps', 'Gbps', 'Tbps'] as const
  let v = bitsPerSec
  let i = 0
  while (v >= 1000 && i < units.length - 1) {
    v /= 1000
    i++
  }
  const digits = i === 0 ? 0 : i <= 2 ? 1 : 2
  return `${v.toFixed(digits)} ${units[i]}`
}

// ---- deterministic mock fallback (storage + ram + cpu + bandwidth) ----------

function mockStorageSummary(nodeId: string): StorageSummaryDto {
  const seed = Array.from(nodeId).reduce((acc, c) => acc + c.charCodeAt(0), 0)
  const total = 512 * 1024 * 1024 * 1024 // 512 GiB
  const used = (96 + (seed % 220)) * 1024 * 1024 * 1024 // 96..316 GiB
  const clampedUsed = Math.min(used, total - 8 * 1024 * 1024 * 1024)
  const free = total - clampedUsed

  return {
    fsType: 'ext4',
    mount: '/',
    totalBytes: total,
    usedBytes: clampedUsed,
    freeBytes: free,
    ioReadBps: null,
    ioWriteBps: null,
  }
}

type MemSummary = { totalBytes: number; usedBytes: number }

function mockMemorySummary(nodeId: string): MemSummary {
  const seed = Array.from(nodeId).reduce((acc, c) => acc + c.charCodeAt(0), 0)
  const totalsGiB = [16, 24, 32, 48, 64, 96, 128] as const
  const totalGiB = totalsGiB[seed % totalsGiB.length]
  const total = totalGiB * 1024 * 1024 * 1024

  // used: 35%..88% deterministic
  const pct = 35 + (seed % 54)
  const used = Math.round((pct / 100) * total)

  return { totalBytes: total, usedBytes: used }
}

function mockCpuPct(nodeId: string): number {
  const seed = Array.from(nodeId).reduce((acc, c) => acc + c.charCodeAt(0), 0)
  // 18%..92%
  return 18 + (seed % 75)
}

type BandwidthSummary = { totalBps: number; usedBps: number }

function mockBandwidthSummary(nodeId: string): BandwidthSummary {
  const seed = Array.from(nodeId).reduce((acc, c) => acc + c.charCodeAt(0), 0)

  // deterministic "link size": 250 Mbps, 500 Mbps, 1 Gbps, 2.5 Gbps
  const totals = [250e6, 500e6, 1e9, 2.5e9] as const
  const total = totals[seed % totals.length]

  // used: 12%..90%
  const pct = 12 + (seed % 79)
  const used = Math.round((pct / 100) * total)

  return { totalBps: total, usedBps: used }
}

// ---- ring pill --------------------------------------------------------------

function RingPill(props: {
  label: string
  pct: number // 0..100
  line1: string
  line2: string
  source: DataSource
  loading: boolean
  title: string
}) {
  const pct = clampPct(props.pct)
  const radius = 16
  const stroke = 5
  const c = 2 * Math.PI * radius
  const dash = (pct / 100) * c
  const gap = c - dash

  const color =
    pct >= 90
      ? 'var(--svc-admin-color-danger-text, #ef4444)'
      : pct >= 75
        ? 'var(--svc-admin-color-warning, #fb923c)'
        : 'var(--svc-admin-color-accent, #3b82f6)'

  return (
    <div
      title={props.title}
      style={{
        display: 'flex',
        alignItems: 'center',
        gap: '0.55rem',
        padding: '0.38rem 0.60rem',
        borderRadius: 999,
        border: '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.12))',
        background: 'var(--svc-admin-color-panel, rgba(255,255,255,0.02))',
        width: '100%',
        minWidth: 190,
        maxWidth: 240,
      }}
    >
      <div style={{ position: 'relative', width: 40, height: 40, flex: '0 0 auto' }}>
        <svg width="40" height="40" viewBox="0 0 40 40" aria-hidden="true">
          <circle
            cx="20"
            cy="20"
            r={radius}
            fill="none"
            stroke="var(--svc-admin-color-border, rgba(255,255,255,0.12))"
            strokeWidth={stroke}
            opacity={0.9}
          />
          <circle
            cx="20"
            cy="20"
            r={radius}
            fill="none"
            stroke={color}
            strokeWidth={stroke}
            strokeLinecap="round"
            strokeDasharray={`${dash} ${gap}`}
            transform="rotate(-90 20 20)"
          />
        </svg>

        <div
          style={{
            position: 'absolute',
            inset: 0,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 850,
            fontSize: '0.78rem',
            lineHeight: 1,
          }}
        >
          {props.loading ? '…' : `${pct.toFixed(0)}%`}
        </div>
      </div>

      <div style={{ display: 'flex', flexDirection: 'column', gap: '0.08rem' }}>
        <div style={{ fontWeight: 900, fontSize: '0.92rem', lineHeight: 1.05 }}>
          {props.label}
        </div>
        <div style={{ fontSize: '0.80rem', opacity: 0.9, lineHeight: 1.1 }}>
          {props.line1}
        </div>
        <div style={{ fontSize: '0.78rem', opacity: 0.8, lineHeight: 1.1 }}>
          {props.line2}{' '}
          <span style={{ opacity: 0.75 }}>
            · {props.source === 'live' ? 'Live' : 'Mock'}
          </span>
        </div>
      </div>
    </div>
  )
}

// ---- planes helpers ---------------------------------------------------------

function planeRestarts(p: PlaneLike): number {
  const a = p.restarts
  if (typeof a === 'number' && Number.isFinite(a)) return a
  const b = p.restart_count
  if (typeof b === 'number' && Number.isFinite(b)) return b
  const c = p.restartCount
  if (typeof c === 'number' && Number.isFinite(c)) return c
  return 0
}

function planeHealth(p: PlaneLike): Health | 'unknown' {
  const h = (p.health ?? '').toString().toLowerCase()
  if (h === 'healthy') return 'healthy'
  if (h === 'degraded') return 'degraded'
  if (h === 'down') return 'down'
  return 'unknown'
}

function planeReady(p: PlaneLike): boolean | null {
  if (typeof p.ready === 'boolean') return p.ready
  if (typeof p.ready === 'string') {
    const s = p.ready.toLowerCase()
    if (s === 'ready') return true
    if (s === 'not_ready' || s === 'not ready') return false
  }
  return null
}

// ---- component --------------------------------------------------------------

export function NodePreviewPanel({
  node,
  statusSummary,
  metricsHealth,
  metricsLoading,
  metricsError,
  planes,
}: Props) {
  // Hooks must run on every render; no early return before hooks.
  const nodeId = node?.id ?? ''

  const [storage, setStorage] = useState<StorageSummaryDto | null>(null)
  const [storageLoading, setStorageLoading] = useState(false)
  const [storageSource, setStorageSource] = useState<DataSource>('mock')

  const [system, setSystem] = useState<SystemSummaryDto | null>(null)
  const [systemLoading, setSystemLoading] = useState(false)
  const [systemSource, setSystemSource] = useState<DataSource>('mock')

  // Fetch storage summary (already supported)
  useEffect(() => {
    if (!nodeId) {
      setStorage(null)
      setStorageLoading(false)
      setStorageSource('mock')
      return
    }

    let cancelled = false
    setStorageLoading(true)

    ;(async () => {
      try {
        const live = await adminClient.getNodeStorageSummary(nodeId)
        if (cancelled) return
        setStorage(live)
        setStorageSource('live')
      } catch (err) {
        if (cancelled) return
        setStorage(mockStorageSummary(nodeId))
        setStorageSource('mock')
        // preview remains stable even on real errors
        void err
      } finally {
        if (!cancelled) setStorageLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [nodeId])

  // Fetch system summary (CPU/RAM/NET) — optional rollout
  useEffect(() => {
    if (!nodeId) {
      setSystem(null)
      setSystemLoading(false)
      setSystemSource('mock')
      return
    }

    let cancelled = false
    setSystemLoading(true)

    ;(async () => {
      try {
        const live = await adminClient.getNodeSystemSummary(nodeId)
        if (cancelled) return
        setSystem(live)
        setSystemSource('live')
      } catch (err) {
        if (cancelled) return
        setSystem(null)
        setSystemSource('mock')
        // If missing endpoint -> mock; if real error -> still mock (stable UI).
        if (!isMissingEndpoint(err)) {
          void err
        }
      } finally {
        if (!cancelled) setSystemLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [nodeId])

  const storageComputed = useMemo(() => {
    if (!nodeId) return null
    const s = storage ?? mockStorageSummary(nodeId)
    const total = s.totalBytes > 0 ? s.totalBytes : 0
    const used = s.usedBytes >= 0 ? s.usedBytes : 0
    const pct = total > 0 ? Math.round((used / total) * 100) : 0
    return { pct, used, total }
  }, [storage, nodeId])

  const ramComputed = useMemo(() => {
    if (!nodeId) return null

    // Prefer live
    if (system && system.ramTotalBytes > 0) {
      const total = system.ramTotalBytes
      const used = Math.max(0, system.ramUsedBytes)
      const pct = Math.round((used / total) * 100)
      return { pct, used, total, source: systemSource as DataSource }
    }

    // Fallback deterministic mock
    const m = mockMemorySummary(nodeId)
    const total = m.totalBytes > 0 ? m.totalBytes : 0
    const used = m.usedBytes >= 0 ? m.usedBytes : 0
    const pct = total > 0 ? Math.round((used / total) * 100) : 0
    return { pct, used, total, source: 'mock' as DataSource }
  }, [nodeId, system, systemSource])

  const cpuComputed = useMemo(() => {
    if (!nodeId) return null

    // Prefer live
    const live = system?.cpuPercent
    if (typeof live === 'number' && Number.isFinite(live)) {
      return { pct: clampPct(live), source: systemSource as DataSource }
    }

    // Fallback mock
    return { pct: clampPct(mockCpuPct(nodeId)), source: 'mock' as DataSource }
  }, [nodeId, system, systemSource])

  const bandwidthComputed = useMemo(() => {
    if (!nodeId) return null

    // Live path: netRxBps/netTxBps are bytes/sec. We show Rx/Tx, and compute a
    // soft utilization using an assumed 1 Gbps link (until we expose link speed).
    const rx = system?.netRxBps
    const tx = system?.netTxBps
    const hasLive =
      typeof rx === 'number' ||
      typeof tx === 'number'

    if (hasLive) {
      const rxBpsBytes = typeof rx === 'number' && Number.isFinite(rx) ? Math.max(0, rx) : 0
      const txBpsBytes = typeof tx === 'number' && Number.isFinite(tx) ? Math.max(0, tx) : 0

      const usedBits = (rxBpsBytes + txBpsBytes) * 8
      const assumedLinkBits = 1e9 // 1 Gbps assumption (until we expose link speed)
      const pct = assumedLinkBits > 0 ? Math.round((usedBits / assumedLinkBits) * 100) : 0

      return {
        pct: clampPct(pct),
        rxBytesPerSec: rxBpsBytes,
        txBytesPerSec: txBpsBytes,
        source: systemSource as DataSource,
        isLive: true,
      }
    }

    // Fallback mock
    const bw = mockBandwidthSummary(nodeId)
    const total = bw.totalBps > 0 ? bw.totalBps : 0
    const used = bw.usedBps >= 0 ? bw.usedBps : 0
    const pct = total > 0 ? Math.round((used / total) * 100) : 0
    return {
      pct: clampPct(pct),
      usedBitsPerSec: used,
      totalBitsPerSec: total,
      source: 'mock' as DataSource,
      isLive: false,
    }
  }, [nodeId, system, systemSource])

  // Safe empty state after hooks.
  if (!node) {
    return (
      <aside className="svc-admin-node-preview svc-admin-node-preview-empty">
        <p>Select a node on the left to see details.</p>
      </aside>
    )
  }

  const planeCount = statusSummary?.planeCount ?? null
  const readyCount = statusSummary?.readyCount ?? null
  const totalRestarts = statusSummary?.totalRestarts ?? null

  const version = (node as any)?.version ?? (node as any)?.build_version ?? null
  const baseUrl = (node as any)?.base_url ?? (node as any)?.baseUrl ?? null
  const metricsUrl =
    typeof baseUrl === 'string' && baseUrl.length > 0
      ? `${baseUrl.replace(/\/+$/, '')}/metrics`
      : null

  return (
    <aside className="svc-admin-node-preview">
      <header className="svc-admin-node-preview-header svc-admin-node-preview-header--stack">
        <div className="svc-admin-node-preview-header-left">
          <h2 className="svc-admin-node-preview-title">{node.display_name}</h2>
          <p className="svc-admin-node-preview-subtitle">
            <span className="svc-admin-node-label">Profile:</span>{' '}
            <span className="svc-admin-node-profile">{node.profile}</span>
          </p>
        </div>

        <div className="svc-admin-node-preview-pills">
          {statusSummary && <NodeStatusBadge status={statusSummary.overallHealth} />}
          <div className="svc-admin-node-preview-metrics-pill">
            {renderMetricsLabel(metricsHealth ?? null, metricsLoading, metricsError)}
          </div>
        </div>
      </header>

      {/* ✅ TOP SECTION: 2×2 grid (CPU/RAM + Storage/Bandwidth) */}
      <div
        style={{
          width: '100%',
          display: 'grid',
          gridTemplateColumns: 'repeat(2, minmax(190px, 240px))',
          gap: '0.85rem',
          justifyContent: 'center',
          alignItems: 'center',
          margin: '1.0rem 0 0.35rem 0',
        }}
      >
        {/* Top Left: CPU */}
        {cpuComputed && (
          <RingPill
            label="CPU"
            pct={cpuComputed.pct}
            line1="Utilization"
            line2={systemSource === 'live' ? `Updated: ${system?.updatedAt ?? 'now'}` : 'Preview'}
            source={cpuComputed.source}
            loading={systemLoading && cpuComputed.source === 'live'}
            title="CPU utilization (live when node exposes /api/v1/system/summary; else deterministic mock)."
          />
        )}

        {/* Top Right: RAM */}
        {ramComputed && (
          <RingPill
            label="RAM"
            pct={ramComputed.pct}
            line1={`${fmtBytes(ramComputed.used)} /`}
            line2={`${fmtBytes(ramComputed.total)}`}
            source={ramComputed.source}
            loading={systemLoading && ramComputed.source === 'live'}
            title="Total node RAM used (live when node exposes /api/v1/system/summary; else deterministic mock)."
          />
        )}

        {/* Bottom Left: Storage */}
        {storageComputed && (
          <RingPill
            label="Storage"
            pct={storageComputed.pct}
            line1={`${fmtBytes(storageComputed.used)} /`}
            line2={`${fmtBytes(storageComputed.total)}`}
            source={storageSource}
            loading={storageLoading}
            title="Total node storage used (curated preview; live when node exposes /api/v1/storage/summary)."
          />
        )}

        {/* Bottom Right: Bandwidth */}
        {bandwidthComputed && (
          <RingPill
            label="Bandwidth"
            pct={bandwidthComputed.pct}
            line1={
              (bandwidthComputed as any).isLive
                ? `RX ${fmtBytesPerSec((bandwidthComputed as any).rxBytesPerSec ?? 0)}`
                : `${fmtBps((bandwidthComputed as any).usedBitsPerSec ?? 0)} /`
            }
            line2={
              (bandwidthComputed as any).isLive
                ? `TX ${fmtBytesPerSec((bandwidthComputed as any).txBytesPerSec ?? 0)}`
                : `${fmtBps((bandwidthComputed as any).totalBitsPerSec ?? 0)}`
            }
            source={bandwidthComputed.source}
            loading={systemLoading && bandwidthComputed.source === 'live'}
            title={
              (bandwidthComputed as any).isLive
                ? 'Network activity (live RX/TX bytes/sec). Ring % uses an assumed 1 Gbps link until link speed is exposed.'
                : 'Bandwidth utilization (mock until nodes expose network rate DTOs).'
            }
          />
        )}
      </div>

      <div className="svc-admin-node-preview-body">
        <p className="svc-admin-node-preview-line">
          <span className="svc-admin-node-label">Node ID:</span>{' '}
          <span className="svc-admin-node-id">{node.id}</span>
        </p>

        {version && (
          <p className="svc-admin-node-preview-line">
            <span className="svc-admin-node-label">Version:</span>{' '}
            <span className="svc-admin-node-id">{String(version)}</span>
          </p>
        )}

        {planeCount !== null && readyCount !== null && totalRestarts !== null && (
          <p className="svc-admin-node-preview-line svc-admin-node-preview-planes">
            <span>
              <strong>
                {readyCount}/{planeCount}
              </strong>{' '}
              planes ready
            </span>
            <span className="svc-admin-node-meta-dot">•</span>
            <span>
              <strong>{totalRestarts}</strong>{' '}
              {totalRestarts === 1 ? 'restart' : 'restarts'}
            </span>
          </p>
        )}
      </div>

      <section className="svc-admin-node-preview-planes-block">
        <div className="svc-admin-node-preview-planes-header">
          <h3 className="svc-admin-node-preview-planes-title">Planes</h3>

          {metricsUrl ? (
            <a
              className="svc-admin-node-preview-planes-link"
              href={metricsUrl}
              target="_blank"
              rel="noreferrer"
            >
              View /metrics
            </a>
          ) : (
            <span className="svc-admin-node-preview-planes-link svc-admin-node-preview-planes-link--disabled">
              View /metrics
            </span>
          )}
        </div>

        {planes && planes.length > 0 ? (
          <div className="svc-admin-node-preview-table-wrap">
            <table className="svc-admin-node-preview-table">
              <thead>
                <tr>
                  <th>Plane</th>
                  <th>Health</th>
                  <th>Ready</th>
                  <th className="svc-admin-node-preview-th-right">Restarts</th>
                </tr>
              </thead>
              <tbody>
                {planes.map((p, idx) => {
                  const name = p.name ?? `plane-${idx}`
                  const h = planeHealth(p)
                  const r = planeReady(p)
                  const restarts = planeRestarts(p)

                  return (
                    <tr key={String(name)}>
                      <td className="svc-admin-node-preview-td-plane">{String(name)}</td>
                      <td>
                        <span
                          className={[
                            'svc-admin-node-preview-health',
                            `svc-admin-node-preview-health--${h}`,
                          ].join(' ')}
                        >
                          {h === 'unknown'
                            ? 'Unknown'
                            : h.charAt(0).toUpperCase() + h.slice(1)}
                        </span>
                      </td>
                      <td>
                        <span
                          className={[
                            'svc-admin-node-preview-ready',
                            r === true
                              ? 'svc-admin-node-preview-ready--ready'
                              : r === false
                                ? 'svc-admin-node-preview-ready--notready'
                                : 'svc-admin-node-preview-ready--unknown',
                          ].join(' ')}
                        >
                          {r === true ? 'Ready' : r === false ? 'Not ready' : 'Unknown'}
                        </span>
                      </td>
                      <td className="svc-admin-node-preview-td-right">
                        {restarts}
                        <span className="svc-admin-node-preview-chev">›</span>
                      </td>
                    </tr>
                  )
                })}
              </tbody>
            </table>
          </div>
        ) : (
          <div className="svc-admin-node-preview-planes-empty">Planes not loaded yet.</div>
        )}
      </section>

      <footer className="svc-admin-node-preview-footer">
        <Link
          to={`/nodes/${encodeURIComponent(node.id)}`}
          className="svc-admin-node-preview-open"
        >
          <span>Open</span>
          <span className="svc-admin-node-preview-open-icon">→</span>
        </Link>
      </footer>
    </aside>
  )
}

```

### crates/svc-admin/ui/src/components/nodes/NodeStatusBadge.tsx
<a id="crates-svc-admin-ui-src-components-nodes-NodeStatusBadge-tsx"></a>

```tsx
// crates/svc-admin/ui/src/components/nodes/NodeStatusBadge.tsx
//
// RO:WHAT  — Small pill badge for overall node health (healthy / degraded / down).
// RO:WHY   — Used on the Nodes list and Node detail header for quick visual status.
// RO:NOTE  — Uses inline styles instead of Tailwind so it works with our current CSS
//            pipeline and looks good in both light and dark themes.

import React, { type CSSProperties } from 'react'

type Props = {
  status: 'healthy' | 'degraded' | 'down'
}

const BASE_STYLE: CSSProperties = {
  display: 'inline-flex',
  alignItems: 'center',
  justifyContent: 'center',
  padding: '0 0.6rem',
  height: '1.4rem',
  borderRadius: 9999,
  fontSize: '0.75rem',
  fontWeight: 600,
  textTransform: 'capitalize',
  letterSpacing: '0.03em',
  lineHeight: 1,
}

const VARIANTS: Record<Props['status'], CSSProperties> = {
  healthy: {
    backgroundColor: 'rgba(22, 163, 74, 0.16)', // emerald-ish
    border: '1px solid rgba(34, 197, 94, 0.7)',
    color: 'rgb(134, 239, 172)',
  },
  degraded: {
    backgroundColor: 'rgba(245, 158, 11, 0.16)', // amber
    border: '1px solid rgba(251, 191, 36, 0.7)',
    color: 'rgb(253, 224, 171)',
  },
  down: {
    backgroundColor: 'rgba(248, 113, 113, 0.18)', // red
    border: '1px solid rgba(248, 113, 113, 0.85)',
    color: 'rgb(254, 202, 202)',
  },
}

export function NodeStatusBadge({ status }: Props) {
  const style: CSSProperties = { ...BASE_STYLE, ...VARIANTS[status] }
  return <span style={style}>{status}</span>
}

```

### crates/svc-admin/ui/src/components/nodes/PlaneStatusTable.tsx
<a id="crates-svc-admin-ui-src-components-nodes-PlaneStatusTable-tsx"></a>

```tsx
// crates/svc-admin/ui/src/components/nodes/PlaneStatusTable.tsx
//
// WHAT:
//   Planes status table for a node.
// WHY:
//   Fix column truncation / misalignment and style it like the sidebar rows.
//   Ensures all columns are visible even in a tighter container.
//
// NOTE:
//   This version removes horizontal scrolling and instead tightens column widths,
//   gaps, padding, and chip sizing so the last column doesn't get clipped.

import React, { useMemo } from 'react'

type PlaneLike = {
  name?: string
  plane?: string
  service?: string
  health?: 'healthy' | 'degraded' | 'down' | string
  status?: string
  state?: string
  ready?: boolean | string
  is_ready?: boolean | string
  isReady?: boolean | string
  restarts?: number
  restart_count?: number
  restartCount?: number
}

function toName(p: PlaneLike): string {
  return String(p?.name ?? p?.plane ?? p?.service ?? 'unknown')
}

function toHealth(p: PlaneLike): string {
  const raw = p?.health ?? p?.status ?? p?.state ?? 'unknown'
  const s = String(raw).toLowerCase().trim()
  if (s === 'healthy' || s === 'degraded' || s === 'down') return s
  return 'unknown'
}

function toReady(p: PlaneLike): boolean | null {
  const v = p?.ready ?? p?.is_ready ?? p?.isReady
  if (typeof v === 'boolean') return v
  if (typeof v === 'string') {
    const s = v.toLowerCase().trim()
    if (s === 'ready' || s === 'true' || s === 'ok') return true
    if (s === 'not_ready' || s === 'not ready' || s === 'false') return false
  }
  return null
}

function toRestarts(p: PlaneLike): number {
  const a = p?.restarts
  if (typeof a === 'number' && Number.isFinite(a)) return Math.max(0, Math.floor(a))
  const b = p?.restart_count
  if (typeof b === 'number' && Number.isFinite(b)) return Math.max(0, Math.floor(b))
  const c = p?.restartCount
  if (typeof c === 'number' && Number.isFinite(c)) return Math.max(0, Math.floor(c))
  return 0
}

function chipStyle(tone: 'ok' | 'warn' | 'bad' | 'muted'): React.CSSProperties {
  const map: Record<typeof tone, { bg: string; fg: string; bd: string }> = {
    ok: {
      bg: 'rgba(16,185,129,0.10)',
      fg: 'rgba(110,231,183,0.95)',
      bd: 'rgba(16,185,129,0.22)',
    },
    warn: {
      bg: 'rgba(251,146,60,0.10)',
      fg: 'rgba(253,186,116,0.95)',
      bd: 'rgba(251,146,60,0.24)',
    },
    bad: {
      bg: 'rgba(244,63,94,0.10)',
      fg: 'rgba(253,164,175,0.95)',
      bd: 'rgba(244,63,94,0.24)',
    },
    muted: {
      bg: 'rgba(255,255,255,0.04)',
      fg: 'rgba(255,255,255,0.86)',
      bd: 'rgba(255,255,255,0.10)',
    },
  }
  const c = map[tone]
  return {
    display: 'inline-flex',
    alignItems: 'center',
    justifyContent: 'center',
    padding: '2px 6px', // tighter
    borderRadius: 999,
    fontSize: 10, // tighter
    fontWeight: 850,
    background: c.bg,
    color: c.fg,
    border: `1px solid ${c.bd}`,
    whiteSpace: 'nowrap',
    minWidth: 52, // tighter
    lineHeight: 1.2,
  }
}

function healthTone(h: string): 'ok' | 'warn' | 'bad' | 'muted' {
  if (h === 'healthy') return 'ok'
  if (h === 'degraded') return 'warn'
  if (h === 'down') return 'bad'
  return 'muted'
}

export function PlaneStatusTable({ planes }: { planes: unknown[] }) {
  const rows = useMemo(() => {
    const list: PlaneLike[] = Array.isArray(planes) ? (planes as PlaneLike[]) : []
    return list.map((p) => {
      const name = toName(p)
      const health = toHealth(p)
      const ready = toReady(p)
      const restarts = toRestarts(p)
      return { name, health, ready, restarts }
    })
  }, [planes])

  if (!rows.length) {
    return (
      <div
        style={{
          borderRadius: 18,
          border: '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.12))',
          background:
            'linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.012))',
          padding: 14,
          opacity: 0.85,
        }}
      >
        No planes reported yet.
      </div>
    )
  }

  // No horizontal scroll: keep columns tight so the whole table fits.
  // Plane | Health | Ready | Restarts
  const gridCols = 'minmax(84px, 1fr) 68px 68px 70px'

  return (
    <div
      style={{
        borderRadius: 18,
        border: '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.12))',
        background:
          'linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.012))',
        boxShadow: '0 14px 34px rgba(0,0,0,0.20)',
        overflow: 'hidden',
      }}
    >
      {/* Header */}
      <div
        style={{
          display: 'grid',
          gridTemplateColumns: gridCols,
          gap: 6, // tighter than before
          padding: '10px 10px', // tighter than before
          borderBottom: '1px solid rgba(255,255,255,0.08)',
          fontSize: 10.5, // tighter so "RESTARTS" fits
          fontWeight: 900,
          letterSpacing: '0.01em', // tighter
          textTransform: 'uppercase',
          opacity: 0.9,
          alignItems: 'center',
        }}
      >
        <div>Plane</div>
        <div style={{ textAlign: 'center' }}>Health</div>
        <div style={{ textAlign: 'center' }}>Ready</div>
        <div
          style={{
            textAlign: 'right',
            overflow: 'hidden',
            textOverflow: 'clip',
            whiteSpace: 'nowrap',
          }}
        >
          Restarts
        </div>
      </div>

      {/* Rows */}
      <div style={{ display: 'flex', flexDirection: 'column' }}>
        {rows.map((r, idx) => {
          const hTone = healthTone(r.health)
          const healthLabel =
            r.health === 'unknown'
              ? 'Unknown'
              : r.health.charAt(0).toUpperCase() + r.health.slice(1)

          const readyTone = r.ready === true ? 'ok' : r.ready === false ? 'warn' : 'muted'
          const readyLabel =
            r.ready === true ? 'Ready' : r.ready === false ? 'Not ready' : 'Unknown'

          const restartTone = r.restarts > 0 ? 'warn' : 'muted'

          return (
            <div
              key={`${r.name}:${idx}`}
              style={{
                display: 'grid',
                gridTemplateColumns: gridCols,
                gap: 6, // tighter
                alignItems: 'center',
                padding: '10px 10px', // tighter
                borderBottom: '1px solid rgba(255,255,255,0.06)',
                background: 'rgba(255,255,255,0.01)',
              }}
            >
              <div
                style={{
                  fontWeight: 900,
                  fontSize: 13,
                  minWidth: 0,
                  overflow: 'hidden',
                  textOverflow: 'ellipsis',
                  whiteSpace: 'nowrap',
                }}
                title={r.name}
              >
                {r.name}
              </div>

              <div style={{ textAlign: 'center' }}>
                <span style={chipStyle(hTone)}>{healthLabel}</span>
              </div>

              <div style={{ textAlign: 'center' }}>
                <span style={chipStyle(readyTone)}>{readyLabel}</span>
              </div>

              <div style={{ textAlign: 'right' }}>
                <span style={chipStyle(restartTone)}>{r.restarts}</span>
              </div>
            </div>
          )
        })}
      </div>
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/shared/EmptyState.tsx
<a id="crates-svc-admin-ui-src-components-shared-EmptyState-tsx"></a>

```tsx
import React from 'react'

type Props = { message: string }

export function EmptyState({ message }: Props) {
  return (
    <div className="svc-admin-empty-state">
      {message}
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/shared/ErrorBanner.tsx
<a id="crates-svc-admin-ui-src-components-shared-ErrorBanner-tsx"></a>

```tsx
import React from 'react'

type Props = { message: string }

export function ErrorBanner({ message }: Props) {
  return (
    <div className="svc-admin-error-banner">
      {message}
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/shared/LoadingSpinner.tsx
<a id="crates-svc-admin-ui-src-components-shared-LoadingSpinner-tsx"></a>

```tsx
import React from 'react'

export function LoadingSpinner() {
  return <div>Loading...</div>
}

```

### crates/svc-admin/ui/src/i18n/index.ts
<a id="crates-svc-admin-ui-src-i18n-index-ts"></a>

```ts
// crates/svc-admin/ui/src/i18n/index.ts
//
// RO:WHAT — Minimal i18n provider for svc-admin (locale + t(key)).
// RO:WHY  — Let the backend drive the default locale via UiConfigDto
//           while keeping the client-side surface tiny and composable.
// RO:INTERACTS — api/adminClient.ts (getUiConfig),
//                public/locales/<locale>.json bundles,
//                LanguageSwitcher component.
// RO:INVARIANTS — Locale is a BCP-47-ish string ("en-US", "es-ES").
//                 Translation bundles are flat key→string maps.

import React, {
  createContext,
  useContext,
  useEffect,
  useState,
  type ReactNode
} from 'react'
import { adminClient } from '../api/adminClient'

type I18nContextValue = {
  locale: string
  t: (key: string) => string
  setLocale: (locale: string) => void
}

const DEFAULT_LOCALE = 'en-US'

const I18nContext = createContext<I18nContextValue | undefined>(undefined)

type ProviderProps = {
  children: ReactNode
}

export const I18nProvider = ({ children }: ProviderProps) => {
  const [locale, setLocale] = useState(DEFAULT_LOCALE)
  const [messages, setMessages] = useState<Record<string, string>>({})

  // Load translation bundle whenever the locale changes.
  useEffect(() => {
    let cancelled = false

    fetch(`/locales/${locale}.json`)
      .then((rsp) => rsp.json())
      .then((data: Record<string, string>) => {
        if (cancelled) return
        setMessages(data)
      })
      .catch(() => {
        if (cancelled) return
        // If we fail to load the locale, fall back to an empty map and let keys show.
        setMessages({})
      })

    return () => {
      cancelled = true
    }
  }, [locale])

  // Fetch UI config once and adopt backend defaultLanguage as the starting locale.
  useEffect(() => {
    let cancelled = false

    adminClient
      .getUiConfig()
      .then((cfg) => {
        if (cancelled) return

        // Contract: UiConfigDto.defaultLanguage (camelCase)
        const backendLocale = cfg.defaultLanguage

        if (backendLocale && typeof backendLocale === 'string') {
          // Only override if we’re still on the hardcoded default.
          setLocale((current) =>
            current === DEFAULT_LOCALE ? backendLocale : current
          )
        }
      })
      .catch(() => {
        // Developer preview: if /api/ui-config fails, we stay on DEFAULT_LOCALE.
      })

    return () => {
      cancelled = true
    }
  }, [])

  const t = (key: string): string => {
    return messages[key] ?? key
  }

  const value: I18nContextValue = {
    locale,
    t,
    setLocale
  }

  // NOTE: This file is `.ts`, so we use React.createElement instead of JSX.
  return React.createElement(I18nContext.Provider, { value }, children)
}

export function useI18n(): I18nContextValue {
  const ctx = useContext(I18nContext)
  if (!ctx) {
    throw new Error('useI18n must be used within I18nProvider')
  }
  return ctx
}

```

### crates/svc-admin/ui/src/i18n/useI18n.ts
<a id="crates-svc-admin-ui-src-i18n-useI18n-ts"></a>

```ts
export { useI18n } from './index'

```

### crates/svc-admin/ui/src/main.tsx
<a id="crates-svc-admin-ui-src-main-tsx"></a>

```tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import App from './App'
import { ThemeProvider } from './theme/ThemeProvider'
import { I18nProvider } from './i18n'
import './styles.css'

const rootElement = document.getElementById('root') as HTMLElement

ReactDOM.createRoot(rootElement).render(
  <React.StrictMode>
    <ThemeProvider>
      <I18nProvider>
        <BrowserRouter>
          <App />
        </BrowserRouter>
      </I18nProvider>
    </ThemeProvider>
  </React.StrictMode>
)

```

### crates/svc-admin/ui/src/routes/LoginPage.tsx
<a id="crates-svc-admin-ui-src-routes-LoginPage-tsx"></a>

```tsx
import React from 'react'

export function LoginPage() {
  return (
    <div>
      <h1>Login</h1>
      <p>Passport / SSO login flow will appear here.</p>
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/NodeDatabaseDetailPage.tsx
<a id="crates-svc-admin-ui-src-routes-NodeDatabaseDetailPage-tsx"></a>

```tsx
// crates/svc-admin/ui/src/routes/NodeDatabaseDetailPage.tsx
//
// RO:WHAT — Node “Database Detail” page (curated DB + file inventory).
// RO:WHY  — Clicking a database from NodeStoragePage must land on a real page,
//           not the SPA 404, and show “God-tier” operator context: DB metadata,
//           permission posture, and a curated file list (safe, read-only).
// RO:HOW  — Calls getNodeStatus + getNodeDatabaseDetail when available; falls back
//           to deterministic mock facts when endpoints are missing (404/405/501).
// RO:INVARIANTS —
//   - Read-only only; no mutations.
//   - No raw filesystem browsing. Paths are aliases, and file list is curated
//     (or deterministic safe mock fallback).

import React, { useEffect, useMemo, useState } from 'react'
import { Link, useParams } from 'react-router-dom'

import { adminClient } from '../api/adminClient'
import { NodeStatusBadge } from '../components/nodes/NodeStatusBadge'
import { ErrorBanner } from '../components/shared/ErrorBanner'
import { LoadingSpinner } from '../components/shared/LoadingSpinner'
import { EmptyState } from '../components/shared/EmptyState'

import type { AdminStatusView, DatabaseDetailDto } from '../types/admin-api'

type FetchErr = Error & { status?: number }
type OverallHealth = 'healthy' | 'degraded' | 'down' | null

function isMissingEndpoint(err: unknown): boolean {
  const e = err as FetchErr
  const s = e && typeof e.status === 'number' ? e.status : undefined
  if (s === 404 || s === 405 || s === 501) return true

  const msg = e?.message ?? ''
  return (
    msg.includes(' 404 ') ||
    msg.includes(' 405 ') ||
    msg.includes(' 501 ') ||
    msg.toLowerCase().includes('not found') ||
    msg.toLowerCase().includes('not implemented')
  )
}

function deriveOverallHealth(
  planes: Array<{ health: 'healthy' | 'degraded' | 'down' }> | undefined,
): OverallHealth {
  if (!planes || planes.length === 0) return null
  if (planes.some((p) => p.health === 'down')) return 'down'
  if (planes.some((p) => p.health === 'degraded')) return 'degraded'
  return 'healthy'
}

function fmtBytes(bytes: number): string {
  if (!Number.isFinite(bytes) || bytes < 0) return 'n/a'
  const units = ['B', 'KiB', 'MiB', 'GiB', 'TiB'] as const
  let v = bytes
  let i = 0
  while (v >= 1024 && i < units.length - 1) {
    v /= 1024
    i++
  }
  const digits = i === 0 ? 0 : i <= 2 ? 1 : 2
  return `${v.toFixed(digits)} ${units[i]}`
}

function modeLooksWorldReadable(mode: string): boolean {
  const last = mode.trim().slice(-1)
  return last === '4' || last === '5' || last === '6' || last === '7'
}

function modeLooksWorldWritable(mode: string): boolean {
  const last = mode.trim().slice(-1)
  return last === '2' || last === '3' || last === '6' || last === '7'
}

function seedFromString(s: string): number {
  let acc = 0
  for (let i = 0; i < s.length; i++) acc = (acc * 31 + s.charCodeAt(i)) >>> 0
  return acc >>> 0
}

function mulberry32(seed: number) {
  let t = seed >>> 0
  return () => {
    t += 0x6d2b79f5
    let x = Math.imul(t ^ (t >>> 15), 1 | t)
    x ^= x + Math.imul(x ^ (x >>> 7), 61 | x)
    return ((x ^ (x >>> 14)) >>> 0) / 4294967296
  }
}

// ------------------------ deterministic mock fallback ------------------------

function mockDatabaseDetail(nodeId: string, name: string): DatabaseDetailDto {
  const seed = Array.from(nodeId).reduce((acc, c) => acc + c.charCodeAt(0), 0)
  const bump = (n: number) => n + (seed % 17) * 1024 * 1024

  const fallback = [
    {
      name: 'svc-index.sled',
      engine: 'sled',
      sizeBytes: bump(1_250_000_000),
      mode: '0750',
      owner: 'ron:ron',
      health: 'ok' as const,
      pathAlias: 'data/db',
      fileCount: 3_200,
      lastCompaction: '2025-12-12T19:19:00Z',
      approxKeys: 12_400_000,
    },
    {
      name: 'svc-storage.cas',
      engine: 'fs-cas',
      sizeBytes: bump(88_500_000_000),
      mode: '0700',
      owner: 'ron:ron',
      health: 'ok' as const,
      pathAlias: 'data/cas',
      fileCount: 128_400,
      lastCompaction: null,
      approxKeys: null,
    },
    {
      name: 'svc-overlay.sled',
      engine: 'sled',
      sizeBytes: bump(4_800_000_000),
      mode: '0755',
      owner: 'ron:ron',
      health: 'degraded' as const,
      pathAlias: 'data/db',
      fileCount: 3_200,
      lastCompaction: '2025-12-12T19:19:00Z',
      approxKeys: 12_400_000,
    },
  ]

  const hit = fallback.find((d) => d.name === name) ?? fallback[0]

  const warnings: string[] = []
  if (modeLooksWorldReadable(hit.mode)) {
    warnings.push('Permissions: database appears world-readable.')
  }
  if (modeLooksWorldWritable(hit.mode)) {
    warnings.push('Permissions: database appears world-writable (high risk).')
  }
  if (hit.health !== 'ok') {
    warnings.push(
      'Health: database reports degraded status (investigate I/O or compaction).',
    )
  }

  return {
    name: hit.name,
    engine: hit.engine,
    sizeBytes: hit.sizeBytes,
    mode: hit.mode,
    owner: hit.owner,
    health: hit.health,
    pathAlias: hit.pathAlias,
    fileCount: hit.fileCount,
    lastCompaction: hit.lastCompaction,
    approxKeys: hit.approxKeys,
    warnings,
  }
}

// ------------------------ curated file inventory (safe) ---------------------

type DbFileKind = 'manifest' | 'log' | 'sst' | 'lock' | 'segment' | 'chunk' | 'other'

type DbFileEntry = {
  path: string // alias path only (no absolute)
  kind: DbFileKind
  sizeBytes: number
  mode: string
  owner: string
  modified: string // ISO-ish for display
  worldReadable: boolean
  worldWritable: boolean
}

function isoFromSeed(rand: () => number): string {
  const year = 2025
  const month = 1 + Math.floor(rand() * 12)
  const day = 1 + Math.floor(rand() * 28)
  const hour = Math.floor(rand() * 24)
  const min = Math.floor(rand() * 60)
  const sec = Math.floor(rand() * 60)
  const mm = String(month).padStart(2, '0')
  const dd = String(day).padStart(2, '0')
  const hh = String(hour).padStart(2, '0')
  const mi = String(min).padStart(2, '0')
  const ss = String(sec).padStart(2, '0')
  return `${year}-${mm}-${dd}T${hh}:${mi}:${ss}Z`
}

function pickModeForFile(dbMode: string, rand: () => number): string {
  // Keep consistent with the DB’s posture but allow a little variety.
  // (Still safe: this is a curated *fact surface*, not a raw fs view.)
  const base = dbMode.trim()
  const roll = rand()
  if (roll < 0.08) return '0600'
  if (roll < 0.18) return '0640'
  if (roll < 0.30) return '0644'
  return base.length ? base : '0640'
}

function generateCuratedFiles(
  nodeId: string,
  detail: DatabaseDetailDto,
  limit: number,
): DbFileEntry[] {
  const seed = seedFromString(`${nodeId}::${detail.name}::${detail.engine}`)
  const rand = mulberry32(seed)

  const mk = (path: string, kind: DbFileKind, sizeBytes: number): DbFileEntry => {
    const mode = pickModeForFile(detail.mode, rand)
    return {
      path,
      kind,
      sizeBytes: Math.max(0, Math.floor(sizeBytes)),
      mode,
      owner: detail.owner,
      modified: isoFromSeed(rand),
      worldReadable: modeLooksWorldReadable(mode),
      worldWritable: modeLooksWorldWritable(mode),
    }
  }

  const out: DbFileEntry[] = []
  const base = detail.pathAlias || 'data/db'

  // Some well-known “always present” style entries.
  out.push(mk(`${base}/${detail.name}/MANIFEST`, 'manifest', 220_000 + rand() * 900_000))
  out.push(mk(`${base}/${detail.name}/LOCK`, 'lock', 4_096))
  out.push(mk(`${base}/${detail.name}/LOG`, 'log', 1_500_000 + rand() * 12_000_000))

  if (detail.engine === 'sled') {
    // Generate “sst-like” segments as a curated inventory sample.
    const count = Math.max(0, limit - out.length)
    for (let i = 0; i < count; i++) {
      const n = i + 1
      const hex = (seed + n * 2654435761) >>> 0
      const id = hex.toString(16).padStart(8, '0')
      const size = 2_000_000 + rand() * 28_000_000
      out.push(mk(`${base}/${detail.name}/tables/${id}.sst`, 'sst', size))
    }
  } else if (detail.engine === 'fs-cas') {
    // CAS “chunks” (alias paths only).
    const count = Math.max(0, limit - out.length)
    for (let i = 0; i < count; i++) {
      const a = Math.floor(rand() * 256)
        .toString(16)
        .padStart(2, '0')
      const b = Math.floor(rand() * 256)
        .toString(16)
        .padStart(2, '0')
      const c = Math.floor(rand() * 256)
        .toString(16)
        .padStart(2, '0')
      const tail = Math.floor(rand() * 0xffffffff)
        .toString(16)
        .padStart(8, '0')
      const size = 64_000 + rand() * 6_000_000
      out.push(mk(`${base}/b3/${a}/${b}/${c}/${tail}.chunk`, 'chunk', size))
    }
  } else {
    const count = Math.max(0, limit - out.length)
    for (let i = 0; i < count; i++) {
      const size = 80_000 + rand() * 4_500_000
      out.push(mk(`${base}/${detail.name}/seg/${i.toString().padStart(6, '0')}.dat`, 'segment', size))
    }
  }

  return out.slice(0, limit)
}

function DbIcon() {
  return (
    <svg
      width="18"
      height="18"
      viewBox="0 0 24 24"
      aria-hidden="true"
      style={{ opacity: 0.9 }}
    >
      <path
        d="M12 2c4.97 0 9 1.79 9 4s-4.03 4-9 4-9-1.79-9-4 4.03-4 9-4Z"
        fill="var(--svc-admin-color-accent, #3b82f6)"
        opacity="0.35"
      />
      <path
        d="M3 6v6c0 2.21 4.03 4 9 4s9-1.79 9-4V6"
        fill="none"
        stroke="var(--svc-admin-color-accent, #3b82f6)"
        strokeWidth="1.6"
        opacity="0.95"
      />
      <path
        d="M3 12v6c0 2.21 4.03 4 9 4s9-1.79 9-4v-6"
        fill="none"
        stroke="var(--svc-admin-color-accent, #3b82f6)"
        strokeWidth="1.6"
        opacity="0.75"
      />
      <path
        d="M3 6c0 2.21 4.03 4 9 4s9-1.79 9-4"
        fill="none"
        stroke="var(--svc-admin-color-accent, #3b82f6)"
        strokeWidth="1.6"
        opacity="0.95"
      />
    </svg>
  )
}

// ------------------------------- page ---------------------------------------

export function NodeDatabaseDetailPage() {
  const params = useParams<{ id: string; name: string }>()
  const nodeId = params.id ?? ''
  const dbName = params.name ?? ''

  const [status, setStatus] = useState<AdminStatusView | null>(null)
  const [statusLoading, setStatusLoading] = useState(true)
  const [statusError, setStatusError] = useState<string | null>(null)

  const [detail, setDetail] = useState<DatabaseDetailDto | null>(null)
  const [detailLoading, setDetailLoading] = useState(true)
  const [detailError, setDetailError] = useState<string | null>(null)
  const [source, setSource] = useState<'live' | 'mock'>('mock')

  const [filter, setFilter] = useState('')
  const FILES_LIMIT = 60

  // Status (for title + health badge)
  useEffect(() => {
    if (!nodeId) {
      setStatus(null)
      setStatusLoading(false)
      setStatusError('Missing node id in route.')
      return
    }

    let cancelled = false
    setStatusLoading(true)
    setStatusError(null)

    ;(async () => {
      try {
        const data = await adminClient.getNodeStatus(nodeId)
        if (cancelled) return
        setStatus(data)
      } catch (err) {
        if (cancelled) return
        const msg = err instanceof Error ? err.message : 'Failed to load node status.'
        setStatusError(msg)
      } finally {
        if (!cancelled) setStatusLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [nodeId])

  // Database detail (optional endpoint; safe mock fallback)
  useEffect(() => {
    if (!nodeId || !dbName) {
      setDetail(null)
      setDetailLoading(false)
      setDetailError(!nodeId ? 'Missing node id in route.' : 'Missing database name in route.')
      return
    }

    let cancelled = false
    setDetailLoading(true)
    setDetailError(null)

    ;(async () => {
      try {
        const live = await adminClient.getNodeDatabaseDetail(nodeId, dbName)
        if (cancelled) return
        setDetail(live)
        setSource('live')
      } catch (err) {
        if (cancelled) return

        if (isMissingEndpoint(err)) {
          setDetail(mockDatabaseDetail(nodeId, dbName))
          setSource('mock')
        } else {
          const msg = err instanceof Error ? err.message : 'Failed to load database detail.'
          setDetailError(msg)
          setDetail(mockDatabaseDetail(nodeId, dbName))
          setSource('mock')
        }
      } finally {
        if (!cancelled) setDetailLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [nodeId, dbName])

  // Derived
  const overallHealth: OverallHealth = useMemo(
    () => deriveOverallHealth(status?.planes),
    [status?.planes],
  )

  const nodeTitle = status?.display_name ?? status?.id ?? nodeId

  const effectiveDetail = useMemo(() => {
    if (!nodeId || !dbName) return null
    return detail ?? mockDatabaseDetail(nodeId, dbName)
  }, [detail, nodeId, dbName])

  const filesAll = useMemo(() => {
    if (!nodeId || !effectiveDetail) return []
    return generateCuratedFiles(nodeId, effectiveDetail, FILES_LIMIT)
  }, [nodeId, effectiveDetail])

  const filesFiltered = useMemo(() => {
    const q = filter.trim().toLowerCase()
    if (!q) return filesAll
    return filesAll.filter((f) => f.path.toLowerCase().includes(q))
  }, [filesAll, filter])

  if (!nodeId || !dbName) {
    return (
      <div className="svc-admin-page">
        <div className="svc-admin-section">
          <ErrorBanner message="Missing node id or database name in route." />
          <div style={{ marginTop: '0.75rem' }}>
            <Link to="/" className="svc-admin-link-muted">
              ← Nodes
            </Link>
          </div>
        </div>
      </div>
    )
  }

  if (statusLoading && detailLoading) {
    return (
      <div className="svc-admin-page">
        <div className="svc-admin-section">
          <LoadingSpinner />
        </div>
      </div>
    )
  }

  if (statusError) {
    return (
      <div className="svc-admin-page">
        <div className="svc-admin-section">
          <ErrorBanner message={statusError} />
          <div style={{ marginTop: '0.75rem' }}>
            <Link to="/" className="svc-admin-link-muted">
              ← Nodes
            </Link>
          </div>
        </div>
      </div>
    )
  }

  if (!effectiveDetail) {
    return (
      <div className="svc-admin-page">
        <div className="svc-admin-section">
          <ErrorBanner message="Database detail is unavailable." />
          <div style={{ marginTop: '0.75rem' }}>
            <Link to={`/nodes/${encodeURIComponent(nodeId)}/storage`} className="svc-admin-link-muted">
              ← Storage
            </Link>
          </div>
        </div>
      </div>
    )
  }

  const worldReadable = modeLooksWorldReadable(effectiveDetail.mode)
  const worldWritable = modeLooksWorldWritable(effectiveDetail.mode)

  return (
    <div className="svc-admin-page svc-admin-page-node-db-detail">
      <header className="svc-admin-page-header svc-admin-page-header-node">
        <div>
          <div style={{ marginBottom: 8 }}>
            <Link to={`/nodes/${encodeURIComponent(nodeId)}/storage`} className="svc-admin-link-muted">
              ← Back
            </Link>
          </div>

          <h1 style={{ display: 'flex', alignItems: 'center', gap: 10 }}>
            <DbIcon />
            <span>{nodeTitle}</span>
          </h1>

          <p className="svc-admin-page-subtitle">
            Database detail (read-only).{' '}
            <span style={{ opacity: 0.85 }}>
              Source: {source === 'live' ? 'Live' : 'Mock'}
            </span>
          </p>

          <p className="svc-admin-node-meta">
            <span className="svc-admin-node-id">
              <strong>DB:</strong> {effectiveDetail.name}
            </span>{' '}
            <span className="svc-admin-node-profile">
              <strong>Engine:</strong> {effectiveDetail.engine}
            </span>
          </p>
        </div>

        <div className="svc-admin-page-header-actions">
          {overallHealth && <NodeStatusBadge status={overallHealth} />}
        </div>
      </header>

      {detailError && (
        <section className="svc-admin-section" style={{ marginBottom: '1rem' }}>
          <ErrorBanner message="Some database endpoints failed; falling back to safe mock data where needed." />
        </section>
      )}

      {(worldReadable || worldWritable) && (
        <section className="svc-admin-section" style={{ marginBottom: '1rem' }}>
          <ErrorBanner
            message={
              worldWritable
                ? 'Permission warning: database appears world-writable (high risk).'
                : 'Permission warning: database appears world-readable.'
            }
          />
        </section>
      )}

      {effectiveDetail.warnings.length > 0 && (
        <section className="svc-admin-section" style={{ marginBottom: '1rem' }}>
          <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
            <div style={{ fontWeight: 800, marginBottom: 6 }}>Warnings</div>
            <ul style={{ margin: 0, paddingLeft: '1.1rem' }}>
              {effectiveDetail.warnings.map((w) => (
                <li key={w} style={{ marginBottom: '0.35rem' }}>
                  {w}
                </li>
              ))}
            </ul>
          </div>
        </section>
      )}

      <div className="svc-admin-node-detail-layout">
        {/* MAIN */}
        <div className="svc-admin-node-detail-main">
          <section className="svc-admin-section" style={{ marginBottom: '1rem' }}>
            <h2 style={{ marginBottom: 10 }}>Database summary</h2>

            <div
              style={{
                display: 'grid',
                gridTemplateColumns: 'repeat(2, minmax(0, 1fr))',
                gap: '0.75rem',
              }}
            >
              <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>Size</div>
                <div style={{ fontSize: '1.1rem', fontWeight: 750, marginTop: '0.2rem' }}>
                  {fmtBytes(effectiveDetail.sizeBytes)}
                </div>
                <div style={{ fontSize: '0.9rem', opacity: 0.8 }}>
                  Files: <strong>{effectiveDetail.fileCount.toLocaleString()}</strong>
                </div>
              </div>

              <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>Permissions</div>
                <div style={{ fontSize: '1.1rem', fontWeight: 750, marginTop: '0.2rem' }}>
                  {effectiveDetail.mode}
                </div>
                <div style={{ fontSize: '0.9rem', opacity: 0.8 }}>
                  Owner: <strong>{effectiveDetail.owner}</strong>
                </div>
              </div>

              <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>Path alias</div>
                <div style={{ fontSize: '1.05rem', fontWeight: 700, marginTop: '0.2rem' }}>
                  {effectiveDetail.pathAlias}
                </div>
                <div style={{ fontSize: '0.9rem', opacity: 0.8 }}>
                  Health:{' '}
                  <strong style={{ textTransform: 'capitalize' }}>
                    {effectiveDetail.health}
                  </strong>
                </div>
              </div>

              <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>Sled facts</div>
                <div style={{ fontSize: '0.95rem', marginTop: '0.2rem' }}>
                  Keys:{' '}
                  <strong>
                    {effectiveDetail.approxKeys == null
                      ? 'n/a'
                      : effectiveDetail.approxKeys.toLocaleString()}
                  </strong>
                </div>
                <div style={{ fontSize: '0.95rem' }}>
                  Compaction:{' '}
                  <strong>{effectiveDetail.lastCompaction ?? 'n/a'}</strong>
                </div>
              </div>
            </div>

            {detailLoading && (
              <div style={{ marginTop: '0.75rem' }}>
                <LoadingSpinner />
              </div>
            )}
          </section>

          <section className="svc-admin-section">
            <div
              style={{
                display: 'flex',
                alignItems: 'baseline',
                justifyContent: 'space-between',
                gap: '1rem',
              }}
            >
              <h2 style={{ marginBottom: 0 }}>Curated file inventory</h2>
              <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>
                Showing {filesFiltered.length} of {Math.min(FILES_LIMIT, effectiveDetail.fileCount).toLocaleString()}
                {effectiveDetail.fileCount > FILES_LIMIT ? ' (sample)' : ''}
              </div>
            </div>

            <div style={{ marginTop: '0.75rem', display: 'flex', gap: '0.75rem', flexWrap: 'wrap' }}>
              <div className="svc-admin-card" style={{ padding: '0.6rem 0.75rem', flex: '1 1 380px' }}>
                <div style={{ fontSize: '0.85rem', opacity: 0.8, marginBottom: 6 }}>Filter (path contains)</div>
                <input
                  value={filter}
                  onChange={(e) => setFilter(e.target.value)}
                  placeholder="e.g. MANIFEST, tables/, .sst, b3/"
                  style={{
                    width: '100%',
                    padding: '10px 12px',
                    borderRadius: 12,
                    border: '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.12))',
                    background: 'rgba(255,255,255,0.03)',
                    color: 'var(--svc-admin-color-text)',
                    outline: 'none',
                  }}
                />
              </div>

              <div className="svc-admin-card" style={{ padding: '0.6rem 0.75rem', flex: '0 0 auto', minWidth: 220 }}>
                <div style={{ fontSize: '0.85rem', opacity: 0.8, marginBottom: 6 }}>Safety note</div>
                <div style={{ fontSize: '0.9rem', opacity: 0.9 }}>
                  Aliases only. No raw paths. Read-only curated facts (or safe deterministic mock).
                </div>
              </div>
            </div>

            {filesAll.length === 0 ? (
              <div style={{ marginTop: '0.75rem' }}>
                <EmptyState message="No curated file entries available." />
              </div>
            ) : (
              <div
                className="svc-admin-card"
                style={{ padding: 0, overflow: 'hidden', marginTop: '0.75rem' }}
              >
                <table className="svc-admin-plane-table" style={{ marginTop: 0 }}>
                  <thead>
                    <tr>
                      <th style={{ width: '54%' }}>Path (alias)</th>
                      <th>Kind</th>
                      <th>Size</th>
                      <th>Owner</th>
                      <th>Mode</th>
                      <th>Modified</th>
                    </tr>
                  </thead>
                  <tbody>
                    {filesFiltered.map((f) => {
                      const warn = f.worldWritable || f.worldReadable
                      return (
                        <tr key={f.path} title={warn ? 'Permission posture flagged (world readable/writable).' : ''}>
                          <td style={{ fontWeight: 650, overflowWrap: 'anywhere' }}>{f.path}</td>
                          <td style={{ textTransform: 'uppercase', opacity: 0.9 }}>{f.kind}</td>
                          <td>{fmtBytes(f.sizeBytes)}</td>
                          <td>{f.owner}</td>
                          <td style={{ fontWeight: 650 }}>
                            {f.mode}
                            {warn && (
                              <span style={{ marginLeft: '0.5rem', opacity: 0.75 }}>
                                {f.worldWritable ? '⚠ perms' : '⚠ read'}
                              </span>
                            )}
                          </td>
                          <td style={{ opacity: 0.9 }}>{f.modified}</td>
                        </tr>
                      )
                    })}
                  </tbody>
                </table>
              </div>
            )}
          </section>
        </div>

        {/* SIDEBAR */}
        <aside className="svc-admin-node-detail-sidebar">
          <div className="svc-admin-node-detail-sidebar-card">
            <div className="svc-admin-node-detail-sidebar-title">Navigation</div>
            <div className="svc-admin-node-detail-sidebar-caption">
              Jump back to node or storage inventory.
            </div>

            <div style={{ marginTop: '0.75rem', display: 'grid', gap: '0.5rem' }}>
              <Link to={`/nodes/${encodeURIComponent(nodeId)}`} className="svc-admin-link-muted">
                ← Node overview
              </Link>
              <Link to={`/nodes/${encodeURIComponent(nodeId)}/storage`} className="svc-admin-link-muted">
                ← Storage & databases
              </Link>
              <Link to="/" className="svc-admin-link-muted">
                ← Nodes
              </Link>
            </div>

            <div style={{ marginTop: '0.9rem', fontSize: '0.9rem', opacity: 0.85 }}>
              Next step: wire macronode to expose a <strong>curated</strong> file inventory DTO
              (not a filesystem browser) so this list becomes live.
            </div>
          </div>
        </aside>
      </div>
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/NodeDetailPage.tsx
<a id="crates-svc-admin-ui-src-routes-NodeDetailPage-tsx"></a>

```tsx
// crates/svc-admin/ui/src/routes/NodeDetailPage.tsx
//
// WHAT:
//   Deep-dive Node detail screen. Two-column layout:
//   - Left: planes table, facet metrics, actions, debug.
//   - Right: NodeDetailSidebar with "Data & storage" + "Playground" stubs.
// WHY:
//   Keep this route thin + compositional; heavy logic lives in a hook and
//   route-local helpers to improve maintainability and reduce 1k+ LOC files.
// INTERACTS:
//   - routes/node-detail/useNodeDetail.ts        (polling/actions/debug)
//   - routes/node-detail/*                       (pure helpers + gauges)
//   - components/nodes/*                         (tables/badges/sidebar)
// INVARIANTS:
//   - No conditional hooks; polling uses stable effects.
//   - UI supports safe mock fallback patterns.
// SECURITY:
//   - Mutations gated by server-side config + roles (same as before).

import React, { useEffect, useMemo, useState } from 'react'
import { useParams, Link } from 'react-router-dom'

import { PlaneStatusTable } from '../components/nodes/PlaneStatusTable'
import { NodeStatusBadge } from '../components/nodes/NodeStatusBadge'
import { FacetMetricsPanel } from '../components/metrics/FacetMetricsPanel'
import { LoadingSpinner } from '../components/shared/LoadingSpinner'
import { ErrorBanner } from '../components/shared/ErrorBanner'
import { NodeDetailSidebar } from '../components/nodes/NodeDetailSidebar'
import type { MetricsHealth } from '../components/nodes/NodeCard'

import { adminClient } from '../api/adminClient'
import type { StorageSummaryDto, SystemSummaryDto } from '../types/admin-api'

import { useNodeDetail } from './node-detail/useNodeDetail'
import { deriveOverallHealth } from './node-detail/health'
import { classifyMetricsHealth, renderMetricsBadge } from './node-detail/metricsHealth'
import {
  mockNodeUtilization,
  seedFromString,
  MiniMetricCard,
  SpeedometerGauge,
  ThermometerGauge,
  StorageWaffleGauge,
  BandwidthBarsGauge,
} from './node-detail/utilization'
import { computePlaneSummary, Pill } from './node-detail/planeSummary'

type FetchErr = Error & { status?: number }

function isMissingEndpoint(err: unknown): boolean {
  const e = err as FetchErr
  const s = e && typeof e.status === 'number' ? e.status : undefined
  if (s === 404 || s === 405 || s === 501) return true

  const msg = e?.message ?? ''
  return (
    msg.includes(' 404 ') ||
    msg.includes(' 405 ') ||
    msg.includes(' 501 ') ||
    msg.toLowerCase().includes('not found') ||
    msg.toLowerCase().includes('not implemented')
  )
}

function clampPct(p: number): number {
  if (!Number.isFinite(p)) return 0
  return Math.max(0, Math.min(100, p))
}

function computeRamPct(sys: SystemSummaryDto | null): number | null {
  if (!sys) return null
  const total = sys.ramTotalBytes
  const used = sys.ramUsedBytes
  if (!Number.isFinite(total) || total <= 0) return null
  const pct = (Math.max(0, used) / total) * 100
  return clampPct(pct)
}

function computeStoragePct(st: StorageSummaryDto | null): number | null {
  if (!st) return null
  const total = st.totalBytes
  const used = st.usedBytes
  if (!Number.isFinite(total) || total <= 0) return null
  const pct = (Math.max(0, used) / total) * 100
  return clampPct(pct)
}

function computeBandwidthPct(sys: SystemSummaryDto | null): number | null {
  if (!sys) return null
  const rx = sys.netRxBps
  const tx = sys.netTxBps
  const rxB = typeof rx === 'number' && Number.isFinite(rx) ? Math.max(0, rx) : 0
  const txB = typeof tx === 'number' && Number.isFinite(tx) ? Math.max(0, tx) : 0

  // If both are missing/null, treat as no live bandwidth.
  if (!rx && !tx) return null

  // Soft utilization: assume a 1 Gbps link until we expose link speed.
  const usedBits = (rxB + txB) * 8
  const assumedLinkBits = 1e9
  const pct = (usedBits / assumedLinkBits) * 100
  return clampPct(pct)
}

function useLiveUtilization(nodeId: string) {
  const [system, setSystem] = useState<SystemSummaryDto | null>(null)
  const [storage, setStorage] = useState<StorageSummaryDto | null>(null)

  useEffect(() => {
    if (!nodeId) {
      setSystem(null)
      setStorage(null)
      return
    }

    let cancelled = false

    ;(async () => {
      // System summary is optional; missing endpoint -> ignore
      try {
        const s = await adminClient.getNodeSystemSummary(nodeId)
        if (!cancelled) setSystem(s)
      } catch (err) {
        if (!cancelled) {
          if (!isMissingEndpoint(err)) {
            // keep quiet for now; we can surface later if desired
            void err
          }
          setSystem(null)
        }
      }

      // Storage summary is also optional in general (but you already have it)
      try {
        const st = await adminClient.getNodeStorageSummary(nodeId)
        if (!cancelled) setStorage(st)
      } catch (err) {
        if (!cancelled) {
          if (!isMissingEndpoint(err)) {
            void err
          }
          setStorage(null)
        }
      }
    })()

    return () => {
      cancelled = true
    }
  }, [nodeId])

  const mock = useMemo(() => mockNodeUtilization(nodeId), [nodeId])

  const cpuPct = useMemo(() => {
    const live = system?.cpuPercent
    if (typeof live === 'number' && Number.isFinite(live)) return clampPct(live)
    return mock.cpuPct
  }, [system, mock])

  const ramPct = useMemo(() => {
    const live = computeRamPct(system)
    if (live != null) return live
    return mock.ramPct
  }, [system, mock])

  const storagePct = useMemo(() => {
    const live = computeStoragePct(storage)
    if (live != null) return live
    return mock.storagePct
  }, [storage, mock])

  const bandwidthPct = useMemo(() => {
    const live = computeBandwidthPct(system)
    if (live != null) return live
    return mock.bandwidthPct
  }, [system, mock])

  return { cpuPct, ramPct, storagePct, bandwidthPct }
}

export function NodeDetailPage() {
  const params = useParams<{ id: string }>()
  const nodeId = params.id ?? ''

  const {
    status,
    statusLoading,
    statusError,

    facets,
    facetsLoading,
    facetsError,
    facetHistory,

    identityLoading,
    identityError,

    canMutate,
    actionInFlight,
    actionMessage,
    actionError,
    runAction,

    devDebugEnabled,
    debugPlane,
    setDebugPlane,
    debugInFlight,
    debugMessage,
    debugError,
    runDebugCrash,
  } = useNodeDetail(nodeId)

  const planes: any[] = useMemo(
    () => ((status as any)?.planes as any[]) ?? [],
    [status],
  )

  const overallHealth = useMemo(() => {
    if (!status) return null
    return deriveOverallHealth(planes)
  }, [status, planes])

  const metricsHealth: MetricsHealth | null = useMemo(() => {
    if (facetsLoading) return null
    return classifyMetricsHealth(facets, facetsError)
  }, [facets, facetsError, facetsLoading])

  const minSampleAgeSecs: number | null = useMemo(() => {
    if (!facets || facets.length === 0) return null
    const ages = facets
      .map((f) => f.last_sample_age_secs)
      .filter((v): v is number => v !== null && Number.isFinite(v))
    if (ages.length === 0) return null
    return Math.min(...ages)
  }, [facets])

  const pageTitle =
    (status as any)?.display_name ??
    (status as any)?.displayName ??
    status?.id ??
    nodeId

  const utilSeed = useMemo(() => seedFromString(nodeId || 'node'), [nodeId])

  // ✅ Live utilization (CPU/RAM/NET + storage when available) with mock fallback
  const { cpuPct, ramPct, storagePct, bandwidthPct } = useLiveUtilization(nodeId)

  const planeSummary = useMemo(() => computePlaneSummary(planes), [planes])

  if (statusLoading && facetsLoading && identityLoading) {
    return (
      <div className="svc-admin-page svc-admin-page-node-detail">
        <div className="svc-admin-section">
          <LoadingSpinner />
        </div>
      </div>
    )
  }

  if (statusError || identityError) {
    return (
      <div className="svc-admin-page svc-admin-page-node-detail">
        <div className="svc-admin-section">
          <ErrorBanner
            message={
              statusError ??
              identityError ??
              'Something went wrong while loading the node.'
            }
          />
        </div>
      </div>
    )
  }

  if (!status) {
    return (
      <div className="svc-admin-page svc-admin-page-node-detail">
        <div className="svc-admin-section">
          <ErrorBanner message="Node status is unavailable." />
        </div>
      </div>
    )
  }

  return (
    <div className="svc-admin-page svc-admin-page-node-detail">
      <header className="svc-admin-page-header svc-admin-page-header-node">
        <div>
          <div style={{ marginBottom: 8 }}>
            <Link to="/" className="svc-admin-link-muted">
              ← Back
            </Link>
          </div>

          <h1>{pageTitle}</h1>
          <p className="svc-admin-page-subtitle">
            Detailed status, planes, and metrics for this node.
          </p>
          <p className="svc-admin-node-meta">
            <span className="svc-admin-node-id">
              <strong>ID:</strong> {status.id}
            </span>{' '}
            {(status as any).profile && (
              <span className="svc-admin-node-profile">
                <strong>Profile:</strong> {(status as any).profile}
              </span>
            )}{' '}
            {(status as any).version && (
              <span className="svc-admin-node-version">
                <strong>Version:</strong> {(status as any).version}
              </span>
            )}
          </p>
        </div>

        <div className="svc-admin-page-header-actions">
          {metricsHealth && renderMetricsBadge(metricsHealth)}
          {overallHealth && <NodeStatusBadge status={overallHealth} />}
        </div>
      </header>

      {metricsHealth === 'stale' && (
        <section className="svc-admin-section svc-admin-node-metrics-banner-wrap">
          <ErrorBanner
            message={
              minSampleAgeSecs != null
                ? `Metrics may be stale (last sample ${minSampleAgeSecs.toFixed(
                    1,
                  )} s ago). Check node /metrics endpoint.`
                : 'Metrics may be stale. Check node /metrics endpoint.'
            }
          />
        </section>
      )}

      {metricsHealth === 'unreachable' && (
        <section className="svc-admin-section svc-admin-node-metrics-banner-wrap">
          <ErrorBanner message="Metrics unreachable. svc-admin cannot reach this node’s /metrics endpoint. Check the node, network path, and /metrics exposure." />
        </section>
      )}

      <div className="svc-admin-node-detail-layout">
        <div className="svc-admin-node-detail-main">
          <section className="svc-admin-section svc-admin-section-node-overview">
            <div
              style={{
                display: 'flex',
                alignItems: 'baseline',
                justifyContent: 'space-between',
                gap: 12,
                marginBottom: 10,
              }}
            >
              <h2 style={{ margin: 0 }}>Planes</h2>

              <div style={{ display: 'flex', gap: 10, flexWrap: 'wrap' }}>
                <Pill
                  tone={planeSummary.ready === planeSummary.total ? 'ok' : 'warn'}
                >
                  {planeSummary.ready}/{planeSummary.total} Ready
                </Pill>
                {planeSummary.degraded > 0 && (
                  <Pill tone="warn">{planeSummary.degraded} Degraded</Pill>
                )}
                {planeSummary.down > 0 && <Pill tone="bad">{planeSummary.down} Down</Pill>}
                <Pill tone="muted">{planeSummary.restarts} Restarts</Pill>
              </div>
            </div>

            <div
              style={{
                borderRadius: 18,
                padding: 14,
                border:
                  '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.12))',
                background:
                  'radial-gradient(1200px 500px at 20% 0%, rgba(99,102,241,0.10), transparent 55%), linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.012))',
                boxShadow: '0 14px 38px rgba(0,0,0,0.22)',
                position: 'relative',
                overflow: 'hidden',
              }}
            >
              <div
                aria-hidden="true"
                style={{
                  position: 'absolute',
                  left: 0,
                  top: 0,
                  bottom: 0,
                  width: 4,
                  background:
                    overallHealth === 'down'
                      ? 'rgba(244,63,94,0.75)'
                      : overallHealth === 'degraded'
                        ? 'rgba(251,146,60,0.65)'
                        : 'rgba(16,185,129,0.55)',
                  boxShadow: '0 0 18px rgba(0,0,0,0.25)',
                }}
              />

              <div
                style={{
                  display: 'flex',
                  alignItems: 'flex-start',
                  gap: '1rem',
                  flexWrap: 'wrap',
                }}
              >
                <div style={{ flex: '0 0 340px', maxWidth: 440, minWidth: 300 }}>
                  <PlaneStatusTable planes={planes} />
                </div>

                <div style={{ flex: '1 1 520px', minWidth: 520 }}>
                  <div
                    style={{
                      display: 'grid',
                      gridTemplateColumns: 'repeat(2, minmax(170px, 1fr))',
                      gap: '1rem',
                      alignItems: 'stretch',
                    }}
                  >
                    <MiniMetricCard title="CPU">
                      <SpeedometerGauge pct={cpuPct} compact />
                    </MiniMetricCard>

                    <MiniMetricCard title="RAM">
                      <ThermometerGauge pct={ramPct} compact />
                    </MiniMetricCard>

                    <MiniMetricCard title="Storage">
                      <StorageWaffleGauge pct={storagePct} compact />
                    </MiniMetricCard>

                    <MiniMetricCard title="Bandwidth">
                      <BandwidthBarsGauge pct={bandwidthPct} seed={utilSeed} compact />
                    </MiniMetricCard>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section className="svc-admin-section svc-admin-section-node-metrics">
            <h2>Facet Metrics</h2>
            <FacetMetricsPanel
              facets={facets}
              loading={facetsLoading}
              error={facetsError}
              historyByFacet={facetHistory}
            />
          </section>

          <section className="svc-admin-section svc-admin-section-node-actions">
            <h2>Actions</h2>
            <p className="svc-admin-node-actions-caption">
              Node actions are gated by server-side config and roles. In dev,
              svc-admin defaults to read-only mode.
            </p>

            <div className="svc-admin-node-actions-grid">
              <button
                type="button"
                className="svc-admin-node-action-button"
                disabled={!canMutate || actionInFlight !== null}
                onClick={() => runAction('reload')}
              >
                {actionInFlight === 'reload' ? 'Reloading…' : 'Reload node configuration'}
              </button>

              <button
                type="button"
                className="svc-admin-node-action-button svc-admin-node-action-button-danger"
                disabled={!canMutate || actionInFlight !== null}
                onClick={() => runAction('shutdown')}
              >
                {actionInFlight === 'shutdown' ? 'Shutting down…' : 'Shutdown node'}
              </button>
            </div>

            {actionMessage && <p className="svc-admin-node-actions-message">{actionMessage}</p>}
            {actionError && <ErrorBanner message={actionError} />}
          </section>

          {devDebugEnabled && planes.length > 0 && (
            <section className="svc-admin-section svc-admin-section-node-debug">
              <h2>Debug controls</h2>
              <p className="svc-admin-node-actions-caption">
                Dev-only synthetic crash tool. This emits a crash event for the selected plane
                without killing a real worker. Do not expose in production.
              </p>

              <div className="svc-admin-node-debug-controls">
                <label>
                  Plane to crash:{' '}
                  <select value={debugPlane} onChange={(e) => setDebugPlane(e.target.value)}>
                    {planes.map((plane) => (
                      <option key={plane.name} value={plane.name}>
                        {plane.name}
                      </option>
                    ))}
                  </select>
                </label>

                <button
                  type="button"
                  className="svc-admin-node-action-button svc-admin-node-action-button-danger"
                  disabled={debugInFlight}
                  onClick={runDebugCrash}
                >
                  {debugInFlight ? 'Triggering crash…' : 'Trigger synthetic crash'}
                </button>
              </div>

              {debugMessage && <p className="svc-admin-node-actions-message">{debugMessage}</p>}
              {debugError && <ErrorBanner message={debugError} />}
            </section>
          )}
        </div>

        <aside className="svc-admin-node-detail-sidebar">
          <NodeDetailSidebar
            status={status}
            planes={planes}
            metricsHealth={metricsHealth}
            minSampleAgeSecs={minSampleAgeSecs}
            loading={statusLoading || facetsLoading}
          />
        </aside>
      </div>
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/NodeListPage.tsx
<a id="crates-svc-admin-ui-src-routes-NodeListPage-tsx"></a>

```tsx
// crates/svc-admin/ui/src/routes/NodeListPage.tsx
//
// RO:WHAT — Nodes overview page (multi-node “NOC” view).
// RO:WHY  — Show all registered nodes plus quick health, restart, and
//           metrics freshness summaries.
// RO:INTERACTS —
//   - adminClient.getNodes()           → NodeSummary list
//   - adminClient.getNodeStatus(id)    → AdminStatusView per node
//   - adminClient.getNodeFacetMetrics  → FacetMetricsSummary per node
//   - NodeCard                         → presentational card (selection-aware)
//   - NodePreviewPanel                 → right-hand preview pane
//   - LoadingSpinner / ErrorBanner / EmptyState
//   - i18n/useI18n for copy
//
// RO:UX — Add a top “freshness strip” so operators can tell at a glance whether
//        the dashboard is live, stale, or unreachable before deep-diving.
//
// NOTE: This is intentionally lightweight: it only depends on metricsById health
//       which is already computed by the polling hooks.

import React, { useMemo } from 'react'
import {
  NodeCard,
  type NodeStatusSummary,
  type MetricsHealth,
} from '../components/nodes/NodeCard'
import { NodePreviewPanel } from '../components/nodes/NodePreviewPanel'
import { LoadingSpinner } from '../components/shared/LoadingSpinner'
import { ErrorBanner } from '../components/shared/ErrorBanner'
import { EmptyState } from '../components/shared/EmptyState'
import { useI18n } from '../i18n/useI18n'

import { useNodeListData } from './node-list/useNodeListData'
import { buildSummary } from './node-list/helpers'

function MetricsPill({
  label,
  count,
  tone,
}: {
  label: string
  count: number
  tone: 'ok' | 'warn' | 'bad' | 'muted'
}) {
  const style: React.CSSProperties = {
    display: 'inline-flex',
    alignItems: 'center',
    gap: 8,
    padding: '6px 10px',
    borderRadius: 999,
    border: '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.14))',
    background:
      tone === 'ok'
        ? 'rgba(16,185,129,0.14)'
        : tone === 'warn'
          ? 'rgba(251,146,60,0.14)'
          : tone === 'bad'
            ? 'rgba(244,63,94,0.14)'
            : 'rgba(255,255,255,0.06)',
    color:
      tone === 'ok'
        ? 'rgba(167,243,208,0.95)'
        : tone === 'warn'
          ? 'rgba(254,215,170,0.95)'
          : tone === 'bad'
            ? 'rgba(253,164,175,0.95)'
            : 'rgba(226,232,240,0.92)',
    fontSize: 13,
    lineHeight: 1.2,
    whiteSpace: 'nowrap',
  }

  const bubbleStyle: React.CSSProperties = {
    display: 'inline-flex',
    alignItems: 'center',
    justifyContent: 'center',
    minWidth: 22,
    height: 18,
    padding: '0 6px',
    borderRadius: 999,
    border: '1px solid rgba(255,255,255,0.14)',
    background: 'rgba(0,0,0,0.18)',
    fontVariantNumeric: 'tabular-nums',
  }

  return (
    <span style={style}>
      <span style={bubbleStyle}>{count}</span>
      {label}
    </span>
  )
}

export function NodeListPage() {
  const { t } = useI18n()

  const {
    nodes,
    loading,
    error,

    statusById,
    metricsById,

    effectiveSelectedId,
    selectedNode,
    selectedStatusState,
    selectedMetricsState,
    setSelectedNodeId,
  } = useNodeListData()

  const selectedSummary: NodeStatusSummary | undefined = buildSummary(
    selectedStatusState?.status ?? null,
  )

  const selectedPlanes = selectedStatusState?.status?.planes ?? null

  const metricsCounts = useMemo(() => {
    let fresh = 0
    let stale = 0
    let unreachable = 0
    let unknown = 0

    for (const n of nodes) {
      const h = (metricsById[n.id]?.health ?? null) as MetricsHealth | null
      if (h === 'fresh') fresh += 1
      else if (h === 'stale') stale += 1
      else if (h === 'unreachable') unreachable += 1
      else unknown += 1
    }

    return { fresh, stale, unreachable, unknown }
  }, [metricsById, nodes])

  return (
    <div className="svc-admin-page svc-admin-page-nodes">
      <header className="svc-admin-page-header">
        <div style={{ display: 'flex', alignItems: 'baseline', justifyContent: 'space-between', gap: 16, flexWrap: 'wrap' }}>
          <div>
            <h1>{t('nav.nodes')}</h1>
            <p>
              Overview of nodes registered in this svc-admin instance, including
              quick health, restart, and metrics freshness summaries.
            </p>
          </div>

          {!loading && !error && nodes.length > 0 && (
            <div style={{ display: 'flex', gap: 10, flexWrap: 'wrap', alignItems: 'center' }}>
              <MetricsPill label="Fresh" count={metricsCounts.fresh} tone="ok" />
              <MetricsPill label="Stale" count={metricsCounts.stale} tone="warn" />
              <MetricsPill label="Unreachable" count={metricsCounts.unreachable} tone="bad" />
              {metricsCounts.unknown > 0 && (
                <MetricsPill label="Unknown" count={metricsCounts.unknown} tone="muted" />
              )}
            </div>
          )}
        </div>
      </header>

      {loading && <LoadingSpinner />}

      {!loading && error && <ErrorBanner message={error} />}

      {!loading && !error && nodes.length === 0 && (
        <EmptyState message="No nodes configured. Check svc-admin config for node registry entries." />
      )}

      {!loading && !error && nodes.length > 0 && (
        <div className="svc-admin-node-layout">
          <div className="svc-admin-node-grid">
            {nodes.map((node) => {
              const statusState = statusById[node.id]
              const metricsState = metricsById[node.id]

              const summary = buildSummary(statusState?.status ?? null)

              const isSelected = node.id === effectiveSelectedId

              return (
                <NodeCard
                  key={node.id}
                  node={node}
                  statusSummary={summary}
                  statusLoading={statusState?.loading}
                  statusError={statusState?.error ?? null}
                  metricsHealth={metricsState?.health ?? null}
                  metricsLoading={metricsState?.loading}
                  metricsError={metricsState?.error ?? null}
                  isSelected={isSelected}
                  onSelect={() => setSelectedNodeId(node.id)}
                />
              )
            })}
          </div>

          <NodePreviewPanel
            node={selectedNode}
            statusSummary={selectedSummary}
            metricsHealth={selectedMetricsState?.health ?? null}
            metricsLoading={selectedMetricsState?.loading}
            metricsError={selectedMetricsState?.error ?? null}
            planes={selectedPlanes}
          />
        </div>
      )}
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/NodeStoragePage.tsx
<a id="crates-svc-admin-ui-src-routes-NodeStoragePage-tsx"></a>

```tsx
// crates/svc-admin/ui/src/routes/NodeStoragePage.tsx
//
// RO:WHAT — Node “Data & Storage” page (Storage summary + database inventory).
// RO:WHY  — Give operators a read-only, curated view of disk/DB health without
//           turning svc-admin into a remote file browser.
// RO:HOW  — Uses svc-admin backend storage endpoints when present; falls back
//           to deterministic mock data when endpoints are missing (404/405/501).
// RO:INVARIANTS —
//   - Read-only: no mutations.
//   - No raw filesystem browsing; storage/DB details must be curated DTOs.

import React, { useMemo } from 'react'
import { Link, useParams } from 'react-router-dom'

import { NodeStatusBadge } from '../components/nodes/NodeStatusBadge'
import { ErrorBanner } from '../components/shared/ErrorBanner'
import { LoadingSpinner } from '../components/shared/LoadingSpinner'
import { EmptyState } from '../components/shared/EmptyState'

import { useNodeStorage } from './node-storage/useNodeStorage'
import { deriveOverallHealthOrNull, computeMetricsHealth } from './node-storage/helpers'
import { fmtBytes, fmtBps, clamp01 } from './node-storage/format'
import { mockStorageSummary, mockDatabaseDetail } from './node-storage/mock'
import { RingGauge, DbIcon, gaugeColor, gaugeLevelFromPct } from './node-storage/ringGauge'

type MetricsHealth = 'fresh' | 'stale' | 'unreachable'

export function NodeStoragePage() {
  const params = useParams()
  const nodeId = params.id ?? ''

  const {
    status,
    statusLoading,
    statusError,

    facets,
    facetsLoading,
    facetsError,

    storage,
    storageLoading,
    storageError,
    storageSource,

    databases,
    dbLoading,
    dbError,
    dbSource,

    selectedDb,
    setSelectedDb,
    dbDetail,
    dbDetailLoading,
    dbDetailError,
  } = useNodeStorage(nodeId)

  const overallHealth = useMemo(
    () => deriveOverallHealthOrNull(status?.planes),
    [status?.planes],
  )

  const metricsHealth: MetricsHealth = useMemo(
    () => computeMetricsHealth(facets, facetsError),
    [facets, facetsError],
  )

  const title = status?.display_name ?? nodeId

  // Storage should always be present (hook falls back), but keep a hard-safe default.
  const s = useMemo(() => storage ?? mockStorageSummary(nodeId), [storage, nodeId])

  const usedPct = useMemo(() => {
    return s.totalBytes ? Math.round((s.usedBytes / s.totalBytes) * 100) : 0
  }, [s.totalBytes, s.usedBytes])

  const freePct = useMemo(() => 100 - usedPct, [usedPct])
  const lowDisk = useMemo(() => freePct <= 10, [freePct])

  const sourceLabel = useMemo(() => {
    return storageSource === 'live' && dbSource === 'live'
      ? 'Live'
      : storageSource === 'mock' && dbSource === 'mock'
        ? 'Mock'
        : 'Mixed'
  }, [storageSource, dbSource])

  const sidebarDb = useMemo(() => {
    return dbDetail ?? (selectedDb ? mockDatabaseDetail(nodeId, selectedDb) : null)
  }, [dbDetail, selectedDb, nodeId])

  const topDbGauges = useMemo(() => {
    const total = s.totalBytes > 0 ? s.totalBytes : 1
    const top = [...databases].sort((a, b) => b.sizeBytes - a.sizeBytes).slice(0, 3)

    return top.map((db) => {
      const share = clamp01(db.sizeBytes / total)
      const pct = share * 100
      const lvl = gaugeLevelFromPct(pct)
      return {
        name: db.name,
        size: fmtBytes(db.sizeBytes),
        pct,
        color: gaugeColor(lvl),
      }
    })
  }, [databases, s.totalBytes])

  const dbOpenHref = useMemo(() => {
    return selectedDb && status?.id
      ? `/nodes/${encodeURIComponent(status.id)}/storage/databases/${encodeURIComponent(
          selectedDb,
        )}`
      : null
  }, [selectedDb, status?.id])

  // ------------------------ renders (safe early returns) --------------------

  if (!nodeId) {
    return (
      <div className="svc-admin-page svc-admin-page-node-storage">
        <div className="svc-admin-section">
          <ErrorBanner message="Missing node id in route." />
          <div style={{ marginTop: '0.75rem' }}>
            <Link to="/" className="svc-admin-link-muted">
              ← Nodes
            </Link>
          </div>
        </div>
      </div>
    )
  }

  if (statusLoading) {
    return (
      <div className="svc-admin-page svc-admin-page-node-storage">
        <div className="svc-admin-section">
          <LoadingSpinner />
        </div>
      </div>
    )
  }

  if (statusError || !status) {
    return (
      <div className="svc-admin-page svc-admin-page-node-storage">
        <div className="svc-admin-section">
          <ErrorBanner message={statusError ?? 'Node not found.'} />
          <div style={{ marginTop: '0.75rem' }}>
            <Link to="/" className="svc-admin-link-muted">
              ← Nodes
            </Link>
          </div>
        </div>
      </div>
    )
  }

  return (
    <div className="svc-admin-page svc-admin-page-node-storage">
      <header className="svc-admin-page-header svc-admin-page-header-node">
        <div>
          <h1>{title}</h1>
          <p className="svc-admin-page-subtitle">
            Data &amp; storage inventory (read-only).{' '}
            <span style={{ opacity: 0.85 }}>Source: {sourceLabel}</span>
          </p>
          <p className="svc-admin-node-meta">
            <span className="svc-admin-node-id">
              <strong>ID:</strong> {status.id}
            </span>{' '}
            {status.profile && (
              <span className="svc-admin-node-profile">
                <strong>Profile:</strong> {status.profile}
              </span>
            )}
          </p>
        </div>

        <div className="svc-admin-page-header-actions">
          <Link
            to={`/nodes/${encodeURIComponent(status.id)}`}
            className="svc-admin-link-muted"
          >
            ← Node
          </Link>
          <Link to="/" className="svc-admin-link-muted">
            ← Nodes
          </Link>

          <div className="svc-admin-node-preview-pills">
            {overallHealth && <NodeStatusBadge status={overallHealth} />}
            <span
              className={`svc-admin-metrics-pill svc-admin-metrics-pill--${metricsHealth}`}
              title={
                metricsHealth === 'fresh'
                  ? 'Metrics sampled recently.'
                  : metricsHealth === 'stale'
                    ? 'Metrics are stale or node is idle.'
                    : 'Metrics unreachable from svc-admin.'
              }
            >
              Metrics: {metricsHealth}
            </span>
          </div>
        </div>
      </header>

      {facetsLoading && (
        <section className="svc-admin-section" style={{ marginBottom: '1rem' }}>
          <LoadingSpinner />
        </section>
      )}
      {!facetsLoading && facetsError && (
        <ErrorBanner message="Metrics unreachable for this node. Storage data may be mocked." />
      )}

      {(storageError || dbError || dbDetailError) && (
        <ErrorBanner message="Some storage endpoints failed; falling back to safe mock data where needed." />
      )}

      {lowDisk && (
        <ErrorBanner message={`Low disk headroom: ~${freePct}% free on ${s.mount}.`} />
      )}

      <div className="svc-admin-node-detail-layout">
        <div className="svc-admin-node-detail-main">
          <section className="svc-admin-section" style={{ marginBottom: '1rem' }}>
            <div
              style={{
                display: 'flex',
                alignItems: 'baseline',
                justifyContent: 'space-between',
                gap: '1rem',
              }}
            >
              <h2 style={{ marginBottom: 0 }}>Top databases</h2>
              <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>
                Disk-share gauges (curated proxy until per-DB headroom exists)
              </div>
            </div>

            <div
              style={{
                display: 'grid',
                gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))',
                gap: '0.75rem',
                marginTop: '0.75rem',
              }}
            >
              {dbLoading ? (
                <>
                  <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                    <LoadingSpinner />
                  </div>
                  <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                    <LoadingSpinner />
                  </div>
                  <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                    <LoadingSpinner />
                  </div>
                </>
              ) : topDbGauges.length === 0 ? (
                <EmptyState message="No databases available for gauges." />
              ) : (
                topDbGauges.map((g) => (
                  <RingGauge
                    key={g.name}
                    pct={g.pct}
                    label={g.name}
                    sublabel={g.size}
                    color={g.color}
                    onClick={() => setSelectedDb(g.name)}
                  />
                ))
              )}
            </div>
          </section>

          <section className="svc-admin-section" style={{ marginBottom: '1rem' }}>
            <h2>Storage summary</h2>

            <div
              style={{
                display: 'grid',
                gridTemplateColumns: 'repeat(2, minmax(0, 1fr))',
                gap: '0.75rem',
                marginTop: '0.75rem',
              }}
            >
              <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>Disk</div>
                <div style={{ fontSize: '1.1rem', fontWeight: 700, marginTop: '0.2rem' }}>
                  {fmtBytes(s.usedBytes)} used
                </div>
                <div style={{ fontSize: '0.9rem', opacity: 0.8 }}>
                  / {fmtBytes(s.totalBytes)} ({usedPct}%)
                </div>
              </div>

              <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>Free</div>
                <div style={{ fontSize: '1.1rem', fontWeight: 700, marginTop: '0.2rem' }}>
                  {fmtBytes(s.freeBytes)}
                </div>
                <div style={{ fontSize: '0.9rem', opacity: 0.8 }}>
                  {freePct}% headroom
                </div>
              </div>

              <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>I/O</div>
                <div style={{ fontSize: '0.95rem', marginTop: '0.2rem' }}>
                  Read: <strong>{fmtBps(s.ioReadBps)}</strong>
                </div>
                <div style={{ fontSize: '0.95rem' }}>
                  Write: <strong>{fmtBps(s.ioWriteBps)}</strong>
                </div>
              </div>

              <div className="svc-admin-card" style={{ padding: '0.9rem 1rem' }}>
                <div style={{ fontSize: '0.85rem', opacity: 0.8 }}>Databases</div>
                <div style={{ fontSize: '1.1rem', fontWeight: 700, marginTop: '0.2rem' }}>
                  {dbLoading ? '…' : databases.length}
                </div>
                <div style={{ fontSize: '0.9rem', opacity: 0.8 }}>
                  Mount: <strong>{s.mount}</strong> · FS: <strong>{s.fsType}</strong>
                </div>
              </div>
            </div>

            <p style={{ marginTop: '0.75rem', fontSize: '0.9rem', opacity: 0.85 }}>
              Storage/DB facts are curated and read-only. When node support is not present, this
              page safely falls back to deterministic mock data.
            </p>

            {storageLoading && (
              <div style={{ marginTop: '0.5rem' }}>
                <LoadingSpinner />
              </div>
            )}
          </section>

          <section className="svc-admin-section">
            <h2>Databases</h2>

            {dbLoading && (
              <div style={{ marginTop: '0.75rem' }}>
                <LoadingSpinner />
              </div>
            )}

            {!dbLoading && databases.length === 0 ? (
              <EmptyState message="No databases reported by this node." />
            ) : (
              <div
                className="svc-admin-card"
                style={{ padding: 0, overflow: 'hidden', marginTop: '0.75rem' }}
              >
                <table className="svc-admin-plane-table" style={{ marginTop: 0 }}>
                  <thead>
                    <tr>
                      <th style={{ width: '42%' }}>Name</th>
                      <th>Engine</th>
                      <th>Size</th>
                      <th>Perms</th>
                      <th>Health</th>
                    </tr>
                  </thead>
                  <tbody>
                    {databases.map((db) => {
                      const selected = db.name === selectedDb
                      const rowStyle: React.CSSProperties = selected
                        ? { background: 'var(--svc-admin-color-accent-soft)' }
                        : {}

                      return (
                        <tr
                          key={db.name}
                          style={{ cursor: 'pointer', ...rowStyle }}
                          onClick={() => setSelectedDb(db.name)}
                          title={db.notes ?? ''}
                        >
                          <td style={{ fontWeight: 650 }}>{db.name}</td>
                          <td>{db.engine}</td>
                          <td>{fmtBytes(db.sizeBytes)}</td>
                          <td>{db.mode}</td>
                          <td>
                            <span
                              style={{
                                fontWeight: 650,
                                textTransform: 'capitalize',
                                color:
                                  db.health === 'ok'
                                    ? 'var(--svc-admin-color-text)'
                                    : db.health === 'degraded'
                                      ? 'var(--svc-admin-color-text-muted)'
                                      : 'var(--svc-admin-color-danger-text)',
                              }}
                            >
                              {db.health}
                            </span>
                            {(db.worldReadable || db.worldWritable) && (
                              <span style={{ marginLeft: '0.5rem', opacity: 0.75 }}>
                                {db.worldWritable ? '⚠ perms' : '⚠ read'}
                              </span>
                            )}
                          </td>
                        </tr>
                      )
                    })}
                  </tbody>
                </table>
              </div>
            )}
          </section>
        </div>

        <aside className="svc-admin-node-detail-sidebar">
          <div className="svc-admin-node-detail-sidebar-card">
            <div
              style={{
                display: 'flex',
                justifyContent: 'space-between',
                alignItems: 'baseline',
                gap: '0.75rem',
              }}
            >
              <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                <DbIcon />
                <div>
                  <div className="svc-admin-node-detail-sidebar-title">Database details</div>
                  <div className="svc-admin-node-detail-sidebar-caption">
                    Read-only curated node facts (or safe mock fallback).
                  </div>
                </div>
              </div>

              <div style={{ fontSize: '0.8rem', opacity: 0.75 }}>
                {selectedDb ? (dbDetailLoading ? 'Loading…' : sidebarDb?.engine ?? '') : ''}
              </div>
            </div>

            {selectedDb && dbOpenHref && (
              <div style={{ marginTop: '0.6rem' }}>
                <Link
                  to={dbOpenHref}
                  style={{
                    color: 'var(--svc-admin-color-warning-text, #facc15)',
                    fontWeight: 750,
                    textDecoration: 'none',
                  }}
                  title="Open the database details page (permissions / files / curated inventory)."
                >
                  Open →
                </Link>
              </div>
            )}

            {!selectedDb && (
              <div className="svc-admin-node-detail-sidebar-empty">
                Select a database from the table to inspect details.
              </div>
            )}

            {selectedDb && sidebarDb && (
              <>
                <div style={{ fontSize: '1.15rem', fontWeight: 750, margin: '0.75rem 0' }}>
                  {sidebarDb.name}
                </div>

                <div className="svc-admin-node-detail-sidebar-table">
                  {[
                    ['Size', fmtBytes(sidebarDb.sizeBytes)],
                    ['Owner', sidebarDb.owner],
                    ['Mode', sidebarDb.mode],
                    ['Path alias', sidebarDb.pathAlias],
                    ['Files', sidebarDb.fileCount.toLocaleString()],
                    [
                      'Keys',
                      sidebarDb.approxKeys === null
                        ? 'n/a'
                        : sidebarDb.approxKeys.toLocaleString(),
                    ],
                    ['Compaction', sidebarDb.lastCompaction ?? 'n/a'],
                    [
                      'Health',
                      sidebarDb.health.charAt(0).toUpperCase() + sidebarDb.health.slice(1),
                    ],
                  ].map(([k, v]) => (
                    <div key={k} className="svc-admin-node-detail-sidebar-row">
                      <div className="svc-admin-node-detail-sidebar-row-main">
                        <div className="svc-admin-node-detail-sidebar-row-name">{k}</div>
                      </div>
                      <div className="svc-admin-node-detail-sidebar-row-aside">
                        <div style={{ fontSize: '0.9rem', fontWeight: 650 }}>{v}</div>
                      </div>
                    </div>
                  ))}
                </div>

                {sidebarDb.warnings.length > 0 && (
                  <div style={{ marginTop: '0.9rem' }}>
                    <div style={{ fontWeight: 750, marginBottom: '0.35rem' }}>Warnings</div>
                    <ul style={{ margin: 0, paddingLeft: '1.1rem' }}>
                      {sidebarDb.warnings.map((w) => (
                        <li key={w} style={{ marginBottom: '0.35rem' }}>
                          {w}
                        </li>
                      ))}
                    </ul>
                  </div>
                )}

                <div style={{ marginTop: '0.9rem', fontSize: '0.9rem', opacity: 0.85 }}>
                  This panel is read-only and displays curated node facts (or mock fallback).
                </div>
              </>
            )}
          </div>
        </aside>
      </div>
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/NotFoundPage.tsx
<a id="crates-svc-admin-ui-src-routes-NotFoundPage-tsx"></a>

```tsx
import React from 'react'

export function NotFoundPage() {
  return (
    <div>
      <h1>404</h1>
      <p>Page not found.</p>
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/PlaygroundPage.tsx
<a id="crates-svc-admin-ui-src-routes-PlaygroundPage-tsx"></a>

```tsx
// crates/svc-admin/ui/src/routes/PlaygroundPage.tsx
//
// RO:WHAT — Dev-only App Playground (local manifest editor + validation scaffold).
// RO:WHY  — Operators/devs need a safe “sandbox” to iterate on facet manifests
//           and see validation feedback without turning svc-admin into a remote executor.
// RO:INVARIANTS —
//   - Must be gated by uiConfig.dev.enableAppPlayground (dev-only posture).
//   - Read-only posture: no node mutations, no remote file browsing, no arbitrary proxy.
//   - Resilient: if ui-config can’t be fetched, default to “disabled” (safe).
//
// NOTE:
//   This batch wires the route + a functional local manifest “validator” scaffold.
//   In later batches we’ll:
//     - add a Sidebar link (also gated),
//     - introduce real example/compile endpoints or ron-app-sdk-ts integration,
//     - add request-builder + dry-run/proxy (still read-only + audited).

import React, { useEffect, useMemo, useState } from 'react'
import { adminClient } from '../api/adminClient'
import type { UiConfigDto } from '../types/admin-api'
import { LoadingSpinner } from '../components/shared/LoadingSpinner'
import { ErrorBanner } from '../components/shared/ErrorBanner'
import { EmptyState } from '../components/shared/EmptyState'

type Example = {
  id: string
  title: string
  description: string
  manifestToml: string
}

type ParseResult = {
  ok: boolean
  value: any | null
  errors: string[]
  warnings: string[]
}

const EXAMPLES: Example[] = [
  {
    id: 'hello-echo',
    title: 'Echo Facet (minimal)',
    description:
      'A tiny manifest shape to sanity-check parsing and show a “facet + routes” structure.',
    manifestToml: `# Manifest.toml (example)
[facet]
id = "echo"
kind = "echo"

[[route]]
method = "GET"
path = "/ping"

[[route]]
method = "POST"
path = "/echo"
`,
  },
  {
    id: 'static-site',
    title: 'Static Facet (mocked)',
    description:
      'A static facet example with a couple of routes (schema is intentionally permissive for now).',
    manifestToml: `# Manifest.toml (example)
[facet]
id = "static"
kind = "static"

[static]
root = "./public"
cache_seconds = 60

[[route]]
method = "GET"
path = "/"
`,
  },
  {
    id: 'proxy',
    title: 'Proxy Facet (mocked)',
    description:
      'A proxy-style facet example with upstream hints (still local-only in this UI batch).',
    manifestToml: `# Manifest.toml (example)
[facet]
id = "proxy"
kind = "proxy"

[proxy]
upstream = "https://example.com"
timeout_ms = 2500

[[route]]
method = "GET"
path = "/api"
`,
  },
]

function tryCopyToClipboard(text: string): Promise<boolean> {
  try {
    if (!navigator.clipboard?.writeText) return Promise.resolve(false)
    return navigator.clipboard
      .writeText(text)
      .then(() => true)
      .catch(() => false)
  } catch {
    return Promise.resolve(false)
  }
}

// ---------------------------
// Minimal TOML-ish parser
// ---------------------------
// This is intentionally small + tolerant. It supports:
// - [table] headers
// - [[array]] headers (array-of-tables)
// - key = "string" | 'string' | number | bool | [array]
// It does NOT aim to be spec-complete TOML. It’s enough to provide
// “useful operator feedback” without pulling in dependencies yet.

function stripInlineComment(line: string): string {
  // Remove # comments unless inside quotes (simple heuristic).
  let inS = false
  let inD = false
  for (let i = 0; i < line.length; i++) {
    const c = line[i]
    if (c === "'" && !inD) inS = !inS
    else if (c === '"' && !inS) inD = !inD
    else if (c === '#' && !inS && !inD) return line.slice(0, i)
  }
  return line
}

function isQuoted(s: string): boolean {
  return (
    (s.startsWith('"') && s.endsWith('"') && s.length >= 2) ||
    (s.startsWith("'") && s.endsWith("'") && s.length >= 2)
  )
}

function unquote(s: string): string {
  if (!isQuoted(s)) return s
  return s.slice(1, -1)
}

function splitTopLevelCsv(s: string): string[] {
  // Split on commas not inside quotes or nested brackets.
  const out: string[] = []
  let cur = ''
  let depth = 0
  let inS = false
  let inD = false

  for (let i = 0; i < s.length; i++) {
    const c = s[i]
    if (c === "'" && !inD) inS = !inS
    else if (c === '"' && !inS) inD = !inD
    else if (!inS && !inD) {
      if (c === '[') depth++
      if (c === ']') depth = Math.max(0, depth - 1)
      if (c === ',' && depth === 0) {
        out.push(cur.trim())
        cur = ''
        continue
      }
    }
    cur += c
  }

  if (cur.trim().length) out.push(cur.trim())
  return out
}

function parseValue(raw: string, errors: string[]): any {
  const v = raw.trim()

  if (v === 'true') return true
  if (v === 'false') return false

  if (isQuoted(v)) return unquote(v)

  // Array
  if (v.startsWith('[') && v.endsWith(']')) {
    const inner = v.slice(1, -1).trim()
    if (!inner) return []
    const parts = splitTopLevelCsv(inner)
    return parts.map((p) => parseValue(p, errors))
  }

  // Number (int/float)
  if (/^[+-]?\d+(\.\d+)?$/.test(v)) {
    const n = Number(v)
    if (!Number.isFinite(n)) {
      errors.push(`Invalid number: ${v}`)
      return v
    }
    return n
  }

  // Bare string fallback
  return v
}

function ensurePath(obj: any, path: string[]): any {
  let cur = obj
  for (const k of path) {
    if (typeof cur[k] !== 'object' || cur[k] === null || Array.isArray(cur[k])) {
      cur[k] = {}
    }
    cur = cur[k]
  }
  return cur
}

function setDeep(obj: any, dottedKey: string, value: any) {
  const parts = dottedKey.split('.').map((s) => s.trim()).filter(Boolean)
  if (parts.length === 0) return
  const leaf = parts[parts.length - 1]
  const parent = ensurePath(obj, parts.slice(0, -1))
  parent[leaf] = value
}

function parseTomlLoose(input: string): ParseResult {
  const errors: string[] = []
  const warnings: string[] = []

  const root: any = {}
  let curTable: any = root
  let curTablePath: string[] = []

  const lines = input.split(/\r?\n/)

  for (let ln = 0; ln < lines.length; ln++) {
    const rawLine = lines[ln]
    const noComment = stripInlineComment(rawLine).trim()
    if (!noComment) continue

    // [[array-of-tables]]
    const aotMatch = noComment.match(/^\[\[(.+)\]\]$/)
    if (aotMatch) {
      const name = aotMatch[1].trim()
      if (!name) {
        errors.push(`Line ${ln + 1}: Empty [[table]] header`)
        continue
      }
      const path = name.split('.').map((s) => s.trim()).filter(Boolean)
      if (path.length === 0) {
        errors.push(`Line ${ln + 1}: Invalid [[table]] header`)
        continue
      }

      const parent = ensurePath(root, path.slice(0, -1))
      const leaf = path[path.length - 1]
      if (!Array.isArray(parent[leaf])) parent[leaf] = []
      const next = {}
      parent[leaf].push(next)

      curTable = next
      curTablePath = path
      continue
    }

    // [table]
    const tblMatch = noComment.match(/^\[(.+)\]$/)
    if (tblMatch) {
      const name = tblMatch[1].trim()
      if (!name) {
        errors.push(`Line ${ln + 1}: Empty [table] header`)
        continue
      }
      const path = name.split('.').map((s) => s.trim()).filter(Boolean)
      if (path.length === 0) {
        errors.push(`Line ${ln + 1}: Invalid [table] header`)
        continue
      }
      curTable = ensurePath(root, path)
      curTablePath = path
      continue
    }

    // key = value
    const eq = noComment.indexOf('=')
    if (eq <= 0) {
      warnings.push(`Line ${ln + 1}: Unrecognized line (ignored)`)
      continue
    }

    const key = noComment.slice(0, eq).trim()
    const valRaw = noComment.slice(eq + 1).trim()
    if (!key) {
      errors.push(`Line ${ln + 1}: Missing key before '='`)
      continue
    }
    if (!valRaw) {
      errors.push(`Line ${ln + 1}: Missing value after '=' for key "${key}"`)
      continue
    }

    const value = parseValue(valRaw, errors)

    // If key is dotted, set deep relative to current table
    if (key.includes('.')) {
      setDeep(curTable, key, value)
    } else {
      if (Object.prototype.hasOwnProperty.call(curTable, key)) {
        warnings.push(
          `Line ${ln + 1}: Duplicate key "${key}" in [${curTablePath.join('.') || 'root'}] (overwritten)`,
        )
      }
      curTable[key] = value
    }
  }

  // Gentle “shape” hints (non-fatal)
  const hasFacet = typeof root.facet === 'object' && root.facet !== null
  const hasRoutes = Array.isArray(root.route) || Array.isArray(root.routes)
  if (!hasFacet) warnings.push('Hint: expected a [facet] table (common manifest convention).')
  if (!hasRoutes) warnings.push('Hint: expected at least one [[route]] entry.')

  const ok = errors.length === 0
  return { ok, value: ok ? root : null, errors, warnings }
}

export function PlaygroundPage() {
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)
  const [uiConfig, setUiConfig] = useState<UiConfigDto | null>(null)

  const enabled = Boolean(uiConfig?.dev?.enableAppPlayground)

  const [selectedExampleId, setSelectedExampleId] = useState(EXAMPLES[0]?.id ?? 'hello-echo')
  const selectedExample = useMemo(
    () => EXAMPLES.find((e) => e.id === selectedExampleId) ?? EXAMPLES[0],
    [selectedExampleId],
  )

  const [manifestText, setManifestText] = useState(selectedExample?.manifestToml ?? '')
  const [parseResult, setParseResult] = useState<ParseResult | null>(null)
  const [copyNote, setCopyNote] = useState<string | null>(null)

  useEffect(() => {
    // Keep manifest in sync when example changes (unless user is actively editing).
    // This is intentionally “reset-on-select” for now; later we can add “dirty” tracking.
    setManifestText(selectedExample?.manifestToml ?? '')
    setParseResult(null)
    setCopyNote(null)
  }, [selectedExampleId])

  useEffect(() => {
    let cancelled = false
    async function load() {
      try {
        const cfg = await adminClient.getUiConfig()
        if (cancelled) return
        setUiConfig(cfg)
        setError(null)
      } catch (err) {
        if (cancelled) return
        const msg = err instanceof Error ? err.message : 'Failed to load UI config'
        // Safe default: treat as disabled if we can’t confirm dev flag.
        setUiConfig(null)
        setError(msg)
      } finally {
        if (!cancelled) setLoading(false)
      }
    }
    load()
    return () => {
      cancelled = true
    }
  }, [])

  function runValidate() {
    setCopyNote(null)
    const res = parseTomlLoose(manifestText)
    setParseResult(res)
  }

  async function copyJson() {
    if (!parseResult?.ok || !parseResult.value) return
    const json = JSON.stringify(parseResult.value, null, 2)
    const ok = await tryCopyToClipboard(json)
    setCopyNote(ok ? 'Copied JSON to clipboard.' : 'Clipboard copy not available in this browser.')
    window.setTimeout(() => setCopyNote(null), 2200)
  }

  return (
    <div className="svc-admin-page">
      <header className="svc-admin-page-header">
        <h1>App Playground</h1>
        <p>
          Dev-only sandbox for iterating on facet manifests and seeing validation feedback. This is
          intentionally <strong>read-only</strong> and does not execute code or mutate nodes.
        </p>
      </header>

      {loading && <LoadingSpinner />}

      {!loading && error && (
        <div style={{ marginBottom: '1rem' }}>
          <ErrorBanner message={error} />
        </div>
      )}

      {!loading && !enabled && (
        <EmptyState
          message={[
            'Playground is currently disabled for this svc-admin instance.',
            'Enable it with the dev-only flag:',
            'SVC_ADMIN_UI_DEV_ENABLE_APP_PLAYGROUND=true',
          ].join('\n')}
        />
      )}

      {!loading && enabled && (
        <div
          className="svc-admin-section"
          style={{
            display: 'grid',
            gridTemplateColumns: 'minmax(260px, 340px) minmax(0, 1fr) minmax(320px, 420px)',
            gap: '1rem',
            alignItems: 'start',
          }}
        >
          {/* Left: examples */}
          <section className="svc-admin-section" style={{ margin: 0 }}>
            <h2 style={{ marginTop: 0 }}>Examples</h2>
            <p style={{ opacity: 0.85, marginTop: 0 }}>
              Pick an example manifest to load into the editor.
            </p>

            <div style={{ display: 'grid', gap: '0.6rem' }}>
              {EXAMPLES.map((ex) => {
                const active = ex.id === selectedExampleId
                return (
                  <button
                    key={ex.id}
                    type="button"
                    onClick={() => setSelectedExampleId(ex.id)}
                    className="svc-admin-node-action-button"
                    style={{
                      textAlign: 'left',
                      padding: '0.7rem 0.8rem',
                      borderRadius: 10,
                      opacity: active ? 1 : 0.92,
                      outline: active ? '2px solid rgba(99, 102, 241, 0.55)' : 'none',
                    }}
                  >
                    <div style={{ fontWeight: 800, marginBottom: 4 }}>{ex.title}</div>
                    <div style={{ fontSize: '0.92rem', opacity: 0.82 }}>{ex.description}</div>
                  </button>
                )
              })}
            </div>

            <div style={{ marginTop: '0.9rem', fontSize: '0.9rem', opacity: 0.8 }}>
              Safety: this page is local-only. No node calls are made in this batch.
            </div>
          </section>

          {/* Middle: editor */}
          <section className="svc-admin-section" style={{ margin: 0 }}>
            <h2 style={{ marginTop: 0 }}>Manifest Editor</h2>
            <p style={{ opacity: 0.85, marginTop: 0 }}>
              Edit a TOML-ish manifest. Click “Validate” to parse and see errors/warnings.
            </p>

            <textarea
              value={manifestText}
              onChange={(e) => setManifestText(e.target.value)}
              spellCheck={false}
              style={{
                width: '100%',
                minHeight: 420,
                resize: 'vertical',
                fontFamily:
                  'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',
                fontSize: 13,
                lineHeight: 1.35,
                padding: '0.85rem',
                borderRadius: 12,
                border: '1px solid rgba(255,255,255,0.10)',
                background: 'rgba(0,0,0,0.18)',
                color: 'inherit',
              }}
            />

            <div style={{ display: 'flex', gap: '0.6rem', marginTop: '0.8rem' }}>
              <button
                type="button"
                className="svc-admin-node-action-button"
                onClick={runValidate}
              >
                Validate
              </button>

              <button
                type="button"
                className="svc-admin-node-action-button"
                onClick={() => {
                  setManifestText(selectedExample?.manifestToml ?? '')
                  setParseResult(null)
                  setCopyNote(null)
                }}
              >
                Reset to example
              </button>

              <button
                type="button"
                className="svc-admin-node-action-button"
                disabled={!parseResult?.ok || !parseResult.value}
                onClick={copyJson}
                title={!parseResult?.ok ? 'Validate successfully to enable JSON copy.' : undefined}
              >
                Copy JSON
              </button>

              {copyNote && (
                <span style={{ alignSelf: 'center', fontSize: '0.92rem', opacity: 0.9 }}>
                  {copyNote}
                </span>
              )}
            </div>
          </section>

          {/* Right: results */}
          <section className="svc-admin-section" style={{ margin: 0 }}>
            <h2 style={{ marginTop: 0 }}>Validation Output</h2>
            <p style={{ opacity: 0.85, marginTop: 0 }}>
              Errors block parsing; warnings are advisory.
            </p>

            {!parseResult && (
              <div style={{ opacity: 0.78 }}>
                Run <strong>Validate</strong> to see parse output.
              </div>
            )}

            {parseResult && (
              <>
                <div style={{ display: 'flex', gap: '0.6rem', flexWrap: 'wrap' }}>
                  <span
                    style={{
                      padding: '0.2rem 0.55rem',
                      borderRadius: 999,
                      fontWeight: 800,
                      fontSize: 12,
                      background: parseResult.ok
                        ? 'rgba(16,185,129,0.14)'
                        : 'rgba(239,68,68,0.14)',
                      color: parseResult.ok ? 'rgb(110,231,183)' : 'rgb(252,165,165)',
                      border: '1px solid rgba(255,255,255,0.08)',
                    }}
                  >
                    {parseResult.ok ? 'OK' : 'ERROR'}
                  </span>

                  {parseResult.warnings.length > 0 && (
                    <span
                      style={{
                        padding: '0.2rem 0.55rem',
                        borderRadius: 999,
                        fontWeight: 800,
                        fontSize: 12,
                        background: 'rgba(245,158,11,0.14)',
                        color: 'rgb(253,230,138)',
                        border: '1px solid rgba(255,255,255,0.08)',
                      }}
                    >
                      Warnings: {parseResult.warnings.length}
                    </span>
                  )}

                  {parseResult.errors.length > 0 && (
                    <span
                      style={{
                        padding: '0.2rem 0.55rem',
                        borderRadius: 999,
                        fontWeight: 800,
                        fontSize: 12,
                        background: 'rgba(239,68,68,0.14)',
                        color: 'rgb(252,165,165)',
                        border: '1px solid rgba(255,255,255,0.08)',
                      }}
                    >
                      Errors: {parseResult.errors.length}
                    </span>
                  )}
                </div>

                {parseResult.errors.length > 0 && (
                  <div style={{ marginTop: '0.9rem' }}>
                    <div style={{ fontWeight: 800, marginBottom: '0.35rem' }}>Errors</div>
                    <ul style={{ margin: 0, paddingLeft: '1.15rem' }}>
                      {parseResult.errors.map((e) => (
                        <li key={e} style={{ marginBottom: '0.35rem' }}>
                          {e}
                        </li>
                      ))}
                    </ul>
                  </div>
                )}

                {parseResult.warnings.length > 0 && (
                  <div style={{ marginTop: '0.9rem' }}>
                    <div style={{ fontWeight: 800, marginBottom: '0.35rem' }}>Warnings</div>
                    <ul style={{ margin: 0, paddingLeft: '1.15rem' }}>
                      {parseResult.warnings.map((w) => (
                        <li key={w} style={{ marginBottom: '0.35rem' }}>
                          {w}
                        </li>
                      ))}
                    </ul>
                  </div>
                )}

                <div style={{ marginTop: '0.9rem' }}>
                  <div style={{ fontWeight: 800, marginBottom: '0.35rem' }}>Parsed JSON</div>
                  <pre
                    style={{
                      margin: 0,
                      whiteSpace: 'pre-wrap',
                      wordBreak: 'break-word',
                      fontSize: 12.5,
                      lineHeight: 1.35,
                      padding: '0.75rem',
                      borderRadius: 12,
                      border: '1px solid rgba(255,255,255,0.08)',
                      background: 'rgba(0,0,0,0.18)',
                      maxHeight: 420,
                      overflow: 'auto',
                    }}
                  >
                    {parseResult.ok && parseResult.value
                      ? JSON.stringify(parseResult.value, null, 2)
                      : '(no JSON — fix errors and validate again)'}
                  </pre>

                  <div style={{ marginTop: '0.75rem', fontSize: '0.9rem', opacity: 0.8 }}>
                    Next batches will replace this loose parser with the real manifest contract
                    (ron-app-sdk / backend validation), plus a request builder + dry-run.
                  </div>
                </div>
              </>
            )}
          </section>
        </div>
      )}
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/SettingsPage.tsx
<a id="crates-svc-admin-ui-src-routes-SettingsPage-tsx"></a>

```tsx
// crates/svc-admin/ui/src/routes/SettingsPage.tsx
//
// WHAT: Settings screen for svc-admin.
// WHY:  Gives operators a place to adjust UI preferences (theme/language)
//       and inspect instance/auth metadata pulled from the backend.
//
// INTERACTS:
//   - api/adminClient.ts -> getUiConfig(), getMe()
//   - theme/ThemeProvider -> useTheme()
//   - i18n/useI18n -> useI18n()
//   - shared UI: LoadingSpinner, ErrorBanner

import React, { useEffect, useState } from 'react'
import { adminClient } from '../api/adminClient'
import type { MeResponse, UiConfigDto } from '../types/admin-api'
import { useTheme, type ThemeName } from '../theme/ThemeProvider'
import { useI18n } from '../i18n/useI18n'
import { LoadingSpinner } from '../components/shared/LoadingSpinner'
import { ErrorBanner } from '../components/shared/ErrorBanner'

type SettingsState = {
  loading: boolean
  error: string | null
  uiConfig: UiConfigDto | null
  me: MeResponse | null
}

export function SettingsPage() {
  const { theme, setTheme } = useTheme()
  const { locale, setLocale, t } = useI18n()

  const [state, setState] = useState<SettingsState>({
    loading: true,
    error: null,
    uiConfig: null,
    me: null
  })

  useEffect(() => {
    let cancelled = false

    async function load() {
      try {
        const [uiConfig, me] = await Promise.all([
          adminClient.getUiConfig(),
          adminClient.getMe()
        ])

        if (cancelled) return

        setState({
          loading: false,
          error: null,
          uiConfig,
          me
        })
      } catch (err) {
        if (cancelled) return
        const msg = err instanceof Error ? err.message : 'Failed to load settings'
        setState({
          loading: false,
          error: msg,
          uiConfig: null,
          me: null
        })
      }
    }

    load()

    return () => {
      cancelled = true
    }
  }, [])

  const { loading, error, uiConfig, me } = state

  // Derive theme and language options from backend config, with sensible fallbacks.
  const themeOptions: ThemeName[] =
    (uiConfig?.availableThemes as ThemeName[] | undefined)?.filter(
      (name) => !!name
    ) ?? (['light', 'dark'] as ThemeName[])

  const languageOptions: string[] =
    uiConfig?.availableLanguages && uiConfig.availableLanguages.length > 0
      ? uiConfig.availableLanguages
      : ['en-US', 'es-ES']

  return (
    <div className="svc-admin-page svc-admin-page-settings">
      <header className="svc-admin-page-header">
        <h1>{t('nav.settings')}</h1>
        <p>Configure your admin UI preferences and inspect instance metadata.</p>
      </header>

      {loading && <LoadingSpinner />}

      {!loading && error && <ErrorBanner message={error} />}

      {!loading && !error && (
        <>
          {/* UI preferences card */}
          <section className="svc-admin-card" style={{ marginBottom: '1.5rem' }}>
            <h2>UI preferences</h2>
            <p style={{ marginTop: '0.25rem', marginBottom: '1rem' }}>
              These settings apply to your browser only. Backend defaults still come from{' '}
              <code>/api/ui-config</code>.
            </p>

            {/* Theme selector */}
            <div style={{ marginBottom: '1.5rem' }}>
              <h3 style={{ marginBottom: '0.25rem' }}>Theme</h3>
              <p style={{ marginTop: 0, marginBottom: '0.75rem', fontSize: '0.9rem' }}>
                Choose between light and dark themes for the console.
              </p>
              <div role="radiogroup" aria-label="Theme">
                {themeOptions.map((name) => (
                  <label
                    key={name}
                    style={{
                      display: 'inline-flex',
                      alignItems: 'center',
                      marginRight: '1rem',
                      fontSize: '0.95rem'
                    }}
                  >
                    <input
                      type="radio"
                      name="theme"
                      value={name}
                      checked={theme === name}
                      onChange={() => setTheme(name)}
                    />
                    <span style={{ marginLeft: '0.5rem', textTransform: 'capitalize' }}>
                      {name}
                    </span>
                  </label>
                ))}
              </div>
            </div>

            {/* Language selector */}
            <div>
              <h3 style={{ marginBottom: '0.25rem' }}>Language</h3>
              <p style={{ marginTop: 0, marginBottom: '0.75rem', fontSize: '0.9rem' }}>
                Select the language for labels and navigation inside svc-admin.
              </p>

              <select
                value={locale}
                onChange={(event) => setLocale(event.target.value)}
                aria-label="Select language"
                style={{
                  padding: '0.4rem 0.6rem',
                  borderRadius: 6,
                  border: '1px solid var(--svc-admin-color-border-subtle)',
                  backgroundColor: 'var(--svc-admin-color-bg-elevated)',
                  color: 'var(--svc-admin-color-text)'
                }}
              >
                {languageOptions.map((code) => (
                  <option key={code} value={code}>
                    {code}
                  </option>
                ))}
              </select>
            </div>
          </section>

          {/* Instance & access metadata card */}
          <section className="svc-admin-card">
            <h2>Instance &amp; access</h2>
            <p style={{ marginTop: '0.25rem', marginBottom: '1rem', fontSize: '0.9rem' }}>
              Read-only mode, app playground flag, and your current identity as reported
              by the svc-admin backend.
            </p>

            <dl
              style={{
                display: 'grid',
                gridTemplateColumns: 'minmax(0, 1fr) minmax(0, 2fr)',
                rowGap: '0.5rem',
                columnGap: '1rem',
                margin: 0
              }}
            >
              {uiConfig && (
                <>
                  <dt style={{ fontWeight: 600 }}>Read-only UI</dt>
                  <dd style={{ margin: 0 }}>
                    {uiConfig.readOnly ? 'Enabled (no mutations allowed)' : 'Disabled'}
                  </dd>

                  <dt style={{ fontWeight: 600 }}>App playground</dt>
                  <dd style={{ margin: 0 }}>
                    {uiConfig.dev?.enableAppPlayground
                      ? 'Enabled for this instance'
                      : 'Disabled (hidden from UI)'}
                  </dd>

                  <dt style={{ fontWeight: 600 }}>Default theme</dt>
                  <dd style={{ margin: 0 }}>{uiConfig.defaultTheme}</dd>

                  <dt style={{ fontWeight: 600 }}>Default language</dt>
                  <dd style={{ margin: 0 }}>{uiConfig.defaultLanguage}</dd>
                </>
              )}

              {me && (
                <>
                  <dt style={{ fontWeight: 600 }}>Operator</dt>
                  <dd style={{ margin: 0 }}>
                    {me.displayName} ({me.subject})
                  </dd>

                  <dt style={{ fontWeight: 600 }}>Roles</dt>
                  <dd style={{ margin: 0 }}>
                    {me.roles && me.roles.length > 0 ? me.roles.join(', ') : 'none'}
                  </dd>

                  <dt style={{ fontWeight: 600 }}>Auth mode</dt>
                  <dd style={{ margin: 0 }}>{me.authMode}</dd>

                  {me.loginUrl && (
                    <>
                      <dt style={{ fontWeight: 600 }}>Login URL</dt>
                      <dd style={{ margin: 0 }}>
                        <a href={me.loginUrl}>{me.loginUrl}</a>
                      </dd>
                    </>
                  )}
                </>
              )}
            </dl>
          </section>
        </>
      )}
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/index.tsx
<a id="crates-svc-admin-ui-src-routes-index-tsx"></a>

```tsx
// Route definitions are centralized in App.tsx for now.
// This file exists as a future extension point if we move to route objects.

```

### crates/svc-admin/ui/src/routes/node-detail/health.ts
<a id="crates-svc-admin-ui-src-routes-node-detail-health-ts"></a>

```ts
// crates/svc-admin/ui/src/routes/node-detail/health.ts
//
// WHAT:
//   Route-local health derivation helpers.
// WHY:
//   Keep NodeDetailPage compositional; pure logic lives here and is reusable/testable.
// INVARIANTS:
//   - If any plane is down => overall down.
//   - Else if any plane is degraded => overall degraded.
//   - Else healthy (when planes exist).

export type Health = 'healthy' | 'degraded' | 'down'

export function deriveOverallHealth(planes: any[]): Health {
  if (!planes.length) return 'degraded'

  if (planes.some((p) => String(p.health ?? '').toLowerCase() === 'down')) {
    return 'down'
  }

  if (planes.some((p) => String(p.health ?? '').toLowerCase() === 'degraded')) {
    return 'degraded'
  }

  return 'healthy'
}

```

### crates/svc-admin/ui/src/routes/node-detail/metricsHealth.tsx
<a id="crates-svc-admin-ui-src-routes-node-detail-metricsHealth-tsx"></a>

```tsx
// crates/svc-admin/ui/src/routes/node-detail/metricsHealth.tsx
//
// WHAT:
//   Metrics freshness classification + badge renderer.
// WHY:
//   Keep node detail route slim; centralize the freshness contract for reuse.
// INVARIANTS:
//   - error => unreachable
//   - no facets / no valid ages => stale
//   - min age <= threshold => fresh else stale

import React from 'react'
import type { FacetMetricsSummary } from '../../types/admin-api'
import type { MetricsHealth } from '../../components/nodes/NodeCard'

export function classifyMetricsHealth(
  facets: FacetMetricsSummary[] | null,
  error: string | null,
): MetricsHealth | null {
  if (error) return 'unreachable'
  if (!facets || facets.length === 0) return 'stale'

  const ages = facets
    .map((f) => f.last_sample_age_secs)
    .filter((v): v is number => v !== null && Number.isFinite(v))

  if (ages.length === 0) return 'stale'

  const minAge = Math.min(...ages)
  const FRESH_THRESHOLD_SECS = 30
  return minAge <= FRESH_THRESHOLD_SECS ? 'fresh' : 'stale'
}

export function renderMetricsBadge(health: MetricsHealth | null) {
  if (!health) return null

  const base =
    'inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold'

  if (health === 'fresh') {
    return (
      <span className={`${base} bg-emerald-500/10 text-emerald-300`}>
        Metrics: fresh
      </span>
    )
  }

  if (health === 'stale') {
    return (
      <span className={`${base} bg-amber-500/10 text-amber-300`}>
        Metrics: stale
      </span>
    )
  }

  return (
    <span className={`${base} bg-rose-500/10 text-rose-300`}>
      Metrics: unreachable
    </span>
  )
}

```

### crates/svc-admin/ui/src/routes/node-detail/planeSummary.tsx
<a id="crates-svc-admin-ui-src-routes-node-detail-planeSummary-tsx"></a>

```tsx
// crates/svc-admin/ui/src/routes/node-detail/planeSummary.tsx
//
// WHAT:
//   Plane normalization helpers + summary pill UI.
// WHY:
//   Keep route thin and avoid duplicating plane shape normalizations across screens.

import React from 'react'
import type { Health } from './health'

export function planeRestarts(p: any): number {
  const a = p?.restarts
  if (typeof a === 'number' && Number.isFinite(a)) return a
  const b = p?.restart_count
  if (typeof b === 'number' && Number.isFinite(b)) return b
  const c = p?.restartCount
  if (typeof c === 'number' && Number.isFinite(c)) return c
  return 0
}

export function planeReadyBool(p: any): boolean | null {
  const r = p?.ready
  if (typeof r === 'boolean') return r
  if (typeof r === 'string') {
    const s = r.toLowerCase().trim()
    if (s === 'ready' || s === 'true' || s === 'ok') return true
    if (s === 'not_ready' || s === 'not ready' || s === 'false') return false
  }
  return null
}

export function planeHealthNorm(p: any): Health | 'unknown' {
  const h = String(p?.health ?? '').toLowerCase().trim()
  if (h === 'healthy') return 'healthy'
  if (h === 'degraded') return 'degraded'
  if (h === 'down') return 'down'
  return 'unknown'
}

export function computePlaneSummary(planes: any[]) {
  const total = planes.length
  const ready = planes.filter((p) => planeReadyBool(p) === true).length
  const degraded = planes.filter((p) => planeHealthNorm(p) === 'degraded').length
  const down = planes.filter((p) => planeHealthNorm(p) === 'down').length
  const restarts = planes.reduce((acc, p) => acc + planeRestarts(p), 0)
  return { total, ready, degraded, down, restarts }
}

export function Pill(props: {
  tone: 'ok' | 'warn' | 'bad' | 'muted'
  children: React.ReactNode
}) {
  const map: Record<
    typeof props.tone,
    { bg: string; fg: string; bd: string }
  > = {
    ok: {
      bg: 'rgba(16,185,129,0.10)',
      fg: 'rgba(110,231,183,0.95)',
      bd: 'rgba(16,185,129,0.22)',
    },
    warn: {
      bg: 'rgba(251,146,60,0.10)',
      fg: 'rgba(253,186,116,0.95)',
      bd: 'rgba(251,146,60,0.24)',
    },
    bad: {
      bg: 'rgba(244,63,94,0.10)',
      fg: 'rgba(253,164,175,0.95)',
      bd: 'rgba(244,63,94,0.24)',
    },
    muted: {
      bg: 'rgba(255,255,255,0.04)',
      fg: 'rgba(255,255,255,0.85)',
      bd: 'rgba(255,255,255,0.10)',
    },
  }

  const c = map[props.tone]
  return (
    <span
      style={{
        display: 'inline-flex',
        alignItems: 'center',
        gap: 6,
        padding: '4px 8px',
        borderRadius: 999,
        fontSize: 12,
        fontWeight: 850,
        background: c.bg,
        color: c.fg,
        border: `1px solid ${c.bd}`,
        whiteSpace: 'nowrap',
      }}
    >
      {props.children}
    </span>
  )
}

```

### crates/svc-admin/ui/src/routes/node-detail/serviceMap.ts
<a id="crates-svc-admin-ui-src-routes-node-detail-serviceMap-ts"></a>

```ts
// crates/svc-admin/ui/src/routes/node-detail/serviceMap.ts
//
// WHAT:
//   Map plane name -> service name (debug crash helper).
// WHY:
//   Centralize the mapping so debug tooling stays consistent as planes evolve.

export function serviceForPlane(plane: string): string {
  const trimmed = plane.trim()
  if (!trimmed) return trimmed
  if (trimmed.startsWith('svc-')) return trimmed

  switch (trimmed) {
    case 'gateway':
      return 'svc-gateway'
    case 'storage':
      return 'svc-storage'
    case 'index':
      return 'svc-index'
    case 'mailbox':
      return 'svc-mailbox'
    case 'overlay':
      return 'svc-overlay'
    case 'dht':
      return 'svc-dht'
    default:
      return trimmed
  }
}

```

### crates/svc-admin/ui/src/routes/node-detail/useNodeDetail.ts
<a id="crates-svc-admin-ui-src-routes-node-detail-useNodeDetail-ts"></a>

```ts
// crates/svc-admin/ui/src/routes/node-detail/useNodeDetail.ts
//
// WHAT:
//   Single hook that owns NodeDetail data fetching, polling, actions, and dev debug controls.
// WHY:
//   Prevent 1k+ LOC route files by separating orchestration (effects/state) from UI composition.
// INTERACTS:
//   - api/adminClient
//   - dto mirrors in types/admin-api
//   - serviceMap for debug crash mapping
// INVARIANTS:
//   - No overlapping in-flight status/facets polls.
//   - No conditional hooks.
//   - Mutations are derived from ui-config + roles (read-only safe default).

import { useEffect, useRef, useState } from 'react'
import { adminClient } from '../../api/adminClient'
import type {
  AdminStatusView,
  FacetMetricsSummary,
  NodeActionResponse,
} from '../../types/admin-api'
import { serviceForPlane } from './serviceMap'

export function useNodeDetail(nodeId: string) {
  const [status, setStatus] = useState<AdminStatusView | null>(null)
  const [statusLoading, setStatusLoading] = useState(true)
  const [statusError, setStatusError] = useState<string | null>(null)

  const [facets, setFacets] = useState<FacetMetricsSummary[] | null>(null)
  const [facetsLoading, setFacetsLoading] = useState(true)
  const [facetsError, setFacetsError] = useState<string | null>(null)

  const [facetHistory, setFacetHistory] = useState<Record<string, number[]>>({})

  const [readOnlyUi, setReadOnlyUi] = useState(true)
  const [roles, setRoles] = useState<string[]>([])
  const [identityError, setIdentityError] = useState<string | null>(null)
  const [identityLoading, setIdentityLoading] = useState(true)

  const [actionInFlight, setActionInFlight] =
    useState<'reload' | 'shutdown' | null>(null)
  const [actionMessage, setActionMessage] = useState<string | null>(null)
  const [actionError, setActionError] = useState<string | null>(null)

  const devDebugEnabled = import.meta.env.DEV
  const [debugPlane, setDebugPlane] = useState<string>('')
  const [debugInFlight, setDebugInFlight] = useState(false)
  const [debugMessage, setDebugMessage] = useState<string | null>(null)
  const [debugError, setDebugError] = useState<string | null>(null)

  const mountedRef = useRef(true)
  const statusInFlightRef = useRef(false)
  const facetsInFlightRef = useRef(false)

  const STATUS_POLL_MS = 5_000
  const FACETS_POLL_MS = 5_000
  const MAX_SPARK_POINTS = 40

  useEffect(() => {
    mountedRef.current = true
    return () => {
      mountedRef.current = false
    }
  }, [])

  // keep debug default plane seeded when planes arrive
  useEffect(() => {
    const planes: any[] = ((status as any)?.planes as any[]) ?? []
    if (planes.length > 0 && !debugPlane) {
      setDebugPlane(planes[0].name)
    }
  }, [status, debugPlane])

  async function refreshStatus(opts?: { initial?: boolean }) {
    if (!nodeId) return
    if (statusInFlightRef.current) return
    statusInFlightRef.current = true

    const initial = opts?.initial ?? false

    try {
      if (initial) {
        setStatus(null)
        setStatusError(null)
        setStatusLoading(true)
      } else {
        setStatusError(null)
      }

      const data = await adminClient.getNodeStatus(nodeId)
      if (!mountedRef.current) return
      setStatus(data)
    } catch (err) {
      if (!mountedRef.current) return
      setStatusError(
        err instanceof Error ? err.message : 'Failed to load node status.',
      )
    } finally {
      statusInFlightRef.current = false
      if (!mountedRef.current) return
      if (initial) setStatusLoading(false)
    }
  }

  async function refreshFacets(opts?: { initial?: boolean }) {
    if (!nodeId) return
    if (facetsInFlightRef.current) return
    facetsInFlightRef.current = true

    const initial = opts?.initial ?? false

    try {
      if (initial) {
        setFacets(null)
        setFacetsError(null)
        setFacetsLoading(true)
      } else {
        setFacetsError(null)
      }

      const data = await adminClient.getNodeFacetMetrics(nodeId)
      if (!mountedRef.current) return

      setFacets(data)

      setFacetHistory((prev) => {
        const next: Record<string, number[]> = { ...prev }

        for (const facet of data) {
          const key = facet.facet
          const prevSeries = prev[key] ?? []
          const updated = [...prevSeries, facet.rps]
          next[key] =
            updated.length > MAX_SPARK_POINTS
              ? updated.slice(updated.length - MAX_SPARK_POINTS)
              : updated
        }

        return next
      })
    } catch (err) {
      if (!mountedRef.current) return
      setFacetsError(
        err instanceof Error
          ? err.message
          : 'Failed to load facet metrics for this node.',
      )
    } finally {
      facetsInFlightRef.current = false
      if (!mountedRef.current) return
      if (initial) setFacetsLoading(false)
    }
  }

  // status polling
  useEffect(() => {
    if (!nodeId) return

    void refreshStatus({ initial: true })
    const t = window.setInterval(() => void refreshStatus(), STATUS_POLL_MS)
    return () => window.clearInterval(t)
  }, [nodeId])

  // facet polling
  useEffect(() => {
    if (!nodeId) return

    void refreshFacets({ initial: true })
    const t = window.setInterval(() => void refreshFacets(), FACETS_POLL_MS)
    return () => window.clearInterval(t)
  }, [nodeId])

  // identity + ui config (once)
  useEffect(() => {
    let cancelled = false

    setIdentityError(null)
    setIdentityLoading(true)

    ;(async () => {
      try {
        const [uiConfig, me] = await Promise.all([
          adminClient.getUiConfig(),
          adminClient.getMe(),
        ])
        if (cancelled) return
        setReadOnlyUi(uiConfig.readOnly)
        setRoles(me.roles)
      } catch (err) {
        if (cancelled) return
        setIdentityError(
          err instanceof Error
            ? err.message
            : 'Failed to load identity / UI configuration.',
        )
      } finally {
        if (!cancelled) setIdentityLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [])

  const canMutate =
    !readOnlyUi && roles.some((role) => role === 'admin' || role === 'ops')

  async function runAction(kind: 'reload' | 'shutdown') {
    if (!status) return

    setActionInFlight(kind)
    setActionError(null)
    setActionMessage(null)

    try {
      let response: NodeActionResponse
      if (kind === 'reload') {
        response = await adminClient.reloadNode(status.id)
      } else {
        response = await adminClient.shutdownNode(status.id)
      }

      setActionMessage(response.message ?? 'Action completed successfully.')
      await Promise.allSettled([refreshStatus(), refreshFacets()])
    } catch (err) {
      setActionError(
        err instanceof Error
          ? err.message
          : 'Action failed. See logs for more detail.',
      )
    } finally {
      setActionInFlight(null)
    }
  }

  async function runDebugCrash() {
    if (!status || !debugPlane) return

    setDebugInFlight(true)
    setDebugError(null)
    setDebugMessage(null)

    try {
      const service = serviceForPlane(debugPlane)
      const response = await adminClient.debugCrashNode(status.id, service)
      setDebugMessage(
        response.message ?? `Synthetic crash event sent for service "${service}".`,
      )
      await Promise.allSettled([refreshStatus(), refreshFacets()])
    } catch (err) {
      setDebugError(
        err instanceof Error
          ? err.message
          : 'Failed to trigger synthetic crash for this node.',
      )
    } finally {
      setDebugInFlight(false)
    }
  }

  return {
    status,
    statusLoading,
    statusError,

    facets,
    facetsLoading,
    facetsError,
    facetHistory,

    identityLoading,
    identityError,

    canMutate,
    actionInFlight,
    actionMessage,
    actionError,
    runAction,

    devDebugEnabled,
    debugPlane,
    setDebugPlane,
    debugInFlight,
    debugMessage,
    debugError,
    runDebugCrash,
  }
}

```

### crates/svc-admin/ui/src/routes/node-detail/utilization.tsx
<a id="crates-svc-admin-ui-src-routes-node-detail-utilization-tsx"></a>

```tsx
// crates/svc-admin/ui/src/routes/node-detail/utilization.tsx
//
// WHAT:
//   Deterministic mock utilization widgets (CPU/RAM/Storage/Bandwidth) for NodeDetail.
// WHY:
//   These are high-LOC UI primitives; keep them out of the route to preserve readability.
// INVARIANTS:
//   - Deterministic per nodeId (stable mock).
//   - Clamp percentages 0..100.
//   - Pure presentational components.

import React from 'react'

export function seedFromString(s: string): number {
  let acc = 0
  for (let i = 0; i < s.length; i++) acc = (acc * 31 + s.charCodeAt(i)) >>> 0
  return acc >>> 0
}

function clampPct(n: number): number {
  if (!Number.isFinite(n)) return 0
  return Math.max(0, Math.min(100, n))
}

export function mockNodeUtilization(nodeId: string): {
  cpuPct: number
  ramPct: number
  storagePct: number
  bandwidthPct: number
} {
  const seed = seedFromString(nodeId || 'node')
  const cpu = 12 + (seed % 79) // 12..90
  const ram = 25 + ((seed >>> 8) % 70) // 25..94
  const storage = 18 + ((seed >>> 16) % 78) // 18..95
  const bw = 8 + ((seed >>> 24) % 88) // 8..95
  return {
    cpuPct: clampPct(cpu),
    ramPct: clampPct(ram),
    storagePct: clampPct(storage),
    bandwidthPct: clampPct(bw),
  }
}

export function MiniMetricCard(props: {
  title: 'RAM' | 'CPU' | 'Storage' | 'Bandwidth'
  children: React.ReactNode
}) {
  return (
    <div
      style={{
        borderRadius: 16,
        background:
          'linear-gradient(180deg, rgba(255,255,255,0.035), rgba(255,255,255,0.015))',
        border: '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.12))',
        boxShadow: '0 10px 30px rgba(0,0,0,0.22)',
        padding: '8px 10px',
        minHeight: 80,
        overflow: 'hidden',
      }}
    >
      <div style={{ fontWeight: 900, letterSpacing: '0.02em' }}>
        {props.title}
      </div>
      <div style={{ marginTop: 10 }}>{props.children}</div>
    </div>
  )
}

export function ThermometerGauge(props: { pct: number; compact?: boolean }) {
  const pct = clampPct(props.pct)
  const compact = props.compact ?? false
  const fill = pct / 100

  return (
    <div
      style={{
        display: 'flex',
        alignItems: 'center',
        gap: compact ? '0.75rem' : '1rem',
      }}
    >
      <div
        style={{
          width: compact ? 40 : 46,
          height: compact ? 96 : 118,
          borderRadius: 999,
          position: 'relative',
          overflow: 'hidden',
          background: 'rgba(255,255,255,0.04)',
          border: '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.12))',
          boxShadow: '0 0 0 1px rgba(0,0,0,0.18) inset',
          flex: '0 0 auto',
        }}
        aria-hidden="true"
      >
        <div
          style={{
            position: 'absolute',
            inset: 0,
            opacity: 0.25,
            background:
              'linear-gradient(to bottom, rgba(255,255,255,0.12) 1px, transparent 1px)',
            backgroundSize: '100% 14px',
            pointerEvents: 'none',
          }}
        />
        <div
          style={{
            position: 'absolute',
            left: 6,
            right: 6,
            bottom: 6,
            height: `calc(${fill * 100}% - 12px)`,
            minHeight: 10,
            borderRadius: 999,
            background:
              'linear-gradient(180deg, rgba(99,102,241,0.85) 0%, rgba(250,204,21,0.85) 55%, rgba(251,146,60,0.9) 80%, rgba(244,63,94,0.9) 100%)',
            filter: 'saturate(1.15)',
          }}
        />
        <div
          style={{
            position: 'absolute',
            inset: 0,
            background:
              'linear-gradient(90deg, rgba(255,255,255,0.18), rgba(255,255,255,0.02) 55%, rgba(255,255,255,0.08))',
            opacity: 0.12,
            pointerEvents: 'none',
          }}
        />
      </div>

      <div style={{ minWidth: 0 }}>
        <div
          style={{
            fontSize: compact ? '1.65rem' : '2rem',
            fontWeight: 900,
            lineHeight: 1,
          }}
        >
          {pct.toFixed(0)}%
        </div>
        <div
          style={{
            fontSize: compact ? '0.82rem' : '0.9rem',
            opacity: 0.78,
            marginTop: 4,
          }}
        >
          Memory in use (mock)
        </div>
      </div>
    </div>
  )
}

export function SpeedometerGauge(props: { pct: number; compact?: boolean }) {
  const pct = clampPct(props.pct)
  const compact = props.compact ?? false
  const angle = -110 + (pct / 100) * 220

  const cx = 78
  const cy = 82
  const r = 58

  const start = polarToCartesian(cx, cy, r, 200)
  const end = polarToCartesian(cx, cy, r, -20)
  const arcPath = describeArc(cx, cy, r, 200, -20)

  const svgW = compact ? 132 : 156
  const svgH = compact ? 98 : 118

  return (
    <div
      style={{
        display: 'flex',
        alignItems: 'center',
        gap: compact ? '0.75rem' : '1rem',
      }}
    >
      <svg width={svgW} height={svgH} viewBox="0 0 156 118" aria-hidden="true">
        <path
          d={arcPath}
          fill="none"
          stroke="rgba(255,255,255,0.10)"
          strokeWidth="12"
          strokeLinecap="round"
        />
        <path
          d={describeArc(cx, cy, r, 200, 200 - (pct / 100) * 220)}
          fill="none"
          stroke="rgba(99,102,241,0.85)"
          strokeWidth="12"
          strokeLinecap="round"
        />
        {Array.from({ length: 9 }).map((_, i) => {
          const a = 200 - (i / 8) * 220
          const p1 = polarToCartesian(cx, cy, r + 2, a)
          const p2 = polarToCartesian(cx, cy, r - 10, a)
          return (
            <line
              key={i}
              x1={p1.x}
              y1={p1.y}
              x2={p2.x}
              y2={p2.y}
              stroke="rgba(255,255,255,0.12)"
              strokeWidth={i % 2 === 0 ? 2 : 1}
            />
          )
        })}

        <g transform={`rotate(${angle} ${cx} ${cy})`}>
          <line
            x1={cx}
            y1={cy}
            x2={cx + 54}
            y2={cy}
            stroke="rgba(191,219,254,0.95)"
            strokeWidth="3"
            strokeLinecap="round"
          />
          <circle cx={cx} cy={cy} r="7" fill="rgba(255,255,255,0.10)" />
          <circle cx={cx} cy={cy} r="4" fill="rgba(99,102,241,0.95)" />
        </g>

        <circle cx={start.x} cy={start.y} r="3" fill="rgba(251,146,60,0.7)" />
        <circle cx={end.x} cy={end.y} r="3" fill="rgba(16,185,129,0.55)" />
      </svg>

      <div style={{ minWidth: 0 }}>
        <div
          style={{
            fontSize: compact ? '1.65rem' : '2rem',
            fontWeight: 900,
            lineHeight: 1,
          }}
        >
          {pct.toFixed(0)}%
        </div>
        <div
          style={{
            fontSize: compact ? '0.82rem' : '0.9rem',
            opacity: 0.78,
            marginTop: 4,
          }}
        >
          CPU utilization (mock)
        </div>
      </div>
    </div>
  )
}

export function StorageWaffleGauge(props: { pct: number; compact?: boolean }) {
  const pct = clampPct(props.pct)
  const compact = props.compact ?? false

  const cols = 10
  const rows = 5
  const total = cols * rows
  const filled = Math.round((pct / 100) * total)

  const size = compact ? 12 : 14
  const gap = compact ? 4 : 5

  return (
    <div
      style={{
        display: 'flex',
        alignItems: 'center',
        gap: compact ? '0.75rem' : '1rem',
      }}
    >
      <div
        style={{
          display: 'grid',
          gridTemplateColumns: `repeat(${cols}, ${size}px)`,
          gridAutoRows: `${size}px`,
          gap: `${gap}px`,
          padding: 8,
          borderRadius: 14,
          background: 'rgba(255,255,255,0.03)',
          border: '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.12))',
          boxShadow: '0 0 0 1px rgba(0,0,0,0.18) inset',
          flex: '0 0 auto',
        }}
        aria-hidden="true"
      >
        {Array.from({ length: total }).map((_, i) => {
          const on = i < filled
          return (
            <div
              key={i}
              style={{
                width: size,
                height: size,
                borderRadius: 4,
                background: on
                  ? 'rgba(99,102,241,0.70)'
                  : 'rgba(255,255,255,0.07)',
                boxShadow: on ? '0 0 10px rgba(99,102,241,0.18)' : 'none',
              }}
            />
          )
        })}
      </div>

      <div style={{ minWidth: 0 }}>
        <div
          style={{
            fontSize: compact ? '1.65rem' : '2rem',
            fontWeight: 900,
            lineHeight: 1,
          }}
        >
          {pct.toFixed(0)}%
        </div>
        <div
          style={{
            fontSize: compact ? '0.82rem' : '0.9rem',
            opacity: 0.78,
            marginTop: 4,
          }}
        >
          Storage used (mock)
        </div>
      </div>
    </div>
  )
}

export function BandwidthBarsGauge(props: {
  pct: number
  seed: number
  compact?: boolean
}) {
  const pct = clampPct(props.pct)
  const compact = props.compact ?? false

  const bars = 14
  const active = Math.max(1, Math.round((pct / 100) * bars))

  const barW = compact ? 7 : 8
  const barGap = compact ? 5 : 6
  const maxH = compact ? 44 : 52
  const baseH = compact ? 14 : 16

  const colorForIndex = (idx: number) => {
    const t = idx / Math.max(1, bars - 1) // 0..1
    if (t < 0.6) return 'rgba(34,197,94,0.85)'
    if (t < 0.85) return 'rgba(250,204,21,0.85)'
    return 'rgba(244,63,94,0.85)'
  }

  return (
    <div
      style={{
        display: 'flex',
        alignItems: 'center',
        gap: compact ? '0.75rem' : '1rem',
      }}
    >
      <div
        style={{
          padding: 10,
          borderRadius: 14,
          background: 'rgba(255,255,255,0.03)',
          border: '1px solid var(--svc-admin-color-border, rgba(255,255,255,0.12))',
          boxShadow: '0 0 0 1px rgba(0,0,0,0.18) inset',
          flex: '0 0 auto',
        }}
        aria-hidden="true"
      >
        <div
          style={{
            display: 'flex',
            alignItems: 'flex-end',
            gap: barGap,
            height: maxH,
          }}
        >
          {Array.from({ length: bars }).map((_, i) => {
            const jitter = ((props.seed >>> (i % 16)) & 0x7) / 7 // 0..1
            const h = Math.round(baseH + jitter * (maxH - baseH))
            const on = i < active
            const col = colorForIndex(i)

            return (
              <div
                key={i}
                style={{
                  width: barW,
                  height: h,
                  borderRadius: 999,
                  background: on ? col : 'rgba(255,255,255,0.08)',
                  boxShadow: on
                    ? `0 0 10px ${col.replace('0.85', '0.18')}`
                    : 'none',
                  opacity: on ? 1 : 0.85,
                }}
              />
            )
          })}
        </div>
      </div>

      <div style={{ minWidth: 0 }}>
        <div
          style={{
            fontSize: compact ? '1.65rem' : '2rem',
            fontWeight: 900,
            lineHeight: 1,
          }}
        >
          {pct.toFixed(0)}%
        </div>
        <div
          style={{
            fontSize: compact ? '0.82rem' : '0.9rem',
            opacity: 0.78,
            marginTop: 4,
          }}
        >
          Bandwidth in use (mock)
        </div>
      </div>
    </div>
  )
}

function polarToCartesian(cx: number, cy: number, r: number, angleDeg: number) {
  const a = ((angleDeg - 90) * Math.PI) / 180
  return { x: cx + r * Math.cos(a), y: cy + r * Math.sin(a) }
}

function describeArc(
  cx: number,
  cy: number,
  r: number,
  startAngle: number,
  endAngle: number,
) {
  const s = polarToCartesian(cx, cy, r, startAngle)
  const e = polarToCartesian(cx, cy, r, endAngle)
  const largeArcFlag = Math.abs(endAngle - startAngle) <= 180 ? '0' : '1'
  return `M ${s.x} ${s.y} A ${r} ${r} 0 ${largeArcFlag} 1 ${e.x} ${e.y}`
}

```

### crates/svc-admin/ui/src/routes/node-list/helpers.ts
<a id="crates-svc-admin-ui-src-routes-node-list-helpers-ts"></a>

```ts
// crates/svc-admin/ui/src/routes/node-list/helpers.ts
//
// RO:WHAT — Helpers for NodeListPage view-model (health + summaries + metrics freshness).
// RO:WHY  — Keep the route file thin and keep logic shared with future polling/refetch.

import type { AdminStatusView, PlaneStatus, FacetMetricsSummary } from '../../types/admin-api'
import type { NodeStatusSummary, MetricsHealth } from '../../components/nodes/NodeCard'

type Health = 'healthy' | 'degraded' | 'down'

export function deriveOverallHealth(planes: PlaneStatus[]): Health {
  if (!planes.length) return 'degraded'
  if (planes.some((p) => p.health === 'down')) return 'down'
  if (planes.some((p) => p.health === 'degraded')) return 'degraded'
  return 'healthy'
}

export function buildSummary(status: AdminStatusView | null): NodeStatusSummary | undefined {
  if (!status) return undefined

  const planeCount = status.planes.length
  const readyCount = status.planes.filter((p) => p.ready).length
  const totalRestarts = status.planes.reduce((sum, p) => sum + (p.restart_count ?? 0), 0)

  return {
    overallHealth: deriveOverallHealth(status.planes),
    planeCount,
    readyCount,
    totalRestarts,
  }
}

export function classifyMetricsHealth(
  facets: FacetMetricsSummary[] | null,
  error: string | null,
): MetricsHealth | null {
  if (error) return 'unreachable'

  if (!facets || facets.length === 0) return 'stale'

  const ages = facets
    .map((f) => f.last_sample_age_secs)
    .filter((v): v is number => v !== null && Number.isFinite(v))

  if (ages.length === 0) return 'stale'

  const minAge = Math.min(...ages)
  const FRESH_THRESHOLD_SECS = 30
  return minAge <= FRESH_THRESHOLD_SECS ? 'fresh' : 'stale'
}

```

### crates/svc-admin/ui/src/routes/node-list/useNodeListData.ts
<a id="crates-svc-admin-ui-src-routes-node-list-useNodeListData-ts"></a>

```ts
// crates/svc-admin/ui/src/routes/node-list/useNodeListData.ts
//
// RO:WHAT — Data hook for NodeListPage (nodes + per-node status + per-node metrics freshness).
// RO:WHY  — Future-proof: polling, refresh buttons, concurrency limits, caching, etc.
// RO:INVARIANTS —
//   - No conditional hooks.
//   - Default selection: first node after initial registry load.
//   - Background loads are concurrency-limited (avoid stampeding nodes).
//   - Cancels state updates on unmount.

import { useEffect, useMemo, useRef, useState } from 'react'
import { adminClient } from '../../api/adminClient'
import type {
  AdminStatusView,
  NodeSummary,
  FacetMetricsSummary,
} from '../../types/admin-api'
import type { MetricsHealth } from '../../components/nodes/NodeCard'
import { classifyMetricsHealth } from './helpers'

type NodeStatusState = {
  loading: boolean
  error: string | null
  status: AdminStatusView | null
}

type NodeMetricsState = {
  loading: boolean
  error: string | null
  health: MetricsHealth | null
}

async function runWithConcurrency<T>(
  items: T[],
  limit: number,
  worker: (item: T) => Promise<void>,
) {
  const n = Math.max(1, Math.floor(limit))
  const queue = items.slice()
  const runners = Array.from({ length: Math.min(n, queue.length) }).map(async () => {
    while (queue.length > 0) {
      const item = queue.shift()
      if (item === undefined) return
      await worker(item)
    }
  })
  await Promise.all(runners)
}

export function useNodeListData(opts?: { concurrency?: number }) {
  const concurrency = opts?.concurrency ?? 4

  const [nodes, setNodes] = useState<NodeSummary[]>([])
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)

  const [statusById, setStatusById] = useState<Record<string, NodeStatusState>>({})
  const [metricsById, setMetricsById] = useState<Record<string, NodeMetricsState>>({})

  const [selectedNodeId, setSelectedNodeId] = useState<string | null>(null)

  const mountedRef = useRef(true)
  useEffect(() => {
    mountedRef.current = true
    return () => {
      mountedRef.current = false
    }
  }, [])

  // --- Load node registry (once) -------------------------------------------

  useEffect(() => {
    let cancelled = false

    setLoading(true)
    setError(null)

    ;(async () => {
      try {
        const data = await adminClient.getNodes()
        if (cancelled || !mountedRef.current) return

        setNodes(data)

        // Default selection: first node in the list (only once on initial load).
        setSelectedNodeId((prev) => {
          if (prev) return prev
          return data.length > 0 ? data[0].id : null
        })
      } catch (err) {
        if (cancelled || !mountedRef.current) return
        const msg = err instanceof Error ? err.message : 'Failed to load nodes.'
        setError(msg)
      } finally {
        if (!cancelled && mountedRef.current) setLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [])

  // --- Load per-node status in background ----------------------------------

  useEffect(() => {
    if (!nodes.length) return

    let cancelled = false

    ;(async () => {
      // Mark all nodes as "loading" if we don't already have a state.
      setStatusById((prev) => {
        const next = { ...prev }
        for (const n of nodes) {
          if (!next[n.id]) next[n.id] = { loading: true, error: null, status: null }
        }
        return next
      })

      await runWithConcurrency(nodes, concurrency, async (node) => {
        const id = node.id
        try {
          const data = await adminClient.getNodeStatus(id)
          if (cancelled || !mountedRef.current) return

          setStatusById((prev) => ({
            ...prev,
            [id]: { loading: false, error: null, status: data },
          }))
        } catch (err) {
          if (cancelled || !mountedRef.current) return
          const msg = err instanceof Error ? err.message : 'Failed to load node status'
          setStatusById((prev) => ({
            ...prev,
            [id]: { loading: false, error: msg, status: null },
          }))
        }
      })
    })()

    return () => {
      cancelled = true
    }
  }, [nodes, concurrency])

  // --- Load per-node metrics freshness in background ------------------------

  useEffect(() => {
    if (!nodes.length) return

    let cancelled = false

    ;(async () => {
      setMetricsById((prev) => {
        const next = { ...prev }
        for (const n of nodes) {
          if (!next[n.id]) next[n.id] = { loading: true, error: null, health: null }
        }
        return next
      })

      await runWithConcurrency(nodes, concurrency, async (node) => {
        const id = node.id
        try {
          const data: FacetMetricsSummary[] = await adminClient.getNodeFacetMetrics(id)
          if (cancelled || !mountedRef.current) return

          const health = classifyMetricsHealth(data, null)

          setMetricsById((prev) => ({
            ...prev,
            [id]: { loading: false, error: null, health },
          }))
        } catch (err) {
          if (cancelled || !mountedRef.current) return
          const msg = err instanceof Error ? err.message : 'Failed to load facet metrics'
          const health: MetricsHealth = 'unreachable'

          setMetricsById((prev) => ({
            ...prev,
            [id]: { loading: false, error: msg, health },
          }))
        }
      })
    })()

    return () => {
      cancelled = true
    }
  }, [nodes, concurrency])

  // --- Derived selections ---------------------------------------------------

  const effectiveSelectedId = useMemo(() => {
    return selectedNodeId || (nodes.length > 0 ? nodes[0].id : null)
  }, [selectedNodeId, nodes])

  const selectedNode = useMemo(() => {
    if (!effectiveSelectedId) return null
    return nodes.find((n) => n.id === effectiveSelectedId) ?? null
  }, [effectiveSelectedId, nodes])

  const selectedStatusState = selectedNode ? statusById[selectedNode.id] : undefined
  const selectedMetricsState = selectedNode ? metricsById[selectedNode.id] : undefined

  return {
    nodes,
    loading,
    error,

    statusById,
    metricsById,

    selectedNodeId,
    setSelectedNodeId,

    effectiveSelectedId,
    selectedNode,
    selectedStatusState,
    selectedMetricsState,
  }
}

```

### crates/svc-admin/ui/src/routes/node-storage/format.ts
<a id="crates-svc-admin-ui-src-routes-node-storage-format-ts"></a>

```ts
// crates/svc-admin/ui/src/routes/node-storage/format.ts

export function fmtBytes(bytes: number): string {
  if (!Number.isFinite(bytes) || bytes < 0) return 'n/a'
  const units = ['B', 'KiB', 'MiB', 'GiB', 'TiB'] as const
  let v = bytes
  let i = 0
  while (v >= 1024 && i < units.length - 1) {
    v /= 1024
    i++
  }
  const digits = i === 0 ? 0 : i <= 2 ? 1 : 2
  return `${v.toFixed(digits)} ${units[i]}`
}

export function fmtBps(bps: number | null): string {
  if (bps === null) return 'n/a'
  return `${fmtBytes(bps)}/s`
}

export function clamp01(x: number): number {
  if (!Number.isFinite(x)) return 0
  return Math.max(0, Math.min(1, x))
}

```

### crates/svc-admin/ui/src/routes/node-storage/helpers.ts
<a id="crates-svc-admin-ui-src-routes-node-storage-helpers-ts"></a>

```ts
// crates/svc-admin/ui/src/routes/node-storage/helpers.ts
//
// RO:WHAT — Small helpers (endpoint detection + health/metrics derivations).
// RO:WHY  — Keep the route file thin and avoid duplicating heuristics.

import type { FacetMetricsSummary } from '../../types/admin-api'

type FetchErr = Error & { status?: number }

export function isMissingEndpoint(err: unknown): boolean {
  const e = err as FetchErr
  const s = e && typeof e.status === 'number' ? e.status : undefined
  if (s === 404 || s === 405 || s === 501) return true

  // Fallback heuristic: handleResponse embeds status code into the message.
  const msg = e?.message ?? ''
  return (
    msg.includes(' 404 ') ||
    msg.includes(' 405 ') ||
    msg.includes(' 501 ') ||
    msg.toLowerCase().includes('not found') ||
    msg.toLowerCase().includes('not implemented')
  )
}

export function deriveOverallHealthOrNull(
  planes: Array<{ health: 'healthy' | 'degraded' | 'down' }> | undefined,
): 'healthy' | 'degraded' | 'down' | null {
  if (!planes || planes.length === 0) return null
  if (planes.some((p) => p.health === 'down')) return 'down'
  if (planes.some((p) => p.health === 'degraded')) return 'degraded'
  return 'healthy'
}

export function computeMetricsHealth(
  facets: FacetMetricsSummary[] | null,
  error: string | null,
): 'fresh' | 'stale' | 'unreachable' {
  if (error) return 'unreachable'

  if (!facets || facets.length === 0) return 'stale'

  const ages = facets
    .map((f) => f.last_sample_age_secs)
    .filter((v): v is number => v !== null && Number.isFinite(v))

  if (ages.length === 0) return 'stale'

  const minAge = Math.min(...ages)
  const FRESH_THRESHOLD_SECS = 30
  return minAge <= FRESH_THRESHOLD_SECS ? 'fresh' : 'stale'
}

```

### crates/svc-admin/ui/src/routes/node-storage/mock.ts
<a id="crates-svc-admin-ui-src-routes-node-storage-mock-ts"></a>

```ts
// crates/svc-admin/ui/src/routes/node-storage/mock.ts
//
// RO:WHAT — Deterministic mock fallback for storage + DB inventory.
// RO:WHY  — When node endpoints are missing, keep UI usable without lying about raw FS access.
// RO:INVARIANTS —
//   - Deterministic per nodeId.
//   - Read-only.
//   - Curated fields only.

import type { StorageSummaryDto, DatabaseEntryDto, DatabaseDetailDto } from '../../types/admin-api'

export function mockStorageSummary(nodeId: string): StorageSummaryDto {
  const seed = Array.from(nodeId).reduce((acc, c) => acc + c.charCodeAt(0), 0)
  const total = 512 * 1024 * 1024 * 1024 // 512 GiB
  const used = (96 + (seed % 220)) * 1024 * 1024 * 1024 // 96..316 GiB
  const clampedUsed = Math.min(used, total - 8 * 1024 * 1024 * 1024)
  const free = total - clampedUsed

  return {
    fsType: 'ext4',
    mount: '/',
    totalBytes: total,
    usedBytes: clampedUsed,
    freeBytes: free,
    ioReadBps: 12_500_000 + (seed % 7_500_000),
    ioWriteBps: 8_500_000 + (seed % 6_000_000),
  }
}

function modeLooksWorldReadable(mode: string): boolean {
  const last = mode.trim().slice(-1)
  return last === '4' || last === '5' || last === '6' || last === '7'
}

function modeLooksWorldWritable(mode: string): boolean {
  const last = mode.trim().slice(-1)
  return last === '2' || last === '3' || last === '6' || last === '7'
}

export function mockDatabases(nodeId: string): DatabaseEntryDto[] {
  const seed = Array.from(nodeId).reduce((acc, c) => acc + c.charCodeAt(0), 0)
  const bump = (n: number) => n + (seed % 17) * 1024 * 1024

  const list: DatabaseEntryDto[] = [
    {
      name: 'svc-index.sled',
      engine: 'sled',
      sizeBytes: bump(1_250_000_000),
      mode: '0750',
      owner: 'ron:ron',
      health: 'ok',
      notes: 'Name → ContentId resolution indexes.',
    },
    {
      name: 'svc-storage.cas',
      engine: 'fs-cas',
      sizeBytes: bump(88_500_000_000),
      mode: '0700',
      owner: 'ron:ron',
      health: 'ok',
      notes: 'Content-addressed object store (b3:*).',
    },
    {
      name: 'svc-overlay.sled',
      engine: 'sled',
      sizeBytes: bump(4_800_000_000),
      mode: '0755',
      owner: 'ron:ron',
      health: 'degraded',
      notes: '⚠ world-readable (policy warning).',
    },
  ]

  return list.map((d) => ({
    ...d,
    worldReadable: modeLooksWorldReadable(d.mode),
    worldWritable: modeLooksWorldWritable(d.mode),
  }))
}

export function mockDatabaseDetail(nodeId: string, name: string): DatabaseDetailDto {
  const list = mockDatabases(nodeId)
  const hit = list.find((d) => d.name === name) ?? list[0]
  const warnings: string[] = []

  if (hit.worldReadable) warnings.push('Permissions: database appears world-readable.')
  if (hit.worldWritable) warnings.push('Permissions: database appears world-writable (high risk).')
  if (hit.health !== 'ok') {
    warnings.push('Health: database reports degraded status (investigate I/O or compaction).')
  }

  return {
    name: hit.name,
    engine: hit.engine,
    sizeBytes: hit.sizeBytes,
    mode: hit.mode,
    owner: hit.owner,
    health: hit.health,
    pathAlias: hit.engine === 'fs-cas' ? 'data/cas' : 'data/db',
    fileCount: hit.engine === 'fs-cas' ? 128_400 : 3_200,
    lastCompaction: hit.engine === 'sled' ? '2025-12-12T19:19:00Z' : null,
    approxKeys: hit.engine === 'sled' ? 12_400_000 : null,
    warnings,
  }
}

```

### crates/svc-admin/ui/src/routes/node-storage/ringGauge.tsx
<a id="crates-svc-admin-ui-src-routes-node-storage-ringGauge-tsx"></a>

```tsx
// crates/svc-admin/ui/src/routes/node-storage/ringGauge.tsx
//
// RO:WHAT — Ring gauge widget + DB icon for NodeStoragePage.
// RO:WHY  — Keep UI primitives out of the route file; reuse across storage subroutes.

import React from 'react'

export type GaugeLevel = 'ok' | 'warn' | 'near' | 'crit'

// Interprets "how full" as "how much of node disk is consumed by this DB".
export function gaugeLevelFromPct(pct: number): GaugeLevel {
  if (pct >= 60) return 'crit'
  if (pct >= 40) return 'near'
  if (pct >= 20) return 'warn'
  return 'ok'
}

export function gaugeColor(level: GaugeLevel): string {
  // Prefer theme vars; provide safe fallbacks so we don’t break if a var is missing.
  switch (level) {
    case 'ok':
      return 'var(--svc-admin-color-accent, #3b82f6)'
    case 'warn':
      return 'var(--svc-admin-color-warning-text, #facc15)'
    case 'near':
      return 'var(--svc-admin-color-warning, #fb923c)'
    case 'crit':
      return 'var(--svc-admin-color-danger-text, #ef4444)'
  }
}

export function RingGauge(props: {
  pct: number // 0..100
  label: string
  sublabel?: string
  color: string
  onClick?: () => void
}) {
  const pct = Math.max(0, Math.min(100, props.pct))
  const radius = 36
  const stroke = 8
  const c = 2 * Math.PI * radius
  const dash = (pct / 100) * c
  const gap = c - dash

  return (
    <div
      className="svc-admin-card"
      style={{
        padding: '0.9rem 1rem',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        gap: '0.55rem',
        cursor: props.onClick ? 'pointer' : 'default',
        userSelect: 'none',
      }}
      onClick={props.onClick}
      title={props.label}
    >
      <div style={{ position: 'relative', width: 96, height: 96 }}>
        <svg width="96" height="96" viewBox="0 0 96 96" aria-hidden="true">
          <circle
            cx="48"
            cy="48"
            r={radius}
            fill="none"
            stroke="var(--svc-admin-color-border, rgba(255,255,255,0.12))"
            strokeWidth={stroke}
            opacity={0.9}
          />
          <circle
            cx="48"
            cy="48"
            r={radius}
            fill="none"
            stroke={props.color}
            strokeWidth={stroke}
            strokeLinecap="round"
            strokeDasharray={`${dash} ${gap}`}
            transform="rotate(-90 48 48)"
          />
        </svg>

        <div
          style={{
            position: 'absolute',
            inset: 0,
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center',
            gap: '0.1rem',
          }}
        >
          <div style={{ fontSize: '1.05rem', fontWeight: 800, lineHeight: 1 }}>
            {pct.toFixed(0)}%
          </div>
          <div style={{ fontSize: '0.75rem', opacity: 0.85, lineHeight: 1 }}>
            of disk
          </div>
        </div>
      </div>

      <div style={{ textAlign: 'center', width: '100%' }}>
        <div style={{ fontWeight: 750, fontSize: '0.95rem', overflowWrap: 'anywhere' }}>
          {props.label}
        </div>
        {props.sublabel && (
          <div style={{ fontSize: '0.8rem', opacity: 0.8, marginTop: '0.15rem' }}>
            {props.sublabel}
          </div>
        )}
      </div>
    </div>
  )
}

export function DbIcon() {
  return (
    <svg
      width="18"
      height="18"
      viewBox="0 0 24 24"
      aria-hidden="true"
      style={{ opacity: 0.9 }}
    >
      <path
        d="M12 2c4.97 0 9 1.79 9 4s-4.03 4-9 4-9-1.79-9-4 4.03-4 9-4Z"
        fill="var(--svc-admin-color-accent, #3b82f6)"
        opacity="0.35"
      />
      <path
        d="M3 6v6c0 2.21 4.03 4 9 4s9-1.79 9-4V6"
        fill="none"
        stroke="var(--svc-admin-color-accent, #3b82f6)"
        strokeWidth="1.6"
        opacity="0.95"
      />
      <path
        d="M3 12v6c0 2.21 4.03 4 9 4s9-1.79 9-4v-6"
        fill="none"
        stroke="var(--svc-admin-color-accent, #3b82f6)"
        strokeWidth="1.6"
        opacity="0.75"
      />
      <path
        d="M3 6c0 2.21 4.03 4 9 4s9-1.79 9-4"
        fill="none"
        stroke="var(--svc-admin-color-accent, #3b82f6)"
        strokeWidth="1.6"
        opacity="0.95"
      />
    </svg>
  )
}

```

### crates/svc-admin/ui/src/routes/node-storage/useNodeStorage.ts
<a id="crates-svc-admin-ui-src-routes-node-storage-useNodeStorage-ts"></a>

```ts
// crates/svc-admin/ui/src/routes/node-storage/useNodeStorage.ts
//
// RO:WHAT — Hook for NodeStoragePage (fetching + optional endpoints + safe fallbacks).
// RO:WHY  — Prevent large route files; keep all effects/state in one place.
// RO:INVARIANTS —
//   - Read-only: no mutations.
//   - Missing endpoints (404/405/501) => deterministic mock data.
//   - No conditional hooks; effects are stable.
//   - Selected DB is kept valid as DB list changes.

import { useEffect, useState } from 'react'
import { adminClient } from '../../api/adminClient'
import type {
  AdminStatusView,
  FacetMetricsSummary,
  StorageSummaryDto,
  DatabaseEntryDto,
  DatabaseDetailDto,
} from '../../types/admin-api'
import { isMissingEndpoint } from './helpers'
import { mockStorageSummary, mockDatabases, mockDatabaseDetail } from './mock'

type DataSource = 'live' | 'mock'

export function useNodeStorage(nodeId: string) {
  // --- status / metrics ----------------------------------------------------
  const [status, setStatus] = useState<AdminStatusView | null>(null)
  const [statusLoading, setStatusLoading] = useState(true)
  const [statusError, setStatusError] = useState<string | null>(null)

  const [facets, setFacets] = useState<FacetMetricsSummary[] | null>(null)
  const [facetsLoading, setFacetsLoading] = useState(true)
  const [facetsError, setFacetsError] = useState<string | null>(null)

  // --- storage/db endpoints (optional) -------------------------------------
  const [storage, setStorage] = useState<StorageSummaryDto | null>(null)
  const [storageLoading, setStorageLoading] = useState(true)
  const [storageError, setStorageError] = useState<string | null>(null)
  const [storageSource, setStorageSource] = useState<DataSource>('mock')

  const [databases, setDatabases] = useState<DatabaseEntryDto[]>([])
  const [dbLoading, setDbLoading] = useState(true)
  const [dbError, setDbError] = useState<string | null>(null)
  const [dbSource, setDbSource] = useState<DataSource>('mock')

  const [selectedDb, setSelectedDb] = useState<string | null>(null)
  const [dbDetail, setDbDetail] = useState<DatabaseDetailDto | null>(null)
  const [dbDetailLoading, setDbDetailLoading] = useState(false)
  const [dbDetailError, setDbDetailError] = useState<string | null>(null)

  // ------------------------ effects ----------------------------------------

  useEffect(() => {
    if (!nodeId) {
      setStatus(null)
      setStatusLoading(false)
      setStatusError('Missing node id in route.')
      return
    }

    let cancelled = false
    setStatusLoading(true)
    setStatusError(null)

    ;(async () => {
      try {
        const data = await adminClient.getNodeStatus(nodeId)
        if (cancelled) return
        setStatus(data)
      } catch (err) {
        if (cancelled) return
        const msg = err instanceof Error ? err.message : 'Failed to load node status.'
        setStatusError(msg)
      } finally {
        if (!cancelled) setStatusLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [nodeId])

  useEffect(() => {
    if (!nodeId) {
      setFacets(null)
      setFacetsLoading(false)
      setFacetsError('Missing node id in route.')
      return
    }

    let cancelled = false
    setFacetsLoading(true)
    setFacetsError(null)

    ;(async () => {
      try {
        const data = await adminClient.getNodeFacetMetrics(nodeId)
        if (cancelled) return
        setFacets(data)
      } catch (err) {
        if (cancelled) return
        const msg = err instanceof Error ? err.message : 'Failed to load facet metrics.'
        setFacetsError(msg)
      } finally {
        if (!cancelled) setFacetsLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [nodeId])

  useEffect(() => {
    if (!nodeId) {
      setStorage(mockStorageSummary(''))
      setStorageSource('mock')
      setStorageLoading(false)
      setStorageError('Missing node id in route.')
      return
    }

    let cancelled = false
    setStorageLoading(true)
    setStorageError(null)

    ;(async () => {
      try {
        const live = await adminClient.getNodeStorageSummary(nodeId)
        if (cancelled) return
        setStorage(live)
        setStorageSource('live')
      } catch (err) {
        if (cancelled) return

        if (isMissingEndpoint(err)) {
          setStorage(mockStorageSummary(nodeId))
          setStorageSource('mock')
        } else {
          const msg = err instanceof Error ? err.message : 'Failed to load storage summary.'
          setStorageError(msg)
          setStorage(mockStorageSummary(nodeId))
          setStorageSource('mock')
        }
      } finally {
        if (!cancelled) setStorageLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [nodeId])

  useEffect(() => {
    if (!nodeId) {
      setDatabases(mockDatabases(''))
      setDbSource('mock')
      setDbLoading(false)
      setDbError('Missing node id in route.')
      return
    }

    let cancelled = false
    setDbLoading(true)
    setDbError(null)

    ;(async () => {
      try {
        const live = await adminClient.getNodeDatabases(nodeId)
        if (cancelled) return
        setDatabases(live)
        setDbSource('live')
      } catch (err) {
        if (cancelled) return

        if (isMissingEndpoint(err)) {
          setDatabases(mockDatabases(nodeId))
          setDbSource('mock')
        } else {
          const msg = err instanceof Error ? err.message : 'Failed to load databases.'
          setDbError(msg)
          setDatabases(mockDatabases(nodeId))
          setDbSource('mock')
        }
      } finally {
        if (!cancelled) setDbLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [nodeId])

  useEffect(() => {
    if (!nodeId) {
      setSelectedDb(null)
      return
    }

    if (!databases || databases.length === 0) {
      setSelectedDb(null)
      return
    }

    setSelectedDb((prev) => {
      if (prev && databases.some((d) => d.name === prev)) return prev
      return databases[0].name
    })
  }, [nodeId, databases])

  useEffect(() => {
    if (!nodeId) {
      setDbDetail(null)
      setDbDetailLoading(false)
      setDbDetailError('Missing node id in route.')
      return
    }

    if (!selectedDb) {
      setDbDetail(null)
      setDbDetailError(null)
      setDbDetailLoading(false)
      return
    }

    let cancelled = false
    setDbDetailLoading(true)
    setDbDetailError(null)

    ;(async () => {
      try {
        const live = await adminClient.getNodeDatabaseDetail(nodeId, selectedDb)
        if (cancelled) return
        setDbDetail(live)
      } catch (err) {
        if (cancelled) return

        if (isMissingEndpoint(err)) {
          setDbDetail(mockDatabaseDetail(nodeId, selectedDb))
        } else {
          const msg = err instanceof Error ? err.message : 'Failed to load database detail.'
          setDbDetailError(msg)
          setDbDetail(mockDatabaseDetail(nodeId, selectedDb))
        }
      } finally {
        if (!cancelled) setDbDetailLoading(false)
      }
    })()

    return () => {
      cancelled = true
    }
  }, [nodeId, selectedDb])

  return {
    status,
    statusLoading,
    statusError,

    facets,
    facetsLoading,
    facetsError,

    storage,
    storageLoading,
    storageError,
    storageSource,

    databases,
    dbLoading,
    dbError,
    dbSource,

    selectedDb,
    setSelectedDb,

    dbDetail,
    dbDetailLoading,
    dbDetailError,
  }
}

```

### crates/svc-admin/ui/src/styles.css
<a id="crates-svc-admin-ui-src-styles-css"></a>

```css
/* crates/svc-admin/ui/src/styles.css */

/* Base layout + theming for svc-admin (developer preview) */

*,
*::before,
*::after {
  box-sizing: border-box;
}

:root {
  color-scheme: light dark;

  --svc-admin-font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
    sans-serif;

  /* Light theme defaults */
  --svc-admin-color-bg: #f8fafc;
  --svc-admin-color-bg-elevated: #ffffff;
  --svc-admin-color-border-subtle: #e2e8f0;
  --svc-admin-color-text: #0f172a;
  --svc-admin-color-text-muted: #64748b;

  --svc-admin-color-accent: #6366f1;
  --svc-admin-color-accent-soft: rgba(99, 102, 241, 0.08);

  --svc-admin-color-danger-soft: #fee2e2;
  --svc-admin-color-danger-border: #fecaca;
  --svc-admin-color-danger-text: #991b1b;

  --svc-admin-radius-md: 10px;
  --svc-admin-radius-lg: 14px;

  --svc-admin-shadow-soft: 0 10px 30px rgba(15, 23, 42, 0.12);

  /* Metrics pill colors */
  --svc-admin-pill-bg: rgba(15, 23, 42, 0.06);
  --svc-admin-pill-border: rgba(15, 23, 42, 0.12);
  --svc-admin-pill-text: rgba(15, 23, 42, 0.72);

  --svc-admin-pill-fresh-bg: rgba(34, 197, 94, 0.12);
  --svc-admin-pill-fresh-border: rgba(34, 197, 94, 0.55);
  --svc-admin-pill-fresh-text: rgba(22, 163, 74, 1);

  --svc-admin-pill-stale-bg: rgba(245, 158, 11, 0.14);
  --svc-admin-pill-stale-border: rgba(245, 158, 11, 0.6);
  --svc-admin-pill-stale-text: rgba(217, 119, 6, 1);

  --svc-admin-pill-unreach-bg: rgba(239, 68, 68, 0.14);
  --svc-admin-pill-unreach-border: rgba(239, 68, 68, 0.6);
  --svc-admin-pill-unreach-text: rgba(220, 38, 38, 1);
}

[data-theme='dark'] {
  --svc-admin-color-bg: #020617;
  --svc-admin-color-bg-elevated: #020617;
  --svc-admin-color-border-subtle: #1f2937;
  --svc-admin-color-text: #e5e7eb;
  --svc-admin-color-text-muted: #9ca3af;

  --svc-admin-color-accent: #818cf8;
  --svc-admin-color-accent-soft: rgba(129, 140, 248, 0.16);

  --svc-admin-color-danger-soft: #451717;
  --svc-admin-color-danger-border: #7f1d1d;
  --svc-admin-color-danger-text: #fecaca;

  --svc-admin-pill-bg: rgba(148, 163, 184, 0.12);
  --svc-admin-pill-border: rgba(148, 163, 184, 0.22);
  --svc-admin-pill-text: rgba(203, 213, 225, 0.92);

  --svc-admin-pill-fresh-bg: rgba(34, 197, 94, 0.18);
  --svc-admin-pill-fresh-border: rgba(34, 197, 94, 0.7);
  --svc-admin-pill-fresh-text: #86efac;

  --svc-admin-pill-stale-bg: rgba(245, 158, 11, 0.18);
  --svc-admin-pill-stale-border: rgba(245, 158, 11, 0.75);
  --svc-admin-pill-stale-text: #fbbf24;

  --svc-admin-pill-unreach-bg: rgba(239, 68, 68, 0.18);
  --svc-admin-pill-unreach-border: rgba(239, 68, 68, 0.75);
  --svc-admin-pill-unreach-text: #fca5a5;
}

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
}

body {
  font-family: var(--svc-admin-font-family);
  background-color: var(--svc-admin-color-bg);
  color: var(--svc-admin-color-text);
}

/* Shell layout */

.svc-admin-shell {
  display: flex;
  min-height: 100vh;
  background-color: var(--svc-admin-color-bg);
}

.svc-admin-sidebar {
  width: 240px;
  padding: 1.5rem 1.25rem;
  background-color: var(--svc-admin-color-bg-elevated);
  border-right: 1px solid var(--svc-admin-color-border-subtle);
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.svc-admin-sidebar h2 {
  margin: 0;
  font-size: 1.1rem;
  letter-spacing: 0.04em;
}

.svc-admin-sidebar nav ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

.svc-admin-sidebar nav li {
  margin-bottom: 0.4rem;
}

.svc-admin-sidebar a {
  text-decoration: none;
  color: var(--svc-admin-color-text-muted);
  font-size: 0.95rem;
}

.svc-admin-sidebar a:hover {
  color: var(--svc-admin-color-accent);
}

.svc-admin-main {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
}

.svc-admin-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1.5rem;
  background-color: var(--svc-admin-color-bg-elevated);
  border-bottom: 1px solid var(--svc-admin-color-border-subtle);
}

.svc-admin-topbar-left span {
  font-weight: 500;
}

.svc-admin-topbar-right {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.svc-admin-topbar-right select,
.svc-admin-topbar-right button {
  font: inherit;
  border-radius: 999px;
  border: 1px solid var(--svc-admin-color-border-subtle);
  background-color: transparent;
  padding: 0.35rem 0.85rem;
  cursor: pointer;
}

.svc-admin-topbar-right button:hover,
.svc-admin-topbar-right select:hover {
  border-color: var(--svc-admin-color-accent);
}

/* Main content padding (IMPORTANT: only the shell's direct <main>) */
.svc-admin-main > main {
  flex: 1;
  min-width: 0;
  padding: 1.5rem;
}

/* ---------------------------------------------------------------------- */
/* Nodes overview: master–detail layout, cards, and preview panel         */
/* ---------------------------------------------------------------------- */

.svc-admin-node-layout {
  display: grid;
  grid-template-columns: minmax(0, 2.2fr) minmax(320px, 1.2fr);
  gap: 1.75rem;
  align-items: flex-start;
}

@media (max-width: 960px) {
  .svc-admin-node-layout {
    grid-template-columns: minmax(0, 1fr);
  }

  .svc-admin-node-preview {
    margin-top: 1.25rem;
  }
}

.svc-admin-node-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(260px, 1fr));
  gap: 1.25rem;
  align-items: stretch;
}

@media (max-width: 1200px) {
  .svc-admin-node-grid {
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  }
}

.svc-admin-node-card {
  border-radius: var(--svc-admin-radius-lg);
  border: 1px solid var(--svc-admin-color-border-subtle);
  background-color: var(--svc-admin-color-bg-elevated);
  padding: 1.1rem 1.25rem;
  box-shadow: var(--svc-admin-shadow-soft);
  text-decoration: none;
  color: inherit;
  display: block;
  text-align: left;
  transition:
    border-color 140ms ease-out,
    box-shadow 140ms ease-out,
    transform 140ms ease-out,
    background-color 140ms ease-out;
}

.svc-admin-node-card--clickable {
  cursor: pointer;
  border: none;
}

.svc-admin-node-card--clickable:hover {
  transform: translateY(-1px);
  box-shadow: 0 18px 50px rgba(15, 23, 42, 0.45);
  border: 1px solid var(--svc-admin-color-accent);
}

.svc-admin-node-card--selected {
  border-color: var(--svc-admin-color-accent);
  box-shadow:
    0 0 0 1px var(--svc-admin-color-accent-soft),
    0 22px 60px rgba(15, 23, 42, 0.6);
}

.svc-admin-node-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}

.svc-admin-node-title {
  margin: 0;
  font-size: 1.05rem;
}

.svc-admin-node-subtitle {
  margin: 0.25rem 0 0;
  font-size: 0.9rem;
  color: var(--svc-admin-color-text-muted);
}

.svc-admin-node-label {
  opacity: 0.7;
  font-size: 0.85em;
}

.svc-admin-node-profile {
  font-weight: 500;
}

.svc-admin-node-card-body {
  font-size: 0.9rem;
}

.svc-admin-node-meta {
  margin: 0.15rem 0;
}

.svc-admin-node-meta-muted {
  color: var(--svc-admin-color-text-muted);
}

.svc-admin-node-meta-error {
  color: var(--svc-admin-color-danger-text);
}

.svc-admin-node-meta-dot {
  margin: 0 0.35rem;
  opacity: 0.65;
}

.svc-admin-node-meta-metrics {
  margin-top: 0.5rem;
}

/* ---------------------------------------------------------------------- */
/* Metrics pills (real CSS, not utility-class dependent)                  */
/* ---------------------------------------------------------------------- */

.svc-admin-metrics-pill {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  padding: 0.2rem 0.55rem;
  font-size: 0.78rem;
  font-weight: 650;
  letter-spacing: 0.01em;
  border: 1px solid var(--svc-admin-pill-border);
  background: var(--svc-admin-pill-bg);
  color: var(--svc-admin-pill-text);
  white-space: nowrap;
}

.svc-admin-metrics-pill--fresh {
  border-color: var(--svc-admin-pill-fresh-border);
  background: var(--svc-admin-pill-fresh-bg);
  color: var(--svc-admin-pill-fresh-text);
}

.svc-admin-metrics-pill--stale {
  border-color: var(--svc-admin-pill-stale-border);
  background: var(--svc-admin-pill-stale-bg);
  color: var(--svc-admin-pill-stale-text);
}

.svc-admin-metrics-pill--unreachable {
  border-color: var(--svc-admin-pill-unreach-border);
  background: var(--svc-admin-pill-unreach-bg);
  color: var(--svc-admin-pill-unreach-text);
}

.svc-admin-metrics-pill--loading,
.svc-admin-metrics-pill--na {
  opacity: 0.85;
}

/* Right-hand preview panel */

.svc-admin-node-preview {
  background-color: var(--svc-admin-color-bg-elevated);
  border-radius: var(--svc-admin-radius-lg);
  border: 1px solid var(--svc-admin-color-border-subtle);
  box-shadow: var(--svc-admin-shadow-soft);
  padding: 1.3rem 1.5rem;
  min-width: 320px;
}

.svc-admin-node-preview-empty {
  color: var(--svc-admin-color-text-muted);
  font-size: 0.9rem;
}

.svc-admin-node-preview-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1rem;
  margin-bottom: 0.85rem;
}

.svc-admin-node-preview-header--stack {
  align-items: flex-start;
}

.svc-admin-node-preview-header-left {
  min-width: 0;
}

.svc-admin-node-preview-pills {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0.5rem;
  flex-shrink: 0;
}

.svc-admin-node-preview-metrics-pill {
  display: flex;
  justify-content: flex-end;
}

.svc-admin-node-preview-title {
  margin: 0;
  font-size: 1.05rem;
}

.svc-admin-node-preview-subtitle {
  margin: 0.2rem 0 0;
  font-size: 0.9rem;
  color: var(--svc-admin-color-text-muted);
}

.svc-admin-node-preview-body {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  font-size: 0.9rem;
  margin-top: 0.4rem;
}

.svc-admin-node-preview-line {
  margin: 0;
}

.svc-admin-node-preview-planes span {
  margin-right: 0.35rem;
}

/* ---------------------------------------------------------------------- */
/* Preview panel: planes table (Node A mock)                              */
/* ---------------------------------------------------------------------- */

.svc-admin-node-preview-planes-block {
  margin-top: 1.05rem;
  border-top: 1px solid var(--svc-admin-color-border-subtle);
  padding-top: 0.95rem;
}

.svc-admin-node-preview-planes-header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 1rem;
  margin-bottom: 0.6rem;
}

.svc-admin-node-preview-planes-title {
  margin: 0;
  font-size: 1rem;
}

.svc-admin-node-preview-planes-link {
  font-size: 0.85rem;
  color: var(--svc-admin-color-text-muted);
  text-decoration: none;
}

.svc-admin-node-preview-planes-link:hover {
  color: var(--svc-admin-color-accent);
}

.svc-admin-node-preview-planes-link--disabled {
  opacity: 0.6;
  cursor: default;
}

.svc-admin-node-preview-table-wrap {
  overflow: hidden;
  border-radius: 12px;
  border: 1px solid var(--svc-admin-color-border-subtle);
  background: rgba(0, 0, 0, 0.02);
}

[data-theme='dark'] .svc-admin-node-preview-table-wrap {
  background: rgba(255, 255, 255, 0.02);
}

.svc-admin-node-preview-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.92rem;
}

.svc-admin-node-preview-table th,
.svc-admin-node-preview-table td {
  padding: 0.65rem 0.75rem;
  border-bottom: 1px solid var(--svc-admin-color-border-subtle);
}

.svc-admin-node-preview-table thead th {
  font-weight: 650;
  color: var(--svc-admin-color-text-muted);
  background: rgba(0, 0, 0, 0.02);
}

[data-theme='dark'] .svc-admin-node-preview-table thead th {
  background: rgba(255, 255, 255, 0.02);
}

.svc-admin-node-preview-table tbody tr:last-child td {
  border-bottom: none;
}

.svc-admin-node-preview-td-plane {
  font-weight: 600;
}

.svc-admin-node-preview-th-right,
.svc-admin-node-preview-td-right {
  text-align: right;
  white-space: nowrap;
}

.svc-admin-node-preview-chev {
  margin-left: 0.45rem;
  opacity: 0.65;
}

.svc-admin-node-preview-health,
.svc-admin-node-preview-ready {
  font-weight: 650;
}

.svc-admin-node-preview-health--healthy {
  color: #4ade80;
}

.svc-admin-node-preview-health--degraded {
  color: #fbbf24;
}

.svc-admin-node-preview-health--down {
  color: #fca5a5;
}

.svc-admin-node-preview-health--unknown {
  color: var(--svc-admin-color-text-muted);
}

.svc-admin-node-preview-ready--ready {
  color: #4ade80;
}

.svc-admin-node-preview-ready--notready {
  color: #fbbf24;
}

.svc-admin-node-preview-ready--unknown {
  color: var(--svc-admin-color-text-muted);
}

.svc-admin-node-preview-planes-empty {
  margin-top: 0.4rem;
  color: var(--svc-admin-color-text-muted);
  font-size: 0.9rem;
}

/* Footer */

.svc-admin-node-preview-footer {
  margin-top: 1.25rem;
  display: flex;
  justify-content: flex-end;
}

.svc-admin-node-preview-open {
  display: inline-flex;
  align-items: center;
  gap: 0.45rem;
  padding: 0.45rem 0.95rem;
  border-radius: 999px;
  border: none;
  text-decoration: none;
  font-size: 0.9rem;
  background: var(--svc-admin-color-accent-soft);
  color: var(--svc-admin-color-text);
}

.svc-admin-node-preview-open:hover {
  background: var(--svc-admin-color-accent);
  color: #ffffff;
}

.svc-admin-node-preview-open-icon {
  font-size: 0.95rem;
}

/* ---------------------------------------------------------------------- */
/* Metric chart panel                                                     */
/* ---------------------------------------------------------------------- */

.svc-admin-metric-chart {
  background-color: var(--svc-admin-color-bg-elevated);
  border-radius: var(--svc-admin-radius-lg);
  border: 1px solid var(--svc-admin-color-border-subtle);
  padding: 1rem 1.25rem;
  margin-top: 1rem;
}

/* Make currentColor visible for sparkline strokes */
.svc-admin-metric-chart-sparkline {
  color: var(--svc-admin-color-accent);
}

/* Shared UX helpers */

.svc-admin-empty-state {
  padding: 1.25rem;
  border-radius: var(--svc-admin-radius-md);
  border: 1px dashed var(--svc-admin-color-border-subtle);
  color: var(--svc-admin-color-text-muted);
  text-align: center;
  font-size: 0.95rem;
}

.svc-admin-error-banner {
  padding: 0.75rem 1rem;
  border-radius: var(--svc-admin-radius-md);
  background-color: var(--svc-admin-color-danger-soft);
  border: 1px solid var(--svc-admin-color-danger-border);
  color: var(--svc-admin-color-danger-text);
  font-size: 0.9rem;
  margin-bottom: 1rem;
}

/* --- Node detail two-column layout ------------------------------------- */

.svc-admin-node-detail-layout {
  display: flex;
  align-items: flex-start;
  gap: 1.75rem;
}

.svc-admin-node-detail-main {
  flex: 3 1 0;
  min-width: 0;
}

.svc-admin-node-detail-sidebar {
  flex: 2 1 0;
  max-width: 420px;
  min-width: 320px;
}

/* Responsive: stack sidebar under main on smaller widths */
@media (max-width: 1100px) {
  .svc-admin-node-detail-layout {
    flex-direction: column;
  }

  .svc-admin-node-detail-sidebar {
    max-width: none;
    width: 100%;
  }
}

.svc-admin-node-metrics-banner-wrap {
  margin-top: 0.75rem;
}

/* --- Sidebar cards (node detail right panel) --------------------------- */

.svc-admin-node-detail-sidebar-card {
  background: var(--svc-admin-surface-elevated, #090b10);
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.04);
  padding: 1rem 1.1rem 1rem;
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.4);
  margin-bottom: 1.1rem;
}

.svc-admin-node-detail-sidebar-title {
  font-size: 0.95rem;
  font-weight: 600;
  margin-bottom: 0.25rem;
}

.svc-admin-node-detail-sidebar-caption {
  font-size: 0.8rem;
  opacity: 0.75;
  margin-bottom: 0.75rem;
}

.svc-admin-node-detail-sidebar-empty {
  font-size: 0.8rem;
  opacity: 0.7;
}

.svc-admin-node-detail-sidebar-table {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 0.6rem;
}

.svc-admin-node-detail-sidebar-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
}

.svc-admin-node-detail-sidebar-row-main {
  min-width: 0;
}

.svc-admin-node-detail-sidebar-row-name {
  font-size: 0.85rem;
  font-weight: 500;
}

.svc-admin-node-detail-sidebar-row-sub {
  font-size: 0.78rem;
  opacity: 0.7;
}

.svc-admin-node-detail-sidebar-row-aside {
  flex-shrink: 0;
}

.svc-admin-node-detail-chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 0.55rem;
  height: 1.25rem;
  border-radius: 999px;
  font-size: 0.72rem;
  font-weight: 600;
  letter-spacing: 0.03em;
  text-transform: capitalize;
}

.svc-admin-node-detail-chip--healthy {
  background: rgba(34, 197, 94, 0.18);
  color: #4ade80;
  border: 1px solid rgba(34, 197, 94, 0.75);
}

.svc-admin-node-detail-chip--degraded {
  background: rgba(245, 158, 11, 0.18);
  color: #fbbf24;
  border: 1px solid rgba(245, 158, 11, 0.8);
}

.svc-admin-node-detail-chip--down {
  background: rgba(239, 68, 68, 0.18);
  color: #fca5a5;
  border: 1px solid rgba(239, 68, 68, 0.8);
}

.svc-admin-node-detail-chip--unknown {
  background: rgba(148, 163, 184, 0.18);
  color: #cbd5f5;
  border: 1px solid rgba(148, 163, 184, 0.7);
}

.svc-admin-node-detail-sidebar-metrics-wrap {
  margin-top: 0.25rem;
}

.svc-admin-node-detail-metrics-small {
  border-radius: 8px;
  padding: 0.4rem 0.55rem;
  font-size: 0.78rem;
}

.svc-admin-node-detail-metrics-small--fresh {
  background: rgba(34, 197, 94, 0.16);
  color: #4ade80;
}

.svc-admin-node-detail-metrics-small--stale {
  background: rgba(245, 158, 11, 0.18);
  color: #fbbf24;
}

.svc-admin-node-detail-metrics-small--unreachable {
  background: rgba(239, 68, 68, 0.18);
  color: #fca5a5;
}

.svc-admin-node-detail-playground {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-top: 0.4rem;
}

.svc-admin-node-detail-playground-input {
  width: 100%;
  resize: vertical;
  border-radius: 10px;
  border: 1px solid rgba(148, 163, 184, 0.3);
  background: rgba(15, 23, 42, 0.75);
  color: inherit;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    'Liberation Mono', 'Courier New', monospace;
  font-size: 0.78rem;
  padding: 0.5rem 0.6rem;
}

.svc-admin-node-detail-playground-input:disabled {
  opacity: 0.65;
}

.svc-admin-node-detail-playground-button {
  align-self: flex-end;
  font-size: 0.8rem;
  padding: 0.35rem 0.7rem;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.6);
  background: rgba(15, 23, 42, 0.9);
  color: rgba(148, 163, 184, 0.9);
}

.svc-admin-node-detail-playground-button:disabled {
  opacity: 0.6;
}

/* ====================================================================== */
/* NEW: Sidebar active link styling (for NavLink-based Sidebar)            */
/* ====================================================================== */

.svc-admin-sidebar-link {
  display: inline-flex;
  align-items: center;
  width: 100%;
  padding: 0.45rem 0.6rem;
  border-radius: 10px;
  color: var(--svc-admin-color-text-muted);
  text-decoration: none;
  transition:
    background-color 140ms ease-out,
    color 140ms ease-out,
    border-color 140ms ease-out;
}

.svc-admin-sidebar-link:hover {
  color: var(--svc-admin-color-accent);
  background: var(--svc-admin-color-accent-soft);
}

.svc-admin-sidebar-link-active {
  color: var(--svc-admin-color-text);
  background: var(--svc-admin-color-accent-soft);
  border: 1px solid var(--svc-admin-color-border-subtle);
}

/* ====================================================================== */
/* NEW: Generic “page/panel/button” styles used by PlaygroundPage          */
/* (kept minimal + consistent with existing theme vars)                    */
/* ====================================================================== */

.page {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.page-header {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.grid-2 {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
  gap: 1.25rem;
  align-items: start;
}

@media (max-width: 1100px) {
  .grid-2 {
    grid-template-columns: minmax(0, 1fr);
  }
}

.panel {
  background-color: var(--svc-admin-color-bg-elevated);
  border-radius: var(--svc-admin-radius-lg);
  border: 1px solid var(--svc-admin-color-border-subtle);
  box-shadow: var(--svc-admin-shadow-soft);
  overflow: hidden;
}

.panel-title {
  padding: 0.85rem 1rem;
  font-weight: 650;
  border-bottom: 1px solid var(--svc-admin-color-border-subtle);
}

.panel-body {
  padding: 1rem;
}

.panel-ok .panel-title {
  border-bottom-color: rgba(34, 197, 94, 0.35);
}

.panel-warn .panel-title {
  border-bottom-color: rgba(245, 158, 11, 0.4);
}

.row {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.small {
  font-size: 0.9rem;
}

.muted {
  color: var(--svc-admin-color-text-muted);
}

.mono {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    'Liberation Mono', 'Courier New', monospace;
}

.textarea {
  width: 100%;
  resize: vertical;
  border-radius: 12px;
  border: 1px solid var(--svc-admin-color-border-subtle);
  background-color: rgba(0, 0, 0, 0.02);
  color: inherit;
  padding: 0.75rem 0.85rem;
  line-height: 1.35;
}

[data-theme='dark'] .textarea {
  background-color: rgba(255, 255, 255, 0.03);
}

.textarea:focus {
  outline: none;
  border-color: var(--svc-admin-color-accent);
  box-shadow: 0 0 0 2px var(--svc-admin-color-accent-soft);
}

.btn {
  font: inherit;
  border-radius: 999px;
  border: 1px solid var(--svc-admin-color-border-subtle);
  background: transparent;
  color: inherit;
  padding: 0.45rem 0.9rem;
  cursor: pointer;
}

.btn:hover {
  border-color: var(--svc-admin-color-accent);
}

.btn:disabled {
  opacity: 0.65;
  cursor: default;
}

.btn-primary {
  border-color: var(--svc-admin-color-accent);
  background: var(--svc-admin-color-accent-soft);
}

.btn-primary:hover {
  background: var(--svc-admin-color-accent);
  color: #ffffff;
}

.list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.list-item {
  width: 100%;
  text-align: left;
  border-radius: 12px;
  border: 1px solid var(--svc-admin-color-border-subtle);
  background: transparent;
  padding: 0.7rem 0.75rem;
  cursor: pointer;
  color: inherit;
}

.list-item:hover {
  border-color: var(--svc-admin-color-accent);
  background: var(--svc-admin-color-accent-soft);
}

.list-item.active {
  border-color: var(--svc-admin-color-accent);
  background: var(--svc-admin-color-accent-soft);
}

.list-item-title {
  font-weight: 650;
  margin-bottom: 0.2rem;
}

.list-item-subtitle {
  font-size: 0.88rem;
  color: var(--svc-admin-color-text-muted);
}

.bullets {
  margin: 0.5rem 0 0;
  padding-left: 1.15rem;
}

.codeblock {
  margin: 0.5rem 0 0;
  padding: 0.75rem 0.85rem;
  border-radius: 12px;
  border: 1px solid var(--svc-admin-color-border-subtle);
  background: rgba(0, 0, 0, 0.03);
  overflow: auto;
  max-height: 360px;
}

[data-theme='dark'] .codeblock {
  background: rgba(255, 255, 255, 0.03);
}

```

### crates/svc-admin/ui/src/templates/CustomTemplateRegistry.tsx
<a id="crates-svc-admin-ui-src-templates-CustomTemplateRegistry-tsx"></a>

```tsx
import React from 'react'

// Placeholder for a future dynamic template registry.
export function CustomTemplateRegistry() {
  return (
    <section>
      <h2>Custom Templates</h2>
      <p>Custom template support will be added here.</p>
    </section>
  )
}

```

### crates/svc-admin/ui/src/templates/FacetMetricsTemplate.tsx
<a id="crates-svc-admin-ui-src-templates-FacetMetricsTemplate-tsx"></a>

```tsx
import React from 'react'

export function FacetMetricsTemplate() {
  return (
    <section>
      <h2>Facet Metrics</h2>
      <p>Default facet metrics template.</p>
    </section>
  )
}

```

### crates/svc-admin/ui/src/templates/NodeOverviewTemplate.tsx
<a id="crates-svc-admin-ui-src-templates-NodeOverviewTemplate-tsx"></a>

```tsx
import React from 'react'

export function NodeOverviewTemplate() {
  return (
    <section>
      <h2>Node Overview</h2>
      <p>Default overview template.</p>
    </section>
  )
}

```

### crates/svc-admin/ui/src/templates/index.ts
<a id="crates-svc-admin-ui-src-templates-index-ts"></a>

```ts
// Template registry for custom dashboards.
// TODO: expose a stable API for devs to register their own templates.

```

### crates/svc-admin/ui/src/theme/ThemeProvider.tsx
<a id="crates-svc-admin-ui-src-theme-ThemeProvider-tsx"></a>

```tsx
// crates/svc-admin/ui/src/theme/ThemeProvider.tsx

/**
 * RO:WHAT — Theme context + provider for the svc-admin SPA.
 * RO:WHY — Centralizes theme selection and keeps it driven by backend
 *          config (`UiConfigDto.defaultTheme`) with a simple React
 *          context for components to consume.
 * RO:INTERACTS — api/adminClient.ts (getUiConfig),
 *                theme/themes.ts (actual theme tokens),
 *                layout components and top bar toggles.
 * RO:INVARIANTS — Only themes defined in `themes` are allowed. The
 *                 <html> element receives `data-theme=<name>` so CSS
 *                 can react via attribute selectors.
 */

import React, { createContext, useContext, useEffect, useState } from 'react'
import { themes } from './themes'
import { adminClient } from '../api/adminClient'

export type ThemeName = keyof typeof themes

type ThemeContextValue = {
  theme: ThemeName
  setTheme: (theme: ThemeName) => void
}

const ThemeContext = createContext<ThemeContextValue | undefined>(undefined)

// Local fallback default (used before /api/ui-config resolves, or if it fails).
const DEFAULT_THEME: ThemeName = 'dark'

export const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [theme, setTheme] = useState<ThemeName>(DEFAULT_THEME)

  // Apply theme to the <html> element so CSS can react via [data-theme] selectors.
  useEffect(() => {
    document.documentElement.dataset.theme = theme
  }, [theme])

  // Fetch UI config from the backend and apply the default theme if it is known.
  useEffect(() => {
    let cancelled = false

    adminClient
      .getUiConfig()
      .then((cfg) => {
        if (cancelled) return

        const candidate = cfg.defaultTheme as ThemeName | undefined

        if (candidate && candidate in themes) {
          setTheme(candidate)
        }
      })
      .catch(() => {
        // Developer preview: if /api/ui-config fails, we stay on the local default theme.
      })

    return () => {
      cancelled = true
    }
  }, [])

  return (
    <ThemeContext.Provider value={{ theme, setTheme }}>
      {children}
    </ThemeContext.Provider>
  )
}

export function useTheme(): ThemeContextValue {
  const ctx = useContext(ThemeContext)
  if (!ctx) {
    throw new Error('useTheme must be used within ThemeProvider')
  }
  return ctx
}

```

### crates/svc-admin/ui/src/theme/themes.ts
<a id="crates-svc-admin-ui-src-theme-themes-ts"></a>

```ts
export const themes = {
  light: {
    background: '#f8fafc',
    foreground: '#0f172a'
  },
  dark: {
    background: '#020617',
    foreground: '#e2e8f0'
  }
}

```

### crates/svc-admin/ui/src/theme/tokens.ts
<a id="crates-svc-admin-ui-src-theme-tokens-ts"></a>

```ts
export const tokens = {
  radius: {
    sm: 4,
    md: 8,
    lg: 12
  }
}

```

### crates/svc-admin/ui/src/types/admin-api.ts
<a id="crates-svc-admin-ui-src-types-admin-api-ts"></a>

```ts
// crates/svc-admin/ui/src/types/admin-api.ts
//
// WHAT: Shared TypeScript DTO definitions for the svc-admin SPA.
// WHY:  Keep the UI strictly aligned with the Rust-side DTOs in
//       `crates/svc-admin/src/dto/*` and the documented JSON contracts.
//
// NOTE:
//   - UiConfigDto mirrors `dto::ui::UiConfigDto` (camelCase via serde).
//   - MeResponse mirrors `dto::me::MeResponse` (camelCase via serde).
//   - Node / metrics types mirror `dto::node` and `dto::metrics`.

// ---- UI config DTO -------------------------------------------------------
//
// Rust (`dto::ui::UiConfigDto`):
//
// #[serde(rename_all = "camelCase")]
// pub struct UiConfigDto {
//     pub default_theme: String,
//     pub available_themes: Vec<String>,
//     pub default_language: String,
//     pub available_languages: Vec<String>,
//     pub read_only: bool,
//     pub dev: UiDevDto,
// }
//
// #[derive(Debug, Clone, Serialize, Deserialize)]
// #[serde(rename_all = "camelCase")]
// pub struct UiDevDto {
//     pub enable_app_playground: bool,
// }

export type UiDevConfig = {
  enableAppPlayground: boolean
}

export type UiConfigDto = {
  defaultTheme: string
  availableThemes: string[]
  defaultLanguage: string
  availableLanguages: string[]
  readOnly: boolean
  dev: UiDevConfig
}

// ---- /api/me DTO ---------------------------------------------------------
//
// Rust (`dto::me::MeResponse`):
//
// #[serde(rename_all = "camelCase")]
// pub struct MeResponse {
//     pub subject: String,
//     pub display_name: String,
//     pub roles: Vec<String>,
//     pub auth_mode: String,
//     pub login_url: Option<String>,
// }

export type MeResponse = {
  subject: string
  displayName: string
  roles: string[]
  authMode: string
  // Optional and may be null when no interactive login is available.
  loginUrl?: string | null
}

// ---- Node listing / status ----------------------------------------------
//
// Mirrors `dto::node::NodeSummary` on the Rust side.
// NOTE: JSON field names are snake_case here (no rename_all on the Rust struct).

export type NodeSummary = {
  id: string
  display_name: string
  // Optional profile hint, e.g. "macronode" / "micronode".
  profile: string | null
  // Labels / tags from config (env, region, etc.) may be added later.
}

// Mirrors `dto::node::PlaneStatus`.

export type PlaneStatus = {
  name: string
  health: 'healthy' | 'degraded' | 'down'
  ready: boolean
  restart_count: number
}

// Mirrors `dto::node::AdminStatusView`.

export type AdminStatusView = {
  id: string
  display_name: string
  profile: string | null
  version: string | null
  planes: PlaneStatus[]

  // Optional in older nodes; UI treats missing as "dev allow".
  capabilities?: string[] | null
}

// ---- Facet metrics DTO ---------------------------------------------------
//
// Mirrors `dto::metrics::FacetMetricsSummary`.

export type FacetMetricsSummary = {
  facet: string
  rps: number
  error_rate: number
  p95_latency_ms: number
  p99_latency_ms: number
  last_sample_age_secs: number | null
}

// ---- Node actions DTO ----------------------------------------------------
//
// Mirrors `dto::node::NodeActionResponse`.

export type NodeActionResponse = {
  node_id: string
  action: string
  accepted: boolean
  message?: string | null
}

// ---- Storage / Databases (read-only) -------------------------------------
//
// NOTE (design):
// - These DTOs are intentionally “curated facts” and NOT a remote file browser.
// - Paths should be reported as aliases (e.g. "data/db") rather than raw paths.
// - Permissions should be represented safely (mode + derived flags), not ACLs.
// - svc-admin will capability-gate these screens via "storage.readonly.v1".
//
// These DTOs are consumed by svc-admin SPA via:
//   - GET /api/nodes/:id/storage/summary
//   - GET /api/nodes/:id/storage/databases
//   - GET /api/nodes/:id/storage/databases/:name

export type NodeCapability = 'storage.readonly.v1' | string

export type StorageSummaryDto = {
  // Filesystem type (e.g. "ext4", "apfs", "ntfs") if known.
  fsType: string
  // Mount name or alias ("/", "data", etc.).
  mount: string

  totalBytes: number
  usedBytes: number
  freeBytes: number

  // Optional I/O rates; may be null when not supported/available.
  ioReadBps: number | null
  ioWriteBps: number | null
}

export type DatabaseHealth = 'ok' | 'degraded' | 'error'

export type DatabaseEntryDto = {
  name: string
  engine: string
  sizeBytes: number

  // Permissions are safe/collapsed facts.
  // mode is a string like "0750".
  mode: string
  owner: string

  health: DatabaseHealth

  // Optional operator-facing notes; may be absent.
  notes?: string | null

  // Optional derived warning flags (additive, safe).
  worldReadable?: boolean
  worldWritable?: boolean
}

export type DatabaseDetailDto = {
  name: string
  engine: string
  sizeBytes: number

  mode: string
  owner: string
  health: DatabaseHealth

  // Alias only; do not leak raw absolute paths.
  pathAlias: string

  fileCount: number
  lastCompaction: string | null

  // Optional, only if cheap.
  approxKeys: number | null

  // Safe warning strings for UI banners.
  warnings: string[]
}

// ---- App Playground (dev-only, read-only MVP) ----------------------------
//
// Rust router (svc-admin backend):
//   GET  /api/playground/examples
//   POST /api/playground/manifest/validate
//
// These are *svc-admin-local* helpers (not node execution).
// They are hidden unless UiConfigDto.dev.enableAppPlayground is true.

export type PlaygroundExampleDto = {
  id: string
  title: string
  description: string
  manifestToml: string
}

export type PlaygroundValidateManifestReq = {
  manifestToml: string
}

export type PlaygroundValidateManifestResp = {
  ok: boolean
  errors: string[]
  warnings: string[]
  // Parsed TOML rendered as JSON value for inspection (may be null on parse error).
  parsed?: unknown | null
}

/// system summary
export type SystemSummaryDto = {
  updatedAt: string
  cpuPercent?: number | null
  ramTotalBytes: number
  ramUsedBytes: number
  netRxBps?: number | null
  netTxBps?: number | null
}

```

### crates/svc-admin/ui/tsconfig.json
<a id="crates-svc-admin-ui-tsconfig-json"></a>

```json
{
  "compilerOptions": {
    "target": "ESNext",
    "useDefineForClassFields": true,
    "lib": ["DOM", "DOM.Iterable", "ESNext"],
    "allowJs": false,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "module": "ESNext",
    "moduleResolution": "Node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "baseUrl": "./",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "include": ["src"]
}

```

### crates/svc-admin/ui/vite.config.ts
<a id="crates-svc-admin-ui-vite-config-ts"></a>

```ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,
    proxy: {
      '/api': 'http://127.0.0.1:5300',
      '/healthz': 'http://127.0.0.1:5310',
      '/readyz': 'http://127.0.0.1:5310',
      '/metrics': 'http://127.0.0.1:5310'
    }
  }
})

```


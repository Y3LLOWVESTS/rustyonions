<!-- Generated by scripts/make_crate_codex.sh on 2025-12-05T03:33:30Z -->
# Code Bundle — `svc-admin`

> Generated for review/sharing. Source of truth remains the repo.
> Skips `docs/` and all `*.md`; includes common code/config extensions.

## Table of Contents
- [crates/svc-admin/Cargo.toml](#crates-svc-admin-Cargo-toml)
- [crates/svc-admin/build.rs](#crates-svc-admin-build-rs)
- [crates/svc-admin/scripts/build-ui.sh](#crates-svc-admin-scripts-build-ui-sh)
- [crates/svc-admin/scripts/dev-ui.sh](#crates-svc-admin-scripts-dev-ui-sh)
- [crates/svc-admin/scripts/lint-ui.sh](#crates-svc-admin-scripts-lint-ui-sh)
- [crates/svc-admin/scripts/sync-ui-assets.sh](#crates-svc-admin-scripts-sync-ui-assets-sh)
- [crates/svc-admin/src/auth/ingress.rs](#crates-svc-admin-src-auth-ingress-rs)
- [crates/svc-admin/src/auth/mod.rs](#crates-svc-admin-src-auth-mod-rs)
- [crates/svc-admin/src/auth/none.rs](#crates-svc-admin-src-auth-none-rs)
- [crates/svc-admin/src/auth/passport.rs](#crates-svc-admin-src-auth-passport-rs)
- [crates/svc-admin/src/bin/svc-admin.rs](#crates-svc-admin-src-bin-svc-admin-rs)
- [crates/svc-admin/src/cli.rs](#crates-svc-admin-src-cli-rs)
- [crates/svc-admin/src/config.rs](#crates-svc-admin-src-config-rs)
- [crates/svc-admin/src/dto/me.rs](#crates-svc-admin-src-dto-me-rs)
- [crates/svc-admin/src/dto/metrics.rs](#crates-svc-admin-src-dto-metrics-rs)
- [crates/svc-admin/src/dto/mod.rs](#crates-svc-admin-src-dto-mod-rs)
- [crates/svc-admin/src/dto/node.rs](#crates-svc-admin-src-dto-node-rs)
- [crates/svc-admin/src/dto/ui.rs](#crates-svc-admin-src-dto-ui-rs)
- [crates/svc-admin/src/error.rs](#crates-svc-admin-src-error-rs)
- [crates/svc-admin/src/interop.rs](#crates-svc-admin-src-interop-rs)
- [crates/svc-admin/src/lib.rs](#crates-svc-admin-src-lib-rs)
- [crates/svc-admin/src/metrics/facet.rs](#crates-svc-admin-src-metrics-facet-rs)
- [crates/svc-admin/src/metrics/mod.rs](#crates-svc-admin-src-metrics-mod-rs)
- [crates/svc-admin/src/metrics/prometheus_bridge.rs](#crates-svc-admin-src-metrics-prometheusbridge-rs)
- [crates/svc-admin/src/metrics/sampler.rs](#crates-svc-admin-src-metrics-sampler-rs)
- [crates/svc-admin/src/nodes/client.rs](#crates-svc-admin-src-nodes-client-rs)
- [crates/svc-admin/src/nodes/mod.rs](#crates-svc-admin-src-nodes-mod-rs)
- [crates/svc-admin/src/nodes/registry.rs](#crates-svc-admin-src-nodes-registry-rs)
- [crates/svc-admin/src/nodes/status.rs](#crates-svc-admin-src-nodes-status-rs)
- [crates/svc-admin/src/observability.rs](#crates-svc-admin-src-observability-rs)
- [crates/svc-admin/src/router.rs](#crates-svc-admin-src-router-rs)
- [crates/svc-admin/src/server.rs](#crates-svc-admin-src-server-rs)
- [crates/svc-admin/src/state.rs](#crates-svc-admin-src-state-rs)
- [crates/svc-admin/tests/fake_node.rs](#crates-svc-admin-tests-fakenode-rs)
- [crates/svc-admin/tests/http_smoke.rs](#crates-svc-admin-tests-httpsmoke-rs)
- [crates/svc-admin/ui/index.html](#crates-svc-admin-ui-index-html)
- [crates/svc-admin/ui/package.json](#crates-svc-admin-ui-package-json)
- [crates/svc-admin/ui/public/locales/en-US.json](#crates-svc-admin-ui-public-locales-en-US-json)
- [crates/svc-admin/ui/public/locales/es-ES.json](#crates-svc-admin-ui-public-locales-es-ES-json)
- [crates/svc-admin/ui/src/App.tsx](#crates-svc-admin-ui-src-App-tsx)
- [crates/svc-admin/ui/src/api/adminClient.ts](#crates-svc-admin-ui-src-api-adminClient-ts)
- [crates/svc-admin/ui/src/api/ronCorePlaygroundClient.ts](#crates-svc-admin-ui-src-api-ronCorePlaygroundClient-ts)
- [crates/svc-admin/ui/src/components/layout/LanguageSwitcher.tsx](#crates-svc-admin-ui-src-components-layout-LanguageSwitcher-tsx)
- [crates/svc-admin/ui/src/components/layout/Shell.tsx](#crates-svc-admin-ui-src-components-layout-Shell-tsx)
- [crates/svc-admin/ui/src/components/layout/Sidebar.tsx](#crates-svc-admin-ui-src-components-layout-Sidebar-tsx)
- [crates/svc-admin/ui/src/components/layout/ThemeToggle.tsx](#crates-svc-admin-ui-src-components-layout-ThemeToggle-tsx)
- [crates/svc-admin/ui/src/components/layout/TopBar.tsx](#crates-svc-admin-ui-src-components-layout-TopBar-tsx)
- [crates/svc-admin/ui/src/components/metrics/FacetMetricsPanel.tsx](#crates-svc-admin-ui-src-components-metrics-FacetMetricsPanel-tsx)
- [crates/svc-admin/ui/src/components/metrics/MetricChart.tsx](#crates-svc-admin-ui-src-components-metrics-MetricChart-tsx)
- [crates/svc-admin/ui/src/components/nodes/NodeCard.tsx](#crates-svc-admin-ui-src-components-nodes-NodeCard-tsx)
- [crates/svc-admin/ui/src/components/nodes/NodeStatusBadge.tsx](#crates-svc-admin-ui-src-components-nodes-NodeStatusBadge-tsx)
- [crates/svc-admin/ui/src/components/nodes/PlaneStatusTable.tsx](#crates-svc-admin-ui-src-components-nodes-PlaneStatusTable-tsx)
- [crates/svc-admin/ui/src/components/shared/EmptyState.tsx](#crates-svc-admin-ui-src-components-shared-EmptyState-tsx)
- [crates/svc-admin/ui/src/components/shared/ErrorBanner.tsx](#crates-svc-admin-ui-src-components-shared-ErrorBanner-tsx)
- [crates/svc-admin/ui/src/components/shared/LoadingSpinner.tsx](#crates-svc-admin-ui-src-components-shared-LoadingSpinner-tsx)
- [crates/svc-admin/ui/src/i18n/index.ts](#crates-svc-admin-ui-src-i18n-index-ts)
- [crates/svc-admin/ui/src/i18n/useI18n.ts](#crates-svc-admin-ui-src-i18n-useI18n-ts)
- [crates/svc-admin/ui/src/main.tsx](#crates-svc-admin-ui-src-main-tsx)
- [crates/svc-admin/ui/src/routes/LoginPage.tsx](#crates-svc-admin-ui-src-routes-LoginPage-tsx)
- [crates/svc-admin/ui/src/routes/NodeDetailPage.tsx](#crates-svc-admin-ui-src-routes-NodeDetailPage-tsx)
- [crates/svc-admin/ui/src/routes/NodeListPage.tsx](#crates-svc-admin-ui-src-routes-NodeListPage-tsx)
- [crates/svc-admin/ui/src/routes/NotFoundPage.tsx](#crates-svc-admin-ui-src-routes-NotFoundPage-tsx)
- [crates/svc-admin/ui/src/routes/SettingsPage.tsx](#crates-svc-admin-ui-src-routes-SettingsPage-tsx)
- [crates/svc-admin/ui/src/routes/index.tsx](#crates-svc-admin-ui-src-routes-index-tsx)
- [crates/svc-admin/ui/src/templates/CustomTemplateRegistry.tsx](#crates-svc-admin-ui-src-templates-CustomTemplateRegistry-tsx)
- [crates/svc-admin/ui/src/templates/FacetMetricsTemplate.tsx](#crates-svc-admin-ui-src-templates-FacetMetricsTemplate-tsx)
- [crates/svc-admin/ui/src/templates/NodeOverviewTemplate.tsx](#crates-svc-admin-ui-src-templates-NodeOverviewTemplate-tsx)
- [crates/svc-admin/ui/src/templates/index.ts](#crates-svc-admin-ui-src-templates-index-ts)
- [crates/svc-admin/ui/src/theme/ThemeProvider.tsx](#crates-svc-admin-ui-src-theme-ThemeProvider-tsx)
- [crates/svc-admin/ui/src/theme/themes.ts](#crates-svc-admin-ui-src-theme-themes-ts)
- [crates/svc-admin/ui/src/theme/tokens.ts](#crates-svc-admin-ui-src-theme-tokens-ts)
- [crates/svc-admin/ui/src/types/admin-api.ts](#crates-svc-admin-ui-src-types-admin-api-ts)
- [crates/svc-admin/ui/tsconfig.json](#crates-svc-admin-ui-tsconfig-json)
- [crates/svc-admin/ui/vite.config.ts](#crates-svc-admin-ui-vite-config-ts)

### crates/svc-admin/Cargo.toml
<a id="crates-svc-admin-Cargo-toml"></a>

```toml
[package]
name = "svc-admin"
version = "0.1.0"
edition = "2021"
description = "Admin-plane HTTP + SPA service for RON-CORE nodes"
license = "MIT OR Apache-2.0"
publish = false

[package.metadata]
# See docs/IDB.md and docs/GOVERNANCE.MD for invariants and governance.

[lib]
name = "svc_admin"
path = "src/lib.rs"

[[bin]]
name = "svc-admin"
path = "src/bin/svc-admin.rs"

[features]
default = ["axum", "tokio", "serde"]
tls = ["tokio-rustls"]        # TLS for serving HTTPS directly
otel = []                     # Optional OpenTelemetry exporters
passport = []                 # Optional passport/JWT validation mode

[dependencies]
anyhow = "1"
thiserror = "2"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
tokio = { version = "1", features = ["rt-multi-thread", "macros", "time"] }
axum = { version = "0.7", features = ["tokio", "http1", "http2", "json"] }
tower = "0.5"
tower-http = { version = "0.6", features = ["trace", "cors"] }
reqwest = { version = "0.12", features = ["json", "rustls-tls-native-roots"] }
prometheus = "0.14"
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["fmt", "env-filter"] }
tokio-rustls = { version = "0.26", optional = true }
url = "2"

[dev-dependencies]
tokio = { version = "1", features = ["rt-multi-thread", "macros", "time"] }
serde_json = "1"
reqwest = { version = "0.12", features = ["json", "rustls-tls-native-roots"] }

```

### crates/svc-admin/build.rs
<a id="crates-svc-admin-build-rs"></a>

```rust
#![allow(clippy::all)]

fn main() {
    // In the future, this build script can:
    // - Run the UI build (ui/ -> ui/dist)
    // - Embed static assets into the binary (e.g., via include_dir or rust-embed)
    // For now, it is a no-op scaffold.
}

```

### crates/svc-admin/scripts/build-ui.sh
<a id="crates-svc-admin-scripts-build-ui-sh"></a>

```bash
#!/usr/bin/env bash
set -euo pipefail

# Build the svc-admin UI and copy artifacts into static/ (or for embedding).

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
crate_dir="$(cd "${script_dir}/.." && pwd)"

cd "${crate_dir}/ui"
npm install
npm run build

mkdir -p "${crate_dir}/static"
cp -R dist/* "${crate_dir}/static/"

```

### crates/svc-admin/scripts/dev-ui.sh
<a id="crates-svc-admin-scripts-dev-ui-sh"></a>

```bash
#!/usr/bin/env bash
set -euo pipefail

# Start the UI dev server.

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
crate_dir="$(cd "${script_dir}/.." && pwd)"

cd "${crate_dir}/ui"
npm install
npm run dev

```

### crates/svc-admin/scripts/lint-ui.sh
<a id="crates-svc-admin-scripts-lint-ui-sh"></a>

```bash
#!/usr/bin/env bash
set -euo pipefail

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
crate_dir="$(cd "${script_dir}/.." && pwd)"

cd "${crate_dir}/ui"
npm install
npm run lint

```

### crates/svc-admin/scripts/sync-ui-assets.sh
<a id="crates-svc-admin-scripts-sync-ui-assets-sh"></a>

```bash
#!/usr/bin/env bash
set -euo pipefail

# Convenience wrapper: build the UI and sync assets.

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
crate_dir="$(cd "${script_dir}/.." && pwd)"

"${crate_dir}/scripts/build-ui.sh"

```

### crates/svc-admin/src/auth/ingress.rs
<a id="crates-svc-admin-src-auth-ingress-rs"></a>

```rust
// auth.mode = "ingress" — trust headers set by ingress/proxy.
// TODO: extract subject and roles from headers.

```

### crates/svc-admin/src/auth/mod.rs
<a id="crates-svc-admin-src-auth-mod-rs"></a>

```rust
pub mod none;
pub mod ingress;
pub mod passport;

// TODO: define a common AuthMode trait and identity type for /api/me.

```

### crates/svc-admin/src/auth/none.rs
<a id="crates-svc-admin-src-auth-none-rs"></a>

```rust
// auth.mode = "none" — dev mode only.

pub fn dev_identity() -> String {
    "dev-operator".to_string()
}

```

### crates/svc-admin/src/auth/passport.rs
<a id="crates-svc-admin-src-auth-passport-rs"></a>

```rust
// auth.mode = "passport" — validate JWT/passport tokens.
// TODO: implement JWKS fetch, token validation, and role extraction.

```

### crates/svc-admin/src/bin/svc-admin.rs
<a id="crates-svc-admin-src-bin-svc-admin-rs"></a>

```rust
use svc_admin::{cli, server};

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let cfg = cli::parse_args()?;
    server::run(cfg).await?;
    Ok(())
}

```

### crates/svc-admin/src/cli.rs
<a id="crates-svc-admin-src-cli-rs"></a>

```rust
use crate::config::Config;
use anyhow::Result;

/// Parse CLI arguments and environment variables to produce a Config.
pub fn parse_args() -> Result<Config> {
    // TODO: Use clap or similar for real CLI parsing.
    // For now, delegate directly to Config::load().
    Config::load()
}

```

### crates/svc-admin/src/config.rs
<a id="crates-svc-admin-src-config-rs"></a>

```rust
use crate::error::{Error, Result};
use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Config {
    pub server: ServerCfg,
    pub auth: AuthCfg,
    pub ui: UiCfg,
    pub nodes: NodesCfg,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ServerCfg {
    pub bind_addr: String,
    pub metrics_addr: String,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AuthCfg {
    pub mode: String, // "none" | "ingress" | "passport"
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct UiCfg {
    pub default_theme: String,
    pub default_language: String,
    pub read_only: bool,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct NodesCfg {
    // TODO: Fill with node registry schema
}

impl Config {
    pub fn load() -> Result<Self> {
        // TODO: merge env vars, CLI args, and config file per docs/CONFIG.MD
        Err(Error::Config("Config::load() not implemented".into()))
    }
}

```

### crates/svc-admin/src/dto/me.rs
<a id="crates-svc-admin-src-dto-me-rs"></a>

```rust
use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct MeResponse {
    pub subject: String,
    pub display_name: String,
    pub roles: Vec<String>,
    pub auth_mode: String,
    pub login_url: Option<String>,
}

impl MeResponse {
    pub fn dev_default() -> Self {
        Self {
            subject: "dev-operator".into(),
            display_name: "Dev Operator".into(),
            roles: vec!["admin".into()],
            auth_mode: "none".into(),
            login_url: None,
        }
    }
}

```

### crates/svc-admin/src/dto/metrics.rs
<a id="crates-svc-admin-src-dto-metrics-rs"></a>

```rust
use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct FacetMetricsSummary {
    pub facet: String,
    pub rps: f64,
    pub error_rate: f64,
    pub p95_latency_ms: f64,
    pub p99_latency_ms: f64,
}

```

### crates/svc-admin/src/dto/mod.rs
<a id="crates-svc-admin-src-dto-mod-rs"></a>

```rust
pub mod ui;
pub mod me;
pub mod node;
pub mod metrics;

```

### crates/svc-admin/src/dto/node.rs
<a id="crates-svc-admin-src-dto-node-rs"></a>

```rust
use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct NodeSummary {
    pub id: String,
    pub display_name: String,
    pub profile: Option<String>,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct PlaneStatus {
    pub name: String,
    pub health: String,
    pub ready: bool,
    pub restart_count: u64,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct AdminStatusView {
    pub id: String,
    pub display_name: String,
    pub profile: Option<String>,
    pub version: Option<String>,
    pub planes: Vec<PlaneStatus>,
}

impl AdminStatusView {
    pub fn placeholder() -> Self {
        Self {
            id: "example-node".into(),
            display_name: "Example Node".into(),
            profile: Some("macronode".into()),
            version: Some("0.0.0".into()),
            planes: vec![],
        }
    }
}

```

### crates/svc-admin/src/dto/ui.rs
<a id="crates-svc-admin-src-dto-ui-rs"></a>

```rust
use serde::{Deserialize, Serialize};
use crate::config::Config;

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct UiConfigDto {
    pub default_theme: String,
    pub available_themes: Vec<String>,
    pub default_language: String,
    pub available_languages: Vec<String>,
    pub read_only: bool,
}

impl UiConfigDto {
    pub fn from_cfg(cfg: &Config) -> Self {
        Self {
            default_theme: cfg.ui.default_theme.clone(),
            available_themes: vec!["light".into(), "dark".into()],
            default_language: cfg.ui.default_language.clone(),
            available_languages: vec!["en-US".into(), "es-ES".into()],
            read_only: cfg.ui.read_only,
        }
    }
}

```

### crates/svc-admin/src/error.rs
<a id="crates-svc-admin-src-error-rs"></a>

```rust
use thiserror::Error;

pub type Result<T> = std::result::Result<T, Error>;

#[derive(Debug, Error)]
pub enum Error {
    #[error("config error: {0}")]
    Config(String),

    #[error("io error: {0}")]
    Io(#[from] std::io::Error),

    #[error("http error: {0}")]
    Http(#[from] reqwest::Error),

    #[error("serde error: {0}")]
    Serde(#[from] serde_json::Error),

    #[error("auth error: {0}")]
    Auth(String),

    #[error("upstream node error: {0}")]
    Upstream(String),

    #[error("other: {0}")]
    Other(String),
}

```

### crates/svc-admin/src/interop.rs
<a id="crates-svc-admin-src-interop-rs"></a>

```rust
// Interop helper module for tests and SDK harnesses.
// See docs/INTEROP.MD for the invariants and supported flows.

pub struct InteropHarness;

impl InteropHarness {
    pub fn new() -> Self {
        Self
    }
}

```

### crates/svc-admin/src/lib.rs
<a id="crates-svc-admin-src-lib-rs"></a>

```rust
pub mod cli;
pub mod config;
pub mod dto;
pub mod error;
pub mod metrics;
pub mod nodes;
pub mod observability;
pub mod router;
pub mod server;
pub mod state;
pub mod interop;

pub use crate::config::Config;
pub use crate::error::Error;

```

### crates/svc-admin/src/metrics/facet.rs
<a id="crates-svc-admin-src-metrics-facet-rs"></a>

```rust
// Facet-aware metrics logic.
// TODO: group metrics by facet label/prefix and compute summaries.

```

### crates/svc-admin/src/metrics/mod.rs
<a id="crates-svc-admin-src-metrics-mod-rs"></a>

```rust
pub mod sampler;
pub mod facet;
pub mod prometheus_bridge;

```

### crates/svc-admin/src/metrics/prometheus_bridge.rs
<a id="crates-svc-admin-src-metrics-prometheusbridge-rs"></a>

```rust
// Bridge between scraped metrics and exported Prometheus metrics.
// TODO: register and update svc-admin metrics (svc_admin_node_fanout_*, etc.).

```

### crates/svc-admin/src/metrics/sampler.rs
<a id="crates-svc-admin-src-metrics-sampler-rs"></a>

```rust
// Background tasks that scrape node /metrics and status.
// TODO: implement sampler loops and rolling windows.

```

### crates/svc-admin/src/nodes/client.rs
<a id="crates-svc-admin-src-nodes-client-rs"></a>

```rust
use crate::error::Result;

// TODO: wrap reqwest::Client and talk to node admin endpoints.
pub struct NodeClient;

impl NodeClient {
    pub fn new() -> Self {
        Self
    }

    pub async fn ping_node(&self, _id: &str) -> Result<()> {
        Ok(())
    }
}

```

### crates/svc-admin/src/nodes/mod.rs
<a id="crates-svc-admin-src-nodes-mod-rs"></a>

```rust
pub mod registry;
pub mod client;
pub mod status;

```

### crates/svc-admin/src/nodes/registry.rs
<a id="crates-svc-admin-src-nodes-registry-rs"></a>

```rust
use crate::config::NodesCfg;

// TODO: implement an in-memory registry for node configurations.
pub struct NodeRegistry {
    pub cfg: NodesCfg,
}

```

### crates/svc-admin/src/nodes/status.rs
<a id="crates-svc-admin-src-nodes-status-rs"></a>

```rust
use crate::dto::node::AdminStatusView;

// TODO: normalize node health/ready/version/status into AdminStatusView.
pub fn build_status_placeholder() -> AdminStatusView {
    AdminStatusView::placeholder()
}

```

### crates/svc-admin/src/observability.rs
<a id="crates-svc-admin-src-observability-rs"></a>

```rust
use tracing_subscriber::{EnvFilter, fmt};

pub fn init_tracing() {
    let filter = EnvFilter::try_from_default_env()
        .unwrap_or_else(|_| EnvFilter::new("info,svc_admin=info,axum=warn,tower_http=warn"));

    fmt::Subscriber::builder()
        .with_env_filter(filter)
        .finish()
        .init();
}

```

### crates/svc-admin/src/router.rs
<a id="crates-svc-admin-src-router-rs"></a>

```rust
use crate::dto;
use crate::state::AppState;
use axum::{
    extract::State,
    routing::get,
    Json, Router,
};
use std::sync::Arc;

pub fn build_router(state: Arc<AppState>) -> Router {
    Router::new()
        .route("/healthz", get(healthz))
        .route("/readyz", get(readyz))
        .route("/api/ui-config", get(ui_config))
        .route("/api/me", get(me))
        .route("/api/nodes", get(nodes))
        .route("/api/nodes/:id/status", get(node_status))
        .with_state(state)
}

async fn healthz() -> &'static str {
    "ok"
}

async fn readyz(State(_state): State<Arc<AppState>>) -> Json<serde_json::Value> {
    Json(serde_json::json!({ "ready": true }))
}

async fn ui_config(State(state): State<Arc<AppState>>) -> Json<dto::ui::UiConfigDto> {
    Json(dto::ui::UiConfigDto::from_cfg(&state.config))
}

async fn me() -> Json<dto::me::MeResponse> {
    Json(dto::me::MeResponse::dev_default())
}

async fn nodes(State(_state): State<Arc<AppState>>) -> Json<Vec<dto::node::NodeSummary>> {
    Json(vec![]) // TODO: list nodes from registry
}

async fn node_status(
    State(_state): State<Arc<AppState>>,
) -> Json<dto::node::AdminStatusView> {
    Json(dto::node::AdminStatusView::placeholder())
}

```

### crates/svc-admin/src/server.rs
<a id="crates-svc-admin-src-server-rs"></a>

```rust
use crate::config::Config;
use crate::observability;
use crate::router::build_router;
use crate::state::AppState;
use crate::error::Result;
use axum::Server;
use std::net::SocketAddr;
use std::sync::Arc;
use tokio::signal;

pub async fn run(config: Config) -> Result<()> {
    observability::init_tracing();

    let state = Arc::new(AppState::new(config.clone()));
    let app = build_router(state.clone());

    let addr: SocketAddr = config
        .server
        .bind_addr
        .parse()
        .expect("invalid bind_addr in config");

    tracing::info!(%addr, "svc-admin listening");

    Server::bind(&addr)
        .serve(app.into_make_service())
        .with_graceful_shutdown(shutdown_signal())
        .await
        .map_err(|e| crate::error::Error::Other(e.to_string()))
}

async fn shutdown_signal() {
    let _ = signal::ctrl_c().await;
    tracing::info!("shutdown signal received");
}

```

### crates/svc-admin/src/state.rs
<a id="crates-svc-admin-src-state-rs"></a>

```rust
use crate::config::Config;

#[derive(Clone)]
pub struct AppState {
    pub config: Config,
    // TODO: add node registry, metrics buffers, auth caches, etc.
}

impl AppState {
    pub fn new(config: Config) -> Self {
        Self { config }
    }
}

```

### crates/svc-admin/tests/fake_node.rs
<a id="crates-svc-admin-tests-fakenode-rs"></a>

```rust
// TODO: implement fake node admin endpoints for integration tests.
// This will validate normalization of AdminStatusView and facet metrics.

```

### crates/svc-admin/tests/http_smoke.rs
<a id="crates-svc-admin-tests-httpsmoke-rs"></a>

```rust
use svc_admin::server;
use svc_admin::config::{Config, ServerCfg, AuthCfg, UiCfg, NodesCfg};
use tokio::time::{sleep, Duration};

#[tokio::test]
async fn healthz_smoke() {
    let cfg = Config {
        server: ServerCfg {
            bind_addr: "127.0.0.1:5300".into(),
            metrics_addr: "127.0.0.1:5310".into(),
        },
        auth: AuthCfg { mode: "none".into() },
        ui: UiCfg {
            default_theme: "light".into(),
            default_language: "en-US".into(),
            read_only: true,
        },
        nodes: NodesCfg {},
    };

    tokio::spawn(async move {
        let _ = server::run(cfg).await;
    });

    sleep(Duration::from_millis(200)).await;

    let body = reqwest::get("http://127.0.0.1:5310/healthz")
        .await
        .unwrap()
        .text()
        .await
        .unwrap();

    assert_eq!(body, "ok");
}

```

### crates/svc-admin/ui/index.html
<a id="crates-svc-admin-ui-index-html"></a>

```html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>RON-CORE Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>

```

### crates/svc-admin/ui/package.json
<a id="crates-svc-admin-ui-package-json"></a>

```json
{
  "name": "svc-admin-ui",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint src --ext .ts,.tsx"
  },
  "dependencies": {
    "react": "^18.0.0",
    "react-dom": "^18.0.0",
    "react-router-dom": "^6.0.0"
  },
  "devDependencies": {
    "@types/react": "^18.0.0",
    "@types/react-dom": "^18.0.0",
    "@typescript-eslint/eslint-plugin": "^8.0.0",
    "@typescript-eslint/parser": "^8.0.0",
    "eslint": "^9.0.0",
    "eslint-plugin-react-hooks": "^5.0.0",
    "typescript": "^5.0.0",
    "vite": "^6.0.0",
    "@vitejs/plugin-react": "^4.0.0"
  }
}

```

### crates/svc-admin/ui/public/locales/en-US.json
<a id="crates-svc-admin-ui-public-locales-en-US-json"></a>

```json
{
  "app.title": "RON-CORE Admin",
  "nav.nodes": "Nodes",
  "nav.settings": "Settings",
  "nav.login": "Login"
}

```

### crates/svc-admin/ui/public/locales/es-ES.json
<a id="crates-svc-admin-ui-public-locales-es-ES-json"></a>

```json
{
  "app.title": "RON-CORE Admin (ES)",
  "nav.nodes": "Nodos",
  "nav.settings": "Ajustes",
  "nav.login": "Iniciar sesión"
}

```

### crates/svc-admin/ui/src/App.tsx
<a id="crates-svc-admin-ui-src-App-tsx"></a>

```tsx
import React from 'react'
import { Routes, Route } from 'react-router-dom'
import { Shell } from './components/layout/Shell'
import { NodeListPage } from './routes/NodeListPage'
import { NodeDetailPage } from './routes/NodeDetailPage'
import { SettingsPage } from './routes/SettingsPage'
import { LoginPage } from './routes/LoginPage'
import { NotFoundPage } from './routes/NotFoundPage'

export default function App() {
  return (
    <Shell>
      <Routes>
        <Route path="/" element={<NodeListPage />} />
        <Route path="/nodes/:id" element={<NodeDetailPage />} />
        <Route path="/settings" element={<SettingsPage />} />
        <Route path="/login" element={<LoginPage />} />
        <Route path="*" element={<NotFoundPage />} />
      </Routes>
    </Shell>
  )
}

```

### crates/svc-admin/ui/src/api/adminClient.ts
<a id="crates-svc-admin-ui-src-api-adminClient-ts"></a>

```ts
import type { UiConfigDto, MeResponse, NodeSummary, AdminStatusView } from '../types/admin-api'

const base = ''

async function getJson<T>(path: string): Promise<T> {
  const rsp = await fetch(base + path)
  if (!rsp.ok) {
    throw new Error(`Request failed: ${rsp.status}`)
  }
  return rsp.json() as Promise<T>
}

export const adminClient = {
  getUiConfig: () => getJson<UiConfigDto>('/api/ui-config'),
  getMe: () => getJson<MeResponse>('/api/me'),
  getNodes: () => getJson<NodeSummary[]>('/api/nodes'),
  getNodeStatus: (id: string) => getJson<AdminStatusView>(`/api/nodes/${id}/status`)
}

```

### crates/svc-admin/ui/src/api/ronCorePlaygroundClient.ts
<a id="crates-svc-admin-ui-src-api-ronCorePlaygroundClient-ts"></a>

```ts
// Placeholder for integration with ron-app-sdk-ts
// This will power a future "App Plane Playground" inside svc-admin.

```

### crates/svc-admin/ui/src/components/layout/LanguageSwitcher.tsx
<a id="crates-svc-admin-ui-src-components-layout-LanguageSwitcher-tsx"></a>

```tsx
import React from 'react'

export function LanguageSwitcher() {
  return (
    <select defaultValue="en-US">
      <option value="en-US">EN</option>
      <option value="es-ES">ES</option>
    </select>
  )
}

```

### crates/svc-admin/ui/src/components/layout/Shell.tsx
<a id="crates-svc-admin-ui-src-components-layout-Shell-tsx"></a>

```tsx
import React from 'react'
import { Sidebar } from './Sidebar'
import { TopBar } from './TopBar'

type Props = {
  children: React.ReactNode
}

export function Shell({ children }: Props) {
  return (
    <div className="svc-admin-shell">
      <Sidebar />
      <div className="svc-admin-main">
        <TopBar />
        <main>{children}</main>
      </div>
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/layout/Sidebar.tsx
<a id="crates-svc-admin-ui-src-components-layout-Sidebar-tsx"></a>

```tsx
import React from 'react'
import { Link } from 'react-router-dom'

export function Sidebar() {
  return (
    <aside className="svc-admin-sidebar">
      <h2>RON-CORE</h2>
      <nav>
        <ul>
          <li><Link to="/">Nodes</Link></li>
          <li><Link to="/settings">Settings</Link></li>
        </ul>
      </nav>
    </aside>
  )
}

```

### crates/svc-admin/ui/src/components/layout/ThemeToggle.tsx
<a id="crates-svc-admin-ui-src-components-layout-ThemeToggle-tsx"></a>

```tsx
import React from 'react'

export function ThemeToggle() {
  return (
    <button type="button">
      Theme
    </button>
  )
}

```

### crates/svc-admin/ui/src/components/layout/TopBar.tsx
<a id="crates-svc-admin-ui-src-components-layout-TopBar-tsx"></a>

```tsx
import React from 'react'
import { ThemeToggle } from './ThemeToggle'
import { LanguageSwitcher } from './LanguageSwitcher'

export function TopBar() {
  return (
    <header className="svc-admin-topbar">
      <div className="svc-admin-topbar-left">
        <span>RON-CORE Admin</span>
      </div>
      <div className="svc-admin-topbar-right">
        <LanguageSwitcher />
        <ThemeToggle />
      </div>
    </header>
  )
}

```

### crates/svc-admin/ui/src/components/metrics/FacetMetricsPanel.tsx
<a id="crates-svc-admin-ui-src-components-metrics-FacetMetricsPanel-tsx"></a>

```tsx
import React from 'react'

export function FacetMetricsPanel() {
  return (
    <section>
      <h2>Facet Metrics</h2>
      <p>Facet-aware metrics will appear here.</p>
    </section>
  )
}

```

### crates/svc-admin/ui/src/components/metrics/MetricChart.tsx
<a id="crates-svc-admin-ui-src-components-metrics-MetricChart-tsx"></a>

```tsx
import React from 'react'

export function MetricChart() {
  return (
    <div>
      <p>Metric chart placeholder</p>
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/nodes/NodeCard.tsx
<a id="crates-svc-admin-ui-src-components-nodes-NodeCard-tsx"></a>

```tsx
import React from 'react'

export function NodeCard() {
  return (
    <div className="svc-admin-node-card">
      <h3>Example Node</h3>
      <p>Status: healthy</p>
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/nodes/NodeStatusBadge.tsx
<a id="crates-svc-admin-ui-src-components-nodes-NodeStatusBadge-tsx"></a>

```tsx
import React from 'react'

type Props = {
  status: 'healthy' | 'degraded' | 'down'
}

export function NodeStatusBadge({ status }: Props) {
  return (
    <span className={`svc-admin-node-status svc-admin-node-status-${status}`}>
      {status}
    </span>
  )
}

```

### crates/svc-admin/ui/src/components/nodes/PlaneStatusTable.tsx
<a id="crates-svc-admin-ui-src-components-nodes-PlaneStatusTable-tsx"></a>

```tsx
import React from 'react'

export function PlaneStatusTable() {
  return (
    <table>
      <thead>
        <tr>
          <th>Plane</th>
          <th>Health</th>
          <th>Ready</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>gateway</td>
          <td>healthy</td>
          <td>true</td>
        </tr>
      </tbody>
    </table>
  )
}

```

### crates/svc-admin/ui/src/components/shared/EmptyState.tsx
<a id="crates-svc-admin-ui-src-components-shared-EmptyState-tsx"></a>

```tsx
import React from 'react'

type Props = { message: string }

export function EmptyState({ message }: Props) {
  return (
    <div className="svc-admin-empty-state">
      {message}
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/shared/ErrorBanner.tsx
<a id="crates-svc-admin-ui-src-components-shared-ErrorBanner-tsx"></a>

```tsx
import React from 'react'

type Props = { message: string }

export function ErrorBanner({ message }: Props) {
  return (
    <div className="svc-admin-error-banner">
      {message}
    </div>
  )
}

```

### crates/svc-admin/ui/src/components/shared/LoadingSpinner.tsx
<a id="crates-svc-admin-ui-src-components-shared-LoadingSpinner-tsx"></a>

```tsx
import React from 'react'

export function LoadingSpinner() {
  return <div>Loading...</div>
}

```

### crates/svc-admin/ui/src/i18n/index.ts
<a id="crates-svc-admin-ui-src-i18n-index-ts"></a>

```ts
import React, { createContext, useContext, useState, useEffect } from 'react'

type I18nContextValue = {
  locale: string
  t: (key: string) => string
  setLocale: (locale: string) => void
}

const I18nContext = createContext<I18nContextValue | undefined>(undefined)

export const I18nProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [locale, setLocale] = useState('en-US')
  const [messages, setMessages] = useState<Record<string, string>>({})

  useEffect(() => {
    fetch(`/locales/${locale}.json`)
      .then((rsp) => rsp.json())
      .then((data) => setMessages(data))
      .catch(() => setMessages({}))
  }, [locale])

  const t = (key: string) => messages[key] ?? key

  return (
    <I18nContext.Provider value={{ locale, t, setLocale }}>
      {children}
    </I18nContext.Provider>
  )
}

export function useI18n() {
  const ctx = useContext(I18nContext)
  if (!ctx) throw new Error('useI18n must be used within I18nProvider')
  return ctx
}

```

### crates/svc-admin/ui/src/i18n/useI18n.ts
<a id="crates-svc-admin-ui-src-i18n-useI18n-ts"></a>

```ts
export { useI18n } from './index'

```

### crates/svc-admin/ui/src/main.tsx
<a id="crates-svc-admin-ui-src-main-tsx"></a>

```tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import App from './App'
import { ThemeProvider } from './theme/ThemeProvider'
import { I18nProvider } from './i18n'

const rootElement = document.getElementById('root') as HTMLElement

ReactDOM.createRoot(rootElement).render(
  <React.StrictMode>
    <ThemeProvider>
      <I18nProvider>
        <BrowserRouter>
          <App />
        </BrowserRouter>
      </I18nProvider>
    </ThemeProvider>
  </React.StrictMode>
)

```

### crates/svc-admin/ui/src/routes/LoginPage.tsx
<a id="crates-svc-admin-ui-src-routes-LoginPage-tsx"></a>

```tsx
import React from 'react'

export function LoginPage() {
  return (
    <div>
      <h1>Login</h1>
      <p>Passport / SSO login flow will appear here.</p>
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/NodeDetailPage.tsx
<a id="crates-svc-admin-ui-src-routes-NodeDetailPage-tsx"></a>

```tsx
import React from 'react'

export function NodeDetailPage() {
  return (
    <div>
      <h1>Node Detail</h1>
      <p>Node status and facet metrics will appear here.</p>
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/NodeListPage.tsx
<a id="crates-svc-admin-ui-src-routes-NodeListPage-tsx"></a>

```tsx
import React from 'react'

export function NodeListPage() {
  return (
    <div>
      <h1>Nodes</h1>
      <p>Node list will appear here.</p>
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/NotFoundPage.tsx
<a id="crates-svc-admin-ui-src-routes-NotFoundPage-tsx"></a>

```tsx
import React from 'react'

export function NotFoundPage() {
  return (
    <div>
      <h1>404</h1>
      <p>Page not found.</p>
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/SettingsPage.tsx
<a id="crates-svc-admin-ui-src-routes-SettingsPage-tsx"></a>

```tsx
import React from 'react'

export function SettingsPage() {
  return (
    <div>
      <h1>Settings</h1>
      <p>Theme, language, and UI preferences will appear here.</p>
    </div>
  )
}

```

### crates/svc-admin/ui/src/routes/index.tsx
<a id="crates-svc-admin-ui-src-routes-index-tsx"></a>

```tsx
// Route definitions are centralized in App.tsx for now.
// This file exists as a future extension point if we move to route objects.

```

### crates/svc-admin/ui/src/templates/CustomTemplateRegistry.tsx
<a id="crates-svc-admin-ui-src-templates-CustomTemplateRegistry-tsx"></a>

```tsx
import React from 'react'

// Placeholder for a future dynamic template registry.
export function CustomTemplateRegistry() {
  return (
    <section>
      <h2>Custom Templates</h2>
      <p>Custom template support will be added here.</p>
    </section>
  )
}

```

### crates/svc-admin/ui/src/templates/FacetMetricsTemplate.tsx
<a id="crates-svc-admin-ui-src-templates-FacetMetricsTemplate-tsx"></a>

```tsx
import React from 'react'

export function FacetMetricsTemplate() {
  return (
    <section>
      <h2>Facet Metrics</h2>
      <p>Default facet metrics template.</p>
    </section>
  )
}

```

### crates/svc-admin/ui/src/templates/NodeOverviewTemplate.tsx
<a id="crates-svc-admin-ui-src-templates-NodeOverviewTemplate-tsx"></a>

```tsx
import React from 'react'

export function NodeOverviewTemplate() {
  return (
    <section>
      <h2>Node Overview</h2>
      <p>Default overview template.</p>
    </section>
  )
}

```

### crates/svc-admin/ui/src/templates/index.ts
<a id="crates-svc-admin-ui-src-templates-index-ts"></a>

```ts
// Template registry for custom dashboards.
// TODO: expose a stable API for devs to register their own templates.

```

### crates/svc-admin/ui/src/theme/ThemeProvider.tsx
<a id="crates-svc-admin-ui-src-theme-ThemeProvider-tsx"></a>

```tsx
import React, { createContext, useContext, useState, useEffect } from 'react'
import { themes } from './themes'

type Theme = keyof typeof themes

type ThemeContextValue = {
  theme: Theme
  setTheme: (theme: Theme) => void
}

const ThemeContext = createContext<ThemeContextValue | undefined>(undefined)

export const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [theme, setTheme] = useState<Theme>('light')

  useEffect(() => {
    document.documentElement.dataset.theme = theme
  }, [theme])

  return (
    <ThemeContext.Provider value={{ theme, setTheme }}>
      {children}
    </ThemeContext.Provider>
  )
}

export function useTheme() {
  const ctx = useContext(ThemeContext)
  if (!ctx) throw new Error('useTheme must be used within ThemeProvider')
  return ctx
}

```

### crates/svc-admin/ui/src/theme/themes.ts
<a id="crates-svc-admin-ui-src-theme-themes-ts"></a>

```ts
export const themes = {
  light: {
    background: '#f8fafc',
    foreground: '#0f172a'
  },
  dark: {
    background: '#020617',
    foreground: '#e2e8f0'
  }
}

```

### crates/svc-admin/ui/src/theme/tokens.ts
<a id="crates-svc-admin-ui-src-theme-tokens-ts"></a>

```ts
export const tokens = {
  radius: {
    sm: 4,
    md: 8,
    lg: 12
  }
}

```

### crates/svc-admin/ui/src/types/admin-api.ts
<a id="crates-svc-admin-ui-src-types-admin-api-ts"></a>

```ts
export type UiConfigDto = {
  default_theme: string
  available_themes: string[]
  default_language: string
  available_languages: string[]
  read_only: boolean
}

export type MeResponse = {
  subject: string
  display_name: string
  roles: string[]
  auth_mode: string
  login_url: string | null
}

export type NodeSummary = {
  id: string
  display_name: string
  profile?: string | null
}

export type PlaneStatus = {
  name: string
  health: string
  ready: boolean
  restart_count: number
}

export type AdminStatusView = {
  id: string
  display_name: string
  profile?: string | null
  version?: string | null
  planes: PlaneStatus[]
}

```

### crates/svc-admin/ui/tsconfig.json
<a id="crates-svc-admin-ui-tsconfig-json"></a>

```json
{
  "compilerOptions": {
    "target": "ESNext",
    "useDefineForClassFields": true,
    "lib": ["DOM", "DOM.Iterable", "ESNext"],
    "allowJs": false,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "module": "ESNext",
    "moduleResolution": "Node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "baseUrl": "./",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "include": ["src"]
}

```

### crates/svc-admin/ui/vite.config.ts
<a id="crates-svc-admin-ui-vite-config-ts"></a>

```ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,
    proxy: {
      '/api': 'http://127.0.0.1:5300',
      '/healthz': 'http://127.0.0.1:5310',
      '/readyz': 'http://127.0.0.1:5310',
      '/metrics': 'http://127.0.0.1:5310'
    }
  }
})

```


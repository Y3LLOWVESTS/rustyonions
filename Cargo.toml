[workspace]
members = [
  "crates/common",
  "crates/accounting",
  "crates/overlay",
  "crates/transport",
  "crates/node",
  "crates/naming",
  "crates/tldctl",
  "crates/index",
  "crates/gateway",
  "crates/ryker",
  "crates/ron-bus",
  "crates/svc-index",
  "crates/svc-overlay",
  "crates/svc-storage",
  "crates/ron-kernel",
  "tools/ronctl",
  "experiments/actor_spike",
  "crates/kameo",
  "crates/ron-app-sdk",
  "crates/svc-omnigate",
  "crates/oap",
  "testing/gwsmoke",
  "crates/ron-kms",
  "crates/ron-proto",
  "crates/ron-auth",
  "crates/ron-audit",
  "crates/ron-billing",
  "workspace-hack",
  "crates/micronode",
  "crates/svc-edge",
  "crates/ron-policy",
]
resolver = "2"

[workspace.dependencies]
# ---- Core pins to keep versions consistent across the workspace --------------
tower-http          = "0.6.6"
prometheus          = "0.14"       # fixes RUSTSEC-2024-0437 via protobuf >= 3.7.2
rand                = "0.9"
rand_chacha         = "0.9"
regex               = "1.11"

# ---- HTTP stack (pin versions here; enable features per-crate as needed) ----
reqwest             = { version = "0.12", default-features = false }
axum                = { version = "0.7.9", default-features = false }
tokio               = "1.47.1"
tokio-rustls        = "0.26.2"
tokio-util          = "0.7"
hyper               = "1"
hyper-util          = "0.1"
tower               = "0.5"

# ---- Observability / utils ---------------------------------------------------
tracing             = "0.1"
tracing-subscriber  = "0.3"
serde               = "1.0"
serde_json          = "1.0"
anyhow              = "1.0"
bytes               = "1"
chrono              = "0.4"
clap                = "4.5"
futures-util        = "0.3"
parking_lot         = "0.12"
thiserror           = "1.0"
toml                = "0.8"

# ---- Crypto helpers used in overlay/service code -----------------------------
sha2                = "0.10"
base64              = "0.22"
hex                 = "0.4"
blake3              = "1.5"
zeroize             = "1"

# ---- TLS roots / PEM helpers -------------------------------------------------
rustls-native-certs = "0.8"
rustls-pemfile      = "2.2"

# ---- Other shared deps that showed as duplicates in cargo-deny ---------------
rmp-serde           = "1.3"
mime_guess          = "2.0"
sled                = "0.34"
zstd                = "0.13"

# ---- Path (internal) crates declared as shared workspace deps ----------------
index          = { path = "crates/index" }
naming         = { path = "crates/naming" }
ron-bus        = { path = "crates/ron-bus" }
ron-kernel     = { path = "crates/ron-kernel" }
transport      = { path = "crates/transport" }
workspace-hack = { version = "0.1", path = "workspace-hack" }

# ---- Windows split crates â€” keep direct usages aligned -----------------------
windows-targets     = "0.53.3"
windows-sys         = "0.60.2"

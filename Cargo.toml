[workspace]
members = [
  "crates/common",
  "crates/accounting",
  "crates/overlay",
  "crates/transport",
  "crates/node",
  "crates/naming",
  "crates/tldctl",
  "crates/index",
  "crates/gateway",
  "crates/ryker",
  "crates/ron-bus",
  "crates/svc-index",
  "crates/svc-overlay",
  "crates/svc-storage",
  "crates/ron-kernel",
  "tools/ronctl",
  "experiments/actor_spike",
  "crates/kameo",
  "crates/ron-app-sdk",
  "crates/svc-omnigate",
  "crates/oap",
  "testing/gwsmoke",
  "workspace-hack",
]
resolver = "2"

[workspace.package]
edition = "2021"
license = "MIT OR Apache-2.0"

[workspace.dependencies]
# ---------- Core pins to keep versions consistent across the workspace ----------
tokio         = "1.47.1"
axum          = { version = "0.7.9", default-features = false }
hyper         = { version = "1.7.0", features = ["http1","http2","server"] }
hyper-util    = { version = "0.1.16", features = ["http1","http2","server","service","tokio"] }
tower         = "0.5.2"
tower-http    = "0.6.6"
reqwest       = { version = "0.12.23", default-features = false }   # enable features per-crate as needed
tokio-rustls  = "0.26.2"
prometheus    = "0.14"     # RUSTSEC fix path (protobuf >= 3.7.2)

# ---------- Rand family unified on 0.9.x ----------
rand          = { version = "0.9.2", features = ["std"] }
rand_chacha   = { version = "0.9.0", features = ["std"] }

# ---------- Frequently used utilities (pin exact versions that showed up) ----------
anyhow        = "1.0.99"
base64        = "0.22.1"
blake3        = "1.8.2"
bytes         = "1.10.1"
chrono        = "0.4.42"
clap          = { version = "4.5.47", features = ["derive","env"] }
futures-util  = { version = "0.3.31", features = ["sink"] }
hex           = { version = "0.4.3", features = ["serde"] }
mime_guess    = "2.0.5"
parking_lot   = "0.12.4"
regex         = "1.11.2"
rmp-serde     = "1.3.0"
rustls-pemfile= "2.2.0"
serde         = { version = "1.0.219", features = ["derive"] }
serde_json    = "1.0.143"
tracing       = "0.1"
tracing-subscriber = "0.3"

# ---------- Crypto helpers used in overlay/service code ----------
sha2          = "0.10"

# ---------- Internal crates so members can use `{ workspace = true }` ----------
index         = { path = "crates/index" }
naming        = { path = "crates/naming" }
ron-bus       = { path = "crates/ron-bus" }
ron-kernel    = { path = "crates/ron-kernel" }
oap           = { path = "crates/oap" }

# ---------- Windows split crates â€” align to reduce duplicate-version noise ----------
windows-targets = "0.53.3"
windows-sys     = "0.60.2"
